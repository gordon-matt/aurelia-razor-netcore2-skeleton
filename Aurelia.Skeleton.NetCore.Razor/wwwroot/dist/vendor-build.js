"bundle";System.registerDynamic("github:rstacruz/nprogress@0.2.0/nprogress.css!github:systemjs/plugin-css@0.1.37.js",[],!1,function(a,b,c){return System.registry.get("@@global-helpers").prepareGlobal(c.id,null,null)()}),System.registerDynamic("github:rstacruz/nprogress@0.2.0/nprogress.js",["./nprogress.css!"],!1,function(a,b,c){var d=System.registry.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){"format global";"deps ./nprogress.css!";!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.NProgress=b()}(this,function(){function a(a,b,c){return a<b?b:a>c?c:a}function b(a){return 100*(-1+a)}function c(a,c,d){var e;return e="translate3d"===j.positionUsing?{transform:"translate3d("+b(a)+"%,0,0)"}:"translate"===j.positionUsing?{transform:"translate("+b(a)+"%,0)"}:{"margin-left":b(a)+"%"},e.transition="all "+c+"ms "+d,e}function d(a,b){return("string"==typeof a?a:g(a)).indexOf(" "+b+" ")>=0}function e(a,b){var c=g(a),e=c+b;d(c,b)||(a.className=e.substring(1))}function f(a,b){var c,e=g(a);d(a,b)&&(c=e.replace(" "+b+" "," "),a.className=c.substring(1,c.length-1))}function g(a){return(" "+(a.className||"")+" ").replace(/\s+/gi," ")}function h(a){a&&a.parentNode&&a.parentNode.removeChild(a)}var i={};i.version="0.2.0";var j=i.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};i.configure=function(a){var b,c;for(b in a)void 0!==(c=a[b])&&a.hasOwnProperty(b)&&(j[b]=c);return this},i.status=null,i.set=function(b){var d=i.isStarted();b=a(b,j.minimum,1),i.status=1===b?null:b;var e=i.render(!d),f=e.querySelector(j.barSelector),g=j.speed,h=j.easing;return e.offsetWidth,k(function(a){""===j.positionUsing&&(j.positionUsing=i.getPositioningCSS()),l(f,c(b,g,h)),1===b?(l(e,{transition:"none",opacity:1}),e.offsetWidth,setTimeout(function(){l(e,{transition:"all "+g+"ms linear",opacity:0}),setTimeout(function(){i.remove(),a()},g)},g)):setTimeout(a,g)}),this},i.isStarted=function(){return"number"==typeof i.status},i.start=function(){i.status||i.set(0);var a=function(){setTimeout(function(){i.status&&(i.trickle(),a())},j.trickleSpeed)};return j.trickle&&a(),this},i.done=function(a){return a||i.status?i.inc(.3+.5*Math.random()).set(1):this},i.inc=function(b){var c=i.status;return c?("number"!=typeof b&&(b=(1-c)*a(Math.random()*c,.1,.95)),c=a(c+b,0,.994),i.set(c)):i.start()},i.trickle=function(){return i.inc(Math.random()*j.trickleRate)},function(){var a=0,b=0;i.promise=function(c){return c&&"resolved"!==c.state()?(0===b&&i.start(),a++,b++,c.always(function(){b--,0===b?(a=0,i.done()):i.set((a-b)/a)}),this):this}}(),i.render=function(a){if(i.isRendered())return document.getElementById("nprogress");e(document.documentElement,"nprogress-busy");var c=document.createElement("div");c.id="nprogress",c.innerHTML=j.template;var d,f=c.querySelector(j.barSelector),g=a?"-100":b(i.status||0),k=document.querySelector(j.parent);return l(f,{transition:"all 0 linear",transform:"translate3d("+g+"%,0,0)"}),j.showSpinner||(d=c.querySelector(j.spinnerSelector))&&h(d),k!=document.body&&e(k,"nprogress-custom-parent"),k.appendChild(c),c},i.remove=function(){f(document.documentElement,"nprogress-busy"),f(document.querySelector(j.parent),"nprogress-custom-parent");var a=document.getElementById("nprogress");a&&h(a)},i.isRendered=function(){return!!document.getElementById("nprogress")},i.getPositioningCSS=function(){var a=document.body.style,b="WebkitTransform"in a?"Webkit":"MozTransform"in a?"Moz":"msTransform"in a?"ms":"OTransform"in a?"O":"";return b+"Perspective"in a?"translate3d":b+"Transform"in a?"translate":"margin"};var k=function(){function a(){var c=b.shift();c&&c(a)}var b=[];return function(c){b.push(c),1==b.length&&a()}}(),l=function(){function a(a){return a.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()})}function b(a){var b=document.body.style;if(a in b)return a;for(var c,d=e.length,f=a.charAt(0).toUpperCase()+a.slice(1);d--;)if((c=e[d]+f)in b)return c;return a}function c(c){return c=a(c),f[c]||(f[c]=b(c))}function d(a,b,d){b=c(b),a.style[b]=d}var e=["Webkit","O","Moz","ms"],f={};return function(a,b){var c,e,f=arguments;if(2==f.length)for(c in b)void 0!==(e=b[c])&&b.hasOwnProperty(c)&&d(a,c,e);else d(a,f[1],f[2])}}();return i})}(),d()}),System.registerDynamic("github:rstacruz/nprogress@0.2.0.js",["github:rstacruz/nprogress@0.2.0/nprogress.js"],!0,function(a,b,c){this||self;c.exports=a("github:rstacruz/nprogress@0.2.0/nprogress.js")}),System.registerDynamic("npm:aurelia-polyfills@1.3.0/aurelia-polyfills.js",["aurelia-pal"],!1,function(a,b,c){return function(a){"use strict";var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};"undefined"==typeof FEATURE_NO_ES2015&&(function(c,d){if(!(d in c)){var e,f=a.PLATFORM.global,g=0,h=""+Math.random(),i="__symbol:",j=i.length,k="__symbol@@"+h,l="defineProperty",m="defineProperties",n="getOwnPropertyNames",o="getOwnPropertyDescriptor",p="propertyIsEnumerable",q=c[n],r=c[o],s=c.create,t=c.keys,u=c[l],v=c[m],w=r(c,n),x=c.prototype,y=x.hasOwnProperty,z=x[p],A=x.toString,B=(Array.prototype.indexOf,function(a,b,c){y.call(a,k)||u(a,k,{enumerable:!1,configurable:!1,writable:!1,value:{}}),a[k]["@@"+b]=c}),C=function(a,c){var d=s(a);return null!==c&&"object"===(void 0===c?"undefined":b(c))&&q(c).forEach(function(a){H.call(c,a)&&N(d,a,c[a])}),d},D=function(a){var b=s(a);return b.enumerable=!1,b},E=function(){},F=function(a){return a!=k&&!y.call(K,a)},G=function(a){return a!=k&&y.call(K,a)},H=function(a){var b=""+a;return G(b)?y.call(this,b)&&this[k]&&this[k]["@@"+b]:z.call(this,a)},I=function(a){return u(x,a,{enumerable:!1,configurable:!0,get:E,set:function(b){e(this,a,{enumerable:!1,configurable:!0,writable:!0,value:b}),B(this,a,!0)}}),K[a]=u(c(a),"constructor",L)},J=function(a){if(this&&this!==f)throw new TypeError("Symbol is not a constructor");return I(i.concat(a||"",h,++g))},K=s(null),L={value:J},M=function(a){return K[a]},N=function(a,b,c){var d=""+b;return G(d)?(e(a,d,c.enumerable?D(c):c),B(a,d,!!c.enumerable)):u(a,b,c),a},O=function(a){return a="[object String]"===A.call(a)?a.split(""):c(a),q(a).filter(G).map(M)};w.value=N,u(c,l,w),w.value=O,u(c,d,w);var P="object"===("undefined"==typeof window?"undefined":b(window))?c.getOwnPropertyNames(window):[],Q=c.getOwnPropertyNames;w.value=function(a){if("[object Window]"===A.call(a))try{return Q(a)}catch(a){return[].concat([],P)}return q(a).filter(F)},u(c,n,w),w.value=function(a,b){var c=O(b);return c.length?t(b).concat(c).forEach(function(c){H.call(b,c)&&N(a,c,b[c])}):v(a,b),a},u(c,m,w),w.value=H,u(x,p,w),w.value=J,u(f,"Symbol",w),w.value=function(a){var b=i.concat(i,a,h);return b in x?K[b]:I(b)},u(J,"for",w),w.value=function(a){return y.call(K,a)?a.slice(2*j,-h.length):void 0},u(J,"keyFor",w),w.value=function(a,b){var c=r(a,b);return c&&G(b)&&(c.enumerable=H.call(a,b)),c},u(c,o,w),w.value=function(a,b){return 1===arguments.length?s(a):C(a,b)},u(c,"create",w),w.value=function(){var a=A.call(this);return"[object String]"===a&&G(this)?"[object Symbol]":a},u(x,"toString",w);try{e=s(u({},i,{get:function(){return u(this,i,{value:!1})[i]}}))[i]||u}catch(a){e=function(a,b,c){var d=r(x,b);delete x[b],u(a,b,c),u(x,b,d)}}}}(Object,"getOwnPropertySymbols"),function(a,b){var c,d=a.defineProperty,e=a.prototype,f=e.toString,g="toStringTag";["iterator","match","replace","search","split","hasInstance","isConcatSpreadable","unscopables","species","toPrimitive",g].forEach(function(b){if(!(b in Symbol))switch(d(Symbol,b,{value:Symbol(b)}),b){case g:c=a.getOwnPropertyDescriptor(e,"toString"),c.value=function(){var a=f.call(this),b=void 0===this||null===this?void 0:this[Symbol.toStringTag];return void 0===b?a:"[object "+b+"]"},d(e,"toString",c)}})}(Object,Symbol),function(a,b,c){function d(){return this}b[a]||(b[a]=function(){var b=0,c=this,e={next:function(){var a=c.length<=b;return a?{done:a}:{done:a,value:c[b++]}}};return e[a]=d,e}),c[a]||(c[a]=function(){var b=String.fromCodePoint,c=this,e=0,f=c.length,g={next:function(){var a=f<=e,d=a?"":b(c.codePointAt(e));return e+=d.length,a?{done:a}:{done:a,value:d}}};return g[a]=d,g})}(Symbol.iterator,Array.prototype,String.prototype)),"undefined"==typeof FEATURE_NO_ES2015&&(Number.isNaN=Number.isNaN||function(a){return a!==a},Number.isFinite=Number.isFinite||function(a){return"number"==typeof a&&isFinite(a)}),String.prototype.endsWith&&!function(){try{return!"ab".endsWith("a",1)}catch(a){return!0}}()||(String.prototype.endsWith=function(a,b){var c=this.toString();("number"!=typeof b||!isFinite(b)||Math.floor(b)!==b||b>c.length)&&(b=c.length),b-=a.length;var d=c.indexOf(a,b);return-1!==d&&d===b}),String.prototype.startsWith&&!function(){try{return!"ab".startsWith("b",1)}catch(a){return!0}}()||(String.prototype.startsWith=function(a,b){return b=b||0,this.substr(b,a.length)===a}),"undefined"==typeof FEATURE_NO_ES2015&&(Array.from||(Array.from=function(){var a=function(a){return isNaN(a=+a)?0:(a>0?Math.floor:Math.ceil)(a)},b=function(b){return b>0?Math.min(a(b),9007199254740991):0},c=function(a,b,c,d){try{return b(c,d)}catch(b){throw"function"==typeof a.return&&a.return(),b}};return function(a){var d,e,f,g,h=Object(a),i="function"==typeof this?this:Array,j=arguments.length,k=j>1?arguments[1]:void 0,l=void 0!==k,m=0,n=h[Symbol.iterator];if(l&&(k=k.bind(j>2?arguments[2]:void 0)),void 0==n||Array.isArray(a))for(d=b(h.length),e=new i(d);d>m;m++)e[m]=l?k(h[m],m):h[m];else for(g=n.call(h),e=new i;!(f=g.next()).done;m++)e[m]=l?c(g,k,f.value,m):f.value;return e.length=m,e}}()),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,enumerable:!1,value:function(a){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;f<d;f++)if(b=c[f],a.call(e,b,f,c))return b}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{configurable:!0,writable:!0,enumerable:!1,value:function(a){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;f<d;f++)if(b=c[f],a.call(e,b,f,c))return f;return-1}})),"undefined"!=typeof FEATURE_NO_ES2016||Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,enumerable:!1,value:function(a){var b=Object(this),c=parseInt(b.length)||0;if(0===c)return!1;var d,e=parseInt(arguments[1])||0;e>=0?d=e:(d=c+e)<0&&(d=0);for(var f;d<c;){if(f=b[d],a===f||a!==a&&f!==f)return!0;d++}return!1}}),"undefined"==typeof FEATURE_NO_ES2015&&(!function(){var a=!1;try{var b=Object.keys("a");a=1!==b.length||"0"!==b[0]}catch(b){a=!0}a&&(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if(void 0===e||null===e)throw TypeError("Cannot convert undefined or null to object");e=Object(e);var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;g<d;g++)a.call(e,c[g])&&h.push(c[g]);return h}}())}(),function(a){"assign"in a||a.defineProperty(a,"assign",{configurable:!0,writable:!0,value:function(){var b=a.getOwnPropertySymbols,c=a.propertyIsEnumerable,d=b?function(a){return b(a).filter(c,a)}:function(){return Array.prototype};return function(c){function e(a){c[a]=h[a]}!b||c instanceof a||console.warn("problematic Symbols",c);for(var f=1,g=arguments.length;f<g;++f){var h=arguments[f];null!==h&&void 0!==h&&a.keys(h).concat(d(h)).forEach(e)}return c}}()})}(Object),Object.is||(Object.is=function(a,b){return a===b?0!==a||1/a==1/b:a!==a&&b!==b})),"undefined"==typeof FEATURE_NO_ES2015&&function(a){function b(a,b){function d(a){if(!this||this.constructor!==d)return new d(a);this._keys=[],this._values=[],this._itp=[],this.objectOnly=b,a&&c.call(this,a)}return b||t(a,"size",{get:q}),a.constructor=d,d.prototype=a,d}function c(a){this.add?a.forEach(this.add,this):a.forEach(function(a){this.set(a[0],a[1])},this)}function d(a){return this.has(a)&&(this._keys.splice(s,1),this._values.splice(s,1),this._itp.forEach(function(a){s<a[0]&&a[0]--})),-1<s}function e(a){return this.has(a)?this._values[s]:void 0}function f(a,b){if(this.objectOnly&&b!==Object(b))throw new TypeError("Invalid value used as weak collection key");if(b!=b||0===b)for(s=a.length;s--&&!u(a[s],b););else s=a.indexOf(b);return-1<s}function g(a){return f.call(this,this._values,a)}function h(a){return f.call(this,this._keys,a)}function i(a,b){return this.has(a)?this._values[s]=b:this._values[this._keys.push(a)-1]=b,this}function j(a){return this.has(a)||this._values.push(a),this}function k(){(this._keys||0).length=this._values.length=0}function l(){return p(this._itp,this._keys)}function m(){return p(this._itp,this._values)}function n(){return p(this._itp,this._keys,this._values)}function o(){return p(this._itp,this._values,this._values)}function p(a,b,c){var d,e=[0],f=!1;return a.push(e),d={},d[Symbol.iterator]=function(){return this},d.next=function(){var d,g=e[0];return!f&&g<b.length?(d=c?[b[g],c[g]]:b[g],e[0]++):(f=!0,a.splice(a.indexOf(e),1)),{done:f,value:d}},d}function q(){return this._values.length}function r(a,b){for(var c=this.entries();;){var d=c.next();if(d.done)break;a.call(b,d.value[1],d.value[0],this)}}var s,t=Object.defineProperty,u=function(a,b){return a===b||a!==a&&b!==b};if("undefined"==typeof WeakMap&&(a.WeakMap=b({delete:d,clear:k,get:e,has:h,set:i},!0)),"undefined"==typeof Map||"function"!=typeof(new Map).values||!(new Map).values().next){var v;a.Map=b((v={delete:d,has:h,get:e,set:i,keys:l,values:m,entries:n,forEach:r,clear:k},v[Symbol.iterator]=n,v))}if("undefined"==typeof Set||"function"!=typeof(new Set).values||!(new Set).values().next){var w;a.Set=b((w={has:g,add:j,delete:d,clear:k,keys:m,values:m,entries:o,forEach:r},w[Symbol.iterator]=m,w))}"undefined"==typeof WeakSet&&(a.WeakSet=b({delete:d,add:j,clear:k,has:g},!0))}(a.PLATFORM.global),"undefined"==typeof FEATURE_NO_ES2015&&function(){var c=Function.prototype.bind;void 0===a.PLATFORM.global.Reflect&&(a.PLATFORM.global.Reflect={}),"function"!=typeof Reflect.defineProperty&&(Reflect.defineProperty=function(a,c,d){if("object"===(void 0===a?"undefined":b(a))?null===a:"function"!=typeof a)throw new TypeError("Reflect.defineProperty called on non-object");try{return Object.defineProperty(a,c,d),!0}catch(a){return!1}}),"function"!=typeof Reflect.construct&&(Reflect.construct=function(a,b){if(b)switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3])}var d=[null];return d.push.apply(d,b),new(c.apply(a,d))}),"function"!=typeof Reflect.ownKeys&&(Reflect.ownKeys=function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))})}(),"undefined"==typeof FEATURE_NO_ESNEXT&&function(){var a=Object.freeze({}),b="__metadata__";"function"!=typeof Reflect.getOwnMetadata&&(Reflect.getOwnMetadata=function(c,d,e){if(d.hasOwnProperty(b))return(d[b][e]||a)[c]}),"function"!=typeof Reflect.defineMetadata&&(Reflect.defineMetadata=function(a,c,d,e){var f=d.hasOwnProperty(b)?d[b]:d[b]={};(f[e]||(f[e]={}))[a]=c}),"function"!=typeof Reflect.metadata&&(Reflect.metadata=function(a,b){return function(c,d){Reflect.defineMetadata(a,b,c,d)}})}()}.call(this,a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-polyfills@1.3.0.js",["npm:aurelia-polyfills@1.3.0/aurelia-polyfills"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-polyfills@1.3.0/aurelia-polyfills"))}),System.registerDynamic("npm:aurelia-bootstrapper@2.2.0/aurelia-bootstrapper.js",["aurelia-pal","aurelia-polyfills"],!1,function(a,b,c){return c.uri=c.id,function(a,b,c){"use strict";function d(){return n.document&&"complete"!==n.document.readyState?new Promise(function(a){function b(){n.document.removeEventListener("DOMContentLoaded",b),n.removeEventListener("load",b),a()}n.document.addEventListener("DOMContentLoaded",b),n.addEventListener("load",b)}):Promise.resolve()}function e(){if(c.PLATFORM.Loader)return Promise.resolve(new c.PLATFORM.Loader);if("undefined"==typeof AURELIA_WEBPACK_2_0){if("undefined"!=typeof __webpack_require__){var b=__webpack_require__(require.resolve("aurelia-loader-webpack"));return Promise.resolve(new b.WebpackLoader)}if(n.System&&"function"==typeof n.System.config)return n.System.normalize("aurelia-bootstrapper").then(function(a){return n.System.normalize("aurelia-loader-default",a)}).then(function(a){return n.System.import(a).then(function(a){return new a.DefaultLoader})});if("function"==typeof n.require&&"string"==typeof n.require.version)return new Promise(function(a,b){return n.require(["aurelia-loader-default"],function(b){return a(new b.DefaultLoader)},b)});if(o&&void 0!==a&&void 0!==a.require){var d=a.require("aurelia-loader-nodejs");return Promise.resolve(new d.NodeJsLoader)}}return Promise.reject("No PLATFORM.Loader is defined and there is neither a System API (ES6) or a Require API (AMD) globally available to load your app.")}function f(a){var b=void 0,d=o&&("renderer"===process.type||process.versions["node-webkit"]);if(o&&!d)b="nodejs";else if("undefined"!=typeof window)b="browser";else{if("undefined"==typeof self)throw new Error("Could not determine platform implementation to load.");b="worker"}return a.loadModule("aurelia-pal-"+b).then(function(a){return"nodejs"===b&&!c.isInitialized&&a.globalize()||a.initialize()})}function g(a){var b=function(b,c){return a.normalize(b,c).then(function(c){return a.map(b,c),c})};return f(a).then(function(){return a.normalize("aurelia-bootstrapper")}).then(function(a){var d=b(c.PLATFORM.moduleName("aurelia-framework",{exports:["Aurelia"]}),a);return Promise.all([d,d.then(function(a){return b("aurelia-dependency-injection",a)}),b("aurelia-router",a),b("aurelia-logging-console",a)])}).then(function(b){var c=b[0];return a.loadModule(c)}).then(function(b){return l(function(){return new b.Aurelia(a)})})}function h(a,b,c){return c.host=a,c.configModuleId=b||null,b?c.loader.loadModule(b).then(function(a){if(!a.configure)throw new Error("Cannot initialize module '"+b+"' without a configure function.");return a.configure(c)}):(c.use.standardConfiguration().developmentLogging(),c.start().then(function(){return c.setRoot()}))}function i(){return d().then(e).then(g).then(function(){for(var a=n.document.querySelectorAll("[aurelia-app],[data-aurelia-app]"),b=0,c=a.length;b<c;++b){var d=a[b],e=d.getAttribute("aurelia-app")||d.getAttribute("data-aurelia-app");j(h.bind(null,d,e))}var f=console.error.bind(console),g=k.map(function(a){return a.catch(f)});return k=null,Promise.all(g)})}function j(a){var b=m.then(function(b){return a(b())});return k&&k.push(b),b}Object.defineProperty(b,"__esModule",{value:!0}),b.starting=void 0,b.bootstrap=j;var k=[],l=void 0,m=new Promise(function(a){return l=a}),n=c.PLATFORM.global,o="undefined"!=typeof process&&!process.browser;b.starting=i()}.call(b,c,b,a("aurelia-pal"),a("aurelia-polyfills"))}),System.registerDynamic("npm:aurelia-bootstrapper@2.2.0.js",["npm:aurelia-bootstrapper@2.2.0/aurelia-bootstrapper"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-bootstrapper@2.2.0/aurelia-bootstrapper"))}),System.registerDynamic("npm:aurelia-http-client@1.2.1/aurelia-http-client.js",["aurelia-path","aurelia-pal"],!1,function(a,b,c){return function(a,b,c){"use strict";function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b,c,d,e){var f=void 0,g=void 0;for(f=0,g=a.length;f<g;++f)a[f](b,c,d,e)}function g(a,b,c,d){void 0!==c.timeout&&(d.timeout=c.timeout)}function h(a,b,c,d){void 0!==c.callbackParameterName&&(d.callbackParameterName=c.callbackParameterName)}function i(a,b,c,d){void 0!==c.withCredentials&&(d.withCredentials=c.withCredentials)}function j(a,b,c,d){c.progressCallback&&(d.upload.onprogress=c.progressCallback)}function k(a,b,c,d){c.downloadProgressCallback&&(d.onprogress=c.downloadProgressCallback)}function l(a,b,c,d){var e=c.responseType;"json"===e&&(e="text"),d.responseType=e}function m(a,b,c,d){c.headers.configureXHR(d)}function n(a,b,d,e){d.skipContentProcessing||c.PLATFORM.global.FormData&&d.content instanceof FormData||c.PLATFORM.global.Blob&&d.content instanceof Blob||c.PLATFORM.global.ArrayBuffer&&d.content instanceof ArrayBuffer||d.content instanceof Document||"string"!=typeof d.content&&null!==d.content&&void 0!==d.content&&(d.content=JSON.stringify(d.content,d.replacer),d.headers.has("Content-Type")||d.headers.add("Content-Type","application/json"))}function o(){return new x(z,[g,h])}function p(){return new x(c.PLATFORM.XMLHttpRequest,[g,i,j,k,l,n,m])}function q(a,b){a.pendingRequests.push(b),a.isRequesting=!0}function r(a,b){var d=a.pendingRequests.indexOf(b);if(a.pendingRequests.splice(d,1),a.isRequesting=a.pendingRequests.length>0,!a.isRequesting){var e=c.DOM.createCustomEvent("aurelia-http-client-requests-drained",{bubbles:!0,cancelable:!0});setTimeout(function(){return c.DOM.dispatchEvent(e)},1)}}Object.defineProperty(a,"__esModule",{value:!0}),a.HttpClient=a.RequestBuilder=a.HttpRequestMessage=a.JSONPRequestMessage=a.RequestMessageProcessor=a.mimeTypes=a.HttpResponseMessage=a.RequestMessage=a.Headers=void 0,a.timeoutTransformer=g,a.callbackParameterNameTransformer=h,a.credentialsTransformer=i,a.progressTransformer=j,a.downloadProgressTransformer=k,a.responseTypeTransformer=l,a.headerTransformer=m,a.contentTransformer=n,a.createJSONPRequestMessageProcessor=o,a.createHttpRequestMessageProcessor=p;var s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=a.Headers=function(){function a(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.headers={};for(var b in a)this.headers[b.toLowerCase()]={key:b,value:a[b]}}return a.prototype.add=function(a,b){this.headers[a.toLowerCase()]={key:a,value:b}},a.prototype.get=function(a){var b=this.headers[a.toLowerCase()];return b?b.value:void 0},a.prototype.clear=function(){this.headers={}},a.prototype.has=function(a){return this.headers.hasOwnProperty(a.toLowerCase())},a.prototype.configureXHR=function(a){for(var b in this.headers)this.headers.hasOwnProperty(b)&&a.setRequestHeader(this.headers[b].key,this.headers[b].value)},a.parse=function(b){var c=new a;if(!b)return c;for(var d=b.split("\r\n"),e=0;e<d.length;e++){var f=d[e],g=f.indexOf(": ");if(g>0){var h=f.substring(0,g),i=f.substring(g+2);c.add(h,i)}}return c},a}(),u=a.RequestMessage=function(){function a(a,b,c,d){this.method=a,this.url=b,this.content=c,this.headers=d||new t,this.baseUrl=""}return a.prototype.buildFullUrl=function(){var a=/^([a-z][a-z0-9+\-.]*:)?\/\//i,c=a.test(this.url)?this.url:(0,b.join)(this.baseUrl,this.url);if(this.params){var d=(0,b.buildQueryString)(this.params,this.traditional);c=d?c+(this.url.indexOf("?")<0?"?":"&")+d:c}return c},a}(),v=a.HttpResponseMessage=function(){function a(a,b,c,d){if(this.requestMessage=a,this.statusCode=b.status,this.response=b.response||b.responseText,this.isSuccess=b.status>=200&&b.status<400,this.statusText=b.statusText,this.reviver=d,this.mimeType=null,b.getAllResponseHeaders)try{this.headers=t.parse(b.getAllResponseHeaders())}catch(a){b.requestHeaders&&(this.headers=new t(b.requestHeaders))}else this.headers=new t;var e=void 0;this.headers&&this.headers.headers&&(e=this.headers.get("Content-Type")),e&&(this.mimeType=c=e.split(";")[0].trim(),w.hasOwnProperty(this.mimeType)&&(c=w[this.mimeType])),this.responseType=c}return s(a,[{key:"content",get:function(){try{return void 0!==this._content?this._content:void 0===this.response||null===this.response||""===this.response?(this._content=this.response,this._content):"json"===this.responseType?(this._content=JSON.parse(this.response,this.reviver),this._content):this.reviver?(this._content=this.reviver(this.response),this._content):(this._content=this.response,this._content)}catch(a){if(this.isSuccess)throw a;return this._content=null,this._content}}}]),a}(),w=a.mimeTypes={"text/html":"html","text/javascript":"js","application/javascript":"js","text/json":"json","application/json":"json","application/rss+xml":"rss","application/atom+xml":"atom","application/xhtml+xml":"xhtml","text/markdown":"md","text/xml":"xml","text/mathml":"mml","application/xml":"xml","text/yml":"yml","text/csv":"csv","text/css":"css","text/less":"less","text/stylus":"styl","text/scss":"scss","text/sass":"sass","text/plain":"txt"},x=a.RequestMessageProcessor=function(){function a(a,b){this.XHRType=a,this.xhrTransformers=b,this.isAborted=!1}return a.prototype.abort=function(){this.xhr&&this.xhr.readyState!==c.PLATFORM.XMLHttpRequest.UNSENT&&this.xhr.abort(),this.isAborted=!0},a.prototype.process=function(a,b){var c=this,d=new Promise(function(a,d){var e=c.xhr=new c.XHRType;e.onload=function(c){var f=new v(b,e,b.responseType,b.reviver);f.isSuccess?a(f):d(f)},e.ontimeout=function(a){d(new v(b,{response:a,status:e.status,statusText:e.statusText},"timeout"))},e.onerror=function(a){d(new v(b,{response:a,status:e.status,statusText:e.statusText},"error"))},e.onabort=function(a){d(new v(b,{response:a,status:e.status,statusText:e.statusText},"abort"))}});return Promise.resolve(b).then(function(b){var e=function(){return c.isAborted?c.xhr.abort():(c.xhr.open(b.method,b.buildFullUrl(),!0,b.user,b.password),f(c.xhrTransformers,a,c,b,c.xhr),void 0===b.content?c.xhr.send():c.xhr.send(b.content)),d},g=[[e,void 0]];(b.interceptors||[]).forEach(function(a){(a.request||a.requestError)&&g.unshift([a.request?a.request.bind(a):void 0,a.requestError?a.requestError.bind(a):void 0]),(a.response||a.responseError)&&g.push([a.response?a.response.bind(a):void 0,a.responseError?a.responseError.bind(a):void 0])});for(var h=Promise.resolve(b);g.length;){var i;h=(i=h).then.apply(i,g.shift())}return h})},a}(),y=a.JSONPRequestMessage=function(a){function b(b,c){var e=d(this,a.call(this,"JSONP",b));return e.responseType="jsonp",e.callbackParameterName=c,e}return e(b,a),b}(u),z=function(){function a(){}return a.prototype.open=function(a,b){this.method=a,this.url=b,this.callbackName="jsonp_callback_"+Math.round(1e5*Math.random())},a.prototype.send=function(){var a=this,b=this.url+(this.url.indexOf("?")>=0?"&":"?")+encodeURIComponent(this.callbackParameterName)+"="+this.callbackName,d=c.DOM.createElement("script");d.src=b,d.onerror=function(b){e(),a.status=0,a.onerror(new Error("error"))};var e=function(){delete c.PLATFORM.global[a.callbackName],c.DOM.removeNode(d)};c.PLATFORM.global[this.callbackName]=function(b){e(),void 0===a.status&&(a.status=200,a.statusText="OK",a.response=b,a.onload(a))},c.DOM.appendNode(d),void 0!==this.timeout&&setTimeout(function(){void 0===a.status&&(a.status=0,a.ontimeout(new Error("timeout")))},this.timeout)},a.prototype.abort=function(){void 0===this.status&&(this.status=0,this.onabort(new Error("abort")))},a.prototype.setRequestHeader=function(){},a}(),A=a.HttpRequestMessage=function(a){function b(b,c,e,f){var g=d(this,a.call(this,b,c,e,f));return g.responseType="json",g}return e(b,a),b}(u),B=a.RequestBuilder=function(){function a(a){this.client=a,this.transformers=a.requestTransformers.slice(0),this.useJsonp=!1}return a.prototype.asDelete=function(){return this._addTransformer(function(a,b,c){c.method="DELETE"})},a.prototype.asGet=function(){return this._addTransformer(function(a,b,c){c.method="GET"})},a.prototype.asHead=function(){return this._addTransformer(function(a,b,c){c.method="HEAD"})},a.prototype.asOptions=function(){return this._addTransformer(function(a,b,c){c.method="OPTIONS"})},a.prototype.asPatch=function(){return this._addTransformer(function(a,b,c){c.method="PATCH"})},a.prototype.asPost=function(){return this._addTransformer(function(a,b,c){c.method="POST"})},a.prototype.asPut=function(){return this._addTransformer(function(a,b,c){c.method="PUT"})},a.prototype.asJsonp=function(a){return this.useJsonp=!0,this._addTransformer(function(b,c,d){d.callbackParameterName=a})},a.prototype.withUrl=function(a){return this._addTransformer(function(b,c,d){d.url=a})},a.prototype.withContent=function(a){return this._addTransformer(function(b,c,d){d.content=a})},a.prototype.withBaseUrl=function(a){return this._addTransformer(function(b,c,d){d.baseUrl=a})},a.prototype.withParams=function(a,b){return this._addTransformer(function(c,d,e){e.traditional=b,e.params=a})},a.prototype.withResponseType=function(a){return this._addTransformer(function(b,c,d){d.responseType=a})},a.prototype.withTimeout=function(a){return this._addTransformer(function(b,c,d){d.timeout=a})},a.prototype.withHeader=function(a,b){return this._addTransformer(function(c,d,e){e.headers.add(a,b)})},a.prototype.withCredentials=function(a){return this._addTransformer(function(b,c,d){d.withCredentials=a})},a.prototype.withLogin=function(a,b){return this._addTransformer(function(c,d,e){e.user=a,e.password=b})},a.prototype.withReviver=function(a){return this._addTransformer(function(b,c,d){d.reviver=a})},a.prototype.withReplacer=function(a){return this._addTransformer(function(b,c,d){d.replacer=a})},a.prototype.withProgressCallback=function(a){return this._addTransformer(function(b,c,d){d.progressCallback=a})},a.prototype.withDownloadProgressCallback=function(a){return this._addTransformer(function(b,c,d){d.downloadProgressCallback=a})},a.prototype.withCallbackParameterName=function(a){return this._addTransformer(function(b,c,d){d.callbackParameterName=a})},a.prototype.withInterceptor=function(a){return this._addTransformer(function(b,c,d){d.interceptors=d.interceptors||[],d.interceptors.unshift(a)})},a.prototype.skipContentProcessing=function(){return this._addTransformer(function(a,b,c){c.skipContentProcessing=!0})},a.prototype._addTransformer=function(a){return this.transformers.push(a),this},a.addHelper=function(b,c){a.prototype[b]=function(){return this._addTransformer(c.apply(this,arguments))}},a.prototype.send=function(){var a=this.useJsonp?new y:new A;return this.client.send(a,this.transformers)},a}();a.HttpClient=function(){function a(){this.isRequesting=!1,this.requestTransformers=[],this.requestProcessorFactories=new Map,this.requestProcessorFactories.set(A,p),this.requestProcessorFactories.set(y,o),this.pendingRequests=[]}return a.prototype.configure=function(a){var b=new B(this);return a(b),this.requestTransformers=b.transformers,this},a.prototype.createRequest=function(a){var b=new B(this);return a&&b.withUrl(a),b},a.prototype.send=function(a,b){var c=this,d=this.requestProcessorFactories.get(a.constructor),e=void 0,f=void 0,g=void 0,h=void 0;if(!d)throw new Error("No request message processor factory for "+a.constructor+".");return e=d(),q(this,e),b=b||this.requestTransformers,f=Promise.resolve(a).then(function(a){for(g=0,h=b.length;g<h;++g)b[g](c,e,a);return e.process(c,a).then(function(a){return r(c,e),a}).catch(function(a){throw r(c,e),a})}),f.abort=f.cancel=function(){e.abort()},f},a.prototype.delete=function(a){return this.createRequest(a).asDelete().send()},a.prototype.get=function(a,b,c){var d=this.createRequest(a).asGet();return b?d.withParams(b,c).send():d.send()},a.prototype.head=function(a){return this.createRequest(a).asHead().send()},a.prototype.jsonp=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jsoncallback";return this.createRequest(a).asJsonp(b).send()},a.prototype.options=function(a){return this.createRequest(a).asOptions().send()},a.prototype.put=function(a,b){return this.createRequest(a).asPut().withContent(b).send()},a.prototype.patch=function(a,b){return this.createRequest(a).asPatch().withContent(b).send()},a.prototype.post=function(a,b){return this.createRequest(a).asPost().withContent(b).send()},a}()}.call(b,b,a("aurelia-path"),a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-http-client@1.2.1.js",["npm:aurelia-http-client@1.2.1/aurelia-http-client"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-http-client@1.2.1/aurelia-http-client"))}),System.registerDynamic("npm:aurelia-kendoui-bridge@1.7.0/version.js",[],!1,function(a,b,c){return function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.version="1.7.0"}.call(b,b,a)}),System.registerDynamic("npm:aurelia-kendoui-bridge@1.7.0/common/bindables.js",[],!1,function(a,b,c){return function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.bindables={kendoAlert:["actions","animation","buttonLayout","closable","content","height","maxHeight","maxWidth","messages","minHeight","minWidth","modal","name","title","visible","width"],kendoAutoComplete:["animation","autoWidth","clearButton","dataSource","dataTextField","delay","enable","enforceMinLength","filter","fixedGroupTemplate","footerTemplate","groupTemplate","headerTemplate","height","highlightFirst","ignoreCase","minLength","name","noDataTemplate","placeholder","popup","separator","suggest","template","value","valuePrimitive","virtual"],kendoBarcode:["background","border","checksum","color","height","name","padding","renderAs","text","type","value","width"],kendoButton:["enable","icon","imageUrl","name","spriteCssClass"],kendoCalendar:["culture","dates","depth","disableDates","footer","format","max","messages","min","month","name","start","value","weekNumber"],kendoChart:["autoBind","axisDefaults","categoryAxis","chartArea","dataSource","legend","name","panes","pannable","pdf","plotArea","renderAs","series","seriesColors","seriesDefaults","theme","title","tooltip","transitions","valueAxis","xAxis","yAxis","zoomable"],kendoColorPalette:["columns","name","palette","tileSize","value"],kendoColorPicker:["buttons","clearButton","columns","messages","name","opacity","palette","preview","tileSize","toolIcon","value"],kendoComboBox:["animation","autoBind","autoWidth","cascadeFrom","cascadeFromField","clearButton","dataSource","dataTextField","dataValueField","delay","enable","enforceMinLength","filter","fixedGroupTemplate","footerTemplate","groupTemplate","headerTemplate","height","highlightFirst","ignoreCase","index","minLength","name","noDataTemplate","placeholder","popup","suggest","syncValueAndText","template","text","value","valuePrimitive","virtual"],kendoConfirm:["actions","animation","buttonLayout","closable","content","height","maxHeight","maxWidth","messages","minHeight","minWidth","modal","name","title","visible","width"],kendoContextMenu:["alignToAnchor","animation","appendTo","closeOnClick","copyAnchorStyles","dataSource","direction","filter","hoverDelay","name","orientation","popupCollision","showOn","target"],kendoDateInput:["format","max","messages","min","name","value"],kendoDatePicker:["ARIATemplate","animation","culture","dateInput","dates","depth","disableDates","footer","format","max","min","month","name","parseFormats","start","value","weekNumber"],kendoDateTimePicker:["ARIATemplate","animation","culture","dateInput","dates","depth","disableDates","footer","format","interval","max","min","month","name","parseFormats","start","timeFormat","value","weekNumber"],kendoDiagram:["autoBind","connectionDefaults","connections","connectionsDataSource","dataSource","editable","layout","name","pannable","pdf","selectable","shapeDefaults","shapes","template","theme","zoom","zoomMax","zoomMin","zoomRate"],kendoDialog:["actions","animation","buttonLayout","closable","content","height","maxHeight","maxWidth","messages","minHeight","minWidth","modal","name","title","visible","width"],kendoDraggable:["autoScroll","axis","container","cursorOffset","distance","filter","group","hint","holdToDrag","ignore"],kendoDropDownList:["animation","autoBind","autoWidth","cascadeFrom","cascadeFromField","dataSource","dataTextField","dataValueField","delay","enable","enforceMinLength","filter","fixedGroupTemplate","footerTemplate","groupTemplate","headerTemplate","height","ignoreCase","index","minLength","name","noDataTemplate","optionLabel","optionLabelTemplate","popup","template","text","value","valuePrimitive","valueTemplate","virtual"],kendoDropTarget:["group"],kendoDropTargetArea:["filter","group"],kendoEditor:["deserialization","domain","encoded","fileBrowser","imageBrowser","immutables","messages","name","pasteCleanup","pdf","resizable","serialization","stylesheets","tools"],kendoFilterMenu:["dataSource","extra","field","messages","name","operators"],kendoFlatColorPicker:["autoupdate","buttons","messages","name","opacity","preview","value"],kendoGantt:["assignments","autoBind","columnResizeHandleWidth","columns","currentTimeMarker","dataSource","date","dependencies","editable","height","hourSpan","listWidth","messages","name","navigatable","pdf","range","resizable","resources","rowHeight","selectable","showWorkDays","showWorkHours","snap","taskTemplate","toolbar","tooltip","views","workDayEnd","workDayStart","workWeekEnd","workWeekStart"],kendoGrid:["allowCopy","altRowTemplate","autoBind","columnMenu","columnResizeHandleWidth","columns","dataSource","detailTemplate","editable","excel","filterable","groupable","height","messages","mobile","name","navigatable","noRecords","pageable","pdf","persistSelection","reorderable","resizable","rowTemplate","scrollable","selectable","sortable","toolbar"],kendoLinearGauge:["gaugeArea","name","pointer","renderAs","scale","transitions"],kendoListBox:["autoBind","connectWith","dataSource","dataTextField","dataValueField","draggable","dropSources","messages","name","navigatable","selectable","template","toolbar"],kendoListView:["altTemplate","autoBind","dataSource","editTemplate","name","navigatable","selectable","template"],kendoMap:["center","controls","layerDefaults","layers","markerDefaults","markers","maxZoom","minSize","minZoom","name","pannable","wraparound","zoom","zoomable"],kendoMaskedTextBox:["clearPromptChar","culture","mask","name","promptChar","rules","unmaskOnPost","value"],kendoMediaPlayer:["autoPlay","autoRepeat","forwardSeek","fullScreen","media","messages","mute","name","navigatable","volume"],kendoMenu:["animation","closeOnClick","dataSource","direction","hoverDelay","name","openOnClick","orientation","popupCollision","scrollable"],kendoMobileActionSheet:["cancel","name","popup","type"],kendoMobileBackButton:["name"],kendoMobileButton:["badge","clickOn","enable","icon","name"],kendoMobileButtonGroup:["enable","index","name","selectOn"],kendoMobileCollapsible:["animation","collapsed","expandIcon","iconPosition","inset","name"],kendoMobileDetailButton:["name"],kendoMobileDrawer:["container","name","position","swipeToOpen","swipeToOpenViews","title","views"],kendoMobileLayout:["id","name","platform"],kendoMobileListView:["appendOnRefresh","autoBind","dataSource","endlessScroll","filterable","fixedHeaders","headerTemplate","loadMore","messages","name","pullParameters","pullToRefresh","style","template","type","virtualViewSize"],kendoMobileLoader:["name"],kendoMobileModalView:["height","modal","name","width"],kendoMobileNavBar:["name"],kendoMobilePane:["collapsible","initial","layout","loading","name","portraitWidth","transition"],kendoMobilePopOver:["name","pane","popup"],kendoMobileScrollView:["autoBind","bounceVelocityThreshold","contentHeight","dataSource","duration","emptyTemplate","enablePager","itemsPerPage","name","page","pageSize","template","velocityThreshold"],kendoMobileScroller:["elastic","messages","name","pullOffset","pullToRefresh","useNative","visibleScrollHints","zoom"],kendoMobileSplitView:["name","style"],kendoMobileSwitch:["checked","enable","name","offLabel","onLabel"],kendoMobileTabStrip:["name","selectedIndex"],kendoMobileView:["model","name","reload","scroller","stretch","title","useNativeScrolling","zoom"],kendoMultiSelect:["animation","autoBind","autoClose","autoWidth","clearButton","dataSource","dataTextField","dataValueField","delay","enable","enforceMinLength","filter","fixedGroupTemplate","footerTemplate","groupTemplate","headerTemplate","height","highlightFirst","ignoreCase","itemTemplate","maxSelectedItems","minLength","name","noDataTemplate","placeholder","popup","tagMode","tagTemplate","value","valuePrimitive","virtual"],kendoNotification:["allowHideAfter","animation","appendTo","autoHideAfter","button","height","hideOnClick","name","position","stacking","templates","width"],kendoNumericTextBox:["culture","decimals","downArrowText","factor","format","max","min","name","placeholder","restrictDecimals","round","spinners","step","upArrowText","value"],kendoPager:["autoBind","buttonCount","dataSource","info","input","linkTemplate","messages","name","numeric","pageSizes","previousNext","refresh","selectTemplate"],kendoPanelBar:["animation","autoBind","contentUrls","dataImageUrlField","dataSource","dataSpriteCssClassField","dataTextField","dataUrlField","expandMode","loadOnDemand","messages","name","template"],kendoPivotConfigurator:["dataSource","filterable","height","messages","name","sortable"],kendoPivotGrid:["autoBind","columnHeaderTemplate","columnWidth","dataCellTemplate","dataSource","excel","filterable","height","kpiStatusTemplate","kpiTrendTemplate","messages","name","pdf","reorderable","rowHeaderTemplate","sortable"],kendoPopup:["adjustSize","anchor","animation","appendTo","collision","name","origin","position"],kendoProgressBar:["animation","chunkCount","enable","max","min","name","orientation","reverse","showStatus","type","value"],kendoPrompt:["actions","animation","buttonLayout","closable","content","height","maxHeight","maxWidth","messages","minHeight","minWidth","modal","name","title","visible","width"],kendoQRCode:["background","border","color","encoding","errorCorrection","name","padding","renderAs","size","value"],kendoRadialGauge:["gaugeArea","name","pointer","renderAs","scale","transitions"],kendoRangeSlider:["largeStep","leftDragHandleTitle","max","min","name","orientation","rightDragHandleTitle","selectionEnd","selectionStart","smallStep","tickPlacement","tooltip"],kendoResponsivePanel:["autoClose","breakpoint","name","orientation","toggleButton"],kendoScheduler:["allDayEventTemplate","allDaySlot","autoBind","currentTimeMarker","dataSource","date","dateHeaderTemplate","editable","endTime","eventTemplate","footer","group","groupHeaderTemplate","height","majorTick","majorTimeHeaderTemplate","max","messages","min","minorTickCount","minorTimeHeaderTemplate","mobile","name","pdf","resources","selectable","showWorkHours","snap","startTime","timezone","toolbar","views","width","workDayEnd","workDayStart","workWeekEnd","workWeekStart"],kendoSlider:["decreaseButtonTitle","dragHandleTitle","increaseButtonTitle","largeStep","max","min","name","orientation","showButtons","smallStep","tickPlacement","tooltip","value"],kendoSortable:["autoScroll","axis","connectWith","container","cursor","cursorOffset","disabled","filter","handler","hint","holdToDrag","ignore","name","placeholder"],kendoSparkline:["autoBind","axisDefaults","categoryAxis","chartArea","data","dataSource","name","plotArea","pointWidth","renderAs","series","seriesColors","seriesDefaults","theme","tooltip","transitions","type","valueAxis"],kendoSplitter:["name","orientation","panes"],kendoSpreadsheet:["activeSheet","columnWidth","columns","defaultCellStyle","excel","headerHeight","headerWidth","name","pdf","rowHeight","rows","sheets","sheetsbar","toolbar"],kendoStockChart:["autoBind","axisDefaults","categoryAxis","chartArea","dataSource","dateField","legend","name","navigator","panes","pdf","plotArea","renderAs","series","seriesColors","seriesDefaults","theme","title","tooltip","transitions","valueAxis"],kendoTabStrip:["animation","collapsible","contentUrls","dataContentField","dataContentUrlField","dataImageUrlField","dataSource","dataSpriteCssClass","dataTextField","dataUrlField","name","navigatable","scrollable","tabPosition","value"],kendoTimePicker:["animation","culture","dateInput","dates","format","interval","max","min","name","parseFormats","value"],kendoToolBar:["items","name","resizable"],kendoTooltip:["animation","autoHide","callout","content","filter","height","iframe","name","position","showAfter","showOn","width"],kendoTouch:["doubleTapTimeout","enableSwipe","filter","maxDuration","maxYDelta","minHold","minXDelta","multiTouch","name","surface"],kendoTreeList:["autoBind","columnMenu","columns","dataSource","editable","excel","filterable","height","messages","name","pdf","reorderable","resizable","scrollable","selectable","sortable","toolbar"],kendoTreeMap:["autoBind","colorField","colors","dataSource","name","template","textField","theme","type","valueField"],kendoTreeView:["animation","autoBind","autoScroll","checkboxes","dataImageUrlField","dataSource","dataSpriteCssClassField","dataTextField","dataUrlField","dragAndDrop","loadOnDemand","messages","name","template"],kendoUpload:["async","directory","directoryDrop","dropZone","enabled","files","localization","multiple","name","showFileList","template","validation"],kendoValidator:["errorTemplate","messages","name","rules","validateOnBlur"],kendoWindow:["actions","animation","appendTo","autoFocus","content","draggable","height","iframe","maxHeight","maxWidth","minHeight","minWidth","modal","name","pinned","position","resizable","scrollable","title","visible","width"],GanttColumn:["editable","field","format","sortable","title","width"],GridColumn:["aggregates","attributes","columns","command","editable","encoded","field","filterable","footerAttributes","footerTemplate","format","groupFooterTemplate","groupHeaderTemplate","groupable","headerAttributes","headerTemplate","hidden","lockable","locked","menu","minResizableWidth","minScreenWidth","selectable","sortable","template","title","values","width","editor"],GridColumnCommandItem:["className","click","name","text","visible"],GridToolbarItem:["name","template","text"],ToolBarItem:["attributes","buttons","click","enable","group","hidden","icon","id","imageUrl","menuButtons","overflow","overflowTemplate","primary","selected","showIcon","showText","spriteCssClass","template","text","togglable","toggle","type","url"],ToolBarItemButton:["attributes","click","enable","group","hidden","icon","id","imageUrl","selected","showIcon","showText","spriteCssClass","text","togglable","toggle","url"],TreeListColumn:["attributes","command","encoded","expandable","field","filterable","footerTemplate","format","headerAttributes","headerTemplate","hidden","lockable","locked","menu","minScreenWidth","sortable","template","title","width","editor"]}}.call(b,b,a)}),System.registerDynamic("npm:aurelia-kendoui-bridge@1.7.0/common/control-properties.js",["./bindables","aurelia-dependency-injection","./util"],!1,function(a,b,c){return function(a,b,c,d){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.ControlProperties=void 0;var f,g;a.ControlProperties=(f=(0,c.inject)(d.Util))(g=function(){function a(b){e(this,a),this.cache={},this.util=b}return a.prototype.getProperties=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.cache[a])return this.cache[a];var c=this.getWidgetProperties(a),d=this.getGeneratedProperties(a),e=c.concat(d.filter(function(a){return c.indexOf(a)<0}));return e=e.concat(b.filter(function(a){return e.indexOf(a)<0})),this.cache[a]=e,e},a.prototype.getGeneratedProperties=function(a){if(!b.bindables[a])throw new Error(a+" not found in generated bindables.js");return b.bindables[a]},a.prototype.getWidgetProperties=function(a){return window.kendo&&kendo.jQuery.fn[a]?Object.keys(kendo.jQuery.fn[a].widget.prototype.options):[]},a.prototype.getTemplateProperties=function(a){var b=this;return this.getProperties(a).filter(function(a){return b.util.isTemplateProperty(a)})},a}())||g}.call(b,b,a("./bindables"),a("aurelia-dependency-injection"),a("./util"))}),System.registerDynamic("npm:aurelia-kendoui-bridge@1.7.0/common/constants.js",[],!1,function(a,b,c){return function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.constants={eventPrefix:"k-on-",bindablePrefix:"k-",attributePrefix:"ak-",elementPrefix:"ak-"}}.call(b,b,a)}),System.registerDynamic("npm:aurelia-kendoui-bridge@1.7.0/common/util.js",["./constants"],!1,function(a,b,c){return function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.Util=void 0;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=/([A-Z])/g;a.Util=function(){function a(){c(this,a)}return a.prototype.addHyphenAndLower=function(a){return"-"+a.toLowerCase()},a.prototype._hyphenate=function(a){return(a.charAt(0).toLowerCase()+a.slice(1)).replace(e,this.addHyphenAndLower)},a.prototype._unhyphenate=function(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})},a.prototype.getBindablePropertyName=function(a){var c=""+b.constants.bindablePrefix+a;return this._unhyphenate(c)},a.prototype.getKendoPropertyName=function(a){var b=a.substring(1);return b.charAt(0).toLowerCase()+b.slice(1)},a.prototype.getEventsFromAttributes=function(a){for(var c=Array.prototype.slice.call(a.attributes),d=[],e=0;e<c.length;e++){var f=c[e],g=f.name;if(g.startsWith(b.constants.eventPrefix)){var h=g.split(b.constants.eventPrefix)[1],i=h.split(".")[0],j=this._unhyphenate(i);d.push(j)}}return d},a.prototype.pruneOptions=function(a){var b={};for(var c in a)this.hasValue(a[c])&&(b[c]=a[c]);return b},a.prototype.hasValue=function(a){return void 0!==a&&null!==a},a.prototype.fireEvent=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=new CustomEvent(b,{detail:c,bubbles:!0,cancelable:!0});return a.dispatchEvent(d),d},a.prototype.fireKendoEvent=function(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.fireEvent(a,""+b.constants.eventPrefix+c,d)},a.prototype.isTemplateProperty=function(a){return a.toLowerCase().indexOf("template")>-1},a.prototype.isObject=function(a){return null!==a&&"object"===(void 0===a?"undefined":d(a))},a.prototype.getChildrenVMs=function(a,b){var c=kendo.jQuery(a).children(b),d=[];return c.each(function(a,b){if(!b.au||!b.au.controller)throw new Error("au property not found on element "+b.tagName+". Did you load this custom element via <require> or via main.js?");d.push(b.au.controller.viewModel)}),d},a}()}.call(b,b,a("./constants"))}),System.registerDynamic("npm:aurelia-kendoui-bridge@1.7.0/common/decorators.js",["aurelia-templating","aurelia-dependency-injection","aurelia-metadata","aurelia-binding","aurelia-task-queue","./control-properties","./util"],!1,function(a,b,c){return function(a,b,c,d,e,f,g,h){"use strict";function i(a){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(i,j,k){var l=d.metadata.getOrCreateOwn(d.metadata.resource,b.HtmlBehaviorResource,i),m=c.Container.instance||new c.Container,n=m.get(g.ControlProperties),o=m.get(h.Util),p=n.getProperties(a,f);p.push("widget"),p.push("options"),p.push("noInit");for(var q=0;q<p.length;q++){var r=p[q],s={name:o.getBindablePropertyName(r)};"widget"===r&&(s.defaultBindingMode=e.bindingMode.twoWay);new b.BindableProperty(s).registerWith(i,l,k)}}}function j(){return function(a,b,d){var e=(c.Container.instance||new c.Container).get(f.TaskQueue),g=d.value;return d.value=function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];e.queueTask(function(){return g.apply(a,c)})},d}}Object.defineProperty(a,"__esModule",{value:!0}),a.generateBindables=i,a.delayed=j}.call(b,b,a("aurelia-templating"),a("aurelia-dependency-injection"),a("aurelia-metadata"),a("aurelia-binding"),a("aurelia-task-queue"),a("./control-properties"),a("./util"))}),System.registerDynamic("npm:aurelia-kendoui-bridge@1.7.0/config-builder.js",["aurelia-logging","aurelia-pal"],!1,function(a,b,c){return function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.KendoConfigBuilder=void 0;var f=d(b);a.KendoConfigBuilder=function(){function a(){e(this,a),this.resources=[],this.registerRepeatStrategy=!0,this._propogatePreventDefault=!1,this.logger=f.getLogger("aurelia-kendoui-bridge")}return a.prototype.detect=function(){if(!window.kendo)return this;this.kendoTemplateSupport().useValueConverters();for(var a=kendo.widgets.map(function(a){return a.name}),b=0;b<a.length;b++)this[a[b]]&&this[a[b]]();return this},a.prototype.core=function(){return this.kendoAutoComplete().kendoButton().kendoMobileButtonGroup().kendoCalendar().kendoColorPicker().kendoColorPalette().kendoComboBox().kendoContextMenu().kendoDialog().kendoDropDownList().kendoDateTimePicker().kendoDatePicker().kendoDraggable().kendoDropTarget().kendoFlatColorPicker().kendoListView().kendoMaskedTextBox().kendoMenu().kendoMultiSelect().kendoNotification().kendoNumericTextBox().kendoPanelBar().kendoPopup().kendoProgressBar().kendoRangeSlider().kendoResponsivePanel().kendoMobileScrollView().kendoSortable().kendoSlider().kendoSplitter().kendoMobileSwitch().kendoTabStrip().kendoTemplateSupport().kendoTimePicker().kendoToolBar().kendoTooltip().kendoValidator().kendoWindow().useValueConverters(),this},a.prototype.pro=function(){return this.core().kendoBarcode().kendoChart().kendoDiagram().kendoEditor().kendoFilterMenu().kendoGantt().kendoGrid().kendoMap().kendoLinearGauge().kendoPager().kendoPivotGrid().kendoQRCode().kendoRadialGauge().kendoScheduler().kendoTreeList().kendoTreeView().kendoUpload(),this},a.prototype.useValueConverters=function(){return this.resources.push(c.PLATFORM.moduleName("./valueconverters/valueconverters")),this},a.prototype.kendoTemplateSupport=function(){return this.resources.push(c.PLATFORM.moduleName("./common/template")),this},a.prototype.propogatePreventDefault=function(){return this._propogatePreventDefault=!0,this},a.prototype.debug=function(){return logger.warn(".debug() is no longer needed and will be removed in the future."),this},a.prototype.notifyBindingBehavior=function(){return this.resources.push(c.PLATFORM.moduleName("./common/notify-binding-behavior")),this},a.prototype.withTemplateCallback=function(a){return this.templateCallback=a,this},a.prototype.withoutRepeatStrategy=function(){this.registerRepeatStrategy=!1},a.prototype.kendoAutoComplete=function(){return this.resources.push(c.PLATFORM.moduleName("./autocomplete/autocomplete")),this},a.prototype.kendoButton=function(){return this.resources.push(c.PLATFORM.moduleName("./button/button")),this},a.prototype.kendoBarcode=function(){return this.resources.push(c.PLATFORM.moduleName("./barcode/barcode")),this},a.prototype.kendoCalendar=function(){return this.resources.push(c.PLATFORM.moduleName("./calendar/calendar")),this},a.prototype.kendoChart=function(){return this.resources.push(c.PLATFORM.moduleName("./chart/chart")),this.resources.push(c.PLATFORM.moduleName("./chart/sparkline")),this.resources.push(c.PLATFORM.moduleName("./chart/stock")),this.resources.push(c.PLATFORM.moduleName("./chart/treemap")),this},a.prototype.kendoComboBox=function(){return this.resources.push(c.PLATFORM.moduleName("./combobox/combobox")),this},a.prototype.kendoContextMenu=function(){return this.resources.push(c.PLATFORM.moduleName("./contextmenu/contextmenu")),this},a.prototype.kendoColorPicker=function(){return this.resources.push(c.PLATFORM.moduleName("./colorpicker/colorpicker")),this},a.prototype.kendoColorPalette=function(){return this.resources.push(c.PLATFORM.moduleName("./colorpalette/colorpalette")),this},a.prototype.kendoDatePicker=function(){return this.resources.push(c.PLATFORM.moduleName("./datepicker/datepicker")),this},a.prototype.kendoDateInput=function(){this.resources.push(c.PLATFORM.moduleName("./dateinput/dateinput"))},a.prototype.kendoDateTimePicker=function(){return this.resources.push(c.PLATFORM.moduleName("./datetimepicker/datetimepicker")),this},a.prototype.kendoDiagram=function(){return this.resources.push(c.PLATFORM.moduleName("./diagram/diagram")),this},a.prototype.kendoDialog=function(){return this.resources.push(c.PLATFORM.moduleName("./dialog/dialog")),this},a.prototype.kendoDraggable=function(){return this.resources.push(c.PLATFORM.moduleName("./draggable/draggable")),this},a.prototype.kendoDropDownList=function(){return this.resources.push(c.PLATFORM.moduleName("./dropdownlist/dropdownlist")),this},a.prototype.kendoDropTarget=function(){return this.resources.push(c.PLATFORM.moduleName("./drop-target/drop-target")),this.resources.push(c.PLATFORM.moduleName("./drop-target/drop-target-area")),this},a.prototype.kendoEditor=function(){return this.resources.push(c.PLATFORM.moduleName("./editor/editor")),this},a.prototype.kendoFilterMenu=function(){return this.resources.push(c.PLATFORM.moduleName("./filter-menu/filter-menu")),this},a.prototype.kendoFlatColorPicker=function(){return this.resources.push(c.PLATFORM.moduleName("./flatcolorpicker/flatcolorpicker")),this},a.prototype.kendoGantt=function(){return this.resources.push(c.PLATFORM.moduleName("./gantt/gantt")),this.resources.push(c.PLATFORM.moduleName("./gantt/gantt-col")),this},a.prototype.kendoGrid=function(){return this.resources.push(c.PLATFORM.moduleName("./grid/grid")),this.resources.push(c.PLATFORM.moduleName("./grid/col")),this.resources.push(c.PLATFORM.moduleName("./grid/grid-toolbar")),this.resources.push(c.PLATFORM.moduleName("./grid/grid-command")),this},a.prototype.kendoLinearGauge=function(){return this.resources.push(c.PLATFORM.moduleName("./gauges/linear-gauge")),this},a.prototype.kendoListView=function(){return this.resources.push(c.PLATFORM.moduleName("./listview/listview")),this},a.prototype.kendoListBox=function(){return this.resources.push(c.PLATFORM.moduleName("./listbox/listbox")),this},a.prototype.kendoNotification=function(){return this.resources.push(c.PLATFORM.moduleName("./notification/notification")),this.resources.push(c.PLATFORM.moduleName("./notification/notification-template")),this},a.prototype.kendoMap=function(){return this.resources.push(c.PLATFORM.moduleName("./map/map")),this},a.prototype.kendoMenu=function(){return this.resources.push(c.PLATFORM.moduleName("./menu/menu")),this},a.prototype.kendoMaskedTextBox=function(){return this.resources.push(c.PLATFORM.moduleName("./maskedtextbox/maskedtextbox")),this},a.prototype.kendoMobileButtonGroup=function(){return this.resources.push(c.PLATFORM.moduleName("./buttongroup/buttongroup")),this},a.prototype.kendoMultiSelect=function(){return this.resources.push(c.PLATFORM.moduleName("./multiselect/multiselect")),this},a.prototype.kendoNumericTextBox=function(){return this.resources.push(c.PLATFORM.moduleName("./numerictextbox/numerictextbox")),this},a.prototype.kendoPager=function(){return this.resources.push(c.PLATFORM.moduleName("./pager/pager")),this},a.prototype.kendoPanelBar=function(){return this.resources.push(c.PLATFORM.moduleName("./panelbar/panelbar")),this},a.prototype.kendoPivotGrid=function(){return this.resources.push(c.PLATFORM.moduleName("./pivotgrid/pivotgrid")),this.resources.push(c.PLATFORM.moduleName("./pivotgrid/pivotconfigurator")),this},a.prototype.kendoPopup=function(){return this.resources.push(c.PLATFORM.moduleName("./popup/popup")),this},a.prototype.kendoProgressBar=function(){return this.resources.push(c.PLATFORM.moduleName("./progressbar/progressbar")),this},a.prototype.kendoQRCode=function(){return this.resources.push(c.PLATFORM.moduleName("./qrcode/qrcode")),this},a.prototype.kendoRadialGauge=function(){return this.resources.push(c.PLATFORM.moduleName("./gauges/radial-gauge")),this},a.prototype.kendoResponsivePanel=function(){return this.resources.push(c.PLATFORM.moduleName("./responsivepanel/responsivepanel")),this},a.prototype.kendoMediaPlayer=function(){return this.resources.push(c.PLATFORM.moduleName("./mediaplayer/mediaplayer")),this},a.prototype.kendoMobileScrollView=function(){return this.resources.push(c.PLATFORM.moduleName("./scrollview/scrollview")),this},a.prototype.kendoScheduler=function(){return this.resources.push(c.PLATFORM.moduleName("./scheduler/scheduler")),this},a.prototype.kendoSlider=function(){return this.resources.push(c.PLATFORM.moduleName("./slider/slider")),this},a.prototype.kendoSortable=function(){return this.resources.push(c.PLATFORM.moduleName("./sortable/sortable")),this},a.prototype.kendoSpreadsheet=function(){return this.resources.push(c.PLATFORM.moduleName("./spreadsheet/spreadsheet")),this},a.prototype.kendoSplitter=function(){return this.resources.push(c.PLATFORM.moduleName("./splitter/splitter")),this},a.prototype.kendoMobileSwitch=function(){return this.resources.push(c.PLATFORM.moduleName("./switch/switch")),this},a.prototype.kendoTabStrip=function(){return this.resources.push(c.PLATFORM.moduleName("./tabstrip/tabstrip")),this},a.prototype.kendoTreeList=function(){return this.resources.push(c.PLATFORM.moduleName("./treelist/treelist")),this.resources.push(c.PLATFORM.moduleName("./treelist/tree-col")),this},a.prototype.kendoToolbar=function(){return this.resources.push(c.PLATFORM.moduleName("./toolbar/toolbar")),this},a.prototype.kendoTreeView=function(){return this.resources.push(c.PLATFORM.moduleName("./treeview/treeview")),this},a.prototype.kendoTimePicker=function(){return this.resources.push(c.PLATFORM.moduleName("./timepicker/timepicker")),this},a.prototype.kendoToolBar=function(){return this.resources.push(c.PLATFORM.moduleName("./toolbar/toolbar")),this.resources.push(c.PLATFORM.moduleName("./toolbar/toolbar-item")),this.resources.push(c.PLATFORM.moduleName("./toolbar/toolbar-item-button")),this},a.prototype.kendoTooltip=function(){return this.resources.push(c.PLATFORM.moduleName("./tooltip/tooltip")),this},a.prototype.kendoRangeSlider=function(){return this.resources.push(c.PLATFORM.moduleName("./rangeslider/rangeslider")),this},a.prototype.kendoUpload=function(){return this.resources.push(c.PLATFORM.moduleName("./upload/upload")),this},a.prototype.kendoValidator=function(){return this.resources.push(c.PLATFORM.moduleName("./validator/validator")),this},a.prototype.kendoWindow=function(){return this.resources.push(c.PLATFORM.moduleName("./window/window")),this},a.prototype.kendoButtonGroup=function(){return this.logger.warn("kendoButtonGroup is deprecated, use .kendoMobileButtonGroup() instead"),this.kendoMobileButtonGroup()},a.prototype.kendoCombobox=function(){return this.logger.warn("kendoCombobox is deprecated, use .kendoComboBox() instead"),this.kendoComboBox()},a.prototype.kendoScrollView=function(){return this.logger.warn("kendoScrollView is deprecated, use .kendoMobileScrollView() instead"),this.kendoMobileScrollView()},a.prototype.kendoSwitch=function(){return this.logger.warn("kendoSwitch is deprecated, use .kendoMobileSwitch() instead"),this.kendoMobileSwitch()},a.prototype.kendoToolbar=function(){return this.logger.warn("kendoToolbar is deprecated, use .kendoToolBar() instead"),this.kendoToolBar()},a}()}.call(b,b,a("aurelia-logging"),a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-kendoui-bridge@1.7.0/index.js",["./version","./common/decorators","./config-builder","aurelia-logging"],!1,function(a,b,c){return function(a,b,c,d,e){"use strict";function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function g(a,b){var c=a.container.get(d.KendoConfigBuilder),e=h.getLogger("aurelia-kendoui-bridge");void 0!==b&&"function"==typeof b&&b(c);var f=c.resources;f.length>0&&a.globalResources(f),e.info("Loading "+f.length+" wrappers",f),f.length>10&&e.warn("when using many wrappers, it is recommended not to use .core(), .pro() or .dynamic() but instead to load wrappers via <require></require>.this should significantly speed up load times of your application.")}Object.defineProperty(a,"__esModule",{value:!0}),a.delayed=a.generateBindables=a.version=void 0,a.configure=g,Object.defineProperty(a,"version",{enumerable:!0,get:function(){return b.version}}),Object.defineProperty(a,"generateBindables",{enumerable:!0,get:function(){return c.generateBindables}}),Object.defineProperty(a,"delayed",{enumerable:!0,get:function(){return c.delayed}});var h=f(e)}.call(b,b,a("./version"),a("./common/decorators"),a("./config-builder"),a("aurelia-logging"))}),System.registerDynamic("npm:aurelia-kendoui-bridge@1.7.0.js",["npm:aurelia-kendoui-bridge@1.7.0/index"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-kendoui-bridge@1.7.0/index"))}),System.registerDynamic("npm:aurelia-loader-default@1.0.4/aurelia-loader-default.js",["aurelia-loader","aurelia-pal","aurelia-metadata"],!1,function(a,b,c){return function(a,b,c,d){"use strict";function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){var c=a,e=void 0,f=void 0;c.__useDefault&&(c=c.default),d.Origin.set(c,new d.Origin(b,"default"));for(e in c)"function"==typeof(f=c[e])&&d.Origin.set(f,new d.Origin(b,e));return a}Object.defineProperty(a,"__esModule",{value:!0}),a.DefaultLoader=a.TextTemplateLoader=void 0;var h=a.TextTemplateLoader=function(){function a(){}return a.prototype.loadTemplate=function(a,b){return a.loadText(b.address).then(function(a){b.template=c.DOM.createTemplateFromMarkup(a)})},a}(),i=a.DefaultLoader=function(a){function b(){var b=e(this,a.call(this));b.textPluginName="text",b.moduleRegistry=Object.create(null),b.useTemplateLoader(new h);var c=b;return b.addPlugin("template-registry-entry",{fetch:function(a){var b=c.getOrCreateTemplateRegistryEntry(a);return b.templateIsLoaded?b:c.templateLoader.loadTemplate(c,b).then(function(a){return b})}}),b}return f(b,a),b.prototype.useTemplateLoader=function(a){this.templateLoader=a},b.prototype.loadAllModules=function(a){for(var b=[],c=0,d=a.length;c<d;++c)b.push(this.loadModule(a[c]));return Promise.all(b)},b.prototype.loadTemplate=function(a){return this._import(this.applyPluginToUrl(a,"template-registry-entry"))},b.prototype.loadText=function(a){return this._import(this.applyPluginToUrl(a,this.textPluginName)).then(function(a){return"string"==typeof a?a:a.default})},b}(b.Loader);c.PLATFORM.Loader=i,c.PLATFORM.global.System&&c.PLATFORM.global.System.import?(c.PLATFORM.eachModule=function(a){if(System.registry)for(var b=Array.from(System.registry.keys()),c=0;c<b.length;c++)try{var d=b[c];if(a(d,System.registry.get(d)))return}catch(a){}else{var e=System._loader.modules;for(var f in e)try{if(a(f,e[f].module))return}catch(a){}}},System.set("text",System.newModule({translate:function(a){return'module.exports = "'+a.source.replace(/(["\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")+'";'}})),i.prototype._import=function(a){return System.import(a)},i.prototype.loadModule=function(a){var b=this;return System.normalize(a).then(function(a){var c=b.moduleRegistry[a];return void 0!==c?Promise.resolve(c):System.import(a).then(function(c){return b.moduleRegistry[a]=c,g(c,a)})})},i.prototype.map=function(a,b){var c;System.config({map:(c={},c[a]=b,c)})},i.prototype.normalizeSync=function(a,b){return System.normalizeSync(a,b)},i.prototype.normalize=function(a,b){return System.normalize(a,b)},i.prototype.applyPluginToUrl=function(a,b){return a+"!"+b},i.prototype.addPlugin=function(a,b){System.set(a,System.newModule({fetch:function(a,c){var d=b.fetch(a.address);return Promise.resolve(d).then(function(b){return a.metadata.result=b,""})},instantiate:function(a){return a.metadata.result}}))}):(c.PLATFORM.global.requirejs&&requirejs.s&&requirejs.s.contexts&&requirejs.s.contexts._&&requirejs.s.contexts._.defined?c.PLATFORM.eachModule=function(a){var b=requirejs.s.contexts._.defined;for(var c in b)try{if(a(c,b[c]))return}catch(a){}}:c.PLATFORM.eachModule=function(a){},i.prototype._import=function(a){return new Promise(function(b,d){c.PLATFORM.global.require([a],b,d)})},i.prototype.loadModule=function(a){var b=this,d=this.moduleRegistry[a];return void 0!==d?Promise.resolve(d):new Promise(function(d,e){c.PLATFORM.global.require([a],function(c){b.moduleRegistry[a]=c,d(g(c,a))},e)})},i.prototype.map=function(a,b){},i.prototype.normalize=function(a,b){return Promise.resolve(a)},i.prototype.normalizeSync=function(a,b){return a},i.prototype.applyPluginToUrl=function(a,b){return b+"!"+a},i.prototype.addPlugin=function(a,b){define(a,[],{load:function(a,c,d){var e=b.fetch(a);Promise.resolve(e).then(d)}})})}.call(b,b,a("aurelia-loader"),a("aurelia-pal"),a("aurelia-metadata"))}),System.registerDynamic("npm:aurelia-loader-default@1.0.4.js",["npm:aurelia-loader-default@1.0.4/aurelia-loader-default"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-loader-default@1.0.4/aurelia-loader-default"))}),System.registerDynamic("npm:aurelia-pal-browser@1.8.0/aurelia-pal-browser.js",["aurelia-pal"],!1,function(a,b,c){return function(a,b){"use strict";function c(){b.isInitialized||(0,b.initializePAL)(function(a,b,c){Object.assign(a,e),Object.assign(b,z),Object.assign(c,F),Object.defineProperty(c,"title",{get:function(){return document.title},set:function(a){document.title=a}}),Object.defineProperty(c,"activeElement",{get:function(){return document.activeElement}}),Object.defineProperty(a,"XMLHttpRequest",{get:function(){return a.global.XMLHttpRequest}})})}Object.defineProperty(a,"__esModule",{value:!0}),a._DOM=a._FEATURE=a._PLATFORM=void 0,a.initialize=c;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=a._PLATFORM={location:window.location,history:window.history,addEventListener:function(a,b,c){this.global.addEventListener(a,b,c)},removeEventListener:function(a,b,c){this.global.removeEventListener(a,b,c)},performance:window.performance,requestAnimationFrame:function(a){return this.global.requestAnimationFrame(a)}};if("undefined"==typeof FEATURE_NO_IE){void 0===function(){}.name&&Object.defineProperty(Function.prototype,"name",{get:function(){var a=this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];return Object.defineProperty(this,"name",{value:a}),a}})}if("undefined"==typeof FEATURE_NO_IE)if("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))){var f=document.createElement("_");if(f.classList.add("c1","c2"),!f.classList.contains("c2")){var g=function(a){var b=DOMTokenList.prototype[a];DOMTokenList.prototype[a]=function(a){for(var c=0,d=arguments.length;c<d;++c)a=arguments[c],b.call(this,a)}};g("add"),g("remove")}if(f.classList.toggle("c3",!1),f.classList.contains("c3")){var h=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,b){return 1 in arguments&&!this.contains(a)==!b?b:h.call(this,a)}}f=null}else{var i="prototype",j=String.prototype.trim,k=Array.prototype.indexOf,l=[],m=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},n=function(a,b){if(""===b)throw new m("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new m("INVALID_CHARACTER_ERR","String contains an invalid character");return k.call(a,b)},o=function(a){for(var b=j.call(a.getAttribute("class")||""),c=b?b.split(/\s+/):l,d=0,e=c.length;d<e;++d)this.push(c[d]);this._updateClassName=function(){a.setAttribute("class",this.toString())}},p=o[i]=[];m[i]=Error[i],p.item=function(a){return this[a]||null},p.contains=function(a){return a+="",-1!==n(this,a)},p.add=function(){var a=arguments,b=0,c=a.length,d=void 0,e=!1;do{d=a[b]+"",-1===n(this,d)&&(this.push(d),e=!0)}while(++b<c);e&&this._updateClassName()},p.remove=function(){var a=arguments,b=0,c=a.length,d=void 0,e=!1,f=void 0;do{for(d=a[b]+"",f=n(this,d);-1!==f;)this.splice(f,1),e=!0,f=n(this,d)}while(++b<c);e&&this._updateClassName()},p.toggle=function(a,b){a+="";var c=this.contains(a),d=c?!0!==b&&"remove":!1!==b&&"add";return d&&this[d](a),!0===b||!1===b?b:!c},p.toString=function(){return this.join(" ")},Object.defineProperty(Element.prototype,"classList",{get:function(){return new o(this)},enumerable:!0,configurable:!0})}if("undefined"==typeof FEATURE_NO_IE){var q=function(a,b){for(var c=0,d=t.length,e=[];c<d;c++)t[c][a]==b&&e.push(t[c]);return e},r=function(a,b){for(var c,d=t.length;d--;)c=t[d],c.entryType!=a||void 0!==b&&c.name!=b||t.splice(d,1)};if("performance"in window==!1&&(window.performance={}),"now"in window.performance==!1){var s=Date.now();performance.timing&&performance.timing.navigationStart&&(s=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-s}}var t=(Date.now?Date.now():new Date,[]),u={};window.performance.mark||(window.performance.mark=window.performance.webkitMark||function(a){var b={name:a,entryType:"mark",startTime:window.performance.now(),duration:0};t.push(b),u[a]=b}),window.performance.measure||(window.performance.measure=window.performance.webkitMeasure||function(a,b,c){b=u[b].startTime,c=u[c].startTime,t.push({name:a,entryType:"measure",startTime:b,duration:c-b})}),window.performance.getEntriesByType||(window.performance.getEntriesByType=window.performance.webkitGetEntriesByType||function(a){return q("entryType",a)}),window.performance.getEntriesByName||(window.performance.getEntriesByName=window.performance.webkitGetEntriesByName||function(a){return q("name",a)}),window.performance.clearMarks||(window.performance.clearMarks=window.performance.webkitClearMarks||function(a){r("mark",a)}),window.performance.clearMeasures||(window.performance.clearMeasures=window.performance.webkitClearMeasures||function(a){r("measure",a)}),e.performance=window.performance}if("undefined"==typeof FEATURE_NO_IE){var v=window.console=window.console||{},w=function(){};v.memory||(v.memory={}),"assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",").forEach(function(a){v[a]||(v[a]=w)}),"object"===d(v.log)&&"log,info,warn,error,assert,dir,clear,profile,profileEnd".split(",").forEach(function(a){console[a]=this.bind(console[a],console)},Function.prototype.call)}if("undefined"==typeof FEATURE_NO_IE&&(!window.CustomEvent||"function"!=typeof window.CustomEvent)){var x=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};x.prototype=window.Event.prototype,window.CustomEvent=x}if(Element&&!Element.prototype.matches){var y=Element.prototype;y.matches=y.matchesSelector||y.mozMatchesSelector||y.msMatchesSelector||y.oMatchesSelector||y.webkitMatchesSelector}var z=a._FEATURE={shadowDOM:!!HTMLElement.prototype.attachShadow,scopedCSS:"scoped"in document.createElement("style"),htmlTemplateElement:function(){var a=document.createElement("div");return a.innerHTML="<template></template>","content"in a.children[0]}(),mutationObserver:!(!window.MutationObserver&&!window.WebKitMutationObserver),ensureHTMLTemplateElement:function(a){return a}};if("undefined"==typeof FEATURE_NO_IE){var A=function(a){return"template"===a.tagName&&"http://www.w3.org/2000/svg"===a.namespaceURI},B=function(a){var b=a.ownerDocument.createElement("template"),c=a.attributes,d=c.length,e=void 0;for(a.parentNode.insertBefore(b,a);d-- >0;)e=c[d],b.setAttribute(e.name,e.value),a.removeAttribute(e.name);return a.parentNode.removeChild(a),C(b)},C=function(a){for(var b=a.content=document.createDocumentFragment(),c=void 0;c=a.firstChild;)b.appendChild(c);return a},D=function(a){for(var b=C(a).content,c=b.querySelectorAll("template"),d=0,e=c.length;d<e;++d){var f=c[d];A(f)?B(f):C(f)}return a};z.htmlTemplateElement||(z.ensureHTMLTemplateElement=D)}var E=window.ShadowDOMPolyfill||null,F=a._DOM={Element:Element,NodeList:NodeList,SVGElement:SVGElement,boundary:"aurelia-dom-boundary",addEventListener:function(a,b,c){document.addEventListener(a,b,c)},removeEventListener:function(a,b,c){document.removeEventListener(a,b,c)},adoptNode:function(a){return document.adoptNode(a)},createAttribute:function(a){return document.createAttribute(a)},createElement:function(a){return document.createElement(a)},createTextNode:function(a){return document.createTextNode(a)},createComment:function(a){return document.createComment(a)},createDocumentFragment:function(){return document.createDocumentFragment()},createTemplateElement:function(){var a=document.createElement("template");return z.ensureHTMLTemplateElement(a)},createMutationObserver:function(a){return new(window.MutationObserver||window.WebKitMutationObserver)(a)},createCustomEvent:function(a,b){return new window.CustomEvent(a,b)},dispatchEvent:function(a){document.dispatchEvent(a)},getComputedStyle:function(a){return window.getComputedStyle(a)},getElementById:function(a){return document.getElementById(a)},querySelector:function(a){return document.querySelector(a)},querySelectorAll:function(a){return document.querySelectorAll(a)},nextElementSibling:function(a){if(a.nextElementSibling)return a.nextElementSibling;do{a=a.nextSibling}while(a&&1!==a.nodeType);return a},createTemplateFromMarkup:function(a){var b=document.createElement("div");b.innerHTML=a;var c=b.firstElementChild;if(!c||"TEMPLATE"!==c.nodeName)throw new Error("Template markup must be wrapped in a <template> element e.g. <template> \x3c!-- markup here --\x3e </template>");return z.ensureHTMLTemplateElement(c)},appendNode:function(a,b){(b||document.body).appendChild(a)},replaceNode:function(a,b,c){b.parentNode?b.parentNode.replaceChild(a,b):null!==E?E.unwrap(c).replaceChild(E.unwrap(a),E.unwrap(b)):c.replaceChild(a,b)},removeNode:function(a,b){a.parentNode?a.parentNode.removeChild(a):b&&(null!==E?E.unwrap(b).removeChild(E.unwrap(a)):b.removeChild(a))},injectStyles:function(a,b,c,d){if(d){var e=document.getElementById(d);if(e){if("style"===e.tagName.toLowerCase())return void(e.innerHTML=a);throw new Error("The provided id does not indicate a style tag.")}}var f=document.createElement("style");return f.innerHTML=a,f.type="text/css",d&&(f.id=d),b=b||document.head,c&&b.childNodes.length>0?b.insertBefore(f,b.childNodes[0]):b.appendChild(f),f}}}.call(b,b,a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-pal-browser@1.8.0.js",["npm:aurelia-pal-browser@1.8.0/aurelia-pal-browser"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-pal-browser@1.8.0/aurelia-pal-browser"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/compose.js",["aurelia-dependency-injection","aurelia-logging","aurelia-task-queue","aurelia-templating","aurelia-pal"],!1,function(a,b,c){return function(a,b,c,d,e,f){"use strict";function g(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function h(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function i(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function j(a){for(var b in a)return!1;return!0}function k(a,b){if(a&&"function"==typeof a.activate)return Promise.resolve(a.activate(b))}function l(a,b){return Object.assign(b,{bindingContext:a.bindingContext,overrideContext:a.overrideContext,owningView:a.owningView,container:a.container,viewSlot:a.viewSlot,viewResources:a.viewResources,currentController:a.currentController,host:a.element,swapOrder:a.swapOrder})}function m(a){var b=a.changes;if(a.changes=Object.create(null),"view"in b||"viewModel"in b||!("model"in b)){var c={view:a.view,viewModel:a.currentViewModel||a.viewModel,model:a.model};c=Object.assign(c,b),c=l(a,c),a.pendingTask=a.compositionEngine.compose(c).then(function(b){a.currentController=b,a.currentViewModel=b?b.viewModel:null})}else if(a.pendingTask=k(a.currentViewModel,b.model),!a.pendingTask)return;a.pendingTask=a.pendingTask.catch(function(a){x.error(a)}).then(function(){a.pendingTask&&(a.pendingTask=null,j(a.changes)||m(a))})}function n(a){a.pendingTask||a.updateRequested||(a.updateRequested=!0,a.taskQueue.queueMicroTask(function(){a.updateRequested=!1,m(a)}))}Object.defineProperty(a,"__esModule",{value:!0}),a.Compose=void 0;var o,p,q,r,s,t,u,v,w=g(c),x=w.getLogger("templating-resources");a.Compose=(o=(0,e.customElement)("compose"),p=(0,b.inject)(f.DOM.Element,b.Container,e.CompositionEngine,e.ViewSlot,e.ViewResources,d.TaskQueue),o(q=(0,e.noView)(q=p((r=function(){function a(a,b,c,d,e,f){h(this,"model",s,this),h(this,"view",t,this),h(this,"viewModel",u,this),h(this,"swapOrder",v,this),this.element=a,this.container=b,this.compositionEngine=c,this.viewSlot=d,this.viewResources=e,this.taskQueue=f,this.currentController=null,this.currentViewModel=null,this.changes=Object.create(null)}return a.prototype.created=function(a){this.owningView=a},a.prototype.bind=function(a,b){this.bindingContext=a,this.overrideContext=b,this.changes.view=this.view,this.changes.viewModel=this.viewModel,this.changes.model=this.model,m(this)},a.prototype.unbind=function(){this.changes=Object.create(null),this.pendingTask=null,this.bindingContext=null,this.overrideContext=null,this.viewSlot.removeAll(!0,!0)},a.prototype.modelChanged=function(a,b){this.changes.model=a,n(this)},a.prototype.viewChanged=function(a,b){this.changes.view=a,n(this)},a.prototype.viewModelChanged=function(a,b){this.changes.viewModel=a,n(this)},a}(),s=i(r.prototype,"model",[e.bindable],{enumerable:!0,initializer:null}),t=i(r.prototype,"view",[e.bindable],{enumerable:!0,initializer:null}),u=i(r.prototype,"viewModel",[e.bindable],{enumerable:!0,initializer:null}),v=i(r.prototype,"swapOrder",[e.bindable],{enumerable:!0,initializer:null}),q=r))||q)||q)||q)}.call(b,b,a("aurelia-dependency-injection"),a("aurelia-logging"),a("aurelia-task-queue"),a("aurelia-templating"),a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/if.js",["aurelia-templating","aurelia-dependency-injection","./if-core"],!1,function(a,b,c){return function(a,b,c,d){"use strict";function e(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}Object.defineProperty(a,"__esModule",{value:!0}),a.If=void 0;var i,j,k,l,m,n,o;a.If=(i=(0,b.customAttribute)("if"),j=(0,c.inject)(b.BoundViewFactory,b.ViewSlot),k=(0,b.bindable)({primaryProperty:!0}),i(l=(0,b.templateController)(l=j((m=function(a){function b(){for(var b,c,d,g=arguments.length,h=Array(g),i=0;i<g;i++)h[i]=arguments[i];return b=c=f(this,a.call.apply(a,[this].concat(h))),e(c,"condition",n,c),e(c,"swapOrder",o,c),d=b,f(c,d)}return g(b,a),b.prototype.bind=function(b,c){a.prototype.bind.call(this,b,c),this.condition?this._show():this._hide()},b.prototype.conditionChanged=function(a){this._update(a)},b.prototype._update=function(a){var b=this;if(!this.animating){var c=void 0;c=this.elseVm?a?this._swap(this.elseVm,this):this._swap(this,this.elseVm):a?this._show():this._hide(),c&&(this.animating=!0,c.then(function(){b.animating=!1,b.condition!==b.showing&&b._update(b.condition)}))}},b.prototype._swap=function(a,b){switch(this.swapOrder){case"before":return Promise.resolve(b._show()).then(function(){return a._hide()});case"with":return Promise.all([a._hide(),b._show()]);default:var c=a._hide();return c?c.then(function(){return b._show()}):b._show()}},b}(d.IfCore),n=h(m.prototype,"condition",[k],{enumerable:!0,initializer:null}),o=h(m.prototype,"swapOrder",[b.bindable],{enumerable:!0,initializer:null}),l=m))||l)||l)||l)}.call(b,b,a("aurelia-templating"),a("aurelia-dependency-injection"),a("./if-core"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/if-core.js",[],!1,function(a,b,c){return function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.IfCore=function(){function a(a,b){this.viewFactory=a,this.viewSlot=b,this.view=null,this.bindingContext=null,this.overrideContext=null,this.showing=!1}return a.prototype.bind=function(a,b){this.bindingContext=a,this.overrideContext=b},a.prototype.unbind=function(){null!==this.view&&(this.view.unbind(),this.viewFactory.isCaching&&(this.showing?(this.showing=!1,this.viewSlot.remove(this.view,!0,!0)):this.view.returnToCache(),this.view=null))},a.prototype._show=function(){return this.showing?void(this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext)):(null===this.view&&(this.view=this.viewFactory.create()),this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext),this.showing=!0,this.viewSlot.add(this.view))},a.prototype._hide=function(){var a=this;if(this.showing){this.showing=!1;var b=this.viewSlot.remove(this.view);if(b instanceof Promise)return b.then(function(){return a.view.unbind()});this.view.unbind()}},a}()}.call(b,b,a)}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/else.js",["aurelia-templating","aurelia-dependency-injection","./if-core"],!1,function(a,b,c){return function(a,b,c,d){"use strict";function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0}),a.Else=void 0;var g,h,i;a.Else=(g=(0,b.customAttribute)("else"),h=(0,c.inject)(b.BoundViewFactory,b.ViewSlot),g(i=(0,b.templateController)(i=h(i=function(a){function b(b,c){var d=e(this,a.call(this,b,c));return d._registerInIf(),d}return f(b,a),b.prototype.bind=function(b,c){a.prototype.bind.call(this,b,c),this.ifVm.condition?this._hide():this._show()},b.prototype._registerInIf=function(){for(var a=this.viewSlot.anchor.previousSibling;a&&!a.au;)a=a.previousSibling;if(!a||!a.au.if)throw new Error("Can't find matching If for Else custom attribute.");this.ifVm=a.au.if.viewModel,this.ifVm.elseVm=this},b}(d.IfCore))||i)||i)||i)}.call(b,b,a("aurelia-templating"),a("aurelia-dependency-injection"),a("./if-core"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/with.js",["aurelia-dependency-injection","aurelia-templating","aurelia-binding"],!1,function(a,b,c){return function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.With=void 0;var e,f,g;a.With=(e=(0,c.customAttribute)("with"),f=(0,b.inject)(c.BoundViewFactory,c.ViewSlot),e(g=(0,c.templateController)(g=f(g=function(){function a(a,b){this.viewFactory=a,this.viewSlot=b,this.parentOverrideContext=null,this.view=null}return a.prototype.bind=function(a,b){this.parentOverrideContext=b,this.valueChanged(this.value)},a.prototype.valueChanged=function(a){var b=(0,d.createOverrideContext)(a,this.parentOverrideContext);this.view?this.view.bind(a,b):(this.view=this.viewFactory.create(),this.view.bind(a,b),this.viewSlot.add(this.view))},a.prototype.unbind=function(){this.parentOverrideContext=null,this.view&&this.view.unbind()},a}())||g)||g)||g)}.call(b,b,a("aurelia-dependency-injection"),a("aurelia-templating"),a("aurelia-binding"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/repeat.js",["aurelia-dependency-injection","aurelia-binding","aurelia-templating","./repeat-strategy-locator","./repeat-utilities","./analyze-view-factory","./abstract-repeater"],!1,function(a,b,c){return function(a,b,c,d,e,f,g,h){"use strict";function i(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function l(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}Object.defineProperty(a,"__esModule",{value:!0}),a.Repeat=void 0;var m,n,o,p,q,r,s,t;a.Repeat=(m=(0,d.customAttribute)("repeat"),n=(0,b.inject)(d.BoundViewFactory,d.TargetInstruction,d.ViewSlot,d.ViewResources,c.ObserverLocator,e.RepeatStrategyLocator),m(o=(0,d.templateController)(o=n((p=function(a){function b(b,c,d,e,h,k){var l=j(this,a.call(this,{local:"item",viewsRequireLifecycle:(0,g.viewsRequireLifecycle)(b)}));return i(l,"items",q,l),i(l,"local",r,l),i(l,"key",s,l),i(l,"value",t,l),l.viewFactory=b,l.instruction=c,l.viewSlot=d,l.lookupFunctions=e.lookupFunctions,l.observerLocator=h,l.key="key",l.value="value",l.strategyLocator=k,l.ignoreMutation=!1,l.sourceExpression=(0,f.getItemsSourceExpression)(l.instruction,"repeat.for"),l.isOneTime=(0,f.isOneTime)(l.sourceExpression),l.viewsRequireLifecycle=(0,g.viewsRequireLifecycle)(b),l}return k(b,a),b.prototype.call=function(a,b){this[a](this.items,b)},b.prototype.bind=function(a,b){this.scope={bindingContext:a,overrideContext:b},this.matcherBinding=this._captureAndRemoveMatcherBinding(),this.itemsChanged()},b.prototype.unbind=function(){this.scope=null,this.items=null,this.matcherBinding=null,this.viewSlot.removeAll(!0,!0),this._unsubscribeCollection()},b.prototype._unsubscribeCollection=function(){this.collectionObserver&&(this.collectionObserver.unsubscribe(this.callContext,this),this.collectionObserver=null,this.callContext=null)},b.prototype.itemsChanged=function(){if(this._unsubscribeCollection(),this.scope){var a=this.items;if(this.strategy=this.strategyLocator.getStrategy(a),!this.strategy)throw new Error("Value for '"+this.sourceExpression+"' is non-repeatable");this.isOneTime||this._observeInnerCollection()||this._observeCollection(),this.strategy.instanceChanged(this,a)}},b.prototype._getInnerCollection=function(){var a=(0,f.unwrapExpression)(this.sourceExpression);return a?a.evaluate(this.scope,null):null},b.prototype.handleCollectionMutated=function(a,b){this.collectionObserver&&this.strategy.instanceMutated(this,a,b)},b.prototype.handleInnerCollectionMutated=function(a,b){var c=this;if(this.collectionObserver&&!this.ignoreMutation){this.ignoreMutation=!0;var d=this.sourceExpression.evaluate(this.scope,this.lookupFunctions);this.observerLocator.taskQueue.queueMicroTask(function(){return c.ignoreMutation=!1}),d===this.items?this.itemsChanged():this.items=d}},b.prototype._observeInnerCollection=function(){var a=this._getInnerCollection(),b=this.strategyLocator.getStrategy(a);return!!b&&(this.collectionObserver=b.getCollectionObserver(this.observerLocator,a),!!this.collectionObserver&&(this.callContext="handleInnerCollectionMutated",this.collectionObserver.subscribe(this.callContext,this),!0))},b.prototype._observeCollection=function(){var a=this.items;this.collectionObserver=this.strategy.getCollectionObserver(this.observerLocator,a),this.collectionObserver&&(this.callContext="handleCollectionMutated",this.collectionObserver.subscribe(this.callContext,this))},b.prototype._captureAndRemoveMatcherBinding=function(){if(this.viewFactory.viewFactory)for(var a=this.viewFactory.viewFactory.instructions,b=Object.keys(a),c=0;c<b.length;c++){var d=a[b[c]].expressions;if(d)for(var e=0;c<d.length;c++)if("matcher"===d[e].targetProperty){var f=d[e];return d.splice(e,1),f}}},b.prototype.viewCount=function(){return this.viewSlot.children.length},b.prototype.views=function(){return this.viewSlot.children},b.prototype.view=function(a){return this.viewSlot.children[a]},b.prototype.matcher=function(){return this.matcherBinding?this.matcherBinding.sourceExpression.evaluate(this.scope,this.matcherBinding.lookupFunctions):null},b.prototype.addView=function(a,b){var c=this.viewFactory.create();c.bind(a,b),this.viewSlot.add(c)},b.prototype.insertView=function(a,b,c){var d=this.viewFactory.create();d.bind(b,c),this.viewSlot.insert(a,d)},b.prototype.moveView=function(a,b){this.viewSlot.move(a,b)},b.prototype.removeAllViews=function(a,b){return this.viewSlot.removeAll(a,b)},b.prototype.removeViews=function(a,b,c){return this.viewSlot.removeMany(a,b,c)},b.prototype.removeView=function(a,b,c){return this.viewSlot.removeAt(a,b,c)},b.prototype.updateBindings=function(a){for(var b=a.bindings.length;b--;)(0,f.updateOneTimeBinding)(a.bindings[b]);for(b=a.controllers.length;b--;)for(var c=a.controllers[b].boundProperties.length;c--;){var d=a.controllers[b].boundProperties[c].binding;(0,f.updateOneTimeBinding)(d)}},b}(h.AbstractRepeater),q=l(p.prototype,"items",[d.bindable],{enumerable:!0,initializer:null}),r=l(p.prototype,"local",[d.bindable],{enumerable:!0,initializer:null}),s=l(p.prototype,"key",[d.bindable],{enumerable:!0,initializer:null}),t=l(p.prototype,"value",[d.bindable],{enumerable:!0,initializer:null}),o=p))||o)||o)||o)}.call(b,b,a("aurelia-dependency-injection"),a("aurelia-binding"),a("aurelia-templating"),a("./repeat-strategy-locator"),a("./repeat-utilities"),a("./analyze-view-factory"),a("./abstract-repeater"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/show.js",["aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],!1,function(a,b,c){return function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Show=void 0;var f,g,h;a.Show=(f=(0,c.customAttribute)("show"),g=(0,b.inject)(d.DOM.Element,c.Animator,b.Optional.of(d.DOM.boundary,!0)),f(h=g(h=function(){function a(a,b,c){this.element=a,this.animator=b,this.domBoundary=c}return a.prototype.created=function(){(0,e.injectAureliaHideStyleAtBoundary)(this.domBoundary)},a.prototype.valueChanged=function(a){a?this.animator.removeClass(this.element,e.aureliaHideClassName):this.animator.addClass(this.element,e.aureliaHideClassName)},a.prototype.bind=function(a){this.valueChanged(this.value)},a}())||h)||h)}.call(b,b,a("aurelia-dependency-injection"),a("aurelia-templating"),a("aurelia-pal"),a("./aurelia-hide-style"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/hide.js",["aurelia-dependency-injection","aurelia-templating","aurelia-pal","./aurelia-hide-style"],!1,function(a,b,c){return function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Hide=void 0;var f,g,h;a.Hide=(f=(0,c.customAttribute)("hide"),g=(0,b.inject)(d.DOM.Element,c.Animator,b.Optional.of(d.DOM.boundary,!0)),f(h=g(h=function(){function a(a,b,c){this.element=a,this.animator=b,this.domBoundary=c}return a.prototype.created=function(){(0,e.injectAureliaHideStyleAtBoundary)(this.domBoundary)},a.prototype.valueChanged=function(a){a?this.animator.addClass(this.element,e.aureliaHideClassName):this.animator.removeClass(this.element,e.aureliaHideClassName)},a.prototype.bind=function(a){this.valueChanged(this.value)},a}())||h)||h)}.call(b,b,a("aurelia-dependency-injection"),a("aurelia-templating"),a("aurelia-pal"),a("./aurelia-hide-style"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/sanitize-html.js",["aurelia-binding","aurelia-dependency-injection","./html-sanitizer"],!1,function(a,b,c){return function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SanitizeHTMLValueConverter=void 0;var e,f,g;a.SanitizeHTMLValueConverter=(e=(0,b.valueConverter)("sanitizeHTML"),f=(0,c.inject)(d.HTMLSanitizer),e(g=f(g=function(){function a(a){this.sanitizer=a}return a.prototype.toView=function(a){return null===a||void 0===a?null:this.sanitizer.sanitize(a)},a}())||g)||g)}.call(b,b,a("aurelia-binding"),a("aurelia-dependency-injection"),a("./html-sanitizer"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/replaceable.js",["aurelia-dependency-injection","aurelia-templating"],!1,function(a,b,c){return function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Replaceable=void 0;var d,e,f;a.Replaceable=(d=(0,c.customAttribute)("replaceable"),e=(0,b.inject)(c.BoundViewFactory,c.ViewSlot),d(f=(0,c.templateController)(f=e(f=function(){function a(a,b){this.viewFactory=a,this.viewSlot=b,this.view=null}return a.prototype.bind=function(a,b){null===this.view&&(this.view=this.viewFactory.create(),this.viewSlot.add(this.view)),this.view.bind(a,b)},a.prototype.unbind=function(){this.view.unbind()},a}())||f)||f)||f)}.call(b,b,a("aurelia-dependency-injection"),a("aurelia-templating"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/focus.js",["aurelia-templating","aurelia-binding","aurelia-dependency-injection","aurelia-task-queue","aurelia-pal"],!1,function(a,b,c){return function(a,b,c,d,e,f){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Focus=void 0;var g,h,i;a.Focus=(g=(0,b.customAttribute)("focus",c.bindingMode.twoWay),h=(0,d.inject)(f.DOM.Element,e.TaskQueue),g(i=h(i=function(){function a(a,b){this.element=a,this.taskQueue=b,this.isAttached=!1,this.needsApply=!1}return a.prototype.valueChanged=function(a){this.isAttached?this._apply():this.needsApply=!0},a.prototype._apply=function(){var a=this;this.value?this.taskQueue.queueMicroTask(function(){a.value&&a.element.focus()}):this.element.blur()},a.prototype.attached=function(){this.isAttached=!0,this.needsApply&&(this.needsApply=!1,this._apply()),this.element.addEventListener("focus",this),this.element.addEventListener("blur",this)},a.prototype.detached=function(){this.isAttached=!1,this.element.removeEventListener("focus",this),this.element.removeEventListener("blur",this)},a.prototype.handleEvent=function(a){"focus"===a.type?this.value=!0:f.DOM.activeElement!==this.element&&(this.value=!1)},a}())||i)||i)}.call(b,b,a("aurelia-templating"),a("aurelia-binding"),a("aurelia-dependency-injection"),a("aurelia-task-queue"),a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/css-resource.js",["aurelia-templating","aurelia-loader","aurelia-dependency-injection","aurelia-path","aurelia-pal"],!1,function(a,b,c){return function(a,b,c,d,e,f){"use strict";function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b){if("string"!=typeof b)throw new Error("Failed loading required CSS file: "+a);return b.replace(k,function(b,c){var d=c.charAt(0);return"'"!==d&&'"'!==d||(c=c.substr(1,c.length-2)),"url('"+(0,e.relativeToFile)(c,a)+"')"})}function j(a){var c;return(0,b.resource)(new l(a))(c=function(a){function b(){return g(this,a.apply(this,arguments))}return h(b,a),b}(m))||c}Object.defineProperty(a,"__esModule",{value:!0}),a._createCSSResource=j;var k=/url\((?!['"]data)([^)]+)\)/gi,l=function(){function a(a){this.address=a,this._scoped=null,this._global=!1,this._alreadyGloballyInjected=!1}return a.prototype.initialize=function(a,b){this._scoped=new b(this)},a.prototype.register=function(a,b){"scoped"===b?a.registerViewEngineHooks(this._scoped):this._global=!0},a.prototype.load=function(a){var b=this;return a.get(c.Loader).loadText(this.address).catch(function(a){return null}).then(function(a){a=i(b.address,a),b._scoped.css=a,b._global&&(b._alreadyGloballyInjected=!0,f.DOM.injectStyles(a))})},a}(),m=function(){function a(a){this.owner=a,this.css=null}return a.prototype.beforeCompile=function(a,b,c){if(c.targetShadowDOM)f.DOM.injectStyles(this.css,a,!0);else if(f.FEATURE.scopedCSS){var d=f.DOM.injectStyles(this.css,a,!0);d.setAttribute("scoped","scoped")}else this._global&&!this.owner._alreadyGloballyInjected&&(f.DOM.injectStyles(this.css),this.owner._alreadyGloballyInjected=!0)},a}()}.call(b,b,a("aurelia-templating"),a("aurelia-loader"),a("aurelia-dependency-injection"),a("aurelia-path"),a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/html-sanitizer.js",[],!1,function(a,b,c){return function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;a.HTMLSanitizer=function(){function a(){}return a.prototype.sanitize=function(a){return a.replace(b,"")},a}()}.call(b,b,a)}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/attr-binding-behavior.js",["aurelia-binding"],!1,function(a,b,c){return function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AttrBindingBehavior=void 0;a.AttrBindingBehavior=function(){function a(){}return a.prototype.bind=function(a,c){a.targetObserver=new b.DataAttributeObserver(a.target,a.targetProperty)},a.prototype.unbind=function(a,b){},a}()}.call(b,b,a("aurelia-binding"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/binding-mode-behaviors.js",["aurelia-binding","aurelia-metadata"],!1,function(a,b,c){return function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.TwoWayBindingBehavior=a.OneWayBindingBehavior=a.OneTimeBindingBehavior=void 0;var d,e,f,g={bind:function(a,b,c){a.originalMode=a.mode,a.mode=this.mode},unbind:function(a,b){a.mode=a.originalMode,a.originalMode=null}};a.OneTimeBindingBehavior=(0,c.mixin)(g)(d=function(){this.mode=b.bindingMode.oneTime})||d,a.OneWayBindingBehavior=(0,c.mixin)(g)(e=function(){this.mode=b.bindingMode.oneWay})||e,a.TwoWayBindingBehavior=(0,c.mixin)(g)(f=function(){this.mode=b.bindingMode.twoWay})||f}.call(b,b,a("aurelia-binding"),a("aurelia-metadata"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/throttle-binding-behavior.js",["aurelia-binding"],!1,function(a,b,c){return function(a,b){"use strict";function c(a){var b=this,c=this.throttleState,d=+new Date-c.last;if(d>=c.delay)return clearTimeout(c.timeoutId),c.timeoutId=null,c.last=+new Date,void this.throttledMethod(a);c.newValue=a,null===c.timeoutId&&(c.timeoutId=setTimeout(function(){c.timeoutId=null,c.last=+new Date,b.throttledMethod(c.newValue)},c.delay-d))}Object.defineProperty(a,"__esModule",{value:!0}),a.ThrottleBindingBehavior=void 0;a.ThrottleBindingBehavior=function(){function a(){}return a.prototype.bind=function(a,d){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,f="updateTarget";a.callSource?f="callSource":a.updateSource&&a.mode===b.bindingMode.twoWay&&(f="updateSource"),a.throttledMethod=a[f],a.throttledMethod.originalName=f,a[f]=c,a.throttleState={delay:e,last:0,timeoutId:null}},a.prototype.unbind=function(a,b){a[a.throttledMethod.originalName]=a.throttledMethod,a.throttledMethod=null,clearTimeout(a.throttleState.timeoutId),a.throttleState=null},a}()}.call(b,b,a("aurelia-binding"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/debounce-binding-behavior.js",["aurelia-binding"],!1,function(a,b,c){return function(a,b){"use strict";function c(a){var b=this,c=this.debounceState;clearTimeout(c.timeoutId),c.timeoutId=setTimeout(function(){return b.debouncedMethod(a)},c.delay)}function d(a,b,c){var d=this,f=this.debounceState;if(clearTimeout(f.timeoutId),a!==f.callContextToDebounce)return f.oldValue=e,void this.debouncedMethod(a,b,c);f.oldValue===e&&(f.oldValue=c),f.timeoutId=setTimeout(function(){var c=f.oldValue;f.oldValue=e,d.debouncedMethod(a,b,c)},f.delay)}Object.defineProperty(a,"__esModule",{value:!0}),a.DebounceBindingBehavior=void 0;var e={};a.DebounceBindingBehavior=function(){function a(){}return a.prototype.bind=function(a,f){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,h=void 0!==a.callSource,i=h?"callSource":"call",j=h?c:d,k=a.mode,l=k===b.bindingMode.twoWay||k===b.bindingMode.fromView?b.targetContext:b.sourceContext;a.debouncedMethod=a[i],a.debouncedMethod.originalName=i,a[i]=j,a.debounceState={callContextToDebounce:l,delay:g,timeoutId:0,oldValue:e}},a.prototype.unbind=function(a,b){a[a.debouncedMethod.originalName]=a.debouncedMethod,a.debouncedMethod=null,clearTimeout(a.debounceState.timeoutId),a.debounceState=null},a}()}.call(b,b,a("aurelia-binding"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/self-binding-behavior.js",[],!1,function(a,b,c){return function(a){"use strict";function b(a){return a.path&&a.path[0]||a.deepPath&&a.deepPath[0]||a.target}function c(a){var c=b(a);this.target===c&&this.selfEventCallSource(a)}Object.defineProperty(a,"__esModule",{value:!0});a.SelfBindingBehavior=function(){function a(){}return a.prototype.bind=function(a,b){if(!a.callSource||!a.targetEvent)throw new Error("Self binding behavior only supports event.");a.selfEventCallSource=a.callSource,a.callSource=c},a.prototype.unbind=function(a,b){a.callSource=a.selfEventCallSource,a.selfEventCallSource=null},a}()}.call(b,b,a)}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/signal-binding-behavior.js",["./binding-signaler"],!1,function(a,b,c){return function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SignalBindingBehavior=void 0;a.SignalBindingBehavior=function(){function a(a){this.signals=a.signals}return a.inject=function(){return[b.BindingSignaler]},a.prototype.bind=function(a,b){if(!a.updateTarget)throw new Error("Only property bindings and string interpolation bindings can be signaled.  Trigger, delegate and call bindings cannot be signaled.");if(3===arguments.length){var c=arguments[2];(this.signals[c]||(this.signals[c]=[])).push(a),a.signalName=c}else{if(!(arguments.length>3))throw new Error("Signal name is required.");for(var d=Array.prototype.slice.call(arguments,2),e=d.length;e--;){var f=d[e];(this.signals[f]||(this.signals[f]=[])).push(a)}a.signalName=d}},a.prototype.unbind=function(a,b){var c=a.signalName;if(a.signalName=null,Array.isArray(c))for(var d=c,e=d.length;e--;){var f=d[e],g=this.signals[f];g.splice(g.indexOf(a),1)}else{var h=this.signals[c];h.splice(h.indexOf(a),1)}},a}()}.call(b,b,a("./binding-signaler"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/binding-signaler.js",["aurelia-binding"],!1,function(a,b,c){return function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.BindingSignaler=void 0;a.BindingSignaler=function(){function a(){this.signals={}}return a.prototype.signal=function(a){var c=this.signals[a];if(c)for(var d=c.length;d--;)c[d].call(b.sourceContext)},a}()}.call(b,b,a("aurelia-binding"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/update-trigger-binding-behavior.js",["aurelia-binding"],!1,function(a,b,c){return function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.UpdateTriggerBindingBehavior=void 0;var c="The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">",d="The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.";a.UpdateTriggerBindingBehavior=function(){function a(){}return a.prototype.bind=function(a,e){for(var f=arguments.length,g=Array(f>2?f-2:0),h=2;h<f;h++)g[h-2]=arguments[h];if(0===g.length)throw new Error(c);if(a.mode!==b.bindingMode.twoWay&&a.mode!==b.bindingMode.fromView)throw new Error(d);var i=a.observerLocator.getObserver(a.target,a.targetProperty);if(!i.handler)throw new Error(d);a.targetObserver=i,i.originalHandler=a.targetObserver.handler;var j=new b.EventSubscriber(g);i.handler=j},a.prototype.unbind=function(a,b){a.targetObserver.handler.dispose(),a.targetObserver.handler=a.targetObserver.originalHandler,a.targetObserver.originalHandler=null},a}()}.call(b,b,a("aurelia-binding"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/abstract-repeater.js",[],!1,function(a,b,c){return function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.AbstractRepeater=function(){function a(a){Object.assign(this,{local:"items",viewsRequireLifecycle:!0},a)}return a.prototype.viewCount=function(){throw new Error("subclass must implement `viewCount`")},a.prototype.views=function(){throw new Error("subclass must implement `views`")},a.prototype.view=function(a){throw new Error("subclass must implement `view`")},a.prototype.matcher=function(){throw new Error("subclass must implement `matcher`")},a.prototype.addView=function(a,b){throw new Error("subclass must implement `addView`")},a.prototype.insertView=function(a,b,c){throw new Error("subclass must implement `insertView`")},a.prototype.moveView=function(a,b){throw new Error("subclass must implement `moveView`")},a.prototype.removeAllViews=function(a,b){throw new Error("subclass must implement `removeAllViews`")},a.prototype.removeViews=function(a,b,c){throw new Error("subclass must implement `removeView`")},a.prototype.removeView=function(a,b,c){throw new Error("subclass must implement `removeView`")},a.prototype.updateBindings=function(a){throw new Error("subclass must implement `updateBindings`")},a}()}.call(b,b,a)}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/repeat-strategy-locator.js",["./null-repeat-strategy","./array-repeat-strategy","./map-repeat-strategy","./set-repeat-strategy","./number-repeat-strategy"],!1,function(a,b,c){return function(a,b,c,d,e,f){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.RepeatStrategyLocator=void 0;a.RepeatStrategyLocator=function(){function a(){this.matchers=[],this.strategies=[],this.addStrategy(function(a){return null===a||void 0===a},new b.NullRepeatStrategy),this.addStrategy(function(a){return a instanceof Array},new c.ArrayRepeatStrategy),this.addStrategy(function(a){return a instanceof Map},new d.MapRepeatStrategy),this.addStrategy(function(a){return a instanceof Set},new e.SetRepeatStrategy),this.addStrategy(function(a){return"number"==typeof a},new f.NumberRepeatStrategy)}return a.prototype.addStrategy=function(a,b){this.matchers.push(a),this.strategies.push(b)},a.prototype.getStrategy=function(a){for(var b=this.matchers,c=0,d=b.length;c<d;++c)if(b[c](a))return this.strategies[c];return null},a}()}.call(b,b,a("./null-repeat-strategy"),a("./array-repeat-strategy"),a("./map-repeat-strategy"),a("./set-repeat-strategy"),a("./number-repeat-strategy"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/dynamic-element.js",["aurelia-templating"],!1,function(a,b,c){return function(a,b){"use strict";function c(a,c,d){for(var e,f,g,h=(e=(0,b.customElement)(a),f=(0,b.useView)(c),e(g=f(g=function(){function a(){}return a.prototype.bind=function(a){this.$parent=a},a}())||g)||g),i=0,j=d.length;i<j;++i)(0,b.bindable)(d[i])(h);return h}Object.defineProperty(a,"__esModule",{value:!0}),a._createDynamicElement=c}.call(b,b,a("aurelia-templating"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/html-resource-plugin.js",["aurelia-templating","./dynamic-element"],!1,function(a,b,c){return function(a,b,c){"use strict";function d(a){return/([^\/^\?]+)\.html/i.exec(a)[1].toLowerCase()}function e(a){var e=a.container.get(b.ViewEngine),f=a.aurelia.loader;e.addResourcePlugin(".html",{fetch:function(a){return f.loadTemplate(a).then(function(b){var e,f=b.template.getAttribute("bindable"),g=d(a);return f?(f=f.split(",").map(function(a){return a.trim()}),b.template.removeAttribute("bindable")):f=[],e={},e[g]=(0,c._createDynamicElement)(g,a,f),e})}})}Object.defineProperty(a,"__esModule",{value:!0}),a.getElementName=d,a.configure=e}.call(b,b,a("aurelia-templating"),a("./dynamic-element"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/null-repeat-strategy.js",[],!1,function(a,b,c){return function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.NullRepeatStrategy=function(){function a(){}return a.prototype.instanceChanged=function(a,b){a.removeAllViews(!0)},a.prototype.getCollectionObserver=function(a,b){},a}()}.call(b,b,a)}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/array-repeat-strategy.js",["./repeat-utilities","aurelia-binding"],!1,function(a,b,c){return function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ArrayRepeatStrategy=void 0;a.ArrayRepeatStrategy=function(){function a(){}return a.prototype.getCollectionObserver=function(a,b){return a.getArrayObserver(b)},a.prototype.instanceChanged=function(a,c){var d=this,e=c.length;if(!c||0===e)return void a.removeAllViews(!0,!a.viewsRequireLifecycle);var f=a.views(),g=f.length;if(0===g)return void this._standardProcessInstanceChanged(a,c);if(a.viewsRequireLifecycle){for(var h=f.slice(0),i=a.local,j=a.matcher(),k=[],l=[],m=0;m<g;m++){var n=h[m],o=n.bindingContext[i];-1===(0,b.indexOf)(c,o,j)?l.push(n):k.push(o)}var p=void 0,q=void 0;k.length>0?(q=a.removeViews(l,!0,!a.viewsRequireLifecycle),p=function(){for(var g=0;g<e;g++){var h=c[g],i=(0,b.indexOf)(k,h,j,g),l=void 0;if(-1===i){var m=(0,b.createFullOverrideContext)(a,c[g],g,e);a.insertView(g,m.bindingContext,m),k.splice(g,0,void 0)}else i===g?(l=f[i],k[i]=void 0):(l=f[i],a.moveView(i,g),k.splice(i,1),k.splice(g,0,void 0));l&&(0,b.updateOverrideContext)(l.overrideContext,g,e)}d._inPlaceProcessItems(a,c)}):(q=a.removeAllViews(!0,!a.viewsRequireLifecycle),p=function(){return d._standardProcessInstanceChanged(a,c)}),q instanceof Promise?q.then(p):p()}else this._inPlaceProcessItems(a,c)},a.prototype._standardProcessInstanceChanged=function(a,c){for(var d=0,e=c.length;d<e;d++){var f=(0,b.createFullOverrideContext)(a,c[d],d,e);a.addView(f.bindingContext,f)}},a.prototype._inPlaceProcessItems=function(a,c){for(var d=c.length,e=a.viewCount();e>d;)e--,a.removeView(e,!0,!a.viewsRequireLifecycle);for(var f=a.local,g=0;g<e;g++){var h=a.view(g),i=g===d-1,j=0!==g&&!i;h.bindingContext[f]===c[g]&&h.overrideContext.$middle===j&&h.overrideContext.$last===i||(h.bindingContext[f]=c[g],h.overrideContext.$middle=j,h.overrideContext.$last=i,a.updateBindings(h))}for(var k=e;k<d;k++){var l=(0,b.createFullOverrideContext)(a,c[k],k,d);a.addView(l.bindingContext,l)}},a.prototype.instanceMutated=function(a,b,d){var e=this;if(a.__queuedSplices){for(var f=0,g=d.length;f<g;++f){var h=d[f],i=h.index,j=h.removed,k=h.addedCount;(0,c.mergeSplice)(a.__queuedSplices,i,j,k)}return void(a.__array=b.slice(0))}var l=this._runSplices(a,b.slice(0),d);if(l instanceof Promise){var m=a.__queuedSplices=[],n=function b(){if(!m.length)return a.__queuedSplices=void 0,void(a.__array=void 0);var c=e._runSplices(a,a.__array,m)||Promise.resolve();m=a.__queuedSplices=[],c.then(b)};l.then(n)}},a.prototype._runSplices=function(a,c,d){for(var e=this,f=0,g=[],h=0,i=d.length;h<i;++h){for(var j=d[h],k=j.removed,l=0,m=k.length;l<m;++l){var n=a.removeView(j.index+f+g.length,!0);n instanceof Promise&&g.push(n)}f-=j.addedCount}if(g.length>0)return Promise.all(g).then(function(){var f=e._handleAddedSplices(a,c,d);(0,b.updateOverrideContexts)(a.views(),f)});var o=this._handleAddedSplices(a,c,d);(0,b.updateOverrideContexts)(a.views(),o)},a.prototype._handleAddedSplices=function(a,c,d){for(var e=void 0,f=void 0,g=c.length,h=0,i=d.length;h<i;++h){var j=d[h],k=e=j.index,l=j.index+j.addedCount;for((void 0===f||null===f||f>j.index)&&(f=e);k<l;++k){var m=(0,b.createFullOverrideContext)(a,c[k],k,g);a.insertView(k,m.bindingContext,m)}}return f},a}()}.call(b,b,a("./repeat-utilities"),a("aurelia-binding"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/map-repeat-strategy.js",["./repeat-utilities"],!1,function(a,b,c){return function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MapRepeatStrategy=void 0;a.MapRepeatStrategy=function(){function a(){}return a.prototype.getCollectionObserver=function(a,b){return a.getMapObserver(b)},a.prototype.instanceChanged=function(a,b){var c=this,d=a.removeAllViews(!0,!a.viewsRequireLifecycle);if(d instanceof Promise)return void d.then(function(){return c._standardProcessItems(a,b)});this._standardProcessItems(a,b)},a.prototype._standardProcessItems=function(a,c){var d=0,e=void 0;c.forEach(function(f,g){e=(0,b.createFullOverrideContext)(a,f,d,c.size,g),a.addView(e.bindingContext,e),++d})},a.prototype.instanceMutated=function(a,c,d){var e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=[],m=void 0;for(f=0,g=d.length;f<g;++f)switch(k=d[f],e=k.key,k.type){case"update":i=this._getViewIndexByKey(a,e),m=a.removeView(i,!0,!a.viewsRequireLifecycle),m instanceof Promise&&l.push(m),h=(0,b.createFullOverrideContext)(a,c.get(e),i,c.size,e),a.insertView(i,h.bindingContext,h);break;case"add":j=a.viewCount()<=c.size-1?a.viewCount():c.size-1,h=(0,b.createFullOverrideContext)(a,c.get(e),j,c.size,e),a.insertView(c.size-1,h.bindingContext,h);break;case"delete":if(void 0===k.oldValue)return;i=this._getViewIndexByKey(a,e),m=a.removeView(i,!0,!a.viewsRequireLifecycle),m instanceof Promise&&l.push(m);break;case"clear":a.removeAllViews(!0,!a.viewsRequireLifecycle);break;default:continue}l.length>0?Promise.all(l).then(function(){(0,b.updateOverrideContexts)(a.views(),0)}):(0,b.updateOverrideContexts)(a.views(),0)},a.prototype._getViewIndexByKey=function(a,b){var c=void 0,d=void 0,e=void 0;for(c=0,d=a.viewCount();c<d;++c)if(e=a.view(c),e.bindingContext[a.key]===b)return c},a}()}.call(b,b,a("./repeat-utilities"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/set-repeat-strategy.js",["./repeat-utilities"],!1,function(a,b,c){return function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SetRepeatStrategy=void 0;a.SetRepeatStrategy=function(){function a(){}return a.prototype.getCollectionObserver=function(a,b){return a.getSetObserver(b)},a.prototype.instanceChanged=function(a,b){var c=this,d=a.removeAllViews(!0,!a.viewsRequireLifecycle);if(d instanceof Promise)return void d.then(function(){return c._standardProcessItems(a,b)});this._standardProcessItems(a,b)},a.prototype._standardProcessItems=function(a,c){var d=0,e=void 0;c.forEach(function(f){e=(0,b.createFullOverrideContext)(a,f,d,c.size),a.addView(e.bindingContext,e),++d})},a.prototype.instanceMutated=function(a,c,d){var e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=[],l=void 0;for(f=0,g=d.length;f<g;++f)switch(j=d[f],e=j.value,j.type){case"add":var m=Math.max(c.size-1,0);h=(0,b.createFullOverrideContext)(a,e,m,c.size),a.insertView(m,h.bindingContext,h);break;case"delete":i=this._getViewIndexByValue(a,e),l=a.removeView(i,!0,!a.viewsRequireLifecycle),l instanceof Promise&&k.push(l);break;case"clear":a.removeAllViews(!0,!a.viewsRequireLifecycle);break;default:continue}k.length>0?Promise.all(k).then(function(){(0,b.updateOverrideContexts)(a.views(),0)}):(0,b.updateOverrideContexts)(a.views(),0)},a.prototype._getViewIndexByValue=function(a,b){var c=void 0,d=void 0,e=void 0;for(c=0,d=a.viewCount();c<d;++c)if(e=a.view(c),e.bindingContext[a.local]===b)return c},a}()}.call(b,b,a("./repeat-utilities"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/number-repeat-strategy.js",["./repeat-utilities"],!1,function(a,b,c){return function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.NumberRepeatStrategy=void 0;a.NumberRepeatStrategy=function(){function a(){}return a.prototype.getCollectionObserver=function(){return null},a.prototype.instanceChanged=function(a,b){var c=this,d=a.removeAllViews(!0,!a.viewsRequireLifecycle);if(d instanceof Promise)return void d.then(function(){return c._standardProcessItems(a,b)});this._standardProcessItems(a,b)},a.prototype._standardProcessItems=function(a,c){var d=a.viewCount(),e=void 0,f=void 0,g=void 0,h=void 0;if(c=Math.floor(c),(h=d-c)>0)for(h>d&&(h=d),e=0,f=h;e<f;++e)a.removeView(d-(e+1),!0,!a.viewsRequireLifecycle);else{for(e=d,f=c;e<f;++e)g=(0,b.createFullOverrideContext)(a,e,e,f),a.addView(g.bindingContext,g);(0,b.updateOverrideContexts)(a.views(),0)}},a}()}.call(b,b,a("./repeat-utilities"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/repeat-utilities.js",["aurelia-binding"],!1,function(a,b,c){return function(a,b){"use strict";function c(a,b){var c=a.length;for(b>0&&(b-=1);b<c;++b)e(a[b].overrideContext,b,c)}function d(a,c,d,f,g){var h={},i=(0,b.createOverrideContext)(h,a.scope.overrideContext);return void 0!==g?(h[a.key]=g,h[a.value]=c):h[a.local]=c,e(i,d,f),i}function e(a,b,c){var d=0===b,e=b===c-1,f=b%2==0;a.$index=b,a.$first=d,a.$last=e,a.$middle=!(d||e),a.$odd=!f,a.$even=f}function f(a,b){return a.behaviorInstructions.filter(function(a){return a.originalAttrName===b})[0].attributes.items.sourceExpression}function g(a){for(var c=!1;a instanceof b.BindingBehavior;)a=a.expression;for(;a instanceof b.ValueConverter;)a=a.expression,c=!0;return c?a:null}function h(a){for(;a instanceof b.BindingBehavior;){if("oneTime"===a.name)return!0;a=a.expression}return!1}function i(a){a.call&&a.mode===k?a.call(b.sourceContext):a.updateOneTimeBindings&&a.updateOneTimeBindings()}function j(a,b,c,d){if(!c)return a.indexOf(b);for(var e=a.length,f=d||0;f<e;f++)if(c(a[f],b))return f;return-1}Object.defineProperty(a,"__esModule",{value:!0}),a.updateOverrideContexts=c,a.createFullOverrideContext=d,a.updateOverrideContext=e,a.getItemsSourceExpression=f,a.unwrapExpression=g,a.isOneTime=h,a.updateOneTimeBinding=i,a.indexOf=j;var k=b.bindingMode.oneTime}.call(b,b,a("aurelia-binding"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/analyze-view-factory.js",[],!1,function(a,b,c){return function(a){"use strict";function b(a){var b=a.type,c=null!==b.elementName?b.elementName:b.attributeName;return-1===e.indexOf(c)&&(b.handlesAttached||b.handlesBind||b.handlesCreated||b.handlesDetached||b.handlesUnbind)||b.viewFactory&&d(b.viewFactory)||a.viewFactory&&d(a.viewFactory)}function c(a){var c=a.behaviorInstructions;if(c)for(var e=c.length;e--;)if(b(c[e]))return!0;return a.viewFactory&&d(a.viewFactory)}function d(a){if("_viewsRequireLifecycle"in a)return a._viewsRequireLifecycle;if(a._viewsRequireLifecycle=!1,a.viewFactory)return a._viewsRequireLifecycle=d(a.viewFactory),a._viewsRequireLifecycle;if(a.template.querySelector(".au-animate"))return a._viewsRequireLifecycle=!0,!0;for(var b in a.instructions)if(c(a.instructions[b]))return a._viewsRequireLifecycle=!0,!0;return a._viewsRequireLifecycle=!1,!1}Object.defineProperty(a,"__esModule",{value:!0}),a.viewsRequireLifecycle=d;var e=a.lifecycleOptionalBehaviors=["focus","if","else","repeat","show","hide","with"]}.call(b,b,a)}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/aurelia-hide-style.js",["aurelia-pal"],!1,function(a,b,c){return function(a,b){"use strict";function c(){b.DOM.injectStyles(f)}function d(a){b.FEATURE.shadowDOM&&a&&!a.hasAureliaHideStyle&&(a.hasAureliaHideStyle=!0,b.DOM.injectStyles(f,a))}Object.defineProperty(a,"__esModule",{value:!0}),a.aureliaHideClassName=void 0,a.injectAureliaHideStyleAtHead=c,a.injectAureliaHideStyleAtBoundary=d;var e=a.aureliaHideClassName="aurelia-hide",f="."+e+" { display:none !important; }"}.call(b,b,a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0/aurelia-templating-resources.js",["aurelia-pal","./compose","./if","./else","./with","./repeat","./show","./hide","./sanitize-html","./replaceable","./focus","aurelia-templating","./css-resource","./html-sanitizer","./attr-binding-behavior","./binding-mode-behaviors","./throttle-binding-behavior","./debounce-binding-behavior","./self-binding-behavior","./signal-binding-behavior","./binding-signaler","./update-trigger-binding-behavior","./abstract-repeater","./repeat-strategy-locator","./html-resource-plugin","./null-repeat-strategy","./array-repeat-strategy","./map-repeat-strategy","./set-repeat-strategy","./number-repeat-strategy","./repeat-utilities","./analyze-view-factory","./aurelia-hide-style"],!1,function(a,b,c){return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H){"use strict";function I(a){(0,H.injectAureliaHideStyleAtHead)(),a.globalResources(b.PLATFORM.moduleName("./compose"),b.PLATFORM.moduleName("./if"),b.PLATFORM.moduleName("./else"),b.PLATFORM.moduleName("./with"),b.PLATFORM.moduleName("./repeat"),b.PLATFORM.moduleName("./show"),b.PLATFORM.moduleName("./hide"),b.PLATFORM.moduleName("./replaceable"),b.PLATFORM.moduleName("./sanitize-html"),b.PLATFORM.moduleName("./focus"),b.PLATFORM.moduleName("./binding-mode-behaviors"),b.PLATFORM.moduleName("./self-binding-behavior"),b.PLATFORM.moduleName("./throttle-binding-behavior"),b.PLATFORM.moduleName("./debounce-binding-behavior"),b.PLATFORM.moduleName("./signal-binding-behavior"),b.PLATFORM.moduleName("./update-trigger-binding-behavior"),b.PLATFORM.moduleName("./attr-binding-behavior")),(0,z.configure)(a);var c=a.container.get(m.ViewEngine),d={fetch:function(a){var b;return b={},b[a]=(0,n._createCSSResource)(a),b}};[".css",".less",".sass",".scss",".styl"].forEach(function(a){return c.addResourcePlugin(a,d)})}Object.defineProperty(a,"__esModule",{value:!0}),a.viewsRequireLifecycle=a.unwrapExpression=a.updateOneTimeBinding=a.isOneTime=a.getItemsSourceExpression=a.updateOverrideContext=a.createFullOverrideContext=a.NumberRepeatStrategy=a.SetRepeatStrategy=a.MapRepeatStrategy=a.ArrayRepeatStrategy=a.NullRepeatStrategy=a.RepeatStrategyLocator=a.AbstractRepeater=a.UpdateTriggerBindingBehavior=a.BindingSignaler=a.SignalBindingBehavior=a.SelfBindingBehavior=a.DebounceBindingBehavior=a.ThrottleBindingBehavior=a.TwoWayBindingBehavior=a.OneWayBindingBehavior=a.OneTimeBindingBehavior=a.AttrBindingBehavior=a.configure=a.Focus=a.Replaceable=a.SanitizeHTMLValueConverter=a.HTMLSanitizer=a.Hide=a.Show=a.Repeat=a.With=a.Else=a.If=a.Compose=void 0,a.Compose=c.Compose,a.If=d.If,a.Else=e.Else,a.With=f.With,a.Repeat=g.Repeat,a.Show=h.Show,a.Hide=i.Hide,a.HTMLSanitizer=o.HTMLSanitizer,a.SanitizeHTMLValueConverter=j.SanitizeHTMLValueConverter,a.Replaceable=k.Replaceable,a.Focus=l.Focus,a.configure=I,a.AttrBindingBehavior=p.AttrBindingBehavior,a.OneTimeBindingBehavior=q.OneTimeBindingBehavior,a.OneWayBindingBehavior=q.OneWayBindingBehavior,a.TwoWayBindingBehavior=q.TwoWayBindingBehavior,a.ThrottleBindingBehavior=r.ThrottleBindingBehavior,a.DebounceBindingBehavior=s.DebounceBindingBehavior,a.SelfBindingBehavior=t.SelfBindingBehavior,a.SignalBindingBehavior=u.SignalBindingBehavior,a.BindingSignaler=v.BindingSignaler,a.UpdateTriggerBindingBehavior=w.UpdateTriggerBindingBehavior,a.AbstractRepeater=x.AbstractRepeater,a.RepeatStrategyLocator=y.RepeatStrategyLocator,a.NullRepeatStrategy=A.NullRepeatStrategy,a.ArrayRepeatStrategy=B.ArrayRepeatStrategy,a.MapRepeatStrategy=C.MapRepeatStrategy,a.SetRepeatStrategy=D.SetRepeatStrategy,a.NumberRepeatStrategy=E.NumberRepeatStrategy,a.createFullOverrideContext=F.createFullOverrideContext,a.updateOverrideContext=F.updateOverrideContext,a.getItemsSourceExpression=F.getItemsSourceExpression,a.isOneTime=F.isOneTime,a.updateOneTimeBinding=F.updateOneTimeBinding,a.unwrapExpression=F.unwrapExpression,a.viewsRequireLifecycle=G.viewsRequireLifecycle}.call(b,b,a("aurelia-pal"),a("./compose"),a("./if"),a("./else"),a("./with"),a("./repeat"),a("./show"),a("./hide"),a("./sanitize-html"),a("./replaceable"),a("./focus"),a("aurelia-templating"),a("./css-resource"),a("./html-sanitizer"),a("./attr-binding-behavior"),a("./binding-mode-behaviors"),a("./throttle-binding-behavior"),a("./debounce-binding-behavior"),a("./self-binding-behavior"),a("./signal-binding-behavior"),a("./binding-signaler"),a("./update-trigger-binding-behavior"),a("./abstract-repeater"),a("./repeat-strategy-locator"),a("./html-resource-plugin"),a("./null-repeat-strategy"),a("./array-repeat-strategy"),a("./map-repeat-strategy"),a("./set-repeat-strategy"),a("./number-repeat-strategy"),a("./repeat-utilities"),a("./analyze-view-factory"),a("./aurelia-hide-style"))}),System.registerDynamic("npm:aurelia-templating-resources@1.6.0.js",["npm:aurelia-templating-resources@1.6.0/aurelia-templating-resources"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-templating-resources@1.6.0/aurelia-templating-resources"))}),System.registerDynamic("npm:aurelia-templating-router@1.3.1/route-loader.js",["aurelia-dependency-injection","aurelia-templating","aurelia-router","aurelia-path","aurelia-metadata","./router-view"],!1,function(a,b,c){return function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function j(a){var b,d,e,f=/([^\/^\?]+)\.html/i.exec(a)[1];return b=(0,c.customElement)(f),d=(0,c.useView)(a),b(e=d(e=function(){function a(){}return a.prototype.bind=function(a){this.$parent=a},a}())||e)||e}Object.defineProperty(a,"__esModule",{value:!0}),a.TemplatingRouteLoader=void 0;var k,l,m,n,o=(k=(0,c.inlineView)("<template></template>"))(l=function(){})||l;a.TemplatingRouteLoader=(m=(0,b.inject)(c.CompositionEngine))(n=function(a){function b(b){var c=h(this,a.call(this));return c.compositionEngine=b,c}return i(b,a),b.prototype.loadRoute=function(a,b){var c=a.container.createChild(),h=void 0;h=null===b.moduleId?o:/\.html/i.test(b.moduleId)?j(b.moduleId):(0,e.relativeToFile)(b.moduleId,f.Origin.get(a.container.viewModel.constructor).moduleId),b=b||{};var i={viewModel:h,childContainer:c,view:b.view||b.viewStrategy,router:a};return c.registerSingleton(g.RouterViewLocator),c.getChildRouter=function(){var b=void 0;return c.registerHandler(d.Router,function(d){return b||(b=a.createChild(c))}),c.get(d.Router)},this.compositionEngine.ensureViewModel(i)},b}(d.RouteLoader))||n}.call(b,b,a("aurelia-dependency-injection"),a("aurelia-templating"),a("aurelia-router"),a("aurelia-path"),a("aurelia-metadata"),a("./router-view"))}),System.registerDynamic("npm:aurelia-templating-router@1.3.1/router-view.js",["aurelia-dependency-injection","aurelia-binding","aurelia-templating","aurelia-router","aurelia-metadata","aurelia-pal"],!1,function(a,b,c){return function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function i(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}Object.defineProperty(a,"__esModule",{value:!0}),a.RouterViewLocator=a.RouterView=void 0;var j,k,l,m,n,o,p,q,r=(a.RouterView=(j=(0,d.customElement)("router-view"),k=(0,b.inject)(g.DOM.Element,b.Container,d.ViewSlot,e.Router,d.ViewLocator,d.CompositionTransaction,d.CompositionEngine),j(l=(0,d.noView)(l=k((m=function(){function a(a,b,c,d,e,f,g){h(this,"swapOrder",n,this),h(this,"layoutView",o,this),h(this,"layoutViewModel",p,this),h(this,"layoutModel",q,this),this.element=a,this.container=b,this.viewSlot=c,this.router=d,this.viewLocator=e,this.compositionTransaction=f,this.compositionEngine=g,this.router.registerViewPort(this,this.element.getAttribute("name")),"initialComposition"in f||(f.initialComposition=!0,this.compositionTransactionNotifier=f.enlist())}return a.prototype.created=function(a){this.owningView=a},a.prototype.bind=function(a,b){this.container.viewModel=a,this.overrideContext=b},a.prototype.process=function(a,b){var c=this,e=a.component,g=e.childContainer,h=e.viewModel,i=e.viewModelResource,j=i.metadata,k=e.router.currentInstruction.config,l=k.viewPorts?k.viewPorts[a.name]||{}:{};g.get(r)._notify(this);var m={viewModel:l.layoutViewModel||k.layoutViewModel||this.layoutViewModel,view:l.layoutView||k.layoutView||this.layoutView,model:l.layoutModel||k.layoutModel||this.layoutModel,router:a.component.router,childContainer:g,viewSlot:this.viewSlot},n=this.viewLocator.getViewStrategy(e.view||h);return n&&e.view&&n.makeRelativeTo(f.Origin.get(e.router.container.viewModel.constructor).moduleId),j.load(g,i.value,null,n,!0).then(function(e){if(c.compositionTransactionNotifier||(c.compositionTransactionOwnershipToken=c.compositionTransaction.tryCapture()),(m.viewModel||m.view)&&(a.layoutInstruction=m),a.controller=j.create(g,d.BehaviorInstruction.dynamic(c.element,h,e)),b)return null;c.swap(a)})},a.prototype.swap=function(a){var b=this,e=a.layoutInstruction,f=this.view,g=function(){var a=d.SwapStrategies[b.swapOrder]||d.SwapStrategies.after,c=b.viewSlot;a(c,f,function(){return Promise.resolve(c.add(b.view))}).then(function(){b._notify()})},h=function(c){return a.controller.automate(b.overrideContext,c),b.compositionTransactionOwnershipToken?b.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return b.compositionTransactionOwnershipToken=null,g()}):g()};return e?(e.viewModel||(e.viewModel={}),this.compositionEngine.createController(e).then(function(f){return d.ShadowDOM.distributeView(a.controller.view,f.slots||f.view.slots),f.automate((0,c.createOverrideContext)(e.viewModel),b.owningView),f.view.children.push(a.controller.view),f.view||f}).then(function(a){return b.view=a,h(a)})):(this.view=a.controller.view,h(this.owningView))},a.prototype._notify=function(){this.compositionTransactionNotifier&&(this.compositionTransactionNotifier.done(),this.compositionTransactionNotifier=null)},a}(),n=i(m.prototype,"swapOrder",[d.bindable],{enumerable:!0,initializer:null}),o=i(m.prototype,"layoutView",[d.bindable],{enumerable:!0,initializer:null}),p=i(m.prototype,"layoutViewModel",[d.bindable],{enumerable:!0,initializer:null}),q=i(m.prototype,"layoutModel",[d.bindable],{enumerable:!0,initializer:null}),l=m))||l)||l)||l),a.RouterViewLocator=function(){function a(){var a=this;this.promise=new Promise(function(b){return a.resolve=b})}return a.prototype.findNearest=function(){return this.promise},a.prototype._notify=function(a){this.resolve(a)},a}())}.call(b,b,a("aurelia-dependency-injection"),a("aurelia-binding"),a("aurelia-templating"),a("aurelia-router"),a("aurelia-metadata"),a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-route-recognizer@1.1.1/aurelia-route-recognizer.js",["aurelia-path"],!1,function(a,b,c){return function(a,b){"use strict";function c(a,b,c,d){var e=a;"/"===a.charAt(0)&&(e=a.substr(1));for(var f=[],g=e.split("/"),h=0,i=g.length;h<i;++h){var j=g[h],o=j.match(/^:([^?]+)(\?)?$/);if(o){var p=o,q=p[1],r=p[2];if(-1!==q.indexOf("="))throw new Error("Parameter "+q+" in route "+a+" has a default value, which is not supported.");f.push(new l(q,!!r)),b.push(q),c.dynamics++}else o=j.match(/^\*(.+)$/),o?(f.push(new m(o[1])),b.push(o[1]),c.stars++):""===j?f.push(new n):(f.push(new k(j,d)),c.statics++)}return f}function d(a){return a.sort(function(a,b){if(a.types.stars!==b.types.stars)return a.types.stars-b.types.stars;if(a.types.stars){if(a.types.statics!==b.types.statics)return b.types.statics-a.types.statics;if(a.types.dynamics!==b.types.dynamics)return b.types.dynamics-a.types.dynamics}return a.types.dynamics!==b.types.dynamics?a.types.dynamics-b.types.dynamics:a.types.statics!==b.types.statics?b.types.statics-a.types.statics:0})}function e(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];c.push.apply(c,f.match(b))}for(var g=c.filter(function(a){return a.epsilon}),h=function(){var a=[];g.forEach(function(b){c.push.apply(c,b.epsilon),a.push.apply(a,b.epsilon)}),g=a.filter(function(a){return a.epsilon})};g.length>0;)h();return c}function f(a,b,c){for(var d=a.handlers,e=a.regex,f=b.match(e),g=1,h=new o(c),i=0,j=d.length;i<j;i++){for(var k=d[i],l=k.names,m={},n=0,p=l.length;n<p;n++)m[l[n]]=f[g++];h.push({handler:k.handler,params:m,isDynamic:!!l.length})}return h}function g(a,b){var c=a.put({validChars:"/"});return b.eachChar(function(a){c=c.put(a)}),b.optional&&(a.epsilon=a.epsilon||[],a.epsilon.push(c)),c}Object.defineProperty(a,"__esModule",{value:!0}),a.RouteRecognizer=a.EpsilonSegment=a.StarSegment=a.DynamicSegment=a.StaticSegment=a.State=void 0;var h=a.State=function(){function a(a){this.charSpec=a,this.nextStates=[]}return a.prototype.get=function(a){for(var b=this.nextStates,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;if(f.charSpec.validChars===a.validChars&&f.charSpec.invalidChars===a.invalidChars)return f}},a.prototype.put=function(b){var c=this.get(b);return c||(c=new a(b),this.nextStates.push(c),b.repeat&&c.nextStates.push(c),c)},a.prototype.match=function(a){for(var b=this.nextStates,c=[],d=0,e=b.length;d<e;d++){var f=b[d],g=f.charSpec;void 0!==g.validChars?-1!==g.validChars.indexOf(a)&&c.push(f):void 0!==g.invalidChars&&-1===g.invalidChars.indexOf(a)&&c.push(f)}return c},a}(),i=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],j=new RegExp("(\\"+i.join("|\\")+")","g"),k=a.StaticSegment=function(){function a(a,b){this.string=a,this.caseSensitive=b}return a.prototype.eachChar=function(a){for(var b=this.string,c=0,d=b.length;c<d;++c){var e=b[c];a({validChars:this.caseSensitive?e:e.toUpperCase()+e.toLowerCase()})}},a.prototype.regex=function(){return this.string.replace(j,"\\$1")},a.prototype.generate=function(){return this.string},a}(),l=a.DynamicSegment=function(){function a(a,b){this.name=a,this.optional=b}return a.prototype.eachChar=function(a){a({invalidChars:"/",repeat:!0})},a.prototype.regex=function(){return this.optional?"([^/]+)?":"([^/]+)"},a.prototype.generate=function(a,b){return b[this.name]=!0,a[this.name]},a}(),m=a.StarSegment=function(){function a(a){this.name=a}return a.prototype.eachChar=function(a){a({invalidChars:"",repeat:!0})},a.prototype.regex=function(){return"(.+)"},a.prototype.generate=function(a,b){return b[this.name]=!0,a[this.name]},a}(),n=a.EpsilonSegment=function(){function a(){}return a.prototype.eachChar=function(){},a.prototype.regex=function(){return""},a.prototype.generate=function(){return""},a}(),o=(a.RouteRecognizer=function(){function a(){this.rootState=new h,this.names={}}return a.prototype.add=function(a){var b=this;if(Array.isArray(a))return void a.forEach(function(a){return b.add(a)});for(var d=this.rootState,e="^",f={statics:0,dynamics:0,stars:0},h=[],i=a.handler.name,j=!0,k=!0,l=c(a.path,h,f,a.caseSensitive),m=0,o=l.length;m<o;m++){var p=l[m];p instanceof n||(j=!1,k=k&&p.optional,d=g(d,p),e+=p.optional?"/?":"/",e+=p.regex())}if(k)if(j)d=d.put({validChars:"/"}),e+="/";else{var q=this.rootState.put({validChars:"/"});d.epsilon=[q],d=q}var r=[{handler:a.handler,names:h}];if(i)for(var s=Array.isArray(i)?i:[i],t=0;t<s.length;t++)this.names[s[t]]={segments:l,handlers:r};return d.handlers=r,d.regex=new RegExp(e+"$",a.caseSensitive?"":"i"),d.types=f,d},a.prototype.handlersFor=function(a){var b=this.names[a];if(!b)throw new Error("There is no route named "+a);return[].concat(b.handlers)},a.prototype.hasRoute=function(a){return!!this.names[a]},a.prototype.generate=function(a,c){var d=this.names[a];if(!d)throw new Error("There is no route named "+a);var e=d.handlers[0].handler;if(e.generationUsesHref)return e.href;for(var f=Object.assign({},c),g=d.segments,h={},i="",j=0,k=g.length;j<k;j++){var l=g[j];if(!(l instanceof n)){var m=l.generate(f,h);if(null===m||void 0===m){if(!l.optional)throw new Error("A value is required for route parameter '"+l.name+"' in route '"+a+"'.")}else i+="/",i+=m}}"/"!==i.charAt(0)&&(i="/"+i);for(var o in h)delete f[o];var p=(0,b.buildQueryString)(f);return i+=p?"?"+p:""},a.prototype.recognize=function(a){var c=[this.rootState],g={},h=!1,i=a,j=i.indexOf("?");if(-1!==j){var k=i.substr(j+1,i.length);i=i.substr(0,j),g=(0,b.parseQueryString)(k)}i=decodeURI(i),"/"!==i.charAt(0)&&(i="/"+i);var l=i.length;l>1&&"/"===i.charAt(l-1)&&(i=i.substr(0,l-1),h=!0);for(var m=0,n=i.length;m<n&&(c=e(c,i.charAt(m)),c.length);m++);for(var o=[],p=0,q=c.length;p<q;p++)c[p].handlers&&o.push(c[p]);c=d(o);var r=o[0];if(r&&r.handlers)return h&&"(.+)$"===r.regex.source.slice(-5)&&(i+="/"),f(r,i,g)},a}(),function(a){this.splice=Array.prototype.splice,this.slice=Array.prototype.slice,this.push=Array.prototype.push,this.length=0,this.queryParams=a||{}})}.call(b,b,a("aurelia-path"))}),System.registerDynamic("npm:aurelia-route-recognizer@1.1.1.js",["npm:aurelia-route-recognizer@1.1.1/aurelia-route-recognizer"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-route-recognizer@1.1.1/aurelia-route-recognizer"))}),System.registerDynamic("npm:aurelia-history@1.1.0/aurelia-history.js",[],!1,function(a,b,c){return function(a){"use strict";function b(a){throw new Error("History must implement "+a+"().")}Object.defineProperty(a,"__esModule",{value:!0});a.History=function(){function a(){}return a.prototype.activate=function(a){b("activate")},a.prototype.deactivate=function(){b("deactivate")},a.prototype.getAbsoluteRoot=function(){b("getAbsoluteRoot")},a.prototype.navigate=function(a,c){b("navigate")},a.prototype.navigateBack=function(){b("navigateBack")},a.prototype.setTitle=function(a){b("setTitle")},a.prototype.setState=function(a,c){b("setState")},a.prototype.getState=function(a){b("getState")},a}()}.call(b,b,a)}),System.registerDynamic("npm:aurelia-history@1.1.0.js",["npm:aurelia-history@1.1.0/aurelia-history"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-history@1.1.0/aurelia-history"))}),System.registerDynamic("npm:aurelia-event-aggregator@1.0.1/aurelia-event-aggregator.js",["aurelia-logging"],!1,function(a,b,c){return function(a,b){"use strict";function c(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function d(a,b,c){try{a(b,c)}catch(a){i.error(a)}}function e(a,b){try{a.handle(b)}catch(a){i.error(a)}}function f(a){var b=new k;return a.subscribeOnce=function(a,c){return b.subscribeOnce(a,c)},a.subscribe=function(a,c){return b.subscribe(a,c)},a.publish=function(a,c){b.publish(a,c)},b}function g(a){a.instance(k,f(a.aurelia))}Object.defineProperty(a,"__esModule",{value:!0}),a.EventAggregator=void 0,a.includeEventsIn=f,a.configure=g;var h=c(b),i=h.getLogger("event-aggregator"),j=function(){function a(a,b){this.messageType=a,this.callback=b}return a.prototype.handle=function(a){a instanceof this.messageType&&this.callback.call(null,a)},a}(),k=a.EventAggregator=function(){function a(){this.eventLookup={},this.messageHandlers=[]}return a.prototype.publish=function(a,b){var c=void 0,f=void 0;if(!a)throw new Error("Event was invalid.");if("string"==typeof a){if(c=this.eventLookup[a])for(c=c.slice(),f=c.length;f--;)d(c[f],b,a)}else for(c=this.messageHandlers.slice(),f=c.length;f--;)e(c[f],a)},a.prototype.subscribe=function(a,b){var c=void 0,d=void 0;if(!a)throw new Error("Event channel/type was invalid.");return"string"==typeof a?(c=b,d=this.eventLookup[a]||(this.eventLookup[a]=[])):(c=new j(a,b),d=this.messageHandlers),d.push(c),{dispose:function(){var a=d.indexOf(c);-1!==a&&d.splice(a,1)}}},a.prototype.subscribeOnce=function(a,b){var c=this.subscribe(a,function(a,d){return c.dispose(),b(a,d)});return c},a}()}.call(b,b,a("aurelia-logging"))}),System.registerDynamic("npm:aurelia-event-aggregator@1.0.1.js",["npm:aurelia-event-aggregator@1.0.1/aurelia-event-aggregator"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-event-aggregator@1.0.1/aurelia-event-aggregator"))}),System.registerDynamic("npm:aurelia-router@1.5.0/aurelia-router.js",["aurelia-logging","aurelia-route-recognizer","aurelia-dependency-injection","aurelia-history","aurelia-event-aggregator"],!1,function(a,b,c){return function(a,b,c,d,e,f){"use strict";function g(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function j(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return b||"#"===a[0]||(a="#"+a),b&&c&&(a=a.substring(1,a.length)),a}function k(a,b,c,d){if(M.test(a))return a;var e="";return b.length&&"/"!==b[0]&&(e+="/"),e+=b,e.length&&"/"===e[e.length-1]||"/"===a[0]||(e+="/"),e.length&&"/"===e[e.length-1]&&"/"===a[0]&&(e=e.substring(0,e.length-1)),j(e+a,c,d)}function l(a,b,c){return L.test(a)?j(a,c):k(a,b,c)}function m(a,b){return function(a){return Promise.resolve({status:b,output:a,completed:b===N.completed})}}function n(a){a.previousInstruction=null,a.plan=null}function o(a){return a&&"function"==typeof a.navigate}function p(a,b){var c=a.config;if("redirect"in c){var d=l(c.redirect,r(a));return a.queryString&&(d+="?"+a.queryString),Promise.reject(new S(d))}var e=a.previousInstruction,f={},g=a.router.viewPortDefaults;if(e){var h=q(e,a),i=[],j=function(d){var j=e.viewPortInstructions[d],k=d in c.viewPorts?c.viewPorts[d]:j;null===k.moduleId&&d in a.router.viewPortDefaults&&(k=g[d]);var l=f[d]={name:d,config:k,prevComponent:j.component,prevModuleId:j.moduleId};if(j.moduleId!==k.moduleId)l.strategy=U.replace;else if("determineActivationStrategy"in j.component.viewModel){var m;l.strategy=(m=j.component.viewModel).determineActivationStrategy.apply(m,a.lifecycleArgs)}else c.activationStrategy?l.strategy=c.activationStrategy:l.strategy=h||b?U.invokeLifecycle:U.noChange;if(l.strategy!==U.replace&&j.childRouter){var n=a.getWildcardPath(),o=j.childRouter._createNavigationInstruction(n,a).then(function(a){return l.childNavigationInstruction=a,p(a,l.strategy===U.invokeLifecycle).then(function(b){a.plan=b})});i.push(o)}};for(var k in e.viewPortInstructions)j(k);return Promise.all(i).then(function(){return f})}for(var k in c.viewPorts){var m=c.viewPorts[k];null===m.moduleId&&k in a.router.viewPortDefaults&&(m=g[k]),f[k]={name:k,strategy:U.replace,config:m}}return Promise.resolve(f)}function q(a,b){var c=a.params,d=b.params,e=b.config.hasChildRouter?b.getWildCardName():null;for(var f in d)if(f!==e&&c[f]!==d[f])return!0;for(var g in c)if(g!==e&&c[g]!==d[g])return!0;if(!b.options.compareQueryParams)return!1;var h=a.queryParams,i=b.queryParams;for(var j in i)if(h[j]!==i[j])return!0;for(var k in h)if(h[k]!==i[k])return!0;return!1}function r(a){var b=[];for(a=a.parentInstruction;a;)b.unshift(a.getBaseUrl()),a=a.parentInstruction;return b.unshift("/"),b.join("")}function s(a,b){if("object"!==(void 0===a?"undefined":J(a)))throw new Error("Invalid Route Config");if("string"!=typeof a.route){var c=a.name||"(no name)";throw new Error('Invalid Route Config for "'+c+'": You must specify a "route:" pattern.')}if(!("redirect"in a||a.moduleId||a.navigationStrategy||a.viewPorts))throw new Error('Invalid Route Config for "'+a.route+'": You must specify a "moduleId:", "redirect:", "navigationStrategy:", or "viewPorts:".')}function t(a,b,c){return Promise.resolve(b.call(c,a)).then(function(){return"viewPorts"in a.config||(a.config.viewPorts={default:{moduleId:a.config.moduleId}}),a})}function u(a,b,c,d){function e(a){return d||z(a)?f():c.cancel(a)}function f(){if(i--)try{return A(h[i][b](a),e,c.cancel)}catch(a){return c.cancel(a)}return c()}var g=a.plan,h=v(g,b),i=h.length;return f()}function v(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(var d in a){var e=a[d],f=e.prevComponent;if((e.strategy===U.invokeLifecycle||e.strategy===U.replace)&&f){var g=f.viewModel;b in g&&c.push(g)}e.strategy===U.replace&&f?w(f,b,c):e.childNavigationInstruction&&v(e.childNavigationInstruction.plan,b,c)}return c}function w(a,b,c){var d=a.childRouter;if(d&&d.currentInstruction){var e=d.currentInstruction.viewPortInstructions;for(var f in e){var g=e[f],h=g.component,i=h.viewModel;b in i&&c.push(i),w(h,b,c)}}}function x(a,b,c,d){function e(a,b){return d||z(a,b)?f():c.cancel(a)}function f(){if(++i<h)try{var a,d=g[i];return A((a=d.viewModel)[b].apply(a,d.lifecycleArgs),function(a){return e(a,d.router)},c.cancel)}catch(a){return c.cancel(a)}return c()}var g=y(a,b),h=g.length,i=-1;return f()}function y(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],d=arguments[3],e=a.plan;return Object.keys(e).filter(function(f){var g=e[f],h=a.viewPortInstructions[f],i=h.component.viewModel;(g.strategy===U.invokeLifecycle||g.strategy===U.replace)&&b in i&&c.push({viewModel:i,lifecycleArgs:h.lifecycleArgs,router:d}),g.childNavigationInstruction&&y(g.childNavigationInstruction,b,c,h.component.childRouter||d)}),c}function z(a,b){return!(a instanceof Error)&&(o(a)?("function"==typeof a.setRouter&&a.setRouter(b),!!a.shouldContinueProcessing):void 0===a||a)}function A(a,b,c){if(a&&"function"==typeof a.then)return Promise.resolve(a).then(b).catch(c);if(a&&"function"==typeof a.subscribe){var d=a;return new _(function(e){return d.subscribe({next:function(){e.subscribed&&(e.unsubscribe(),b(a))},error:function(a){e.subscribed&&(e.unsubscribe(),c(a))},complete:function(){e.subscribed&&(e.unsubscribe(),b(a))}})})}try{return b(a)}catch(a){return c(a)}}function B(a,b){var c=C(b),d=c.map(function(b){return D(a,b.navigationInstruction,b.viewPortPlan)});return Promise.all(d)}function C(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=a.plan;for(var d in c){var e=c[d];if(e.strategy===U.replace)b.push({viewPortPlan:e,navigationInstruction:a}),e.childNavigationInstruction&&C(e.childNavigationInstruction,b);else{var f=a.addViewPortInstruction(d,e.strategy,e.prevModuleId,e.prevComponent);e.childNavigationInstruction&&(f.childNavigationInstruction=e.childNavigationInstruction,C(e.childNavigationInstruction,b))}}return b}function D(a,b,c){var d=c.config?c.config.moduleId:null;return E(a,b,c.config).then(function(e){var f=b.addViewPortInstruction(c.name,c.strategy,d,e),g=e.childRouter;if(g){var h=b.getWildcardPath();return g._createNavigationInstruction(h,b).then(function(b){return c.childNavigationInstruction=b,p(b).then(function(c){return b.plan=c,f.childNavigationInstruction=b,B(a,b)})})}})}function E(a,b,c){var d=b.router,e=b.lifecycleArgs;return a.loadRoute(d,c,b).then(function(a){var b=a.viewModel,f=a.childContainer;if(a.router=d,a.config=c,"configureRouter"in b){var g=f.getChildRouter();return a.childRouter=g,g.configure(function(a){return b.configureRouter.apply(b,[a,g].concat(e))}).then(function(){return a})}return a})}function F(a,b,c,d){b&&"completed"in b&&"output"in b||(b=b||{},b.output=new Error("Expected router pipeline to return a navigation result, but got ["+JSON.stringify(b)+"] instead."));var e=null;return o(b.output)?b.output.navigate(d):(e=b,b.completed||(b.output instanceof Error&&ea.error(b.output),H(d))),d._dequeueInstruction(c+1).then(function(a){return e||a||b})}function G(a,b,c,d){a.resolve(b);var e={instruction:a,result:b};if(c)d.events.publish("router:navigation:child:complete",e);else{d.isNavigating=!1,d.isExplicitNavigation=!1,d.isExplicitNavigationBack=!1,d.isNavigatingFirst=!1,d.isNavigatingNew=!1,d.isNavigatingRefresh=!1,d.isNavigatingForward=!1,d.isNavigatingBack=!1;var f=void 0;if(b.output instanceof Error)f="error";else if(b.completed){var g=a.queryString?"?"+a.queryString:"";d.history.previousLocation=a.fragment+g,f="success"}else f="canceled";d.events.publish("router:navigation:"+f,e),d.events.publish("router:navigation:complete",e)}return b}function H(a){a.history.previousLocation?a.navigate(a.history.previousLocation,{trigger:!1,replace:!0}):a.fallbackRoute?a.navigate(a.fallbackRoute,{trigger:!0,replace:!0}):ea.error("Router navigation failed, and no previous location or fallbackRoute could be restored.")}Object.defineProperty(a,"__esModule",{value:!0}),a.AppRouter=a.PipelineProvider=a.LoadRouteStep=a.RouteLoader=a.ActivateNextStep=a.DeactivatePreviousStep=a.CanActivateNextStep=a.CanDeactivatePreviousStep=a.Router=a.BuildNavigationPlanStep=a.activationStrategy=a.RouterConfiguration=a.RedirectToRoute=a.Redirect=a.NavModel=a.NavigationInstruction=a.CommitChangesStep=a.Pipeline=a.pipelineStatus=void 0,a._normalizeAbsolutePath=j,a._createRootedPath=k,a._resolveUrl=l,a.isNavigationCommand=o,a._buildNavigationPlan=p;var I=g(b),J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},K=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),L=/^#?\//,M=/^([a-z][a-z0-9+\-.]*:)?\/\//i,N=a.pipelineStatus={completed:"completed",canceled:"canceled",rejected:"rejected",running:"running"},O=a.Pipeline=function(){function a(){this.steps=[]}return a.prototype.addStep=function(a){var b=void 0;if("function"==typeof a)b=a;else{if("function"==typeof a.getSteps){for(var c=a.getSteps(),d=0,e=c.length;d<e;d++)this.addStep(c[d]);return this}b=a.run.bind(a)}return this.steps.push(b),this},a.prototype.run=function(a){function b(){if(!(++c<d.length))return b.complete();var e=d[c];try{return e(a,b)}catch(a){return b.reject(a)}}var c=-1,d=this.steps;return b.complete=m(b,N.completed),b.cancel=m(b,N.canceled),b.reject=m(b,N.rejected),b()},a}(),P=a.CommitChangesStep=function(){function a(){}return a.prototype.run=function(a,b){return a._commitChanges(!0).then(function(){return a._updateTitle(),b()})},a}(),Q=a.NavigationInstruction=function(){function a(a){this.plan=null,this.options={},Object.assign(this,a),this.params=this.params||{},this.viewPortInstructions={};var b=[],c=this;do{var d=Object.assign({},c.params);c.config&&c.config.hasChildRouter&&delete d[c.getWildCardName()],b.unshift(d),c=c.parentInstruction}while(c);var e=Object.assign.apply(Object,[{},this.queryParams].concat(b));this.lifecycleArgs=[e,this.config,this]}return a.prototype.getAllInstructions=function(){var a=[this];for(var b in this.viewPortInstructions){var c=this.viewPortInstructions[b].childNavigationInstruction;c&&a.push.apply(a,c.getAllInstructions())}return a},a.prototype.getAllPreviousInstructions=function(){return this.getAllInstructions().map(function(a){return a.previousInstruction}).filter(function(a){return a})},a.prototype.addViewPortInstruction=function(a,b,c,d){var e=Object.assign({},this.lifecycleArgs[1],{currentViewPort:a});return this.viewPortInstructions[a]={name:a,strategy:b,moduleId:c,component:d,childRouter:d.childRouter,lifecycleArgs:[].concat(this.lifecycleArgs[0],e,this.lifecycleArgs[2])}},a.prototype.getWildCardName=function(){var a=this.config.route.lastIndexOf("*");return this.config.route.substr(a+1)},a.prototype.getWildcardPath=function(){var a=this.getWildCardName(),b=this.params[a]||"";return this.queryString&&(b+="?"+this.queryString),b},a.prototype.getBaseUrl=function(){var a=this,b=decodeURI(this.fragment);if(""===b){var c=this.router.routes.find(function(b){return b.name===a.config.name&&""!==b.route});c&&(b=c.route)}if(!this.params)return encodeURI(b);var d=this.getWildCardName(),e=this.params[d]||"";return e?encodeURI(b.substr(0,b.lastIndexOf(e))):encodeURI(b)},a.prototype._commitChanges=function(a){var b=this,c=this.router;c.currentInstruction=this,this.previousInstruction&&(this.previousInstruction.config.navModel.isActive=!1),this.config.navModel.isActive=!0,c._refreshBaseUrl(),c.refreshNavigation();var d=[],e=[],f=function(f){var g=b.viewPortInstructions[f],h=c.viewPorts[f];if(!h)throw new Error("There was no router-view found in the view for "+g.moduleId+".");g.strategy===U.replace?g.childNavigationInstruction&&g.childNavigationInstruction.parentCatchHandler?d.push(g.childNavigationInstruction._commitChanges(a)):(a&&e.push({viewPort:h,viewPortInstruction:g}),d.push(h.process(g,a).then(function(b){if(g.childNavigationInstruction)return g.childNavigationInstruction._commitChanges(a)}))):g.childNavigationInstruction&&d.push(g.childNavigationInstruction._commitChanges(a))};for(var g in this.viewPortInstructions)f(g);return Promise.all(d).then(function(){return e.forEach(function(a){return a.viewPort.swap(a.viewPortInstruction)}),null}).then(function(){return n(b)})},a.prototype._updateTitle=function(){var a=this._buildTitle();a&&this.router.history.setTitle(a)},a.prototype._buildTitle=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" | ",b="",c=[];this.config.navModel.title&&(b=this.router.transformTitle(this.config.navModel.title));for(var d in this.viewPortInstructions){var e=this.viewPortInstructions[d];if(e.childNavigationInstruction){var f=e.childNavigationInstruction._buildTitle(a);f&&c.push(f)}}return c.length&&(b=c.join(a)+(b?a:"")+b),this.router.title&&(b+=(b?a:"")+this.router.transformTitle(this.router.title)),b},a}(),R=a.NavModel=function(){function a(a,b){this.isActive=!1,this.title=null,this.href=null,this.relativeHref=null,this.settings={},this.config=null,this.router=a,this.relativeHref=b}return a.prototype.setTitle=function(a){this.title=a,this.isActive&&this.router.updateTitle()},a}(),S=a.Redirect=function(){function a(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=a,this.options=Object.assign({trigger:!0,replace:!0},b),this.shouldContinueProcessing=!1}return a.prototype.setRouter=function(a){this.router=a},a.prototype.navigate=function(a){(this.options.useAppRouter?a:this.router||a).navigate(this.url,this.options)},a}(),T=(a.RedirectToRoute=function(){function a(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.route=a,this.params=b,this.options=Object.assign({trigger:!0,replace:!0},c),this.shouldContinueProcessing=!1}return a.prototype.setRouter=function(a){this.router=a},a.prototype.navigate=function(a){(this.options.useAppRouter?a:this.router||a).navigateToRoute(this.route,this.params,this.options)},a}(),a.RouterConfiguration=function(){function a(){this.instructions=[],this.options={},this.pipelineSteps=[]}return a.prototype.addPipelineStep=function(a,b){return this.pipelineSteps.push({name:a,step:b}),this},a.prototype.addAuthorizeStep=function(a){return this.addPipelineStep("authorize",a)},a.prototype.addPreActivateStep=function(a){return this.addPipelineStep("preActivate",a)},a.prototype.addPreRenderStep=function(a){return this.addPipelineStep("preRender",a)},a.prototype.addPostRenderStep=function(a){return this.addPipelineStep("postRender",a)},a.prototype.fallbackRoute=function(a){return this._fallbackRoute=a,this},a.prototype.map=function(a){return Array.isArray(a)?(a.forEach(this.map.bind(this)),this):this.mapRoute(a)},a.prototype.useViewPortDefaults=function(a){return this.viewPortDefaults=a,this},a.prototype.mapRoute=function(a){return this.instructions.push(function(b){var c=[];if(Array.isArray(a.route))for(var d=0,e=a.route.length;d<e;++d){var f=Object.assign({},a);f.route=a.route[d],c.push(f)}else c.push(Object.assign({},a));for(var g=void 0,h=0,i=c.length;h<i;++h){var j=c[h];j.settings=j.settings||{},g||(g=b.createNavModel(j)),b.addRoute(j,g)}}),this},a.prototype.mapUnknownRoutes=function(a){return this.unknownRouteConfig=a,this},a.prototype.exportToRouter=function(a){for(var b=this.instructions,c=0,d=b.length;c<d;++c)b[c](a);this.title&&(a.title=this.title),this.unknownRouteConfig&&a.handleUnknownRoutes(this.unknownRouteConfig),this._fallbackRoute&&(a.fallbackRoute=this._fallbackRoute),this.viewPortDefaults&&a.useViewPortDefaults(this.viewPortDefaults),a.options=this.options;var e=this.pipelineSteps;if(e.length){if(!a.isRoot)throw new Error("Pipeline steps can only be added to the root router");for(var f=a.pipelineProvider,g=0,h=e.length;g<h;++g){var i=e[g],j=i.name,k=i.step;f.addStep(j,k)}}},a}()),U=a.activationStrategy={noChange:"no-change",invokeLifecycle:"invoke-lifecycle",replace:"replace"},V=a.BuildNavigationPlanStep=function(){function a(){}return a.prototype.run=function(a,b){return p(a).then(function(c){return a.plan=c,b()}).catch(b.cancel)},a}(),W=a.Router=function(){function a(a,b){var c=this;this.parent=null,this.options={},this.viewPortDefaults={},this.transformTitle=function(a){return c.parent?c.parent.transformTitle(a):a},this.container=a,this.history=b,this.reset()}return a.prototype.reset=function(){var a=this;this.viewPorts={},this.routes=[],this.baseUrl="",this.isConfigured=!1,this.isNavigating=!1,this.isExplicitNavigation=!1,this.isExplicitNavigationBack=!1,this.isNavigatingFirst=!1,this.isNavigatingNew=!1,this.isNavigatingRefresh=!1,this.isNavigatingForward=!1,this.isNavigatingBack=!1,this.navigation=[],this.currentInstruction=null,this.viewPortDefaults={},this._fallbackOrder=100,this._recognizer=new c.RouteRecognizer,this._childRecognizer=new c.RouteRecognizer,this._configuredPromise=new Promise(function(b){a._resolveConfiguredPromise=b})},a.prototype.registerViewPort=function(a,b){b=b||"default",this.viewPorts[b]=a},a.prototype.ensureConfigured=function(){return this._configuredPromise},a.prototype.configure=function(a){var b=this;this.isConfigured=!0;var c=a,d=void 0;return"function"==typeof a&&(d=new T,c=a(d)),Promise.resolve(c).then(function(a){a&&a.exportToRouter&&(d=a),d.exportToRouter(b),b.isConfigured=!0,b._resolveConfiguredPromise()})},a.prototype.navigate=function(a,b){return!this.isConfigured&&this.parent?this.parent.navigate(a,b):(this.isExplicitNavigation=!0,this.history.navigate(l(a,this.baseUrl,this.history._hasPushState),b))},a.prototype.navigateToRoute=function(a,b,c){var d=this.generate(a,b);return this.navigate(d,c)},a.prototype.navigateBack=function(){this.isExplicitNavigationBack=!0,this.history.navigateBack()},a.prototype.createChild=function(b){var c=new a(b||this.container.createChild(),this.history);return c.parent=this,c},a.prototype.generate=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=this._recognizer.hasRoute(a);if((!this.isConfigured||!d)&&this.parent)return this.parent.generate(a,b);if(!d)throw new Error("A route with name '"+a+"' could not be found. Check that `name: '"+a+"'` was specified in the route's config.");var e=this._recognizer.generate(a,b),f=k(e,this.baseUrl,this.history._hasPushState,c.absolute);return c.absolute?""+this.history.getAbsoluteRoot()+f:f},a.prototype.createNavModel=function(a){var b=new R(this,"href"in a?a.href:a.route);return b.title=a.title,b.order=a.nav,b.href=a.href,b.settings=a.settings,b.config=a,b},a.prototype.addRoute=function(a,b){s(a,this.routes),"viewPorts"in a||a.navigationStrategy||(a.viewPorts={default:{moduleId:a.moduleId,view:a.view}}),b||(b=this.createNavModel(a)),this.routes.push(a);var c=a.route;"/"===c.charAt(0)&&(c=c.substr(1));var d=!0===a.caseSensitive,e=this._recognizer.add({path:c,handler:a,caseSensitive:d});if(c){var f=a.settings;delete a.settings;var g=JSON.parse(JSON.stringify(a));a.settings=f,g.route=c+"/*childRoute",g.hasChildRouter=!0,this._childRecognizer.add({path:g.route,handler:g,caseSensitive:d}),g.navModel=b,g.settings=a.settings,g.navigationStrategy=a.navigationStrategy}if(a.navModel=b,(b.order||0===b.order)&&-1===this.navigation.indexOf(b)){if(!b.href&&""!==b.href&&(e.types.dynamics||e.types.stars))throw new Error('Invalid route config for "'+a.route+'" : dynamic routes must specify an "href:" to be included in the navigation model.');"number"!=typeof b.order&&(b.order=++this._fallbackOrder),this.navigation.push(b),this.navigation=this.navigation.sort(function(a,b){return a.order-b.order})}},a.prototype.hasRoute=function(a){return!!(this._recognizer.hasRoute(a)||this.parent&&this.parent.hasRoute(a))},a.prototype.hasOwnRoute=function(a){return this._recognizer.hasRoute(a)},a.prototype.handleUnknownRoutes=function(a){var b=this;if(!a)throw new Error("Invalid unknown route handler");this.catchAllHandler=function(c){return b._createRouteConfig(a,c).then(function(a){return c.config=a,c})}},a.prototype.updateTitle=function(){if(this.parent)return this.parent.updateTitle();this.currentInstruction&&this.currentInstruction._updateTitle()},a.prototype.refreshNavigation=function(){for(var a=this.navigation,b=0,c=a.length;b<c;b++){var d=a[b];d.config.href?d.href=j(d.config.href,this.history._hasPushState):d.href=k(d.relativeHref,this.baseUrl,this.history._hasPushState)}},a.prototype.useViewPortDefaults=function(a){for(var b in a){var c=a[b];this.viewPortDefaults[b]={moduleId:c.moduleId}}},a.prototype._refreshBaseUrl=function(){if(this.parent){var a=this.parent.currentInstruction.getBaseUrl();this.baseUrl=this.parent.baseUrl+a}},a.prototype._createNavigationInstruction=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=a,d="",e=a.indexOf("?");-1!==e&&(c=a.substr(0,e),d=a.substr(e+1));var f=this._recognizer.recognize(a);f&&f.length||(f=this._childRecognizer.recognize(a));var g={fragment:c,queryString:d,config:null,parentInstruction:b,previousInstruction:this.currentInstruction,router:this,options:{compareQueryParams:this.options.compareQueryParams}};if(f&&f.length){var h=f[0],i=new Q(Object.assign({},g,{params:h.params,queryParams:h.queryParams||f.queryParams,config:h.config||h.handler}));return"function"==typeof h.handler?t(i,h.handler,h):h.handler&&"function"==typeof h.handler.navigationStrategy?t(i,h.handler.navigationStrategy,h.handler):Promise.resolve(i)}if(this.catchAllHandler){return t(new Q(Object.assign({},g,{params:{path:c},queryParams:f?f.queryParams:{},config:null})),this.catchAllHandler)}if(this.parent){var j=this._parentCatchAllHandler(this.parent);if(j){var k=this._findParentInstructionFromRouter(j,b);return t(new Q(Object.assign({},g,{params:{path:c},queryParams:f?f.queryParams:{},router:j,parentInstruction:k,parentCatchHandler:!0,config:null})),j.catchAllHandler)}}return Promise.reject(new Error("Route not found: "+a))},a.prototype._findParentInstructionFromRouter=function(a,b){return b.router===a?(b.fragment=a.baseUrl,b):b.parentInstruction?this._findParentInstructionFromRouter(a,b.parentInstruction):void 0},a.prototype._parentCatchAllHandler=function(a){return a.catchAllHandler?a:!!a.parent&&this._parentCatchAllHandler(a.parent)},a.prototype._createRouteConfig=function(a,b){var c=this;return Promise.resolve(a).then(function(a){return"string"==typeof a?{moduleId:a}:"function"==typeof a?a(b):a}).then(function(a){return"string"==typeof a?{moduleId:a}:a}).then(function(a){return a.route=b.params.path,s(a,c.routes),a.navModel||(a.navModel=c.createNavModel(a)),a})},K(a,[{key:"isRoot",get:function(){return!this.parent}}]),a}(),X=a.CanDeactivatePreviousStep=function(){function a(){}return a.prototype.run=function(a,b){return u(a,"canDeactivate",b)},a}(),Y=a.CanActivateNextStep=function(){function a(){}return a.prototype.run=function(a,b){return x(a,"canActivate",b)},a}(),Z=a.DeactivatePreviousStep=function(){function a(){}return a.prototype.run=function(a,b){return u(a,"deactivate",b,!0)},a}(),$=a.ActivateNextStep=function(){function a(){}return a.prototype.run=function(a,b){return x(a,"activate",b,!0)},a}(),_=function(){function a(a){this._subscribed=!0,this._subscription=a(this),this._subscribed||this.unsubscribe()}return a.prototype.unsubscribe=function(){this._subscribed&&this._subscription&&this._subscription.unsubscribe(),this._subscribed=!1},K(a,[{key:"subscribed",get:function(){return this._subscribed}}]),a}(),aa=a.RouteLoader=function(){function a(){}return a.prototype.loadRoute=function(a,b,c){throw Error('Route loaders must implement "loadRoute(router, config, navigationInstruction)".')},a}(),ba=a.LoadRouteStep=function(){function a(a){this.routeLoader=a}return a.inject=function(){return[aa]},a.prototype.run=function(a,b){return B(this.routeLoader,a).then(b).catch(b.cancel)},a}(),ca=function(){function a(a,b,c){this.steps=[],this.container=a,this.slotName=b,this.slotAlias=c}return a.prototype.getSteps=function(){var a=this;return this.steps.map(function(b){return a.container.get(b)})},a}(),da=a.PipelineProvider=function(){function a(a){this.container=a,this.steps=[V,X,ba,this._createPipelineSlot("authorize"),Y,this._createPipelineSlot("preActivate","modelbind"),Z,$,this._createPipelineSlot("preRender","precommit"),P,this._createPipelineSlot("postRender","postcomplete")]}return a.inject=function(){return[d.Container]},a.prototype.createPipeline=function(){var a=this,b=new O;return this.steps.forEach(function(c){return b.addStep(a.container.get(c))}),b},a.prototype._findStep=function(a){return this.steps.find(function(b){return b.slotName===a||b.slotAlias===a})},a.prototype.addStep=function(a,b){var c=this._findStep(a);if(!c)throw new Error("Invalid pipeline slot name: "+a+".");c.steps.includes(b)||c.steps.push(b)},a.prototype.removeStep=function(a,b){var c=this._findStep(a);c&&c.steps.splice(c.steps.indexOf(b),1)},a.prototype._clearSteps=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=this._findStep(a);b&&(b.steps=[])},a.prototype.reset=function(){this._clearSteps("authorize"),this._clearSteps("preActivate"),this._clearSteps("preRender"),this._clearSteps("postRender")},a.prototype._createPipelineSlot=function(a,b){return new ca(this.container,a,b)},a}(),ea=I.getLogger("app-router");a.AppRouter=function(a){function b(b,c,d,e){var f=h(this,a.call(this,b,c));return f.pipelineProvider=d,f.events=e,f}return i(b,a),b.inject=function(){return[d.Container,e.History,da,f.EventAggregator]},b.prototype.reset=function(){a.prototype.reset.call(this),this.maxInstructionCount=10,this._queue?this._queue.length=0:this._queue=[]},b.prototype.loadUrl=function(a){var b=this;return this._createNavigationInstruction(a).then(function(a){return b._queueInstruction(a)}).catch(function(a){ea.error(a),H(b)})},b.prototype.registerViewPort=function(b,c){var d=this;if(a.prototype.registerViewPort.call(this,b,c),this.isActive)this._dequeueInstruction();else{var e=this._findViewModel(b);if("configureRouter"in e){if(!this.isConfigured){var f=this._resolveConfiguredPromise;return this._resolveConfiguredPromise=function(){},this.configure(function(a){return e.configureRouter(a,d)}).then(function(){d.activate(),f()})}}else this.activate()}return Promise.resolve()},b.prototype.activate=function(a){this.isActive||(this.isActive=!0,this.options=Object.assign({routeHandler:this.loadUrl.bind(this)},this.options,a),this.history.activate(this.options),this._dequeueInstruction())},b.prototype.deactivate=function(){this.isActive=!1,this.history.deactivate()},b.prototype._queueInstruction=function(a){var b=this;return new Promise(function(c){a.resolve=c,b._queue.unshift(a),b._dequeueInstruction()})},b.prototype._dequeueInstruction=function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Promise.resolve().then(function(){if(!a.isNavigating||b){var c=a._queue.shift();if(a._queue.length=0,c){a.isNavigating=!0;var d=a.history.getState("NavigationTracker");if(d||a.currentNavigationTracker?d?a.currentNavigationTracker?a.currentNavigationTracker<d?a.isNavigatingForward=!0:a.currentNavigationTracker>d&&(a.isNavigatingBack=!0):a.isNavigatingRefresh=!0:a.isNavigatingNew=!0:(a.isNavigatingFirst=!0,a.isNavigatingNew=!0),d||(d=Date.now(),a.history.setState("NavigationTracker",d)),a.currentNavigationTracker=d,c.previousInstruction=a.currentInstruction,b){if(b===a.maxInstructionCount-1)return ea.error(b+1+" navigation instructions have been attempted without success. Restoring last known good location."),H(a),a._dequeueInstruction(b+1);if(b>a.maxInstructionCount)throw new Error("Maximum navigation attempts exceeded. Giving up.")}else a.events.publish("router:navigation:processing",{instruction:c});return a.pipelineProvider.createPipeline().run(c).then(function(d){return F(c,d,b,a)}).catch(function(a){return{output:a instanceof Error?a:new Error(a)}}).then(function(d){return G(c,d,!!b,a)})}}})},b.prototype._findViewModel=function(a){if(this.container.viewModel)return this.container.viewModel;if(a.container)for(var b=a.container;b;){if(b.viewModel)return this.container.viewModel=b.viewModel,b.viewModel;b=b.parent}},b}(W)}.call(b,b,a("aurelia-logging"),a("aurelia-route-recognizer"),a("aurelia-dependency-injection"),a("aurelia-history"),a("aurelia-event-aggregator"))}),System.registerDynamic("npm:aurelia-router@1.5.0.js",["npm:aurelia-router@1.5.0/aurelia-router"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-router@1.5.0/aurelia-router"))}),System.registerDynamic("npm:aurelia-templating-router@1.3.1/route-href.js",["aurelia-templating","aurelia-dependency-injection","aurelia-router","aurelia-pal","aurelia-logging"],!1,function(a,b,c){return function(a,b,c,d,e,f){"use strict";function g(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}Object.defineProperty(a,"__esModule",{value:!0}),a.RouteHref=void 0;var h,i,j,k,l,m,n=g(f),o=n.getLogger("route-href");a.RouteHref=(h=(0,b.customAttribute)("route-href"),i=(0,b.bindable)({name:"route",changeHandler:"processChange",primaryProperty:!0}),j=(0,b.bindable)({name:"params",changeHandler:"processChange"}),k=(0,b.bindable)({name:"attribute",defaultValue:"href"}),l=(0,c.inject)(d.Router,e.DOM.Element),h(m=i(m=j(m=k(m=l(m=function(){function a(a,b){this.router=a,this.element=b}return a.prototype.bind=function(){this.isActive=!0,this.processChange()},a.prototype.unbind=function(){this.isActive=!1},a.prototype.attributeChanged=function(a,b){b&&this.element.removeAttribute(b),this.processChange()},a.prototype.processChange=function(){var a=this;return this.router.ensureConfigured().then(function(){if(!a.isActive)return null;var b=a.router.generate(a.route,a.params);return a.element.au.controller?a.element.au.controller.viewModel[a.attribute]=b:a.element.setAttribute(a.attribute,b),null}).catch(function(a){o.error(a)})},a}())||m)||m)||m)||m)||m)}.call(b,b,a("aurelia-templating"),a("aurelia-dependency-injection"),a("aurelia-router"),a("aurelia-pal"),a("aurelia-logging"))}),System.registerDynamic("npm:aurelia-templating-router@1.3.1/aurelia-templating-router.js",["aurelia-pal","aurelia-router","./route-loader","./router-view","./route-href"],!1,function(a,b,c){return function(a,b,c,d,e,f){"use strict";function g(a){a.singleton(c.RouteLoader,d.TemplatingRouteLoader).singleton(c.Router,c.AppRouter).globalResources(b.PLATFORM.moduleName("./router-view"),b.PLATFORM.moduleName("./route-href")),a.container.registerAlias(c.Router,c.AppRouter)}Object.defineProperty(a,"__esModule",{value:!0}),a.configure=a.RouteHref=a.RouterView=a.TemplatingRouteLoader=void 0,a.TemplatingRouteLoader=d.TemplatingRouteLoader,a.RouterView=e.RouterView,a.RouteHref=f.RouteHref,a.configure=g}.call(b,b,a("aurelia-pal"),a("aurelia-router"),a("./route-loader"),a("./router-view"),a("./route-href"))}),System.registerDynamic("npm:aurelia-templating-router@1.3.1.js",["npm:aurelia-templating-router@1.3.1/aurelia-templating-router"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-templating-router@1.3.1/aurelia-templating-router"))}),System.registerDynamic("npm:aurelia-dependency-injection@1.3.2/aurelia-dependency-injection.js",["aurelia-metadata","aurelia-pal"],!1,function(a,b,c){return function(a,b,c){"use strict";function d(a,c){var d=a.inject;if("function"==typeof d)throw new Error("Decorator "+c+' cannot be used with "inject()".  Please use an array instead.');return d||(d=b.metadata.getOwn(b.metadata.paramTypes,a).slice(),a.inject=d),d}function e(a){return function(b,c,e){d(b,"lazy")[e]=K.of(a)}}function f(a){return function(b,c,e){d(b,"all")[e]=L.of(a)}}function g(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0],b=function(a){return function(b,c,e){var f=d(b,"optional");f[e]=M.of(f[e],a)}};return b("boolean"==typeof a?a:!0)}function h(a,b,c){var e=d(a,"parent");e[c]=N.of(e[c])}function i(a,b){return function(c,e,f){var g=d(c,"factory"),h=P.of(a);g[f]=b?h.as(b):h}}function j(a){for(var b=arguments.length,c=Array(b>1?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];var f=function(a){return function(b,e,f){var g=d(b,"newInstance");g[f]=Q.of.apply(Q,[g[f]].concat(c)),a&&g[f].as(a)}};return arguments.length>=1?f(a):f()}function k(a){return function(c){b.metadata.define(b.metadata.invoker,a,c)}}function l(a){var c=function(a){b.metadata.define(b.metadata.invoker,R.instance,a)};return a?c(a):c}function m(a){return function(c){b.metadata.define(b.metadata.registration,a,c)}}function n(a){return m(new S(a))}function o(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return m(new T(a,b))}function p(a){if(null===a||void 0===a)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}function q(a,b,c,d){for(var e=c.length,f=new Array(e),g=void 0;e--;){if(null===(g=c[e])||void 0===g)throw new Error("Constructor Parameter with index "+e+" cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?");f[e]=a.get(g)}return void 0!==d&&(f=f.concat(d)),Reflect.construct(b,f)}function r(a){return a.hasOwnProperty("inject")?"function"==typeof a.inject?a.inject():a.inject:[]}function s(a){var c=function(a){var c=a.inject?a.inject.slice():null,d=b.metadata.getOwn(b.metadata.paramTypes,a)||U;if(c){for(var e=0;e<d.length;e++)if(c[e]&&c[e]!==d[e]){var f=c.indexOf(d[e]);f>-1&&c.splice(f,1),c.splice(f>-1&&f<e?e-1:e,0,d[e])}else c[e]||(c[e]=d[e]);a.inject=c}else a.inject=d};return a?c(a):c}function t(){for(var a=arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];return function(a,d,e){if("number"==typeof e&&1===c.length){var f=a.inject;if("function"==typeof f)throw new Error('Decorator inject cannot be used with "inject()".  Please use an array instead.');return f||(f=b.metadata.getOwn(b.metadata.paramTypes,a).slice(),a.inject=f),void(f[e]=c[0])}if(e){e.value.inject=c}else a.inject=c}}Object.defineProperty(a,"__esModule",{value:!0}),a.Container=a.InvocationHandler=a._emptyParameters=a.SingletonRegistration=a.TransientRegistration=a.FactoryInvoker=a.NewInstance=a.Factory=a.StrategyResolver=a.Parent=a.Optional=a.All=a.Lazy=a.resolver=void 0,a.getDecoratorDependencies=d,a.lazy=e,a.all=f,a.optional=g,a.parent=h,a.factory=i,a.newInstance=j,a.invoker=k,a.invokeAsFactory=l,a.registration=m,a.transient=n,a.singleton=o,a.autoinject=s,a.inject=t;var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J=a.resolver=b.protocol.create("aurelia:resolver",function(a){return"function"==typeof a.get||"Resolvers must implement: get(container: Container, key: any): any"}),K=a.Lazy=(u=J())(v=function(){function a(a){this._key=a}return a.prototype.get=function(a){var b=this;return function(){return a.get(b._key)}},a.of=function(b){return new a(b)},a}())||v,L=a.All=(w=J())(x=function(){function a(a){this._key=a}return a.prototype.get=function(a){return a.getAll(this._key)},a.of=function(b){return new a(b)},a}())||x,M=a.Optional=(y=J())(z=function(){function a(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1];this._key=a,this._checkParent=b}return a.prototype.get=function(a){return a.hasResolver(this._key,this._checkParent)?a.get(this._key):null},a.of=function(b){return new a(b,arguments.length<=1||void 0===arguments[1]||arguments[1])},a}())||z,N=a.Parent=(A=J())(B=function(){function a(a){this._key=a}return a.prototype.get=function(a){return a.parent?a.parent.get(this._key):null},a.of=function(b){return new a(b)},a}())||B,O=a.StrategyResolver=(C=J())(D=function(){function a(a,b){this.strategy=a,this.state=b}return a.prototype.get=function(a,b){switch(this.strategy){case 0:return this.state;case 1:var c=a.invoke(this.state);return this.state=c,this.strategy=0,c;case 2:return a.invoke(this.state);case 3:return this.state(a,b,this);case 4:return this.state[0].get(a,b);case 5:return a.get(this.state);default:throw new Error("Invalid strategy: "+this.strategy)}},a}())||D,P=a.Factory=(E=J())(F=function(){function a(a){this._key=a}return a.prototype.get=function(a){var b=this;return function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a.invoke(b._key,d)}},a.of=function(b){return new a(b)},a}())||F,Q=a.NewInstance=(G=J())(H=function(){function a(a){this.key=a,this.asKey=a;for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.dynamicDependencies=c}return a.prototype.get=function(a){var b=this.dynamicDependencies.length>0?this.dynamicDependencies.map(function(b){return b["protocol:aurelia:resolver"]?b.get(a):a.get(b)}):void 0,c=a.invoke(this.key,b);return a.registerInstance(this.asKey,c),c},a.prototype.as=function(a){return this.asKey=a,this},a.of=function(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return new(Function.prototype.bind.apply(a,[null].concat([b],d)))},a}())||H,R=a.FactoryInvoker=function(){function a(){}return a.prototype.invoke=function(a,b,c){for(var d=c.length,e=new Array(d);d--;)e[d]=a.get(c[d]);return b.apply(void 0,e)},a.prototype.invokeWithDynamicDependencies=function(a,b,c,d){for(var e=c.length,f=new Array(e);e--;)f[e]=a.get(c[e]);return void 0!==d&&(f=f.concat(d)),b.apply(void 0,f)},a}();R.instance=new R;var S=a.TransientRegistration=function(){function a(a){this._key=a}return a.prototype.registerResolver=function(a,b,c){var d=a.getResolver(this._key||b);return void 0===d?a.registerTransient(this._key||b,c):d},a}(),T=a.SingletonRegistration=function(){function a(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];"boolean"==typeof a?this._registerInChild=a:(this._key=a,this._registerInChild=b)}return a.prototype.registerResolver=function(a,b,c){var d=this._registerInChild?a:a.root,e=d.getResolver(this._key||b);return void 0===e?d.registerSingleton(this._key||b,c):e},a}(),U=a._emptyParameters=Object.freeze([]);b.metadata.registration="aurelia:registration",b.metadata.invoker="aurelia:invoker";var V=J.decorates,W=a.InvocationHandler=function(){function a(a,b,c){this.fn=a,this.invoker=b,this.dependencies=c}return a.prototype.invoke=function(a,b){return void 0!==b?this.invoker.invokeWithDynamicDependencies(a,this.fn,this.dependencies,b):this.invoker.invoke(a,this.fn,this.dependencies)},a}(),X=(I={},I[0]={invoke:function(a,b){return new b},invokeWithDynamicDependencies:q},I[1]={invoke:function(a,b,c){return new b(a.get(c[0]))},invokeWithDynamicDependencies:q},I[2]={invoke:function(a,b,c){return new b(a.get(c[0]),a.get(c[1]))},invokeWithDynamicDependencies:q},I[3]={invoke:function(a,b,c){return new b(a.get(c[0]),a.get(c[1]),a.get(c[2]))},invokeWithDynamicDependencies:q},I[4]={invoke:function(a,b,c){return new b(a.get(c[0]),a.get(c[1]),a.get(c[2]),a.get(c[3]))},invokeWithDynamicDependencies:q},I[5]={invoke:function(a,b,c){return new b(a.get(c[0]),a.get(c[1]),a.get(c[2]),a.get(c[3]),a.get(c[4]))},invokeWithDynamicDependencies:q},I.fallback={invoke:q,invokeWithDynamicDependencies:q},I);a.Container=function(){function a(a){void 0===a&&(a={}),this._configuration=a,this._onHandlerCreated=a.onHandlerCreated,this._handlers=a.handlers||(a.handlers=new Map),this._resolvers=new Map,this.root=this,this.parent=null}return a.prototype.makeGlobal=function(){return a.instance=this,this},a.prototype.setHandlerCreatedCallback=function(a){this._onHandlerCreated=a,this._configuration.onHandlerCreated=a},a.prototype.registerInstance=function(a,b){return this.registerResolver(a,new O(0,void 0===b?a:b))},a.prototype.registerSingleton=function(a,b){return this.registerResolver(a,new O(1,void 0===b?a:b))},a.prototype.registerTransient=function(a,b){return this.registerResolver(a,new O(2,void 0===b?a:b))},a.prototype.registerHandler=function(a,b){return this.registerResolver(a,new O(3,b))},a.prototype.registerAlias=function(a,b){return this.registerResolver(b,new O(5,a))},a.prototype.registerResolver=function(a,b){p(a);var c=this._resolvers,d=c.get(a);return void 0===d?c.set(a,b):4===d.strategy?d.state.push(b):c.set(a,new O(4,[d,b])),b},a.prototype.autoRegister=function(a,c){if("function"==typeof(c=void 0===c?a:c)){var d=b.metadata.get(b.metadata.registration,c);return void 0===d?this.registerResolver(a,new O(1,c)):d.registerResolver(this,a,c)}return this.registerResolver(a,new O(0,c))},a.prototype.autoRegisterAll=function(a){for(var b=a.length;b--;)this.autoRegister(a[b])},a.prototype.unregister=function(a){this._resolvers.delete(a)},a.prototype.hasResolver=function(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return p(a),this._resolvers.has(a)||b&&null!==this.parent&&this.parent.hasResolver(a,b)},a.prototype.getResolver=function(a){return this._resolvers.get(a)},a.prototype.get=function(c){if(p(c),c===a)return this;if(V(c))return c.get(this,c);var d=this._resolvers.get(c);if(void 0===d){if(null===this.parent)return this.autoRegister(c).get(this,c);var e=b.metadata.get(b.metadata.registration,c);return void 0===e?this.parent._get(c):e.registerResolver(this,c,c).get(this,c)}return d.get(this,c)},a.prototype._get=function(a){var b=this._resolvers.get(a);return void 0===b?null===this.parent?this.autoRegister(a).get(this,a):this.parent._get(a):b.get(this,a)},a.prototype.getAll=function(a){p(a);var b=this._resolvers.get(a);if(void 0===b)return null===this.parent?U:this.parent.getAll(a);if(4===b.strategy){for(var c=b.state,d=c.length,e=new Array(d);d--;)e[d]=c[d].get(this,a);return e}return[b.get(this,a)]},a.prototype.createChild=function(){var b=new a(this._configuration);return b.root=this.root,b.parent=this,b},a.prototype.invoke=function(a,b){try{var d=this._handlers.get(a);return void 0===d&&(d=this._createInvocationHandler(a),this._handlers.set(a,d)),d.invoke(this,b)}catch(b){throw new c.AggregateError("Error invoking "+a.name+". Check the inner error for details.",b,!0)}},a.prototype._createInvocationHandler=function(a){var c=void 0;if(void 0===a.inject)c=b.metadata.getOwn(b.metadata.paramTypes,a)||U;else{c=[];for(var d=a;"function"==typeof d;){var e;(e=c).push.apply(e,r(d)),d=Object.getPrototypeOf(d)}}var f=b.metadata.getOwn(b.metadata.invoker,a)||X[c.length]||X.fallback,g=new W(a,f,c);return void 0!==this._onHandlerCreated?this._onHandlerCreated(g):g},a}()}.call(b,b,a("aurelia-metadata"),a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-dependency-injection@1.3.2.js",["npm:aurelia-dependency-injection@1.3.2/aurelia-dependency-injection"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-dependency-injection@1.3.2/aurelia-dependency-injection"))}),System.registerDynamic("npm:aurelia-binding@1.7.1/aurelia-binding.js",["aurelia-logging","aurelia-pal","aurelia-task-queue","aurelia-metadata"],!1,function(a,b,c){return function(a,b,c,d,e){"use strict";function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a){if(a in Pa)return Pa[a];var b=a.charAt(0).toLowerCase()+a.slice(1).replace(/[_.-](\w|$)/g,function(a,b){return b.toUpperCase()});return Pa[a]=b,b}function j(a,b){return{bindingContext:a,parentOverrideContext:b||null}}function k(a,b,c){var d=b.overrideContext;if(c){for(;c&&d;)c--,d=d.parentOverrideContext;if(c||!d)return;return a in d?d:d.bindingContext}for(;d&&!(a in d)&&!(d.bindingContext&&a in d.bindingContext);)d=d.parentOverrideContext;return d?a in d?d:d.bindingContext:b.bindingContext||b.overrideContext}function l(a,b){return b?{bindingContext:a,overrideContext:j(a,j(b))}:{bindingContext:a,overrideContext:j(a)}}function m(a){for(var b=void 0===this._observerSlots?0:this._observerSlots,c=b;c--&&this[Qa[c]]!==a;);if(-1===c){for(c=0;this[Qa[c]];)c++;this[Qa[c]]=a,a.subscribe(Oa,this),c===b&&(this._observerSlots=c+1)}void 0===this._version&&(this._version=0),this[Ra[c]]=this._version}function n(a,b){var c=this.observerLocator.getObserver(a,b);m.call(this,c)}function o(a){var b=this.observerLocator.getArrayObserver(a);m.call(this,b)}function p(a){for(var b=this._observerSlots;b--;)if(a||this[Ra[b]]!==this._version){var c=this[Qa[b]];this[Qa[b]]=null,c&&c.unsubscribe(Oa,this)}}function q(){return function(a){a.prototype.observeProperty=n,a.prototype.observeArray=o,a.prototype.unobserve=p,a.prototype.addObserver=m}}function r(a){for(var b=Ta.length,d=0;d<b;){var e=Ta[d];if(Ua[e.__connectQueueId]=!1,e.connect(!0),++d%100==0&&c.PLATFORM.performance.now()-a>Xa)break}Ta.splice(0,d),Ta.length?c.PLATFORM.requestAnimationFrame(r):(Ya=!1,Za=0)}function s(a){if(Za<Wa)Za++,a.connect(!1);else{var b=a.__connectQueueId;void 0===b&&(b=Va,Va++,a.__connectQueueId=b),Ua[b]||(Ta.push(a),Ua[b]=!0)}Ya||(Ya=!0,c.PLATFORM.requestAnimationFrame(r))}function t(a,b){return!this.hasSubscriber(a,b)&&(this._context0?this._context1?this._context2?this._contextsRest?(this._contextsRest.push(a),this._callablesRest.push(b),!0):(this._contextsRest=[a],this._callablesRest=[b],!0):(this._context2=a,this._callable2=b,!0):(this._context1=a,this._callable1=b,!0):(this._context0=a,this._callable0=b,!0))}function u(a,b){if(this._context0===a&&this._callable0===b)return this._context0=null,this._callable0=null,!0;if(this._context1===a&&this._callable1===b)return this._context1=null,this._callable1=null,!0;if(this._context2===a&&this._callable2===b)return this._context2=null,this._callable2=null,!0;var c=this._callablesRest;if(void 0===c||0===c.length)return!1;for(var d=this._contextsRest,e=0;(c[e]!==b||d[e]!==a)&&c.length>e;)e++;return!(e>=c.length)&&(d.splice(e,1),c.splice(e,1),!0)}function v(a,b){var c=this._context0,d=this._callable0,e=this._context1,f=this._callable1,g=this._context2,h=this._callable2,i=this._contextsRest?this._contextsRest.length:0,j=void 0,k=void 0,l=void 0,m=void 0;if(i){for(l=ab.length;l--&&ab[l];);for(l<0?(l=ab.length,j=[],k=[],ab.push(!0),$a.push(j),_a.push(k)):(ab[l]=!0,j=$a[l],k=_a[l]),m=i;m--;)j[m]=this._contextsRest[m],k[m]=this._callablesRest[m]}if(c&&(d?d.call(c,a,b):c(a,b)),e&&(f?f.call(e,a,b):e(a,b)),g&&(h?h.call(g,a,b):g(a,b)),i){for(m=0;m<i;m++){var n=k[m],o=j[m];n?n.call(o,a,b):o(a,b),j[m]=null,k[m]=null}ab[l]=!1}}function w(){return!!(this._context0||this._context1||this._context2||this._contextsRest&&this._contextsRest.length)}function x(a,b){if(this._context0===a&&this._callable0===b||this._context1===a&&this._callable1===b||this._context2===a&&this._callable2===b)return!0;var c=void 0,d=this._contextsRest;if(!d||0===(c=d.length))return!1;for(var e=this._callablesRest;c--;)if(d[c]===a&&e[c]===b)return!0;return!1}function y(){return function(a){a.prototype.addSubscriber=t,a.prototype.removeSubscriber=u,a.prototype.callSubscribers=v,a.prototype.hasSubscribers=w,a.prototype.hasSubscriber=x}}function z(a){return+a==a>>>0}function A(a){return+a}function B(a,b,c){return{index:a,removed:b,addedCount:c}}function C(){}function D(a,b,c,d,e,f){return gb.calcSplices(a,b,c,d,e,f)}function E(a,b,c,d){return b<c||d<a?-1:b===c||d===a?0:a<c?b<d?b-c:d-c:d<b?d-a:b-a}function F(a,b,c,d){for(var e=B(b,c,d),f=!1,g=0,h=0;h<a.length;h++){var i=a[h];if(i.index+=g,!f){var j=E(e.index,e.index+e.removed.length,i.index,i.index+i.addedCount);if(j>=0){a.splice(h,1),h--,g-=i.addedCount-i.removed.length,e.addedCount+=i.addedCount-j;var k=e.removed.length+i.removed.length-j;if(e.addedCount||k){var l=i.removed;if(e.index<i.index){var m=e.removed.slice(0,i.index-e.index);Array.prototype.push.apply(m,l),l=m}if(e.index+e.removed.length>i.index+i.addedCount){var n=e.removed.slice(i.index+i.addedCount-e.index);Array.prototype.push.apply(l,n)}e.removed=l,i.index<e.index&&(e.index=i.index)}else f=!0}else if(e.index<i.index){f=!0,a.splice(h,0,e),h++;var o=e.addedCount-e.removed.length;i.index+=o,g+=o}}}f||a.push(e)}function G(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];switch(e.type){case"splice":F(c,e.index,e.removed.slice(),e.addedCount);break;case"add":case"update":case"delete":if(!z(e.name))continue;var f=A(e.name);if(f<0)continue;F(c,f,[e.oldValue],"delete"===e.type?0:1);break;default:console.error("Unexpected record type: "+JSON.stringify(e))}}return c}function H(a,b){var c=[];return G(a,b).forEach(function(b){if(1===b.addedCount&&1===b.removed.length)return void(b.removed[0]!==a[b.index]&&c.push(b));c=c.concat(D(a,b.index,b.index+b.addedCount,b.removed,0,b.removed.length))}),c}function I(a,b,c,d){return{type:a,object:b,key:c,oldValue:d}}function J(a){for(var b=new Array(a.size),c=a.keys(),d=0,e=void 0;(e=c.next())&&!e.done;)b[d]=I("added",a,e.value),d++;return b}function K(a,b){return qb.for(a,b)}function L(a,b,c){for(var d=b.length,e=[],f=0;f<d;f++)e[f]=b[f].evaluate(a,c);return e}function M(a,b){return null!==a&&null!==b?"string"==typeof a&&"string"!=typeof b?a+b.toString():"string"!=typeof a&&"string"==typeof b?a.toString()+b:a+b:null!==a?a:null!==b?b:0}function N(a,b,c){var d=null===a||void 0===a?null:a[b];if("function"==typeof d)return d;if(!c&&(null===d||void 0===d))return null;throw new Error(b+" is not a function")}function O(a,b){if(Array.isArray(a))return a[parseInt(b,10)];if(a)return a[b];if(null!==a&&void 0!==a)return a[b]}function P(a,b,c){if(Array.isArray(a)){var d=parseInt(b,10);a.length<=d&&(a.length=d+1),a[d]=c}else a[b]=c;return c}function Q(a){var b=new Lb;return a.accept(b)}function R(a){return a>=Sb&&a<=Xb||a===Mc}function S(a){return Ac<=a&&a<=Ic||sc<=a&&a<=uc||a===zc||a===$b}function T(a){return Ac<=a&&a<=Ic||sc<=a&&a<=uc||qc<=a&&a<=rc||a===zc||a===$b}function U(a){return qc<=a&&a<=rc}function V(a){return a===Bc||a===tc}function W(a){return a===hc||a===fc}function X(a){switch(a){case Dc:return Tb;case Cc:return Vb;case Ec:return Wb;case Fc:return Sb;case Hc:return Ub;default:return a}}function Y(a,b){if(!a)throw b||"Assertion failed"}function Z(a,b){return Rc.for(a,b)}function $(a){return a.path&&a.path[0]||a.deepPath&&a.deepPath[0]||a.target}function _(){this.standardStopPropagation(),this.propagationStopped=!0}function aa(a){a.propagationStopped=!1;for(var b=$(a),c=[];b;){if(b.capturedCallbacks){var d=b.capturedCallbacks[a.type];d&&(a.stopPropagation!==_&&(a.standardStopPropagation=a.stopPropagation,a.stopPropagation=_),c.push(d))}b=b.parentNode}for(var e=c.length-1;e>=0&&!a.propagationStopped;e--){var f=c[e];"handleEvent"in f?f.handleEvent(a):f(a)}}function ba(a){a.propagationStopped=!1;for(var b=$(a);b&&!a.propagationStopped;){if(b.delegatedCallbacks){var c=b.delegatedCallbacks[a.type];c&&(a.stopPropagation!==_&&(a.standardStopPropagation=a.stopPropagation,a.stopPropagation=_),"handleEvent"in c?c.handleEvent(a):c(a))}b=b.parentNode}}function ca(a){return!!(a&&a.get&&a.get.dependencies)}function da(a,b,c){Object.getOwnPropertyDescriptor(a.prototype,b).get.dependencies=c}function ea(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a,c,d){return d.get.dependencies=b,d}}function fa(a,b,c,d){var e=c.get.dependencies;if(!(e instanceof pd)){for(var f=e.length;f--;)e[f]=d.parser.parse(e[f]);e=c.get.dependencies=new pd(b,e)}var g={bindingContext:a,overrideContext:j(a)};return new bb(g,e,d)}function ga(a){if(void 0===a||"string"==typeof a)return function(b){e.metadata.define(e.metadata.resource,new Dd(a),b)};e.metadata.define(e.metadata.resource,new Dd,a)}function ha(a){if(void 0===a||"string"==typeof a)return function(b){e.metadata.define(e.metadata.resource,new Ed(a),b)};e.metadata.define(e.metadata.resource,new Ed,a)}function ia(a){var b=a.au;if(void 0===b)throw new Error('No Aurelia APIs are defined for the element: "'+a.tagName+'".');return b}function ja(a,b){return Jd.for(a,b)}function ka(a,b,c){function d(a,b,c,d){var e=void 0===b;e&&(a=a.prototype,b="string"==typeof d?d:d.name);var f="_"+b,g={configurable:!0,enumerable:!1,writable:!0},h=d&&d.changeHandler||b+"Changed";if(c?"function"==typeof c.initializer&&(g.value=c.initializer()):c={},"enumerable"in c||(c.enumerable=!0),delete c.value,delete c.writable,delete c.initializer,Reflect.defineProperty(a,f,g),c.get=function(){return this[f]},c.set=function(a){var c=this[f];a!==c&&(this[f]=a,Reflect.defineProperty(this,f,{enumerable:!1}),this[h]&&this[h](a,c,b))},c.get.dependencies=[f],!e)return c;Reflect.defineProperty(a,b,c)}return void 0===b?function(b,c,e){return d(b,c,e,a)}:d(a,b,c)}function la(a,b){Kd.hasOwnProperty(b)||(Kd[b]=0),a.observeProperty(Kd,b)}function ma(a){Kd.hasOwnProperty(a)&&Kd[a]++}Object.defineProperty(a,"__esModule",{value:!0}),a.getSetObserver=a.BindingEngine=a.NameExpression=a.Listener=a.ListenerExpression=a.BindingBehaviorResource=a.ValueConverterResource=a.Call=a.CallExpression=a.Binding=a.BindingExpression=a.ObjectObservationAdapter=a.ObserverLocator=a.SVGAnalyzer=a.presentationAttributes=a.presentationElements=a.elements=a.ComputedExpression=a.ClassObserver=a.SelectValueObserver=a.CheckedObserver=a.ValueAttributeObserver=a.StyleObserver=a.DataAttributeObserver=a.dataAttributeAccessor=a.XLinkAttributeObserver=a.SetterObserver=a.PrimitiveObserver=a.propertyAccessor=a.DirtyCheckProperty=a.DirtyChecker=a.EventSubscriber=a.EventManager=a.delegationStrategy=a.getMapObserver=a.ParserImplementation=a.Parser=a.Scanner=a.Lexer=a.Token=a.bindingMode=a.ExpressionCloner=a.Unparser=a.LiteralObject=a.LiteralArray=a.LiteralString=a.LiteralPrimitive=a.PrefixNot=a.Binary=a.CallFunction=a.CallMember=a.CallScope=a.AccessKeyed=a.AccessMember=a.AccessScope=a.AccessThis=a.Conditional=a.Assign=a.ValueConverter=a.BindingBehavior=a.Chain=a.Expression=a.getArrayObserver=a.CollectionLengthObserver=a.ModifyCollectionObserver=a.ExpressionObserver=a.sourceContext=a.targetContext=void 0,a.camelCase=i,a.createOverrideContext=j,a.getContextFor=k,a.createScopeForTest=l,a.connectable=q,a.enqueueBindingConnect=s,a.subscriberCollection=y,a.calcSplices=D,a.mergeSplice=F,a.projectArraySplices=H,a.getChangeRecords=J,a.cloneExpression=Q,a.hasDeclaredDependencies=ca,a.declarePropertyDependencies=da,a.computedFrom=ea,a.createComputedObserver=fa,a.valueConverter=ga,a.bindingBehavior=ha,a.observable=ka,a.connectBindingToSignal=la,a.signalBindings=ma;for(var na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka=f(b),La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Ma=(function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),Na=a.targetContext="Binding:target",Oa=a.sourceContext="Binding:source",Pa=Object.create(null),Qa=[],Ra=[],Sa=0;Sa<100;Sa++)Qa.push("_observer"+Sa),Ra.push("_observerVersion"+Sa);var Ta=[],Ua={},Va=0,Wa=100,Xa=15,Ya=!1,Za=0,$a=[],_a=[],ab=[],bb=a.ExpressionObserver=(na=q(),oa=y(),na(pa=oa(pa=function(){function a(a,b,c,d){this.scope=a,this.expression=b,this.observerLocator=c,this.lookupFunctions=d}return a.prototype.getValue=function(){return this.expression.evaluate(this.scope,this.lookupFunctions)},a.prototype.setValue=function(a){this.expression.assign(this.scope,a)},a.prototype.subscribe=function(a,b){var c=this;if(this.hasSubscribers()||(this.oldValue=this.expression.evaluate(this.scope,this.lookupFunctions),this.expression.connect(this,this.scope)),this.addSubscriber(a,b),1===arguments.length&&a instanceof Function)return{dispose:function(){c.unsubscribe(a,b)}}},a.prototype.unsubscribe=function(a,b){this.removeSubscriber(a,b)&&!this.hasSubscribers()&&(this.unobserve(!0),this.oldValue=void 0)},a.prototype.call=function(){var a=this.expression.evaluate(this.scope,this.lookupFunctions),b=this.oldValue;a!==b&&(this.oldValue=a,this.callSubscribers(a,b)),this._version++,this.expression.connect(this,this.scope),this.unobserve(!1)},a}())||pa)||pa),cb=0,db=1,eb=2,fb=3;C.prototype={calcEditDistances:function(a,b,c,d,e,f){for(var g=f-e+1,h=c-b+1,i=new Array(g),j=void 0,k=void 0,l=0;l<g;++l)i[l]=new Array(h),i[l][0]=l;for(var m=0;m<h;++m)i[0][m]=m;for(var n=1;n<g;++n)for(var o=1;o<h;++o)this.equals(a[b+o-1],d[e+n-1])?i[n][o]=i[n-1][o-1]:(j=i[n-1][o]+1,k=i[n][o-1]+1,i[n][o]=j<k?j:k);return i},spliceOperationsFromEditDistances:function(a){for(var b=a.length-1,c=a[0].length-1,d=a[b][c],e=[];b>0||c>0;)if(0!==b)if(0!==c){var f=a[b-1][c-1],g=a[b-1][c],h=a[b][c-1],i=void 0;i=g<h?g<f?g:f:h<f?h:f,i===f?(f===d?e.push(cb):(e.push(db),d=f),b--,c--):i===g?(e.push(fb),b--,d=g):(e.push(eb),c--,d=h)}else e.push(fb),b--;else e.push(eb),c--;return e.reverse(),e},calcSplices:function(a,b,c,d,e,f){var g=0,h=0,i=Math.min(c-b,f-e);if(0===b&&0===e&&(g=this.sharedPrefix(a,d,i)),c===a.length&&f===d.length&&(h=this.sharedSuffix(a,d,i-g)),b+=g,e+=g,c-=h,f-=h,c-b==0&&f-e==0)return[];if(b===c){for(var j=B(b,[],0);e<f;)j.removed.push(d[e++]);return[j]}if(e===f)return[B(b,[],c-b)];for(var k=this.spliceOperationsFromEditDistances(this.calcEditDistances(a,b,c,d,e,f)),l=void 0,m=[],n=b,o=e,p=0;p<k.length;++p)switch(k[p]){case cb:l&&(m.push(l),l=void 0),n++,o++;break;case db:l||(l=B(n,[],0)),l.addedCount++,n++,l.removed.push(d[o]),o++;break;case eb:l||(l=B(n,[],0)),l.addedCount++,n++;break;case fb:l||(l=B(n,[],0)),l.removed.push(d[o]),o++}return l&&m.push(l),m},sharedPrefix:function(a,b,c){for(var d=0;d<c;++d)if(!this.equals(a[d],b[d]))return d;return c},sharedSuffix:function(a,b,c){for(var d=a.length,e=b.length,f=0;f<c&&this.equals(a[--d],b[--e]);)f++;return f},calculateSplices:function(a,b){return this.calcSplices(a,0,a.length,b,0,b.length)},equals:function(a,b){return a===b}};var gb=new C,hb=a.ModifyCollectionObserver=(qa=y())(ra=function(){function a(a,b){this.taskQueue=a,this.queued=!1,this.changeRecords=null,this.oldCollection=null,this.collection=b,this.lengthPropertyName=b instanceof Map||b instanceof Set?"size":"length"}return a.prototype.subscribe=function(a,b){this.addSubscriber(a,b)},a.prototype.unsubscribe=function(a,b){this.removeSubscriber(a,b)},a.prototype.addChangeRecord=function(a){if(this.hasSubscribers()||this.lengthObserver){if("splice"===a.type){var b=a.index,c=a.object.length;b>c?b=c-a.addedCount:b<0&&(b=c+a.removed.length+b-a.addedCount),b<0&&(b=0),a.index=b}null===this.changeRecords?this.changeRecords=[a]:this.changeRecords.push(a),this.queued||(this.queued=!0,this.taskQueue.queueMicroTask(this))}},a.prototype.flushChangeRecords=function(){(this.changeRecords&&this.changeRecords.length||this.oldCollection)&&this.call()},a.prototype.reset=function(a){this.oldCollection=a,this.hasSubscribers()&&!this.queued&&(this.queued=!0,this.taskQueue.queueMicroTask(this))},a.prototype.getLengthObserver=function(){return this.lengthObserver||(this.lengthObserver=new ib(this.collection))},a.prototype.call=function(){var a=this.changeRecords,b=this.oldCollection,c=void 0;this.queued=!1,this.changeRecords=[],this.oldCollection=null,this.hasSubscribers()&&(c=b?this.collection instanceof Map||this.collection instanceof Set?J(b):D(this.collection,0,this.collection.length,b,0,b.length):this.collection instanceof Map||this.collection instanceof Set?a:H(this.collection,a),this.callSubscribers(c)),this.lengthObserver&&this.lengthObserver.call(this.collection[this.lengthPropertyName])},a}())||ra,ib=a.CollectionLengthObserver=(sa=y())(ta=function(){function a(a){this.collection=a,this.lengthPropertyName=a instanceof Map||a instanceof Set?"size":"length",this.currentValue=a[this.lengthPropertyName]}return a.prototype.getValue=function(){return this.collection[this.lengthPropertyName]},a.prototype.setValue=function(a){this.collection[this.lengthPropertyName]=a},a.prototype.subscribe=function(a,b){this.addSubscriber(a,b)},a.prototype.unsubscribe=function(a,b){this.removeSubscriber(a,b)},a.prototype.call=function(a){var b=this.currentValue;this.callSubscribers(a,b),this.currentValue=a},a}())||ta,jb=Array.prototype.pop,kb=Array.prototype.push,lb=Array.prototype.reverse,mb=Array.prototype.shift,nb=Array.prototype.sort,ob=Array.prototype.splice,pb=Array.prototype.unshift;Array.prototype.pop=function(){var a=this.length>0,b=jb.apply(this,arguments);return a&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:this.length,oldValue:b}),b},Array.prototype.push=function(){var a=kb.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:this.length-arguments.length,removed:[],addedCount:arguments.length}),a},Array.prototype.reverse=function(){var a=void 0;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),a=this.slice());var b=lb.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(a),b},Array.prototype.shift=function(){var a=this.length>0,b=mb.apply(this,arguments);return a&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:0,oldValue:b}),b},Array.prototype.sort=function(){var a=void 0;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),a=this.slice());var b=nb.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(a),b},Array.prototype.splice=function(){var a=ob.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:+arguments[0],removed:a,addedCount:arguments.length>2?arguments.length-2:0}),a},Array.prototype.unshift=function(){var a=pb.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:0,removed:[],addedCount:arguments.length}),a},a.getArrayObserver=K;var qb=function(a){function b(b,c){return g(this,a.call(this,b,c))}return h(b,a),b.for=function(a,c){return"__array_observer__"in c||Reflect.defineProperty(c,"__array_observer__",{value:b.create(a,c),enumerable:!1,configurable:!1}),c.__array_observer__},b.create=function(a,c){return new b(a,c)},b}(hb),rb=a.Expression=function(){function a(){this.isChain=!1,this.isAssignable=!1}return a.prototype.evaluate=function(a,b,c){throw new Error('Binding expression "'+this+'" cannot be evaluated.')},a.prototype.assign=function(a,b,c){throw new Error('Binding expression "'+this+'" cannot be assigned to.')},a.prototype.toString=function(){return"undefined"==typeof FEATURE_NO_UNPARSER?Kb.unparse(this):Function.prototype.toString.call(this)},a}(),sb=a.Chain=function(a){function b(b){var c=g(this,a.call(this));return c.expressions=b,c.isChain=!0,c}return h(b,a),b.prototype.evaluate=function(a,b){for(var c=void 0,d=this.expressions,e=void 0,f=0,g=d.length;f<g;++f)null!==(e=d[f].evaluate(a,b))&&(c=e);return c},b.prototype.accept=function(a){return a.visitChain(this)},b}(rb),tb=a.BindingBehavior=function(a){function b(b,c,d){var e=g(this,a.call(this));return e.expression=b,e.name=c,e.args=d,e}return h(b,a),b.prototype.evaluate=function(a,b){return this.expression.evaluate(a,b)},b.prototype.assign=function(a,b,c){return this.expression.assign(a,b,c)},b.prototype.accept=function(a){return a.visitBindingBehavior(this)},b.prototype.connect=function(a,b){this.expression.connect(a,b)},b.prototype.bind=function(a,b,c){this.expression.expression&&this.expression.bind&&this.expression.bind(a,b,c);var d=c.bindingBehaviors(this.name);if(!d)throw new Error('No BindingBehavior named "'+this.name+'" was found!');var e="behavior-"+this.name;if(a[e])throw new Error('A binding behavior named "'+this.name+'" has already been applied to "'+this.expression+'"');a[e]=d,d.bind.apply(d,[a,b].concat(L(b,this.args,a.lookupFunctions)))},b.prototype.unbind=function(a,b){var c="behavior-"+this.name;a[c].unbind(a,b),a[c]=null,this.expression.expression&&this.expression.unbind&&this.expression.unbind(a,b)},b}(rb),ub=a.ValueConverter=function(a){function b(b,c,d,e){var f=g(this,a.call(this));return f.expression=b,f.name=c,f.args=d,f.allArgs=e,f}return h(b,a),b.prototype.evaluate=function(a,b){var c=b.valueConverters(this.name);if(!c)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"toView"in c?c.toView.apply(c,L(a,this.allArgs,b)):this.allArgs[0].evaluate(a,b)},b.prototype.assign=function(a,b,c){var d=c.valueConverters(this.name);if(!d)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"fromView"in d&&(b=d.fromView.apply(d,[b].concat(L(a,this.args,c)))),this.allArgs[0].assign(a,b,c)},b.prototype.accept=function(a){return a.visitValueConverter(this)},b.prototype.connect=function(a,b){for(var c=this.allArgs,d=c.length;d--;)c[d].connect(a,b);var e=a.lookupFunctions.valueConverters(this.name);if(!e)throw new Error('No ValueConverter named "'+this.name+'" was found!');var f=e.signals;if(void 0!==f)for(d=f.length;d--;)la(a,f[d])},b}(rb),vb=a.Assign=function(a){function b(b,c){var d=g(this,a.call(this));return d.target=b,d.value=c,d.isAssignable=!0,d}return h(b,a),b.prototype.evaluate=function(a,b){return this.target.assign(a,this.value.evaluate(a,b))},b.prototype.accept=function(a){a.visitAssign(this)},b.prototype.connect=function(a,b){},b.prototype.assign=function(a,b){this.value.assign(a,b),this.target.assign(a,b)},b}(rb),wb=a.Conditional=function(a){function b(b,c,d){var e=g(this,a.call(this));return e.condition=b,e.yes=c,e.no=d,e}return h(b,a),b.prototype.evaluate=function(a,b){return this.condition.evaluate(a,b)?this.yes.evaluate(a,b):this.no.evaluate(a,b)},b.prototype.accept=function(a){return a.visitConditional(this)},b.prototype.connect=function(a,b){this.condition.connect(a,b),this.condition.evaluate(b)?this.yes.connect(a,b):this.no.connect(a,b)},b}(rb),xb=a.AccessThis=function(a){function b(b){var c=g(this,a.call(this));return c.ancestor=b,c}return h(b,a),b.prototype.evaluate=function(a,b){for(var c=a.overrideContext,d=this.ancestor;d--&&c;)c=c.parentOverrideContext;return d<1&&c?c.bindingContext:void 0},b.prototype.accept=function(a){return a.visitAccessThis(this)},b.prototype.connect=function(a,b){},b}(rb),yb=a.AccessScope=function(a){function b(b,c){var d=g(this,a.call(this));return d.name=b,d.ancestor=c,d.isAssignable=!0,d}return h(b,a),b.prototype.evaluate=function(a,b){return k(this.name,a,this.ancestor)[this.name]},b.prototype.assign=function(a,b){var c=k(this.name,a,this.ancestor);return c?c[this.name]=b:void 0},b.prototype.accept=function(a){return a.visitAccessScope(this)},b.prototype.connect=function(a,b){var c=k(this.name,b,this.ancestor);a.observeProperty(c,this.name)},b}(rb),zb=a.AccessMember=function(a){function b(b,c){var d=g(this,a.call(this));return d.object=b,d.name=c,d.isAssignable=!0,d}return h(b,a),b.prototype.evaluate=function(a,b){var c=this.object.evaluate(a,b);return null===c||void 0===c?c:c[this.name]},b.prototype.assign=function(a,b){var c=this.object.evaluate(a);return null!==c&&void 0!==c||(c={},this.object.assign(a,c)),c[this.name]=b,b},b.prototype.accept=function(a){return a.visitAccessMember(this)},b.prototype.connect=function(a,b){this.object.connect(a,b);var c=this.object.evaluate(b);c&&a.observeProperty(c,this.name)},b}(rb),Ab=a.AccessKeyed=function(a){function b(b,c){var d=g(this,a.call(this));return d.object=b,d.key=c,d.isAssignable=!0,d}return h(b,a),b.prototype.evaluate=function(a,b){return O(this.object.evaluate(a,b),this.key.evaluate(a,b))},b.prototype.assign=function(a,b){return P(this.object.evaluate(a),this.key.evaluate(a),b)},b.prototype.accept=function(a){return a.visitAccessKeyed(this)},b.prototype.connect=function(a,b){this.object.connect(a,b);var c=this.object.evaluate(b);if(c instanceof Object){this.key.connect(a,b);var d=this.key.evaluate(b);null===d||void 0===d||Array.isArray(c)&&"number"==typeof d||a.observeProperty(c,d)}},b}(rb),Bb=a.CallScope=function(a){function b(b,c,d){var e=g(this,a.call(this));return e.name=b,e.args=c,e.ancestor=d,e}return h(b,a),b.prototype.evaluate=function(a,b,c){var d=L(a,this.args,b),e=k(this.name,a,this.ancestor),f=N(e,this.name,c);if(f)return f.apply(e,d)},b.prototype.accept=function(a){return a.visitCallScope(this)},b.prototype.connect=function(a,b){for(var c=this.args,d=c.length;d--;)c[d].connect(a,b)},b}(rb),Cb=a.CallMember=function(a){function b(b,c,d){var e=g(this,a.call(this));return e.object=b,e.name=c,e.args=d,e}return h(b,a),b.prototype.evaluate=function(a,b,c){var d=this.object.evaluate(a,b),e=L(a,this.args,b),f=N(d,this.name,c);if(f)return f.apply(d,e)},b.prototype.accept=function(a){return a.visitCallMember(this)},b.prototype.connect=function(a,b){if(this.object.connect(a,b),N(this.object.evaluate(b),this.name,!1))for(var c=this.args,d=c.length;d--;)c[d].connect(a,b)},b}(rb),Db=a.CallFunction=function(a){function b(b,c){var d=g(this,a.call(this));return d.func=b,d.args=c,d}return h(b,a),b.prototype.evaluate=function(a,b,c){var d=this.func.evaluate(a,b);if("function"==typeof d)return d.apply(null,L(a,this.args,b));if(c||null!==d&&void 0!==d)throw new Error(this.func+" is not a function")},b.prototype.accept=function(a){return a.visitCallFunction(this)},b.prototype.connect=function(a,b){if(this.func.connect(a,b),"function"==typeof this.func.evaluate(b))for(var c=this.args,d=c.length;d--;)c[d].connect(a,b)},b}(rb),Eb=a.Binary=function(a){function b(b,c,d){var e=g(this,a.call(this));return e.operation=b,e.left=c,e.right=d,e}return h(b,a),b.prototype.evaluate=function(a,b){var c=this.left.evaluate(a,b);switch(this.operation){case"&&":return c&&this.right.evaluate(a,b);case"||":return c||this.right.evaluate(a,b)}var d=this.right.evaluate(a,b);switch(this.operation){case"==":return c==d;case"===":return c===d;case"!=":return c!=d;case"!==":return c!==d}if(null===c||null===d||void 0===c||void 0===d){switch(this.operation){case"+":return null!==c&&void 0!==c?c:null!==d&&void 0!==d?d:0;case"-":return null!==c&&void 0!==c?c:null!==d&&void 0!==d?0-d:0}return null}switch(this.operation){case"+":return M(c,d);case"-":return c-d;case"*":return c*d;case"/":return c/d;case"%":return c%d;case"<":return c<d;case">":return c>d;case"<=":return c<=d;case">=":return c>=d;case"^":return c^d}throw new Error("Internal error ["+this.operation+"] not handled")},b.prototype.accept=function(a){return a.visitBinary(this)},b.prototype.connect=function(a,b){this.left.connect(a,b);var c=this.left.evaluate(b);"&&"===this.operation&&!c||"||"===this.operation&&c||this.right.connect(a,b)},b}(rb),Fb=a.PrefixNot=function(a){function b(b,c){var d=g(this,a.call(this));return d.operation=b,d.expression=c,d}return h(b,a),b.prototype.evaluate=function(a,b){return!this.expression.evaluate(a,b)},b.prototype.accept=function(a){return a.visitPrefix(this)},b.prototype.connect=function(a,b){this.expression.connect(a,b)},b}(rb),Gb=a.LiteralPrimitive=function(a){function b(b){var c=g(this,a.call(this));return c.value=b,c}return h(b,a),b.prototype.evaluate=function(a,b){return this.value},b.prototype.accept=function(a){return a.visitLiteralPrimitive(this)},b.prototype.connect=function(a,b){},b}(rb),Hb=a.LiteralString=function(a){function b(b){var c=g(this,a.call(this));return c.value=b,c}return h(b,a),b.prototype.evaluate=function(a,b){return this.value},b.prototype.accept=function(a){return a.visitLiteralString(this)},b.prototype.connect=function(a,b){},b}(rb),Ib=a.LiteralArray=function(a){function b(b){var c=g(this,a.call(this));return c.elements=b,c}return h(b,a),b.prototype.evaluate=function(a,b){for(var c=this.elements,d=[],e=0,f=c.length;e<f;++e)d[e]=c[e].evaluate(a,b);return d},b.prototype.accept=function(a){return a.visitLiteralArray(this)},b.prototype.connect=function(a,b){for(var c=this.elements.length,d=0;d<c;d++)this.elements[d].connect(a,b)},b}(rb),Jb=a.LiteralObject=function(a){function b(b,c){var d=g(this,a.call(this));return d.keys=b,d.values=c,d}return h(b,a),b.prototype.evaluate=function(a,b){for(var c={},d=this.keys,e=this.values,f=0,g=d.length;f<g;++f)c[d[f]]=e[f].evaluate(a,b);return c},b.prototype.accept=function(a){return a.visitLiteralObject(this)},b.prototype.connect=function(a,b){for(var c=this.keys.length,d=0;d<c;d++)this.values[d].connect(a,b)},b}(rb),Kb=null;a.Unparser=Kb,"undefined"==typeof FEATURE_NO_UNPARSER&&(a.Unparser=Kb=function(){function a(a){this.buffer=a}return a.unparse=function(a){var b=[],c=new Kb(b);return a.accept(c),b.join("")},a.prototype.write=function(a){this.buffer.push(a)},a.prototype.writeArgs=function(a){this.write("(");for(var b=0,c=a.length;b<c;++b)0!==b&&this.write(","),a[b].accept(this);this.write(")")},a.prototype.visitChain=function(a){for(var b=a.expressions,c=0,d=b.length;c<d;++c)0!==c&&this.write(";"),b[c].accept(this)},a.prototype.visitBindingBehavior=function(a){var b=a.args;a.expression.accept(this),this.write("&"+a.name);for(var c=0,d=b.length;c<d;++c)this.write(":"),b[c].accept(this)},a.prototype.visitValueConverter=function(a){var b=a.args;a.expression.accept(this),this.write("|"+a.name);for(var c=0,d=b.length;c<d;++c)this.write(":"),b[c].accept(this)},a.prototype.visitAssign=function(a){a.target.accept(this),this.write("="),a.value.accept(this)},a.prototype.visitConditional=function(a){a.condition.accept(this),this.write("?"),a.yes.accept(this),this.write(":"),a.no.accept(this)},a.prototype.visitAccessThis=function(a){if(0===a.ancestor)return void this.write("$this");this.write("$parent");for(var b=a.ancestor-1;b--;)this.write(".$parent")},a.prototype.visitAccessScope=function(a){for(var b=a.ancestor;b--;)this.write("$parent.");this.write(a.name)},a.prototype.visitAccessMember=function(a){a.object.accept(this),this.write("."+a.name)},a.prototype.visitAccessKeyed=function(a){a.object.accept(this),this.write("["),a.key.accept(this),this.write("]")},a.prototype.visitCallScope=function(a){for(var b=a.ancestor;b--;)this.write("$parent.");this.write(a.name),this.writeArgs(a.args)},a.prototype.visitCallFunction=function(a){a.func.accept(this),this.writeArgs(a.args)},a.prototype.visitCallMember=function(a){a.object.accept(this),this.write("."+a.name),this.writeArgs(a.args)},a.prototype.visitPrefix=function(a){this.write("("+a.operation),a.expression.accept(this),this.write(")")},a.prototype.visitBinary=function(a){a.left.accept(this),this.write(a.operation),a.right.accept(this)},a.prototype.visitLiteralPrimitive=function(a){this.write(""+a.value)},a.prototype.visitLiteralArray=function(a){var b=a.elements;this.write("[");for(var c=0,d=b.length;c<d;++c)0!==c&&this.write(","),b[c].accept(this);this.write("]")},a.prototype.visitLiteralObject=function(a){var b=a.keys,c=a.values;this.write("{");for(var d=0,e=b.length;d<e;++d)0!==d&&this.write(","),this.write("'"+b[d]+"':"),c[d].accept(this);this.write("}")},a.prototype.visitLiteralString=function(a){var b=a.value.replace(/'/g,"'");this.write("'"+b+"'")},a}());var Lb=a.ExpressionCloner=function(){function a(){}return a.prototype.cloneExpressionArray=function(a){for(var b=[],c=a.length;c--;)b[c]=a[c].accept(this);return b},a.prototype.visitChain=function(a){return new sb(this.cloneExpressionArray(a.expressions))},a.prototype.visitBindingBehavior=function(a){return new tb(a.expression.accept(this),a.name,this.cloneExpressionArray(a.args))},a.prototype.visitValueConverter=function(a){return new ub(a.expression.accept(this),a.name,this.cloneExpressionArray(a.args))},a.prototype.visitAssign=function(a){return new vb(a.target.accept(this),a.value.accept(this))},a.prototype.visitConditional=function(a){return new wb(a.condition.accept(this),a.yes.accept(this),a.no.accept(this))},a.prototype.visitAccessThis=function(a){return new xb(a.ancestor)},a.prototype.visitAccessScope=function(a){return new yb(a.name,a.ancestor)},a.prototype.visitAccessMember=function(a){return new zb(a.object.accept(this),a.name)},a.prototype.visitAccessKeyed=function(a){return new Ab(a.object.accept(this),a.key.accept(this))},a.prototype.visitCallScope=function(a){return new Bb(a.name,this.cloneExpressionArray(a.args),a.ancestor)},a.prototype.visitCallFunction=function(a){return new Db(a.func.accept(this),this.cloneExpressionArray(a.args))},a.prototype.visitCallMember=function(a){return new Cb(a.object.accept(this),a.name,this.cloneExpressionArray(a.args))},a.prototype.visitPrefix=function(a){return new Fb(a.operation,a.expression.accept(this))},a.prototype.visitBinary=function(a){return new Eb(a.operation,a.left.accept(this),a.right.accept(this))},a.prototype.visitLiteralPrimitive=function(a){return new Gb(a)},a.prototype.visitLiteralArray=function(a){return new Ib(this.cloneExpressionArray(a.elements))},a.prototype.visitLiteralObject=function(a){return new Jb(a.keys,this.cloneExpressionArray(a.values))},a.prototype.visitLiteralString=function(a){return new Hb(a.value)},a}(),Mb=a.bindingMode={oneTime:0,toView:1,oneWay:1,twoWay:2,fromView:3},Nb=a.Token=function(){function a(a,b){this.index=a,this.text=b}return a.prototype.withOp=function(a){return this.opKey=a,this},a.prototype.withGetterSetter=function(a){return this.key=a,this},a.prototype.withValue=function(a){return this.value=a,this},a.prototype.toString=function(){return"Token("+this.text+")"},a}(),Ob=a.Lexer=function(){function a(){}return a.prototype.lex=function(a){for(var b=new Pb(a),c=[],d=b.scanToken();d;)c.push(d),d=b.scanToken();return c},a}(),Pb=a.Scanner=function(){function a(a){this.input=a,this.length=a.length,this.peek=0,this.index=-1,this.advance()}return a.prototype.scanToken=function(){for(;this.peek<=Xb;){if(++this.index>=this.length)return this.peek=Rb,null;this.peek=this.input.charCodeAt(this.index)}if(S(this.peek))return this.scanIdentifier();if(U(this.peek))return this.scanNumber(this.index);var a=this.index;switch(this.peek){case ic:return this.advance(),U(this.peek)?this.scanNumber(a):new Nb(a,".");case cc:case dc:case Jc:case Lc:case vc:case xc:case gc:case kc:case lc:return this.scanCharacter(a,String.fromCharCode(this.peek));case bc:case Zb:return this.scanString();case fc:case hc:case ec:case jc:case _b:case yc:case pc:return this.scanOperator(a,String.fromCharCode(this.peek));case mc:case oc:case Yb:case nc:return this.scanComplexOperator(a,nc,String.fromCharCode(this.peek),"=");case ac:return this.scanComplexOperator(a,ac,"&","&");case Kc:return this.scanComplexOperator(a,Kc,"|","|");case Mc:for(;R(this.peek);)this.advance();return this.scanToken()}var b=String.fromCharCode(this.peek);return this.error("Unexpected character ["+b+"]"),null},a.prototype.scanCharacter=function(a,b){return Y(this.peek===b.charCodeAt(0)),this.advance(),new Nb(a,b)},a.prototype.scanOperator=function(a,b){return Y(this.peek===b.charCodeAt(0)),Y(1===Qb[b]),this.advance(),new Nb(a,b).withOp(b)},a.prototype.scanComplexOperator=function(a,b,c,d){Y(this.peek===c.charCodeAt(0)),this.advance();var e=c;return this.peek===b&&(this.advance(),e+=d),this.peek===b&&(this.advance(),e+=d),Y(1===Qb[e]),new Nb(a,e).withOp(e)},a.prototype.scanIdentifier=function(){Y(S(this.peek));var a=this.index;for(this.advance();T(this.peek);)this.advance();var b=this.input.substring(a,this.index),c=new Nb(a,b);return 1===Qb[b]?c.withOp(b):c.withGetterSetter(b),c},a.prototype.scanNumber=function(a){Y(U(this.peek));var b=this.index===a;for(this.advance();;){if(!U(this.peek))if(this.peek===ic)b=!1;else{if(!V(this.peek))break;this.advance(),W(this.peek)&&this.advance(),U(this.peek)||this.error("Invalid exponent",-1),b=!1}this.advance()}var c=this.input.substring(a,this.index),d=b?parseInt(c,10):parseFloat(c);return new Nb(a,c).withValue(d)},a.prototype.scanString=function(){Y(this.peek===bc||this.peek===Zb);var a=this.index,b=this.peek;this.advance();for(var c=void 0,d=this.index;this.peek!==b;)if(this.peek===wc){c||(c=[]),c.push(this.input.substring(d,this.index)),this.advance();var e=void 0;if(this.peek===Gc){var f=this.input.substring(this.index+1,this.index+5);/[A-Z0-9]{4}/.test(f)||this.error("Invalid unicode escape [\\u"+f+"]"),e=parseInt(f,16);for(var g=0;g<5;++g)this.advance()}else e=X(this.peek),this.advance();c.push(String.fromCharCode(e)),d=this.index}else this.peek===Rb?this.error("Unterminated quote"):this.advance();var h=this.input.substring(d,this.index);this.advance();var i=this.input.substring(a,this.index),j=h;return null!==c&&void 0!==c&&(c.push(h),j=c.join("")),new Nb(a,i).withValue(j)},a.prototype.advance=function(){++this.index>=this.length?this.peek=Rb:this.peek=this.input.charCodeAt(this.index)},a.prototype.error=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this.index+b;throw new Error("Lexer Error: "+a+" at column "+c+" in expression ["+this.input+"]")},a}(),Qb={undefined:1,null:1,true:1,false:1,"+":1,"-":1,"*":1,"/":1,"%":1,"^":1,"=":1,"==":1,"===":1,"!=":1,"!==":1,"<":1,">":1,"<=":1,">=":1,"&&":1,"||":1,"&":1,"|":1,"!":1,"?":1},Rb=0,Sb=9,Tb=10,Ub=11,Vb=12,Wb=13,Xb=32,Yb=33,Zb=34,$b=36,_b=37,ac=38,bc=39,cc=40,dc=41,ec=42,fc=43,gc=44,hc=45,ic=46,jc=47,kc=58,lc=59,mc=60,nc=61,oc=62,pc=63,qc=48,rc=57,sc=65,tc=69,uc=90,vc=91,wc=92,xc=93,yc=94,zc=95,Ac=97,Bc=101,Cc=102,Dc=110,Ec=114,Fc=116,Gc=117,Hc=118,Ic=122,Jc=123,Kc=124,Lc=125,Mc=160,Nc=new Nb(-1,null),Oc=a.Parser=function(){function a(){this.cache={},this.lexer=new Ob}return a.prototype.parse=function(a){return a=a||"",this.cache[a]||(this.cache[a]=new Pc(this.lexer,a).parseChain())},a}(),Pc=a.ParserImplementation=function(){function a(a,b){this.index=0,this.input=b,this.tokens=a.lex(b)}return a.prototype.parseChain=function(){for(var a=!1,b=[];this.optional(";");)a=!0;for(;this.index<this.tokens.length;){")"!==this.peek.text&&"}"!==this.peek.text&&"]"!==this.peek.text||this.error("Unconsumed token "+this.peek.text);var c=this.parseBindingBehavior();for(b.push(c);this.optional(";");)a=!0;a&&this.error("Multiple expressions are not allowed.")}return 1===b.length?b[0]:new sb(b)},a.prototype.parseBindingBehavior=function(){for(var a=this.parseValueConverter();this.optional("&");){var b=this.peek.text,c=[];for(this.advance();this.optional(":");)c.push(this.parseExpression());a=new tb(a,b,c)}return a},a.prototype.parseValueConverter=function(){for(var a=this.parseExpression();this.optional("|");){var b=this.peek.text,c=[];for(this.advance();this.optional(":");)c.push(this.parseExpression());a=new ub(a,b,c,[a].concat(c))}return a},a.prototype.parseExpression=function(){for(var a=this.peek.index,b=this.parseConditional();"="===this.peek.text;){if(!b.isAssignable){var c=this.index<this.tokens.length?this.peek.index:this.input.length,d=this.input.substring(a,c);this.error("Expression "+d+" is not assignable")}this.expect("="),b=new vb(b,this.parseConditional())}return b},a.prototype.parseConditional=function(){var a=this.peek.index,b=this.parseLogicalOr();if(this.optional("?")){var c=this.parseExpression();if(!this.optional(":")){var d=this.index<this.tokens.length?this.peek.index:this.input.length,e=this.input.substring(a,d);this.error("Conditional expression "+e+" requires all 3 expressions")}var f=this.parseExpression();b=new wb(b,c,f)}return b},a.prototype.parseLogicalOr=function(){for(var a=this.parseLogicalAnd();this.optional("||");)a=new Eb("||",a,this.parseLogicalAnd());return a},a.prototype.parseLogicalAnd=function(){for(var a=this.parseEquality();this.optional("&&");)a=new Eb("&&",a,this.parseEquality());return a},a.prototype.parseEquality=function(){for(var a=this.parseRelational();;)if(this.optional("=="))a=new Eb("==",a,this.parseRelational());else if(this.optional("!="))a=new Eb("!=",a,this.parseRelational());else if(this.optional("==="))a=new Eb("===",a,this.parseRelational());else{if(!this.optional("!=="))return a;a=new Eb("!==",a,this.parseRelational())}},a.prototype.parseRelational=function(){for(var a=this.parseAdditive();;)if(this.optional("<"))a=new Eb("<",a,this.parseAdditive());else if(this.optional(">"))a=new Eb(">",a,this.parseAdditive());else if(this.optional("<="))a=new Eb("<=",a,this.parseAdditive());else{if(!this.optional(">="))return a;a=new Eb(">=",a,this.parseAdditive())}},a.prototype.parseAdditive=function(){for(var a=this.parseMultiplicative();;)if(this.optional("+"))a=new Eb("+",a,this.parseMultiplicative());else{if(!this.optional("-"))return a;a=new Eb("-",a,this.parseMultiplicative())}},a.prototype.parseMultiplicative=function(){for(var a=this.parsePrefix();;)if(this.optional("*"))a=new Eb("*",a,this.parsePrefix());else if(this.optional("%"))a=new Eb("%",a,this.parsePrefix());else{if(!this.optional("/"))return a;a=new Eb("/",a,this.parsePrefix())}},a.prototype.parsePrefix=function(){return this.optional("+")?this.parsePrefix():this.optional("-")?new Eb("-",new Gb(0),this.parsePrefix()):this.optional("!")?new Fb("!",this.parsePrefix()):this.parseAccessOrCallMember()},a.prototype.parseAccessOrCallMember=function(){for(var a=this.parsePrimary();;)if(this.optional(".")){var b=this.peek.text;if(this.advance(),this.optional("(")){var c=this.parseExpressionList(")");this.expect(")"),a=a instanceof xb?new Bb(b,c,a.ancestor):new Cb(a,b,c)}else a=a instanceof xb?new yb(b,a.ancestor):new zb(a,b)}else if(this.optional("[")){var d=this.parseExpression();this.expect("]"),a=new Ab(a,d)}else{if(!this.optional("("))return a;var e=this.parseExpressionList(")");this.expect(")"),a=new Db(a,e)}},a.prototype.parsePrimary=function(){if(this.optional("(")){var a=this.parseExpression();return this.expect(")"),a}if(this.optional("null"))return new Gb(null);if(this.optional("undefined"))return new Gb(void 0);if(this.optional("true"))return new Gb(!0);if(this.optional("false"))return new Gb(!1);if(this.optional("[")){var b=this.parseExpressionList("]");return this.expect("]"),new Ib(b)}if("{"===this.peek.text)return this.parseObject();if(null!==this.peek.key&&void 0!==this.peek.key)return this.parseAccessOrCallScope();if(null!==this.peek.value&&void 0!==this.peek.value){var c=this.peek.value;return this.advance(),c instanceof String||"string"==typeof c?new Hb(c):new Gb(c)}if(this.index>=this.tokens.length)throw new Error("Unexpected end of expression: "+this.input);this.error("Unexpected token "+this.peek.text)},a.prototype.parseAccessOrCallScope=function(){var a=this.peek.key;if(this.advance(),"$this"===a)return new xb(0);for(var b=0;"$parent"===a;)if(b++,this.optional("."))a=this.peek.key,this.advance();else{if(this.peek===Nc||"("===this.peek.text||")"===this.peek.text||"["===this.peek.text||"}"===this.peek.text||","===this.peek.text||"|"===this.peek.text||"&"===this.peek.text)return new xb(b);this.error("Unexpected token "+this.peek.text)}if(this.optional("(")){var c=this.parseExpressionList(")");return this.expect(")"),new Bb(a,c,b)}return new yb(a,b)},a.prototype.parseObject=function(){var a=[],b=[];if(this.expect("{"),"}"!==this.peek.text)do{var c=this.peek,d=c.value;a.push("string"==typeof d?d:c.text),this.advance(),!c.key||","!==this.peek.text&&"}"!==this.peek.text?(this.expect(":"),b.push(this.parseExpression())):(--this.index,b.push(this.parseAccessOrCallScope()))}while(this.optional(","));return this.expect("}"),new Jb(a,b)},a.prototype.parseExpressionList=function(a){var b=[];if(this.peek.text!==a)do{b.push(this.parseExpression())}while(this.optional(","));return b},a.prototype.optional=function(a){return this.peek.text===a&&(this.advance(),!0)},a.prototype.expect=function(a){this.peek.text===a?this.advance():this.error("Missing expected "+a)},a.prototype.advance=function(){this.index++},a.prototype.error=function(a){var b=this.index<this.tokens.length?"at column "+(this.tokens[this.index].index+1)+" in":"at the end of the expression";throw new Error("Parser Error: "+a+" "+b+" ["+this.input+"]")},Ma(a,[{key:"peek",get:function(){return this.index<this.tokens.length?this.tokens[this.index]:Nc}}]),a}(),Qc=Map.prototype;a.getMapObserver=Z;var Rc=function(a){function b(b,c){return g(this,a.call(this,b,c))}return h(b,a),b.for=function(a,c){return"__map_observer__"in c||Reflect.defineProperty(c,"__map_observer__",{value:b.create(a,c),enumerable:!1,configurable:!1}),c.__map_observer__},b.create=function(a,c){var d=new b(a,c),e=Qc;return e.set===c.set&&e.delete===c.delete&&e.clear===c.clear||(e={set:c.set,delete:c.delete,clear:c.clear}),c.set=function(){var a=c.has(arguments[0]),b=a?"update":"add",f=c.get(arguments[0]),g=e.set.apply(c,arguments);return a&&f===c.get(arguments[0])||d.addChangeRecord({type:b,object:c,key:arguments[0],oldValue:f}),g},c.delete=function(){var a=c.has(arguments[0]),b=c.get(arguments[0]),f=e.delete.apply(c,arguments);return a&&d.addChangeRecord({type:"delete",object:c,key:arguments[0],oldValue:b}),f},c.clear=function(){var a=e.clear.apply(c,arguments);return d.addChangeRecord({type:"clear",object:c}),a},d},b}(hb),Sc=function(){function a(a){this.eventName=a,this.count=0}return a.prototype.increment=function(){1===++this.count&&c.DOM.addEventListener(this.eventName,aa,!0)},a.prototype.decrement=function(){0===--this.count&&c.DOM.removeEventListener(this.eventName,aa,!0)},a}(),Tc=function(){function a(a){this.eventName=a,this.count=0}return a.prototype.increment=function(){1===++this.count&&c.DOM.addEventListener(this.eventName,ba,!1)},a.prototype.decrement=function(){0===--this.count&&c.DOM.removeEventListener(this.eventName,ba,!1)},a}(),Uc=function(){function a(a,b,c){this.entry=a,this.lookup=b,this.targetEvent=c}return a.prototype.dispose=function(){this.entry.decrement(),this.lookup[this.targetEvent]=null,this.entry=this.lookup=this.targetEvent=null},a}(),Vc=function(){function a(a,b,c){this.target=a,this.targetEvent=b,this.callback=c}return a.prototype.dispose=function(){this.target.removeEventListener(this.targetEvent,this.callback),this.target=this.targetEvent=this.callback=null},a}(),Wc=function(){function a(){this.delegatedHandlers={},this.capturedHandlers={}}return a.prototype.subscribe=function(a,b,c,d,e){var f=void 0,g=void 0,h=void 0;if(d===Xc.bubbling){f=this.delegatedHandlers,h=f[b]||(f[b]=new Tc(b));var i=a.delegatedCallbacks||(a.delegatedCallbacks={});return h.increment(),i[b]=c,!0===e?new Uc(h,i,b):function(){h.decrement(),i[b]=null}}if(d===Xc.capturing){g=this.capturedHandlers,h=g[b]||(g[b]=new Sc(b));var j=a.capturedCallbacks||(a.capturedCallbacks={});return h.increment(),j[b]=c,!0===e?new Uc(h,j,b):function(){h.decrement(),j[b]=null}}return a.addEventListener(b,c),!0===e?new Vc(a,b,c):function(){a.removeEventListener(b,c)}},a}(),Xc=a.delegationStrategy={none:0,capturing:1,bubbling:2},Yc=a.EventManager=function(){function a(){this.elementHandlerLookup={},this.eventStrategyLookup={},this.registerElementConfig({tagName:"input",properties:{value:["change","input"],checked:["change","input"],files:["change","input"]}}),this.registerElementConfig({tagName:"textarea",properties:{value:["change","input"]}}),this.registerElementConfig({tagName:"select",properties:{value:["change"]}}),this.registerElementConfig({tagName:"content editable",properties:{value:["change","input","blur","keyup","paste"]}}),this.registerElementConfig({tagName:"scrollable element",properties:{scrollTop:["scroll"],scrollLeft:["scroll"]}}),this.defaultEventStrategy=new Wc}return a.prototype.registerElementConfig=function(a){var b=a.tagName.toLowerCase(),c=a.properties,d=void 0,e=this.elementHandlerLookup[b]={};for(d in c)c.hasOwnProperty(d)&&(e[d]=c[d])},a.prototype.registerEventStrategy=function(a,b){this.eventStrategyLookup[a]=b},a.prototype.getElementHandler=function(a,b){var c=void 0,d=this.elementHandlerLookup;if(a.tagName){if(c=a.tagName.toLowerCase(),d[c]&&d[c][b])return new Zc(d[c][b]);if("textContent"===b||"innerHTML"===b)return new Zc(d["content editable"].value);if("scrollTop"===b||"scrollLeft"===b)return new Zc(d["scrollable element"][b])}return null},a.prototype.addEventListener=function(a,b,c,d,e){return(this.eventStrategyLookup[b]||this.defaultEventStrategy).subscribe(a,b,c,d,e)},a}(),Zc=a.EventSubscriber=function(){function a(a){this.events=a,this.element=null,this.handler=null}return a.prototype.subscribe=function(a,b){this.element=a,this.handler=b;for(var c=this.events,d=0,e=c.length;e>d;++d)a.addEventListener(c[d],b)},a.prototype.dispose=function(){if(null!==this.element){for(var a=this.element,b=this.handler,c=this.events,d=0,e=c.length;e>d;++d)a.removeEventListener(c[d],b);this.element=this.handler=null}},a}(),$c=a.DirtyChecker=function(){function a(){this.tracked=[],this.checkDelay=120}return a.prototype.addProperty=function(a){var b=this.tracked;b.push(a),1===b.length&&this.scheduleDirtyCheck()},a.prototype.removeProperty=function(a){var b=this.tracked;b.splice(b.indexOf(a),1)},a.prototype.scheduleDirtyCheck=function(){var a=this;setTimeout(function(){return a.check()},this.checkDelay)},a.prototype.check=function(){for(var a=this.tracked,b=a.length;b--;){var c=a[b];c.isDirty()&&c.call()}a.length&&this.scheduleDirtyCheck()},a}(),_c=a.DirtyCheckProperty=(ua=y())(va=function(){function a(a,b,c){this.dirtyChecker=a,this.obj=b,this.propertyName=c}return a.prototype.getValue=function(){return this.obj[this.propertyName]},a.prototype.setValue=function(a){this.obj[this.propertyName]=a},a.prototype.call=function(){var a=this.oldValue,b=this.getValue();this.callSubscribers(b,a),this.oldValue=b},a.prototype.isDirty=function(){return this.oldValue!==this.obj[this.propertyName]},a.prototype.subscribe=function(a,b){this.hasSubscribers()||(this.oldValue=this.getValue(),this.dirtyChecker.addProperty(this)),this.addSubscriber(a,b)},a.prototype.unsubscribe=function(a,b){this.removeSubscriber(a,b)&&!this.hasSubscribers()&&this.dirtyChecker.removeProperty(this)},a}())||va,ad=Ka.getLogger("property-observation"),bd=a.propertyAccessor={getValue:function(a,b){return a[b]},setValue:function(a,b,c){b[c]=a}},cd=a.PrimitiveObserver=function(){function a(a,b){this.doNotCache=!0,this.primitive=a,this.propertyName=b}return a.prototype.getValue=function(){return this.primitive[this.propertyName]},a.prototype.setValue=function(){var a=La(this.primitive);throw new Error("The "+this.propertyName+" property of a "+a+" ("+this.primitive+") cannot be assigned.")},a.prototype.subscribe=function(){},a.prototype.unsubscribe=function(){},a}(),dd=a.SetterObserver=(wa=y())(xa=function(){function a(a,b,c){this.taskQueue=a,this.obj=b,this.propertyName=c,this.queued=!1,this.observing=!1}return a.prototype.getValue=function(){return this.obj[this.propertyName]},a.prototype.setValue=function(a){this.obj[this.propertyName]=a},a.prototype.getterValue=function(){return this.currentValue},a.prototype.setterValue=function(a){var b=this.currentValue;b!==a&&(this.queued||(this.oldValue=b,this.queued=!0,this.taskQueue.queueMicroTask(this)),this.currentValue=a)},a.prototype.call=function(){var a=this.oldValue,b=this.currentValue;this.queued=!1,this.callSubscribers(b,a)},a.prototype.subscribe=function(a,b){this.observing||this.convertProperty(),this.addSubscriber(a,b)},a.prototype.unsubscribe=function(a,b){this.removeSubscriber(a,b)},a.prototype.convertProperty=function(){this.observing=!0,this.currentValue=this.obj[this.propertyName],this.setValue=this.setterValue,this.getValue=this.getterValue,Reflect.defineProperty(this.obj,this.propertyName,{configurable:!0,enumerable:!(this.propertyName in this.obj)||this.obj.propertyIsEnumerable(this.propertyName),get:this.getValue.bind(this),set:this.setValue.bind(this)})||ad.warn("Cannot observe property '"+this.propertyName+"' of object",this.obj)},a}())||xa,ed=a.XLinkAttributeObserver=function(){function a(a,b,c){this.element=a,this.propertyName=b,this.attributeName=c}return a.prototype.getValue=function(){return this.element.getAttributeNS("http://www.w3.org/1999/xlink",this.attributeName)},a.prototype.setValue=function(a){return this.element.setAttributeNS("http://www.w3.org/1999/xlink",this.attributeName,a)},a.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},a}(),fd=a.dataAttributeAccessor={getValue:function(a,b){return a.getAttribute(b)},setValue:function(a,b,c){null===a||void 0===a?b.removeAttribute(c):b.setAttribute(c,a)}},gd=a.DataAttributeObserver=function(){function a(a,b){this.element=a,this.propertyName=b}return a.prototype.getValue=function(){return this.element.getAttribute(this.propertyName)},a.prototype.setValue=function(a){return null===a||void 0===a?this.element.removeAttribute(this.propertyName):this.element.setAttribute(this.propertyName,a)},a.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},a}(),hd=a.StyleObserver=function(){function a(a,b){this.element=a,this.propertyName=b,this.styles=null,this.version=0}return a.prototype.getValue=function(){return this.element.style.cssText},a.prototype._setProperty=function(a,b){var c="";null!==b&&void 0!==b&&"function"==typeof b.indexOf&&-1!==b.indexOf("!important")&&(c="important",b=b.replace("!important","")),this.element.style.setProperty(a,b,c)},a.prototype.setValue=function(a){var b=this.styles||{},c=void 0,d=this.version;if(null!==a&&void 0!==a)if(a instanceof Object){var e=void 0;for(c in a)a.hasOwnProperty(c)&&(e=a[c],c=c.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}),b[c]=d,this._setProperty(c,e))}else if(a.length)for(var f=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:^"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g,g=void 0;null!==(g=f.exec(a));)(c=g[1])&&(b[c]=d,this._setProperty(c,g[2]));if(this.styles=b,this.version+=1,0!==d){d-=1;for(c in b)b.hasOwnProperty(c)&&b[c]===d&&this.element.style.removeProperty(c)}},a.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},a}(),id=a.ValueAttributeObserver=(ya=y())(za=function(){function a(a,b,c){this.element=a,this.propertyName=b,this.handler=c,"files"===b&&(this.setValue=function(){})}return a.prototype.getValue=function(){return this.element[this.propertyName]},a.prototype.setValue=function(a){a=void 0===a||null===a?"":a,this.element[this.propertyName]!==a&&(this.element[this.propertyName]=a,this.notify())},a.prototype.notify=function(){var a=this.oldValue,b=this.getValue();this.callSubscribers(b,a),this.oldValue=b},a.prototype.handleEvent=function(){this.notify()},a.prototype.subscribe=function(a,b){this.hasSubscribers()||(this.oldValue=this.getValue(),this.handler.subscribe(this.element,this)),this.addSubscriber(a,b)},a.prototype.unsubscribe=function(a,b){this.removeSubscriber(a,b)&&!this.hasSubscribers()&&this.handler.dispose()},a}())||za,jd="CheckedObserver:array",kd="CheckedObserver:value",ld=a.CheckedObserver=(Aa=y())(Ba=function(){function a(a,b,c){this.element=a,this.handler=b,this.observerLocator=c}return a.prototype.getValue=function(){return this.value},a.prototype.setValue=function(a){this.initialSync&&this.value===a||(this.arrayObserver&&(this.arrayObserver.unsubscribe(jd,this),this.arrayObserver=null),"checkbox"===this.element.type&&Array.isArray(a)&&(this.arrayObserver=this.observerLocator.getArrayObserver(a),this.arrayObserver.subscribe(jd,this)),this.oldValue=this.value,this.value=a,this.synchronizeElement(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},a.prototype.call=function(a,b){this.synchronizeElement(),this.valueObserver||(this.valueObserver=this.element.__observers__.model||this.element.__observers__.value,this.valueObserver&&this.valueObserver.subscribe(kd,this))},a.prototype.synchronizeElement=function(){var a=this.value,b=this.element,c=b.hasOwnProperty("model")?b.model:b.value,d="radio"===b.type,e=b.matcher||function(a,b){return a===b};b.checked=d&&!!e(a,c)||!d&&!0===a||!d&&Array.isArray(a)&&-1!==a.findIndex(function(a){return!!e(a,c)})},a.prototype.synchronizeValue=function(){var a=this.value,b=this.element,c=b.hasOwnProperty("model")?b.model:b.value,d=void 0,e=b.matcher||function(a,b){return a===b};if("checkbox"===b.type){if(Array.isArray(a))return d=a.findIndex(function(a){return!!e(a,c)}),void(b.checked&&-1===d?a.push(c):b.checked||-1===d||a.splice(d,1));a=b.checked}else{if(!b.checked)return;a=c}this.oldValue=this.value,this.value=a,this.notify()},a.prototype.notify=function(){var a=this.oldValue,b=this.value;b!==a&&this.callSubscribers(b,a)},a.prototype.handleEvent=function(){this.synchronizeValue()},a.prototype.subscribe=function(a,b){this.hasSubscribers()||this.handler.subscribe(this.element,this),this.addSubscriber(a,b)},a.prototype.unsubscribe=function(a,b){this.removeSubscriber(a,b)&&!this.hasSubscribers()&&this.handler.dispose()},a.prototype.unbind=function(){this.arrayObserver&&(this.arrayObserver.unsubscribe(jd,this),this.arrayObserver=null),this.valueObserver&&this.valueObserver.unsubscribe(kd,this)},a}())||Ba,md="SelectValueObserver:array",nd=a.SelectValueObserver=(Ca=y())(Da=function(){function a(a,b,c){this.element=a,this.handler=b,this.observerLocator=c}return a.prototype.getValue=function(){return this.value},a.prototype.setValue=function(a){if(null!==a&&void 0!==a&&this.element.multiple&&!Array.isArray(a))throw new Error("Only null or Array instances can be bound to a multi-select.");this.value!==a&&(this.arrayObserver&&(this.arrayObserver.unsubscribe(md,this),this.arrayObserver=null),Array.isArray(a)&&(this.arrayObserver=this.observerLocator.getArrayObserver(a),this.arrayObserver.subscribe(md,this)),this.oldValue=this.value,this.value=a,this.synchronizeOptions(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},a.prototype.call=function(a,b){this.synchronizeOptions()},a.prototype.synchronizeOptions=function(){var a=this.value,b=void 0;Array.isArray(a)&&(b=!0);for(var c=this.element.options,d=c.length,e=this.element.matcher||function(a,b){return a===b},f=function(){var f=c.item(d),g=f.hasOwnProperty("model")?f.model:f.value;if(b)return f.selected=-1!==a.findIndex(function(a){return!!e(g,a)}),"continue";f.selected=!!e(g,a)};d--;){f()}},a.prototype.synchronizeValue=function(){for(var a=this,b=this.element.options,c=0,d=[],e=0,f=b.length;e<f;e++){var g=b.item(e);g.selected&&(d.push(g.hasOwnProperty("model")?g.model:g.value),c++)}if(this.element.multiple){if(Array.isArray(this.value)){var h=function(){for(var b=a.element.matcher||function(a,b){return a===b},c=0,e=function(){var e=a.value[c];-1===d.findIndex(function(a){return b(e,a)})?a.value.splice(c,1):c++};c<a.value.length;)e();c=0;for(var f=function(){var e=d[c];-1===a.value.findIndex(function(a){return b(e,a)})&&a.value.push(e),c++};c<d.length;)f();return{v:void 0}}();if("object"===(void 0===h?"undefined":La(h)))return h.v}}else d=0===c?null:d[0];d!==this.value&&(this.oldValue=this.value,this.value=d,this.notify())},a.prototype.notify=function(){var a=this.oldValue,b=this.value;this.callSubscribers(b,a)},a.prototype.handleEvent=function(){this.synchronizeValue()},a.prototype.subscribe=function(a,b){this.hasSubscribers()||this.handler.subscribe(this.element,this),this.addSubscriber(a,b)},a.prototype.unsubscribe=function(a,b){this.removeSubscriber(a,b)&&!this.hasSubscribers()&&this.handler.dispose()},a.prototype.bind=function(){var a=this;this.domObserver=c.DOM.createMutationObserver(function(){a.synchronizeOptions(),a.synchronizeValue()}),this.domObserver.observe(this.element,{childList:!0,subtree:!0})},a.prototype.unbind=function(){this.domObserver.disconnect(),this.domObserver=null,this.arrayObserver&&(this.arrayObserver.unsubscribe(md,this),this.arrayObserver=null)},a}())||Da,od=a.ClassObserver=function(){function a(a){this.element=a,this.doNotCache=!0,this.value="",this.version=0}return a.prototype.getValue=function(){return this.value},a.prototype.setValue=function(a){var b=this.nameIndex||{},c=this.version,d=void 0,e=void 0;if(null!==a&&void 0!==a&&a.length){d=a.split(/\s+/);for(var f=0,g=d.length;f<g;f++)""!==(e=d[f])&&(b[e]=c,this.element.classList.add(e))}if(this.value=a,this.nameIndex=b,this.version+=1,0!==c){c-=1;for(e in b)b.hasOwnProperty(e)&&b[e]===c&&this.element.classList.remove(e)}},a.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "class" property is not supported.')},a}(),pd=a.ComputedExpression=function(a){function b(b,c){var d=g(this,a.call(this));return d.name=b,d.dependencies=c,d.isAssignable=!0,d}return h(b,a),b.prototype.evaluate=function(a,b){return a.bindingContext[this.name]},b.prototype.assign=function(a,b){a.bindingContext[this.name]=b},b.prototype.accept=function(a){throw new Error("not implemented")},b.prototype.connect=function(a,b){for(var c=this.dependencies,d=c.length;d--;)c[d].connect(a,b)},b}(rb),qd=void 0,rd=void 0,sd=void 0,td=void 0;if("undefined"==typeof FEATURE_NO_SVG){qd={a:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","target","transform","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],altGlyph:["class","dx","dy","externalResourcesRequired","format","glyphRef","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],altGlyphDef:["id","xml:base","xml:lang","xml:space"],altGlyphItem:["id","xml:base","xml:lang","xml:space"],animate:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateColor:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateMotion:["accumulate","additive","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keyPoints","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","origin","path","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","rotate","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateTransform:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","type","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],circle:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","r","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],clipPath:["class","clipPathUnits","externalResourcesRequired","id","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],"color-profile":["id","local","name","rendering-intent","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],cursor:["externalResourcesRequired","id","requiredExtensions","requiredFeatures","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],defs:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],desc:["class","id","style","xml:base","xml:lang","xml:space"],ellipse:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],feBlend:["class","height","id","in","in2","mode","result","style","width","x","xml:base","xml:lang","xml:space","y"],feColorMatrix:["class","height","id","in","result","style","type","values","width","x","xml:base","xml:lang","xml:space","y"],feComponentTransfer:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feComposite:["class","height","id","in","in2","k1","k2","k3","k4","operator","result","style","width","x","xml:base","xml:lang","xml:space","y"],feConvolveMatrix:["bias","class","divisor","edgeMode","height","id","in","kernelMatrix","kernelUnitLength","order","preserveAlpha","result","style","targetX","targetY","width","x","xml:base","xml:lang","xml:space","y"],feDiffuseLighting:["class","diffuseConstant","height","id","in","kernelUnitLength","result","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feDisplacementMap:["class","height","id","in","in2","result","scale","style","width","x","xChannelSelector","xml:base","xml:lang","xml:space","y","yChannelSelector"],feDistantLight:["azimuth","elevation","id","xml:base","xml:lang","xml:space"],feFlood:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feFuncA:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncB:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncG:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncR:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feGaussianBlur:["class","height","id","in","result","stdDeviation","style","width","x","xml:base","xml:lang","xml:space","y"],feImage:["class","externalResourcesRequired","height","id","preserveAspectRatio","result","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],feMerge:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feMergeNode:["id","xml:base","xml:lang","xml:space"],feMorphology:["class","height","id","in","operator","radius","result","style","width","x","xml:base","xml:lang","xml:space","y"],feOffset:["class","dx","dy","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],fePointLight:["id","x","xml:base","xml:lang","xml:space","y","z"],feSpecularLighting:["class","height","id","in","kernelUnitLength","result","specularConstant","specularExponent","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feSpotLight:["id","limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","xml:base","xml:lang","xml:space","y","z"],feTile:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feTurbulence:["baseFrequency","class","height","id","numOctaves","result","seed","stitchTiles","style","type","width","x","xml:base","xml:lang","xml:space","y"],filter:["class","externalResourcesRequired","filterRes","filterUnits","height","id","primitiveUnits","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],font:["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],"font-face":["accent-height","alphabetic","ascent","bbox","cap-height","descent","font-family","font-size","font-stretch","font-style","font-variant","font-weight","hanging","id","ideographic","mathematical","overline-position","overline-thickness","panose-1","slope","stemh","stemv","strikethrough-position","strikethrough-thickness","underline-position","underline-thickness","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height","xml:base","xml:lang","xml:space"],"font-face-format":["id","string","xml:base","xml:lang","xml:space"],"font-face-name":["id","name","xml:base","xml:lang","xml:space"],"font-face-src":["id","xml:base","xml:lang","xml:space"],"font-face-uri":["id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],foreignObject:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],g:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],glyph:["arabic-form","class","d","glyph-name","horiz-adv-x","id","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],glyphRef:["class","dx","dy","format","glyphRef","id","style","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],hkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"],image:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],line:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","x1","x2","xml:base","xml:lang","xml:space","y1","y2"],linearGradient:["class","externalResourcesRequired","gradientTransform","gradientUnits","id","spreadMethod","style","x1","x2","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y1","y2"],marker:["class","externalResourcesRequired","id","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox","xml:base","xml:lang","xml:space"],mask:["class","externalResourcesRequired","height","id","maskContentUnits","maskUnits","requiredExtensions","requiredFeatures","style","systemLanguage","width","x","xml:base","xml:lang","xml:space","y"],metadata:["id","xml:base","xml:lang","xml:space"],"missing-glyph":["class","d","horiz-adv-x","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],mpath:["externalResourcesRequired","id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],path:["class","d","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","pathLength","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],pattern:["class","externalResourcesRequired","height","id","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],polygon:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],polyline:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],radialGradient:["class","cx","cy","externalResourcesRequired","fx","fy","gradientTransform","gradientUnits","id","r","spreadMethod","style","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],rect:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],script:["externalResourcesRequired","id","type","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],set:["attributeName","attributeType","begin","dur","end","externalResourcesRequired","fill","id","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],stop:["class","id","offset","style","xml:base","xml:lang","xml:space"],style:["id","media","title","type","xml:base","xml:lang","xml:space"],svg:["baseProfile","class","contentScriptType","contentStyleType","externalResourcesRequired","height","id","onabort","onactivate","onclick","onerror","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onresize","onscroll","onunload","onzoom","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","version","viewBox","width","x","xml:base","xml:lang","xml:space","y","zoomAndPan"],switch:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],symbol:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","style","viewBox","xml:base","xml:lang","xml:space"],text:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","transform","x","xml:base","xml:lang","xml:space","y"],textPath:["class","externalResourcesRequired","id","lengthAdjust","method","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","spacing","startOffset","style","systemLanguage","textLength","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],title:["class","id","style","xml:base","xml:lang","xml:space"],tref:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],tspan:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xml:base","xml:lang","xml:space","y"],use:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],view:["externalResourcesRequired","id","preserveAspectRatio","viewBox","viewTarget","xml:base","xml:lang","xml:space","zoomAndPan"],vkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"]},rd={a:!0,altGlyph:!0,animate:!0,animateColor:!0,circle:!0,clipPath:!0,defs:!0,ellipse:!0,feBlend:!0,feColorMatrix:!0,feComponentTransfer:!0,feComposite:!0,feConvolveMatrix:!0,feDiffuseLighting:!0,feDisplacementMap:!0,feFlood:!0,feGaussianBlur:!0,feImage:!0,feMerge:!0,feMorphology:!0,feOffset:!0,feSpecularLighting:!0,feTile:!0,feTurbulence:!0,filter:!0,font:!0,foreignObject:!0,g:!0,glyph:!0,glyphRef:!0,image:!0,line:!0,linearGradient:!0,marker:!0,mask:!0,"missing-glyph":!0,path:!0,pattern:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,svg:!0,switch:!0,symbol:!0,text:!0,textPath:!0,tref:!0,tspan:!0,use:!0},sd={"alignment-baseline":!0,"baseline-shift":!0,"clip-path":!0,"clip-rule":!0,clip:!0,"color-interpolation-filters":!0,"color-interpolation":!0,"color-profile":!0,"color-rendering":!0,color:!0,cursor:!0,direction:!0,display:!0,"dominant-baseline":!0,"enable-background":!0,"fill-opacity":!0,"fill-rule":!0,fill:!0,filter:!0,"flood-color":!0,"flood-opacity":!0,"font-family":!0,"font-size-adjust":!0,"font-size":!0,"font-stretch":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-horizontal":!0,"glyph-orientation-vertical":!0,"image-rendering":!0,kerning:!0,"letter-spacing":!0,"lighting-color":!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,mask:!0,opacity:!0,overflow:!0,"pointer-events":!0,"shape-rendering":!0,"stop-color":!0,"stop-opacity":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,stroke:!0,"text-anchor":!0,"text-decoration":!0,"text-rendering":!0,"unicode-bidi":!0,visibility:!0,"word-spacing":!0,"writing-mode":!0};var ud=function(a){var b=c.DOM.createElement("div");return b.innerHTML=a,b.firstChild};td=function(){function a(){"altglyph"===ud("<svg><altGlyph /></svg>").firstElementChild.nodeName&&vd.altGlyph&&(vd.altglyph=vd.altGlyph,delete vd.altGlyph,vd.altglyphdef=vd.altGlyphDef,delete vd.altGlyphDef,vd.altglyphitem=vd.altGlyphItem,delete vd.altGlyphItem,vd.glyphref=vd.glyphRef,delete vd.glyphRef)}return a.prototype.isStandardSvgAttribute=function(a,b){return wd[a]&&xd[b]||vd[a]&&-1!==vd[a].indexOf(b)},a}()}var vd=a.elements=qd,wd=a.presentationElements=rd,xd=a.presentationAttributes=sd,yd=a.SVGAnalyzer=td||function(){function a(){}return a.prototype.isStandardSvgAttribute=function(){return!1},a}(),zd=a.ObserverLocator=(Fa=Ea=function(){function a(a,b,c,d,e){this.taskQueue=a,this.eventManager=b,this.dirtyChecker=c,this.svgAnalyzer=d,this.parser=e,this.adapters=[],this.logger=Ka.getLogger("observer-locator")}return a.prototype.getObserver=function(a,b){var c=a.__observers__,d=void 0;return c&&b in c?c[b]:(d=this.createPropertyObserver(a,b),d.doNotCache||(void 0===c&&(c=this.getOrCreateObserversLookup(a)),c[b]=d),d)},a.prototype.getOrCreateObserversLookup=function(a){return a.__observers__||this.createObserversLookup(a)},a.prototype.createObserversLookup=function(a){var b={};return Reflect.defineProperty(a,"__observers__",{enumerable:!1,configurable:!1,writable:!1,value:b})||this.logger.warn("Cannot add observers to object",a),b},a.prototype.addAdapter=function(a){this.adapters.push(a)},a.prototype.getAdapterObserver=function(a,b,c){for(var d=0,e=this.adapters.length;d<e;d++){var f=this.adapters[d],g=f.getObserver(a,b,c);if(g)return g}return null},a.prototype.createPropertyObserver=function(a,b){var d=void 0,e=void 0,f=void 0;if(!(a instanceof Object))return new cd(a,b);if(a instanceof c.DOM.Element){if("class"===b)return new od(a);if("style"===b||"css"===b)return new hd(a,b);if(e=this.eventManager.getElementHandler(a,b),"value"===b&&"select"===a.tagName.toLowerCase())return new nd(a,e,this);if("checked"===b&&"input"===a.tagName.toLowerCase())return new ld(a,e,this);if(e)return new id(a,b,e);if(f=/^xlink:(.+)$/.exec(b))return new ed(a,b,f[1]);if("role"===b&&(a instanceof c.DOM.Element||a instanceof c.DOM.SVGElement)||/^\w+:|^data-|^aria-/.test(b)||a instanceof c.DOM.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(a.nodeName,b))return new gd(a,b)}if(d=Object.getPropertyDescriptor(a,b),ca(d))return fa(a,b,d,this);if(d){var g=d.get||d.set;if(g){if(g.getObserver)return g.getObserver(a);var h=this.getAdapterObserver(a,b,d);return h||new _c(this.dirtyChecker,a,b)}}return a instanceof Array?"length"===b?this.getArrayObserver(a).getLengthObserver():new _c(this.dirtyChecker,a,b):a instanceof Map?"size"===b?this.getMapObserver(a).getLengthObserver():new _c(this.dirtyChecker,a,b):a instanceof Set?"size"===b?this.getSetObserver(a).getLengthObserver():new _c(this.dirtyChecker,a,b):new dd(this.taskQueue,a,b)},a.prototype.getAccessor=function(a,b){if(a instanceof c.DOM.Element){if("class"===b||"style"===b||"css"===b||"value"===b&&("input"===a.tagName.toLowerCase()||"select"===a.tagName.toLowerCase())||"checked"===b&&"input"===a.tagName.toLowerCase()||"model"===b&&"input"===a.tagName.toLowerCase()||/^xlink:.+$/.exec(b))return this.getObserver(a,b);if(/^\w+:|^data-|^aria-/.test(b)||a instanceof c.DOM.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(a.nodeName,b)||"img"===a.tagName.toLowerCase()&&"src"===b||"a"===a.tagName.toLowerCase()&&"href"===b)return fd}return bd},a.prototype.getArrayObserver=function(a){return K(this.taskQueue,a)},a.prototype.getMapObserver=function(a){return Z(this.taskQueue,a)},a.prototype.getSetObserver=function(a){return ja(this.taskQueue,a)},a}(),Ea.inject=[d.TaskQueue,Yc,$c,yd,Oc],Fa),Ad=(a.ObjectObservationAdapter=function(){function a(){}return a.prototype.getObserver=function(a,b,c){throw new Error("BindingAdapters must implement getObserver(object, propertyName).")},a}(),a.BindingExpression=function(){function a(a,b,c,d,e,f){this.observerLocator=a,this.targetProperty=b,this.sourceExpression=c,this.mode=d,this.lookupFunctions=e,this.attribute=f,this.discrete=!1}return a.prototype.createBinding=function(a){return new Bd(this.observerLocator,this.sourceExpression,a,this.targetProperty,this.mode,this.lookupFunctions)},a}()),Bd=a.Binding=(Ga=q())(Ha=function(){function a(a,b,c,d,e,f){this.observerLocator=a,this.sourceExpression=b,this.target=c,this.targetProperty=d,this.mode=e,this.lookupFunctions=f}return a.prototype.updateTarget=function(a){this.targetObserver.setValue(a,this.target,this.targetProperty)},a.prototype.updateSource=function(a){this.sourceExpression.assign(this.source,a,this.lookupFunctions)},a.prototype.call=function(a,b,c){if(this.isBound){if(a===Oa)return c=this.targetObserver.getValue(this.target,this.targetProperty),b=this.sourceExpression.evaluate(this.source,this.lookupFunctions),b!==c&&this.updateTarget(b),void(this.mode!==Mb.oneTime&&(this._version++,this.sourceExpression.connect(this,this.source),this.unobserve(!1)));if(a===Na)return void(b!==this.sourceExpression.evaluate(this.source,this.lookupFunctions)&&this.updateSource(b));throw new Error("Unexpected call context "+a)}},a.prototype.bind=function(a){if(this.isBound){if(this.source===a)return;this.unbind()}this.isBound=!0,this.source=a,this.sourceExpression.bind&&this.sourceExpression.bind(this,a,this.lookupFunctions);var b=this.mode;if(!this.targetObserver){var c=b===Mb.twoWay||b===Mb.fromView?"getObserver":"getAccessor";this.targetObserver=this.observerLocator[c](this.target,this.targetProperty)}if("bind"in this.targetObserver&&this.targetObserver.bind(),this.mode!==Mb.fromView){var d=this.sourceExpression.evaluate(a,this.lookupFunctions);this.updateTarget(d)}b!==Mb.oneTime&&(b===Mb.toView?s(this):b===Mb.twoWay?(this.sourceExpression.connect(this,a),this.targetObserver.subscribe(Na,this)):b===Mb.fromView&&this.targetObserver.subscribe(Na,this))},a.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,"unbind"in this.targetObserver&&this.targetObserver.unbind(),this.targetObserver.unsubscribe&&this.targetObserver.unsubscribe(Na,this),this.unobserve(!0))},a.prototype.connect=function(a){if(this.isBound){if(a){var b=this.sourceExpression.evaluate(this.source,this.lookupFunctions);this.updateTarget(b)}this.sourceExpression.connect(this,this.source)}},a}())||Ha,Cd=(a.CallExpression=function(){function a(a,b,c,d){this.observerLocator=a,this.targetProperty=b,this.sourceExpression=c,this.lookupFunctions=d}return a.prototype.createBinding=function(a){return new Cd(this.observerLocator,this.sourceExpression,a,this.targetProperty,this.lookupFunctions)},a}(),a.Call=function(){function a(a,b,c,d,e){this.sourceExpression=b,this.target=c,this.targetProperty=a.getObserver(c,d),this.lookupFunctions=e}return a.prototype.callSource=function(a){var b=this.source.overrideContext;Object.assign(b,a),b.$event=a;var c=!0,d=this.sourceExpression.evaluate(this.source,this.lookupFunctions,c);delete b.$event;for(var e in a)delete b[e];return d},a.prototype.bind=function(a){var b=this;if(this.isBound){if(this.source===a)return;this.unbind()}this.isBound=!0,this.source=a,this.sourceExpression.bind&&this.sourceExpression.bind(this,a,this.lookupFunctions),this.targetProperty.setValue(function(a){return b.callSource(a)})},a.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this.targetProperty.setValue(null))},a}()),Dd=a.ValueConverterResource=function(){function a(a){this.name=a}return a.convention=function(b){if(b.endsWith("ValueConverter"))return new a(i(b.substring(0,b.length-14)))},a.prototype.initialize=function(a,b){this.instance=a.get(b)},a.prototype.register=function(a,b){a.registerValueConverter(b||this.name,this.instance)},a.prototype.load=function(a,b){},a}(),Ed=a.BindingBehaviorResource=function(){function a(a){this.name=a}return a.convention=function(b){if(b.endsWith("BindingBehavior"))return new a(i(b.substring(0,b.length-15)))},a.prototype.initialize=function(a,b){this.instance=a.get(b)},a.prototype.register=function(a,b){a.registerBindingBehavior(b||this.name,this.instance)},a.prototype.load=function(a,b){},a}(),Fd=(a.ListenerExpression=function(){function a(a,b,c,d,e,f){this.eventManager=a,this.targetEvent=b,this.sourceExpression=c,this.delegationStrategy=d,this.discrete=!0,this.preventDefault=e,this.lookupFunctions=f}return a.prototype.createBinding=function(a){return new Fd(this.eventManager,this.targetEvent,this.delegationStrategy,this.sourceExpression,a,this.preventDefault,this.lookupFunctions)},a}(),a.Listener=function(){function a(a,b,c,d,e,f,g){this.eventManager=a,this.targetEvent=b,this.delegationStrategy=c,this.sourceExpression=d,this.target=e,this.preventDefault=f,this.lookupFunctions=g}return a.prototype.callSource=function(a){var b=this.source.overrideContext;b.$event=a;var c=!0,d=this.sourceExpression.evaluate(this.source,this.lookupFunctions,c);return delete b.$event,!0!==d&&this.preventDefault&&a.preventDefault(),d},a.prototype.handleEvent=function(a){this.callSource(a)},a.prototype.bind=function(a){if(this.isBound){if(this.source===a)return;this.unbind()}this.isBound=!0,this.source=a,this.sourceExpression.bind&&this.sourceExpression.bind(this,a,this.lookupFunctions),this._handler=this.eventManager.addEventListener(this.target,this.targetEvent,this,this.delegationStrategy,!0)},a.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this._handler.dispose(),this._handler=null)},a}()),Gd=(a.NameExpression=function(){function a(a,b,c){this.sourceExpression=a,this.apiName=b,this.lookupFunctions=c,this.discrete=!0}return a.prototype.createBinding=function(b){return new Gd(this.sourceExpression,a.locateAPI(b,this.apiName),this.lookupFunctions)},a.locateAPI=function(a,b){switch(b){case"element":return a;case"controller":return ia(a).controller;case"view-model":return ia(a).controller.viewModel;case"view":return ia(a).controller.view;default:var c=ia(a)[b];if(void 0===c)throw new Error('Attempted to reference "'+b+"\", but it was not found amongst the target's API.");return c.viewModel}},a}(),function(){function a(a,b,c){this.sourceExpression=a,this.target=b,this.lookupFunctions=c}return a.prototype.bind=function(a){if(this.isBound){if(this.source===a)return;this.unbind()}this.isBound=!0,this.source=a,this.sourceExpression.bind&&this.sourceExpression.bind(this,a,this.lookupFunctions),this.sourceExpression.assign(this.source,this.target,this.lookupFunctions)},a.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.evaluate(this.source,this.lookupFunctions)===this.target&&this.sourceExpression.assign(this.source,null,this.lookupFunctions),this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null)},a}()),Hd={bindingBehaviors:function(a){return null},valueConverters:function(a){return null}},Id=(a.BindingEngine=(Ja=Ia=function(){function a(a,b){this.observerLocator=a,this.parser=b}return a.prototype.createBindingExpression=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mb.toView,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hd;return new Ad(this.observerLocator,a,this.parser.parse(b),c,d)},a.prototype.propertyObserver=function(a,b){var c=this;return{subscribe:function(d){var e=c.observerLocator.getObserver(a,b);return e.subscribe(d),{dispose:function(){return e.unsubscribe(d)}}}}},a.prototype.collectionObserver=function(a){var b=this;return{subscribe:function(c){var d=void 0;if(a instanceof Array)d=b.observerLocator.getArrayObserver(a);else if(a instanceof Map)d=b.observerLocator.getMapObserver(a);else{if(!(a instanceof Set))throw new Error("collection must be an instance of Array, Map or Set.");d=b.observerLocator.getSetObserver(a)}return d.subscribe(c),{dispose:function(){return d.unsubscribe(c)}}}}},a.prototype.expressionObserver=function(a,b){var c={bindingContext:a,overrideContext:j(a)};return new bb(c,this.parser.parse(b),this.observerLocator,Hd)},a.prototype.parseExpression=function(a){return this.parser.parse(a)},a.prototype.registerAdapter=function(a){this.observerLocator.addAdapter(a)},a}(),Ia.inject=[zd,Oc],Ja),Set.prototype);a.getSetObserver=ja;var Jd=function(a){function b(b,c){return g(this,a.call(this,b,c))}return h(b,a),b.for=function(a,c){return"__set_observer__"in c||Reflect.defineProperty(c,"__set_observer__",{value:b.create(a,c),enumerable:!1,configurable:!1}),c.__set_observer__},b.create=function(a,c){var d=new b(a,c),e=Id;return e.add===c.add&&e.delete===c.delete&&e.clear===c.clear||(e={add:c.add,delete:c.delete,clear:c.clear}),c.add=function(){var a=c.size,b=e.add.apply(c,arguments);return c.size===a||d.addChangeRecord({type:"add",object:c,value:Array.from(c).pop()}),b},c.delete=function(){var a=c.has(arguments[0]),b=e.delete.apply(c,arguments);return a&&d.addChangeRecord({type:"delete",object:c,value:arguments[0]}),b},c.clear=function(){var a=e.clear.apply(c,arguments);return d.addChangeRecord({type:"clear",object:c}),a},d},b}(hb),Kd={}}.call(b,b,a("aurelia-logging"),a("aurelia-pal"),a("aurelia-task-queue"),a("aurelia-metadata"))}),System.registerDynamic("npm:aurelia-binding@1.7.1.js",["npm:aurelia-binding@1.7.1/aurelia-binding"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-binding@1.7.1/aurelia-binding"))}),System.registerDynamic("npm:aurelia-templating@1.7.0/aurelia-templating.js",["aurelia-logging","aurelia-metadata","aurelia-pal","aurelia-path","aurelia-loader","aurelia-dependency-injection","aurelia-binding","aurelia-task-queue"],!1,function(a,b,c){return function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function k(a){return"-"+a.toLowerCase()}function l(a){return(a.charAt(0).toLowerCase()+a.slice(1)).replace(Ua,k)}function m(a){return!(a.auInterpolationTarget||/[^\t\n\r ]/.test(a.textContent))}function n(a){var b=function(a){c.metadata.define(c.metadata.resource,new Va,a)};return a?b(a):b}function o(a){throw new Error("BindingLanguage must implement "+a+"().")}function p(a,b,c,d){if(b){var e=a[b];if(e){if(e!==c)throw new Error("Attempted to register "+d+" when one with the same name already exists. Name: "+b+".")}else a[b]=c}}function q(a){if(void 0!==a.animatableElement)return a.animatableElement;for(var b=a.firstChild;b&&1!==b.nodeType;)b=b.nextSibling;return b&&1===b.nodeType?a.animatableElement=b.classList.contains("au-animate")?b:null:a.animatableElement=null}function r(a){if(a===d.DOM.Element)return this.element;if(a===sb){if(this.boundViewFactory)return this.boundViewFactory;var b=this.instruction.viewFactory,c=this.partReplacements;return c&&(b=c[b.part]||b),this.boundViewFactory=new sb(this,b,c),this.boundViewFactory}return a===pb?(void 0===this.viewSlot&&(this.viewSlot=new pb(this.element,this.instruction.anchorIsContainer),this.element.isContentProjectionSource=this.instruction.lifting,this.children.push(this.viewSlot)),this.viewSlot):a===Wa?this.elementEvents||(this.elementEvents=new Wa(this.element)):a===Ta?this.compositionTransaction||(this.compositionTransaction=this.parent.get(a)):a===nb?this.viewResources:a===_a?this.instruction:this.superGet(a)}function s(a,b,c,d,e,f){var g=a.createChild(),h=void 0,i=void 0;for(g.element=b,g.instruction=c,g.children=d,g.viewResources=f,g.partReplacements=e,h=c.providers,i=h.length;i--;)g._resolvers.set(h[i],rb);return g.superGet=g.get,g.get=r,g}function t(a){return this._element.hasAttribute(a)}function u(a){return this._element.getAttribute(a)}function v(a,b){this._element.setAttribute(a,b)}function w(a,b){var c=d.DOM.createComment("anchor");if(b){var e=a.firstChild;e&&"AU-CONTENT"===e.tagName&&(c.contentElement=e),c._element=a,c.hasAttribute=t,c.getAttribute=u,c.setAttribute=v}return d.DOM.replaceNode(c,a),c}function x(a,b,c,e,f,g,h,i,j){var k=c.behaviorInstructions,l=c.expressions,m=void 0,n=void 0,o=void 0,p=void 0,q=void 0;if(c.contentExpression)return f.push(c.contentExpression.createBinding(b.nextSibling)),b.nextSibling.auInterpolationTarget=!0,void b.parentNode.removeChild(b);if(c.shadowSlot){var r=d.DOM.createComment("slot"),t=void 0;return t=c.slotDestination?new kb(r,c.slotName,c.slotDestination,c.slotFallbackFactory):new lb(r,c.slotName,c.slotFallbackFactory),d.DOM.replaceNode(r,b),h[c.slotName]=t,void e.push(t)}if(k.length)for(c.anchorIsContainer||(b=w(b,c.elementInstruction)),a[c.injectorId]=m=s(a[c.parentInjectorId],b,c,g,i,j),n=0,o=k.length;n<o;++n)p=k[n],q=p.type.create(m,p,b,f),e.push(q);for(n=0,o=l.length;n<o;++n)f.push(l[n].createBinding(b))}function y(a,b){var c=a.split(";"),d=void 0,e=void 0,f=void 0,g=void 0,h=void 0;for(b=b||{},e=0;e<c.length;e++)f=c[e],d=f.indexOf(":"),g=f.substring(0,d).trim(),h=f.substring(d+1).trim(),b[g]=h;return b}function z(a){var b="";for(var c in a)b+=c+":"+a[c]+";";return b}function A(a,b,c,d,e,f){var g=c.behaviorInstructions,h=c.expressions,i=c.providers,j=c.values,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0;for(k=i.length;k--;)a._resolvers.set(i[k],rb);for(var p in j)if(o=b.getAttribute(p)){if("class"===p)b.setAttribute("class",o+" "+j[p]);else if("style"===p){var q=y(j[p]);y(o,q),b.setAttribute("style",z(q))}}else b.setAttribute(p,j[p]);if(g.length)for(k=0,l=g.length;k<l;++k)m=g[k],n=m.type.create(a,m,b,e),n.contentView&&f.push(n.contentView),d.push(n);for(k=0,l=h.length;k<l;++k)e.push(h[k].createBinding(b))}function B(){return++ub}function C(){return(++vb).toString()}function D(a){var b=a.getAttribute("class"),c=C();return a.setAttribute("class",b?b+" au-target":"au-target"),a.setAttribute("au-target-id",c),c}function E(a,b,c,e,f){var g=d.DOM.createElement("au-shadow-slot");d.DOM.replaceNode(g,c);var h=D(g),i=_a.shadowSlot(f);if(i.slotName=c.getAttribute("name")||mb.defaultSlotKey,i.slotDestination=c.getAttribute("slot"),c.innerHTML.trim()){for(var j=d.DOM.createDocumentFragment(),k=void 0;k=c.firstChild;)j.appendChild(k);i.slotFallbackFactory=a.compile(j,b)}return e[h]=i,g}function F(a,b){return b instanceof f.TemplateRegistryEntry?Promise.resolve(b):a.loadTemplate(b)}function G(a,b){var d=a.__observers__;if(void 0===d){var e=Object.getPrototypeOf(a).constructor,f=c.metadata.get(c.metadata.resource,e);f.isInitialized||f.initialize(g.Container.instance||new g.Container,a.constructor),d=f.observerLocator.getOrCreateObserversLookup(a),f._ensurePropertiesDefined(a,d)}return d[b]}function H(){return++Hb}function I(){return!0}function J(){}function K(a,b){return function(d,e,f){var g="string"==typeof e?d.constructor:d,h=c.metadata.getOrCreateOwn(c.metadata.resource,Ib,g);"string"==typeof a&&(a={selector:a,name:e}),f&&(f.writable=!0,f.configurable=!0),a.all=b,h.addChildBinding(new Jb(a))}}function L(a){return K(a,!0)}function M(a){return K(a,!1)}function N(a,b,c){var d=a.get(b);d||(d=[],a.set(b,d)),d.push(c)}function O(a,b){for(var c=b.binders,d=c.length,e=new Map,f=0,g=a.length;f<g;++f){for(var h=a[f],i=h.addedNodes,j=h.removedNodes,k=0,l=j.length;k<l;++k){var m=j[k];if(1===m.nodeType)for(var n=0;n<d;++n){var o=c[n];o.onRemove(m)&&N(e,o,h)}}for(var p=0,q=i.length;p<q;++p){var r=i[p];if(1===r.nodeType)for(var s=0;s<d;++s){var t=c[s];t.onAdd(r)&&N(e,t,h)}}}e.forEach(function(a,b){null!==b.changeHandler&&b.viewModel[b.changeHandler](a)})}function P(a,b){return Array.isArray(b)?a.removeMany(b,!0):a.remove(b,!0)}function Q(a){return a.skipActivation||"function"!=typeof a.viewModel.activate?Promise.resolve():a.viewModel.activate(a.model)||Promise.resolve()}function R(a,b){if(/[A-Z]/.test(a)){var c=l(a);return Na.getLogger("templating").warn("'"+a+"' is not a valid "+b+" name and has been converted to '"+c+"'. Upper-case letters are not allowed because the DOM is not case-sensitive."),c}return a}function S(a){return function(b){c.metadata.define(c.metadata.resource,a,b)}}function T(a){return function(b){if(a instanceof Ib)c.metadata.define(c.metadata.resource,a,b);else{var d=c.metadata.getOrCreateOwn(c.metadata.resource,Ib,b);Object.assign(d,a)}}}function U(a){return function(b){c.metadata.getOrCreateOwn(c.metadata.resource,Ib,b).elementName=R(a,"custom element")}}function V(a,b,d){return function(e){var f=c.metadata.getOrCreateOwn(c.metadata.resource,Ib,e);f.attributeName=R(a,"custom attribute"),f.attributeDefaultBindingMode=b,f.aliases=d}}function W(a){var b=function(a){c.metadata.getOrCreateOwn(c.metadata.resource,Ib,a).liftsContent=!0};return a?b(a):b}function X(a,b,d){var e=function(b,d,e){var f=d?b.constructor:b,g=c.metadata.getOrCreateOwn(c.metadata.resource,Ib,f),h=void 0;return d&&(a=a||{},a.name=d),h=new Gb(a),h.registerWith(f,g,e)};if(!a)return e;if(b){var f=a;return a=null,e(f,b,d)}return e}function Y(a){var b=function(a){c.metadata.getOrCreateOwn(c.metadata.resource,Ib,a).hasDynamicOptions=!0};return a?b(a):b}function Z(a){var b="function"!=typeof a&&a?a:Pb,d=function(a){var d=c.metadata.getOrCreateOwn(c.metadata.resource,Ib,a);d.targetShadowDOM=!0,d.shadowDOMOptions=b};return"function"==typeof a?d(a):d}function $(a){return function(b){c.metadata.getOrCreateOwn(c.metadata.resource,Ib,b).processAttributes=function(b,c,d,e,f){try{a(b,c,d,e,f)}catch(a){Na.getLogger("templating").error(a)}}}}function _(){return!1}function aa(a){return function(b){c.metadata.getOrCreateOwn(c.metadata.resource,Ib,b).processContent=a?function(b,c,d,e){try{return a(b,c,d,e)}catch(a){return Na.getLogger("templating").error(a),!1}}:_}}function ba(a){var b=function(a){c.metadata.getOrCreateOwn(c.metadata.resource,Ib,a).containerless=!0};return a?b(a):b}function ca(a){return function(b){c.metadata.define(gb.viewStrategyMetadataKey,a,b)}}function da(a){return ca(new bb(a))}function ea(a,b,c){return ca(new fb(a,b,c))}function fa(a,b){var d=void 0,e=void 0;"function"==typeof a?d=a:(e=a,d=void 0);var f=function(a){c.metadata.define(gb.viewStrategyMetadataKey,new db(e,b),a)};return d?f(d):f}function ga(a){var b=function(a){c.metadata.define(c.metadata.resource,new Ob,a)};return a?b(a):b}function ha(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];return function(a){c.metadata.define(Db.viewModelRequireMetadataKey,b,a)}}Object.defineProperty(a,"__esModule",{value:!0}),a.TemplatingEngine=a.ElementConfigResource=a.CompositionEngine=a.SwapStrategies=a.HtmlBehaviorResource=a.BindableProperty=a.BehaviorPropertyObserver=a.Controller=a.ViewEngine=a.ModuleAnalyzer=a.ResourceDescription=a.ResourceModule=a.ViewCompiler=a.ViewFactory=a.BoundViewFactory=a.ViewSlot=a.View=a.ViewResources=a.ShadowDOM=a.ShadowSlot=a.PassThroughSlot=a.SlotCustomAttribute=a.BindingLanguage=a.ViewLocator=a.InlineViewStrategy=a.TemplateRegistryViewStrategy=a.NoViewStrategy=a.ConventionalViewStrategy=a.RelativeViewStrategy=a.viewStrategy=a.TargetInstruction=a.BehaviorInstruction=a.ViewCompileInstruction=a.ResourceLoadContext=a.ElementEvents=a.ViewEngineHooksResource=a.CompositionTransaction=a.CompositionTransactionOwnershipToken=a.CompositionTransactionNotifier=a.Animator=a.animationEvent=void 0,a._hyphenate=l,a._isAllWhitespace=m,a.viewEngineHooks=n,a.children=L,a.child=M,a.resource=S,a.behavior=T,a.customElement=U,a.customAttribute=V,a.templateController=W,a.bindable=X,a.dynamicOptions=Y,a.useShadowDOM=Z,a.processAttributes=$,a.processContent=aa,a.containerless=ba,a.useViewStrategy=ca,a.useView=da,a.inlineView=ea,a.noView=fa,a.elementConfig=ga,a.viewResources=ha;var ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na=j(b),Oa=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Qa=(a.animationEvent={enterBegin:"animation:enter:begin",enterActive:"animation:enter:active",enterDone:"animation:enter:done",enterTimeout:"animation:enter:timeout",leaveBegin:"animation:leave:begin",leaveActive:"animation:leave:active",leaveDone:"animation:leave:done",leaveTimeout:"animation:leave:timeout",staggerNext:"animation:stagger:next",removeClassBegin:"animation:remove-class:begin",removeClassActive:"animation:remove-class:active",removeClassDone:"animation:remove-class:done",removeClassTimeout:"animation:remove-class:timeout",addClassBegin:"animation:add-class:begin",addClassActive:"animation:add-class:active",addClassDone:"animation:add-class:done",addClassTimeout:"animation:add-class:timeout",animateBegin:"animation:animate:begin",animateActive:"animation:animate:active",animateDone:"animation:animate:done",animateTimeout:"animation:animate:timeout",sequenceBegin:"animation:sequence:begin",sequenceDone:"animation:sequence:done"},a.Animator=function(){function a(){}return a.prototype.enter=function(a){return Promise.resolve(!1)},a.prototype.leave=function(a){return Promise.resolve(!1)},a.prototype.removeClass=function(a,b){return a.classList.remove(b),Promise.resolve(!1)},a.prototype.addClass=function(a,b){return a.classList.add(b),Promise.resolve(!1)},a.prototype.animate=function(a,b){return Promise.resolve(!1)},a.prototype.runSequence=function(a){},a.prototype.registerEffect=function(a,b){},a.prototype.unregisterEffect=function(a){},a}()),Ra=a.CompositionTransactionNotifier=function(){function a(a){this.owner=a,this.owner._compositionCount++}return a.prototype.done=function(){this.owner._compositionCount--,this.owner._tryCompleteTransaction()},a}(),Sa=a.CompositionTransactionOwnershipToken=function(){function a(a){this.owner=a,this.owner._ownershipToken=this,this.thenable=this._createThenable()}return a.prototype.waitForCompositionComplete=function(){return this.owner._tryCompleteTransaction(),this.thenable},a.prototype.resolve=function(){this._resolveCallback()},a.prototype._createThenable=function(){var a=this;return new Promise(function(b,c){a._resolveCallback=b})},a}(),Ta=a.CompositionTransaction=function(){function a(){this._ownershipToken=null,this._compositionCount=0}return a.prototype.tryCapture=function(){return null===this._ownershipToken?new Sa(this):null},a.prototype.enlist=function(){return new Ra(this)},a.prototype._tryCompleteTransaction=function(){if(this._compositionCount<=0&&(this._compositionCount=0,null!==this._ownershipToken)){var a=this._ownershipToken;this._ownershipToken=null,a.resolve()}},a}(),Ua=/([A-Z])/g,Va=a.ViewEngineHooksResource=function(){function a(){}return a.prototype.initialize=function(a,b){this.instance=a.get(b)},a.prototype.register=function(a,b){a.registerViewEngineHooks(this.instance)},a.prototype.load=function(a,b){},a.convention=function(b){if(b.endsWith("ViewEngineHooks"))return new a},a}(),Wa=a.ElementEvents=function(){function a(a){this.element=a,this.subscriptions={}}return a.prototype._enqueueHandler=function(a){this.subscriptions[a.eventName]=this.subscriptions[a.eventName]||[],this.subscriptions[a.eventName].push(a)},a.prototype._dequeueHandler=function(a){var b=void 0,c=this.subscriptions[a.eventName];return c&&(b=c.indexOf(a))>-1&&c.splice(b,1),a},a.prototype.publish=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],e=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=d.DOM.createCustomEvent(a,{cancelable:e,bubbles:c,detail:b});this.element.dispatchEvent(f)},a.prototype.subscribe=function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("function"==typeof b){return new Xa(this,a,b,c,!1)}},a.prototype.subscribeOnce=function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("function"==typeof b){return new Xa(this,a,b,c,!0)}},a.prototype.dispose=function(a){if(a&&"string"==typeof a){var b=this.subscriptions[a];if(b)for(;b.length;){var c=b.pop();c&&c.dispose()}}else this.disposeAll()},a.prototype.disposeAll=function(){for(var a in this.subscriptions)this.dispose(a)},a}(),Xa=function(){function a(a,b,c,d,e){this.owner=a,this.eventName=b,this.handler=c,this.capture="boolean"==typeof d?d:d.capture,this.bubbles=!this.capture,this.captureOrOptions=d,this.once=e,a.element.addEventListener(b,this,d),a._enqueueHandler(this)}return a.prototype.handleEvent=function(a){(0,this.handler)(a),this.once&&this.dispose()},a.prototype.dispose=function(){this.owner.element.removeEventListener(this.eventName,this,this.captureOrOptions),this.owner._dequeueHandler(this),this.owner=this.handler=null},a}(),Ya=a.ResourceLoadContext=function(){function a(){this.dependencies={}}return a.prototype.addDependency=function(a){this.dependencies[a]=!0},a.prototype.hasDependency=function(a){return a in this.dependencies},a}(),Za=a.ViewCompileInstruction=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.targetShadowDOM=a,this.compileSurrogate=b,this.associatedModuleId=null};Za.normal=new Za;var $a=a.BehaviorInstruction=function(){function a(){this.initiatedByBehavior=!1,this.enhance=!1,this.partReplacements=null,this.viewFactory=null,this.originalAttrName=null,this.skipContentProcessing=!1,this.contentFactory=null,this.viewModel=null,this.anchorIsContainer=!1,this.host=null,this.attributes=null,this.type=null,this.attrName=null,this.inheritBindingContext=!1}return a.enhance=function(){var b=new a;return b.enhance=!0,b},a.unitTest=function(b,c){var d=new a;return d.type=b,d.attributes=c||{},d},a.element=function(b,c){var d=new a;return d.type=c,d.attributes={},d.anchorIsContainer=!(b.hasAttribute("containerless")||c.containerless),d.initiatedByBehavior=!0,d},a.attribute=function(b,c){var d=new a;return d.attrName=b,d.type=c||null,d.attributes={},d},a.dynamic=function(b,c,d){var e=new a;return e.host=b,e.viewModel=c,e.viewFactory=d,e.inheritBindingContext=!0,e},a}();$a.normal=new $a;var _a=a.TargetInstruction=(ja=ia=function(){function a(){this.injectorId=null,this.parentInjectorId=null,this.shadowSlot=!1,this.slotName=null,this.slotFallbackFactory=null,this.contentExpression=null,this.expressions=null,this.behaviorInstructions=null,this.providers=null,this.viewFactory=null,this.anchorIsContainer=!1,this.elementInstruction=null,this.lifting=!1,this.values=null}return a.shadowSlot=function(b){var c=new a;return c.parentInjectorId=b,c.shadowSlot=!0,c},a.contentExpression=function(b){var c=new a;return c.contentExpression=b,c},a.lifting=function(b,c){var d=new a;return d.parentInjectorId=b,d.expressions=a.noExpressions,d.behaviorInstructions=[c],d.viewFactory=c.viewFactory,d.providers=[c.type.target],d.lifting=!0,d},a.normal=function(b,c,d,e,f,g){var h=new a;return h.injectorId=b,h.parentInjectorId=c,h.providers=d,h.behaviorInstructions=e,h.expressions=f,h.anchorIsContainer=!g||g.anchorIsContainer,h.elementInstruction=g,h},a.surrogate=function(b,c,d,e){var f=new a;return f.expressions=d,f.behaviorInstructions=c,f.providers=b,f.values=e,f},a}(),ia.noExpressions=Object.freeze([]),ja),ab=a.viewStrategy=c.protocol.create("aurelia:view-strategy",{validate:function(a){return"function"==typeof a.loadViewFactory||"View strategies must implement: loadViewFactory(viewEngine: ViewEngine, compileInstruction: ViewCompileInstruction, loadContext?: ResourceLoadContext): Promise<ViewFactory>"},compose:function(a){"function"!=typeof a.makeRelativeTo&&(a.makeRelativeTo=d.PLATFORM.noop)}}),bb=a.RelativeViewStrategy=(ka=ab())(la=function(){function a(a){this.path=a,this.absolutePath=null}return a.prototype.loadViewFactory=function(a,b,c,d){return null===this.absolutePath&&this.moduleId&&(this.absolutePath=(0,e.relativeToFile)(this.path,this.moduleId)),b.associatedModuleId=this.moduleId,a.loadViewFactory(this.absolutePath||this.path,b,c,d)},a.prototype.makeRelativeTo=function(a){null===this.absolutePath&&(this.absolutePath=(0,e.relativeToFile)(this.path,a))},a}())||la,cb=a.ConventionalViewStrategy=(ma=ab())(na=function(){function a(a,b){this.moduleId=b.moduleId,this.viewUrl=a.convertOriginToViewUrl(b)}return a.prototype.loadViewFactory=function(a,b,c,d){return b.associatedModuleId=this.moduleId,a.loadViewFactory(this.viewUrl,b,c,d)},a}())||na,db=a.NoViewStrategy=(oa=ab())(pa=function(){function a(a,b){this.dependencies=a||null,this.dependencyBaseUrl=b||""}return a.prototype.loadViewFactory=function(a,b,c,d){var e=this.entry,g=this.dependencies;if(e&&e.factoryIsReady)return Promise.resolve(null);if(this.entry=e=new f.TemplateRegistryEntry(this.moduleId||this.dependencyBaseUrl),e.dependencies=[],e.templateIsLoaded=!0,null!==g)for(var h=0,i=g.length;h<i;++h){var j=g[h];"string"==typeof j||"function"==typeof j?e.addDependency(j):e.addDependency(j.from,j.as)}return b.associatedModuleId=this.moduleId,a.loadViewFactory(e,b,c,d)},a}())||pa,eb=a.TemplateRegistryViewStrategy=(qa=ab())(ra=function(){function a(a,b){this.moduleId=a,this.entry=b}return a.prototype.loadViewFactory=function(a,b,c,d){var e=this.entry;return e.factoryIsReady?Promise.resolve(e.factory):(b.associatedModuleId=this.moduleId,a.loadViewFactory(e,b,c,d))},a}())||ra,fb=a.InlineViewStrategy=(sa=ab())(ta=function(){function a(a,b,c){this.markup=a,this.dependencies=b||null,this.dependencyBaseUrl=c||""}return a.prototype.loadViewFactory=function(a,b,c,e){var g=this.entry,h=this.dependencies;if(g&&g.factoryIsReady)return Promise.resolve(g.factory);if(this.entry=g=new f.TemplateRegistryEntry(this.moduleId||this.dependencyBaseUrl),g.template=d.DOM.createTemplateFromMarkup(this.markup),null!==h)for(var i=0,j=h.length;i<j;++i){var k=h[i];"string"==typeof k||"function"==typeof k?g.addDependency(k):g.addDependency(k.from,k.as)}return b.associatedModuleId=this.moduleId,a.loadViewFactory(g,b,c,e)},a}())||ta,gb=a.ViewLocator=(va=ua=function(){function a(){}return a.prototype.getViewStrategy=function(b){if(!b)return null;if("object"===(void 0===b?"undefined":Pa(b))&&"getViewStrategy"in b){var d=c.Origin.get(b.constructor);return b=b.getViewStrategy(),"string"==typeof b&&(b=new bb(b)),ab.assert(b),d.moduleId&&b.makeRelativeTo(d.moduleId),b}if("string"==typeof b&&(b=new bb(b)),ab.validate(b))return b;"function"!=typeof b&&(b=b.constructor);var e=c.Origin.get(b),f=c.metadata.get(a.viewStrategyMetadataKey,b);if(f)e.moduleId&&(f.moduleId=e.moduleId);else{if(!e.moduleId)throw new Error("Cannot determine default view strategy for object.",b);f=this.createFallbackViewStrategy(e)}return f},a.prototype.createFallbackViewStrategy=function(a){return new cb(this,a)},a.prototype.convertOriginToViewUrl=function(a){var b=a.moduleId;return(b.endsWith(".js")||b.endsWith(".ts")?b.substring(0,b.length-3):b)+".html"},a}(),ua.viewStrategyMetadataKey="aurelia:view-strategy",va),hb=a.BindingLanguage=function(){function a(){}return a.prototype.inspectAttribute=function(a,b,c,d){o("inspectAttribute")},a.prototype.createAttributeInstruction=function(a,b,c,d){o("createAttributeInstruction")},a.prototype.inspectTextContent=function(a,b){o("inspectTextContent")},a}(),ib=Object.freeze([]),jb=a.SlotCustomAttribute=(wa=(0,g.inject)(d.DOM.Element))(xa=function(){function a(a){this.element=a,this.element.auSlotAttribute=this}return a.prototype.valueChanged=function(a,b){},a}())||xa,kb=a.PassThroughSlot=function(){function a(a,b,c,d){this.anchor=a,this.anchor.viewSlot=this,this.name=b,this.destinationName=c,this.fallbackFactory=d,this.destinationSlot=null,this.projections=0,this.contentView=null,new jb(this.anchor).value=this.destinationName}return a.prototype.renderFallbackContent=function(a,b,c,d){if(null===this.contentView){this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext);var e=Object.create(null);e[this.destinationSlot.name]=this.destinationSlot,mb.distributeView(this.contentView,e,c,d,this.destinationSlot.name)}},a.prototype.passThroughTo=function(a){this.destinationSlot=a},a.prototype.addNode=function(b,c,d,e){if(null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),c.viewSlot instanceof a)return void c.viewSlot.passThroughTo(this);this.projections++,this.destinationSlot.addNode(b,c,d,e)},a.prototype.removeView=function(a,b){this.projections--,this.destinationSlot.removeView(a,b),this.needsFallbackRendering&&this.renderFallbackContent(null,ib,b)},a.prototype.removeAll=function(a){this.projections=0,this.destinationSlot.removeAll(a),this.needsFallbackRendering&&this.renderFallbackContent(null,ib,a)},a.prototype.projectFrom=function(a,b){this.destinationSlot.projectFrom(a,b)},a.prototype.created=function(a){this.ownerView=a},a.prototype.bind=function(a){this.contentView&&this.contentView.bind(a.bindingContext,a.overrideContext)},a.prototype.attached=function(){this.contentView&&this.contentView.attached()},a.prototype.detached=function(){this.contentView&&this.contentView.detached()},a.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},Oa(a,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),a}(),lb=a.ShadowSlot=function(){function a(a,b,c){this.anchor=a,this.anchor.isContentProjectionSource=!0,this.anchor.viewSlot=this,this.name=b,this.fallbackFactory=c,this.contentView=null,this.projections=0,this.children=[],this.projectFromAnchors=null,this.destinationSlots=null}return a.prototype.addNode=function(a,b,c,d,e){if(null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),b.viewSlot instanceof kb)return void b.viewSlot.passThroughTo(this);if(null!==this.destinationSlots)mb.distributeNodes(a,[b],this.destinationSlots,this,d);else{b.auOwnerView=a,b.auProjectionSource=c,b.auAssignedSlot=this;var f=this._findAnchor(a,b,c,d);f.parentNode.insertBefore(b,f),this.children.push(b),this.projections++}},a.prototype.removeView=function(a,b){if(null!==this.destinationSlots)mb.undistributeView(a,this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)mb.undistributeView(a,this.contentView.slots,b);else{var c=this.children.find(function(a){return a.auSlotProjectFrom===b});if(c){for(var d=c.auProjectionChildren,e=0,f=d.length;e<f;++e){var g=d[e];g.auOwnerView===a&&(d.splice(e,1),a.fragment.appendChild(g),e--,f--,this.projections--)}this.needsFallbackRendering&&this.renderFallbackContent(a,ib,b)}}},a.prototype.removeAll=function(a){if(null!==this.destinationSlots)mb.undistributeAll(this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)mb.undistributeAll(this.contentView.slots,a);else{var b=this.children.find(function(b){return b.auSlotProjectFrom===a});if(b){for(var c=b.auProjectionChildren,d=0,e=c.length;d<e;++d){var f=c[d];f.auOwnerView.fragment.appendChild(f),this.projections--}b.auProjectionChildren=[],this.needsFallbackRendering&&this.renderFallbackContent(null,ib,a)}}},a.prototype._findAnchor=function(a,b,c,d){if(c){var e=this.children.find(function(a){return a.auSlotProjectFrom===c});if(e){if(void 0!==d)for(var f=e.auProjectionChildren,g=-1,h=void 0,i=0,j=f.length;i<j;++i){var k=f[i];if(k.auOwnerView!==h&&(g++,h=k.auOwnerView,g>=d&&h!==a))return f.splice(i,0,b),k}return e.auProjectionChildren.push(b),e}}return this.anchor},a.prototype.projectTo=function(a){this.destinationSlots=a},a.prototype.projectFrom=function(a,b){var c=d.DOM.createComment("anchor"),e=this.anchor.parentNode;c.auSlotProjectFrom=b,c.auOwnerView=a,c.auProjectionChildren=[],e.insertBefore(c,this.anchor),this.children.push(c),null===this.projectFromAnchors&&(this.projectFromAnchors=[]),this.projectFromAnchors.push(c)},a.prototype.renderFallbackContent=function(a,b,c,d){if(null===this.contentView&&(this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext),this.contentView.insertNodesBefore(this.anchor)),this.contentView.hasSlots){var e=this.contentView.slots,f=this.projectFromAnchors;if(null!==f)for(var g in e)for(var h=e[g],i=0,j=f.length;i<j;++i){var k=f[i];h.projectFrom(k.auOwnerView,k.auSlotProjectFrom)}this.fallbackSlots=e,mb.distributeNodes(a,b,e,c,d)}},a.prototype.created=function(a){this.ownerView=a},a.prototype.bind=function(a){this.contentView&&this.contentView.bind(a.bindingContext,a.overrideContext)},a.prototype.attached=function(){this.contentView&&this.contentView.attached()},a.prototype.detached=function(){this.contentView&&this.contentView.detached()},a.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},Oa(a,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),a}(),mb=a.ShadowDOM=(za=ya=function(){function a(){}return a.getSlotName=function(b){return void 0===b.auSlotAttribute?a.defaultSlotKey:b.auSlotAttribute.value},a.distributeView=function(b,c,d,e,f){var g=void 0;if(null===b)g=ib;else{var h=b.fragment.childNodes,i=h.length;g=new Array(i);for(var j=0;j<i;++j)g[j]=h[j]}a.distributeNodes(b,g,c,d,e,f)},a.undistributeView=function(a,b,c){for(var d in b)b[d].removeView(a,c)},a.undistributeAll=function(a,b){for(var c in a)a[c].removeAll(b)},a.distributeNodes=function(b,c,d,e,f,g){for(var h=0,i=c.length;h<i;++h){var j=c[h],k=j.nodeType;if(j.isContentProjectionSource){j.viewSlot.projectTo(d);for(var l in d)d[l].projectFrom(b,j.viewSlot);c.splice(h,1),i--,h--}else if(1===k||3===k||j.viewSlot instanceof kb)if(3===k&&m(j))c.splice(h,1),i--,h--;else{var n=d[g||a.getSlotName(j)];n&&(n.addNode(b,j,e,f),c.splice(h,1),i--,h--)}else c.splice(h,1),i--,h--}for(var o in d){var p=d[o];p.needsFallbackRendering&&p.renderFallbackContent(b,c,e,f)}},a}(),ya.defaultSlotKey="__au-default-slot-key__",za),nb=a.ViewResources=function(){function a(a,b){this.bindingLanguage=null,this.parent=a||null,this.hasParent=null!==this.parent,this.viewUrl=b||"",this.lookupFunctions={valueConverters:this.getValueConverter.bind(this),bindingBehaviors:this.getBindingBehavior.bind(this)},this.attributes=Object.create(null),this.elements=Object.create(null),this.valueConverters=Object.create(null),this.bindingBehaviors=Object.create(null),this.attributeMap=Object.create(null),this.values=Object.create(null),this.beforeCompile=this.afterCompile=this.beforeCreate=this.afterCreate=this.beforeBind=this.beforeUnbind=!1}return a.prototype._tryAddHook=function(a,b){if("function"==typeof a[b]){for(var c=a[b].bind(a),d=1,e=void 0;void 0!==this[e=b+d.toString()];)d++;this[b]=!0,this[e]=c}},a.prototype._invokeHook=function(a,b,c,d,e){if(this.hasParent&&this.parent._invokeHook(a,b,c,d,e),this[a]){this[a+"1"](b,c,d,e);var f=a+"2";if(this[f]&&(this[f](b,c,d,e),f=a+"3",this[f])){this[f](b,c,d,e);for(var g=4;void 0!==this[f=a+g.toString()];)this[f](b,c,d,e),g++}}},a.prototype.registerViewEngineHooks=function(a){this._tryAddHook(a,"beforeCompile"),this._tryAddHook(a,"afterCompile"),this._tryAddHook(a,"beforeCreate"),this._tryAddHook(a,"afterCreate"),this._tryAddHook(a,"beforeBind"),this._tryAddHook(a,"beforeUnbind")},a.prototype.getBindingLanguage=function(a){return this.bindingLanguage||(this.bindingLanguage=a)},a.prototype.patchInParent=function(a){var b=this.parent;this.parent=a||null,this.hasParent=null!==this.parent,null===a.parent&&(a.parent=b,a.hasParent=null!==b)},a.prototype.relativeToView=function(a){return(0,e.relativeToFile)(a,this.viewUrl)},a.prototype.registerElement=function(a,b){p(this.elements,a,b,"an Element")},a.prototype.getElement=function(a){return this.elements[a]||(this.hasParent?this.parent.getElement(a):null)},a.prototype.mapAttribute=function(a){return this.attributeMap[a]||(this.hasParent?this.parent.mapAttribute(a):null)},a.prototype.registerAttribute=function(a,b,c){this.attributeMap[a]=c,p(this.attributes,a,b,"an Attribute")},a.prototype.getAttribute=function(a){return this.attributes[a]||(this.hasParent?this.parent.getAttribute(a):null)},a.prototype.registerValueConverter=function(a,b){p(this.valueConverters,a,b,"a ValueConverter")},a.prototype.getValueConverter=function(a){return this.valueConverters[a]||(this.hasParent?this.parent.getValueConverter(a):null)},a.prototype.registerBindingBehavior=function(a,b){p(this.bindingBehaviors,a,b,"a BindingBehavior")},a.prototype.getBindingBehavior=function(a){return this.bindingBehaviors[a]||(this.hasParent?this.parent.getBindingBehavior(a):null)},a.prototype.registerValue=function(a,b){p(this.values,a,b,"a value")},a.prototype.getValue=function(a){return this.values[a]||(this.hasParent?this.parent.getValue(a):null)},a}(),ob=a.View=function(){function a(a,b,c,d,e,f,g){this.container=a,this.viewFactory=b,this.resources=b.resources,this.fragment=c,this.firstChild=c.firstChild,this.lastChild=c.lastChild,this.controllers=d,this.bindings=e,this.children=f,this.slots=g,this.hasSlots=!1,this.fromCache=!1,this.isBound=!1,this.isAttached=!1,this.bindingContext=null,this.overrideContext=null,this.controller=null,this.viewModelScope=null,this.animatableElement=void 0,this._isUserControlled=!1,this.contentView=null;for(var h in g){this.hasSlots=!0;break}}return a.prototype.returnToCache=function(){this.viewFactory.returnViewToCache(this)},a.prototype.created=function(){var a=void 0,b=void 0,c=this.controllers;for(a=0,b=c.length;a<b;++a)c[a].created(this)},a.prototype.bind=function(a,b,c){var d=void 0,e=void 0,f=void 0,g=void 0,i=void 0;if(!c||!this._isUserControlled){if(this.isBound){if(this.bindingContext===a)return;this.unbind()}for(this.isBound=!0,this.bindingContext=a,this.overrideContext=b||(0,h.createOverrideContext)(a),this.resources._invokeHook("beforeBind",this),e=this.bindings,g=0,i=e.length;g<i;++g)e[g].bind(this);for(null!==this.viewModelScope&&(a.bind(this.viewModelScope.bindingContext,this.viewModelScope.overrideContext),this.viewModelScope=null),d=this.controllers,g=0,i=d.length;g<i;++g)d[g].bind(this);for(f=this.children,g=0,i=f.length;g<i;++g)f[g].bind(a,b,!0);this.hasSlots&&mb.distributeView(this.contentView,this.slots)}},a.prototype.addBinding=function(a){this.bindings.push(a),this.isBound&&a.bind(this)},a.prototype.unbind=function(){var a=void 0,b=void 0,c=void 0,d=void 0,e=void 0;if(this.isBound){for(this.isBound=!1,this.resources._invokeHook("beforeUnbind",this),null!==this.controller&&this.controller.unbind(),b=this.bindings,d=0,e=b.length;d<e;++d)b[d].unbind();for(a=this.controllers,d=0,e=a.length;d<e;++d)a[d].unbind();for(c=this.children,d=0,e=c.length;d<e;++d)c[d].unbind();this.bindingContext=null,this.overrideContext=null}},a.prototype.insertNodesBefore=function(a){a.parentNode.insertBefore(this.fragment,a)},a.prototype.appendNodesTo=function(a){a.appendChild(this.fragment)},a.prototype.removeNodes=function(){for(var a=this.fragment,b=this.firstChild,c=this.lastChild,d=void 0;b&&(d=b.nextSibling,a.appendChild(b),b!==c);)b=d},a.prototype.attached=function(){var a=void 0,b=void 0,c=void 0,d=void 0;if(!this.isAttached){for(this.isAttached=!0,null!==this.controller&&this.controller.attached(),a=this.controllers,c=0,d=a.length;c<d;++c)a[c].attached();for(b=this.children,c=0,d=b.length;c<d;++c)b[c].attached()}},a.prototype.detached=function(){var a=void 0,b=void 0,c=void 0,d=void 0;if(this.isAttached){for(this.isAttached=!1,null!==this.controller&&this.controller.detached(),a=this.controllers,c=0,d=a.length;c<d;++c)a[c].detached();for(b=this.children,c=0,d=b.length;c<d;++c)b[c].detached()}},a}(),pb=a.ViewSlot=function(){function a(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qa.instance;this.anchor=a,this.anchorIsContainer=b,this.bindingContext=null,this.overrideContext=null,this.animator=c,this.children=[],this.isBound=!1,this.isAttached=!1,this.contentSelectors=null,a.viewSlot=this,a.isContentProjectionSource=!1}return a.prototype.animateView=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"enter",c=q(a);if(null!==c)switch(b){case"enter":return this.animator.enter(c);case"leave":return this.animator.leave(c);default:throw new Error("Invalid animation direction: "+b)}},a.prototype.transformChildNodesIntoView=function(){var a=this.anchor;this.children.push({fragment:a,firstChild:a.firstChild,lastChild:a.lastChild,returnToCache:function(){},removeNodes:function(){for(var b=void 0;b=a.lastChild;)a.removeChild(b)},created:function(){},bind:function(){},unbind:function(){},attached:function(){},detached:function(){}})},a.prototype.bind=function(a,b){var c=void 0,d=void 0,e=void 0;if(this.isBound){if(this.bindingContext===a)return;this.unbind()}for(this.isBound=!0,this.bindingContext=a=a||this.bindingContext,this.overrideContext=b=b||this.overrideContext,e=this.children,c=0,d=e.length;c<d;++c)e[c].bind(a,b,!0)},a.prototype.unbind=function(){if(this.isBound){var a=void 0,b=void 0,c=this.children;for(this.isBound=!1,this.bindingContext=null,this.overrideContext=null,a=0,b=c.length;a<b;++a)c[a].unbind()}},a.prototype.add=function(a){if(this.anchorIsContainer?a.appendNodesTo(this.anchor):a.insertNodesBefore(this.anchor),this.children.push(a),this.isAttached)return a.attached(),this.animateView(a,"enter")},a.prototype.insert=function(a,b){var c=this.children,d=c.length;return 0===a&&0===d||a>=d?this.add(b):(b.insertNodesBefore(c[a].firstChild),c.splice(a,0,b),this.isAttached?(b.attached(),this.animateView(b,"enter")):void 0)},a.prototype.move=function(a,b){if(a!==b){var c=this.children,d=c[a];d.removeNodes(),d.insertNodesBefore(c[b].firstChild),c.splice(a,1),c.splice(b,0,d)}},a.prototype.remove=function(a,b,c){return this.removeAt(this.children.indexOf(a),b,c)},a.prototype.removeMany=function(a,b,c){var d=this,e=this.children,f=a.length,g=void 0,h=[];a.forEach(function(a){if(c)return void a.removeNodes();var b=d.animateView(a,"leave");b?h.push(b.then(function(){return a.removeNodes()})):a.removeNodes()});var i=function(){if(d.isAttached)for(g=0;g<f;++g)a[g].detached();if(b)for(g=0;g<f;++g)a[g].returnToCache();for(g=0;g<f;++g){var c=e.indexOf(a[g]);c>=0&&e.splice(c,1)}};return h.length>0?Promise.all(h).then(function(){return i()}):i()},a.prototype.removeAt=function(a,b,c){var d=this,e=this.children[a],f=function(){return a=d.children.indexOf(e),e.removeNodes(),d.children.splice(a,1),d.isAttached&&e.detached(),b&&e.returnToCache(),e};if(!c){var g=this.animateView(e,"leave");if(g)return g.then(function(){return f()})}return f()},a.prototype.removeAll=function(a,b){var c=this,d=this.children,e=d.length,f=void 0,g=[];d.forEach(function(a){if(b)return void a.removeNodes();var d=c.animateView(a,"leave");d?g.push(d.then(function(){return a.removeNodes()})):a.removeNodes()});var h=function(){if(c.isAttached)for(f=0;f<e;++f)d[f].detached();if(a)for(f=0;f<e;++f){var b=d[f];b&&b.returnToCache()}c.children=[]};return g.length>0?Promise.all(g).then(function(){return h()}):h()},a.prototype.attached=function(){var a=void 0,b=void 0,c=void 0,d=void 0;if(!this.isAttached)for(this.isAttached=!0,c=this.children,a=0,b=c.length;a<b;++a)d=c[a],d.attached(),this.animateView(d,"enter")},a.prototype.detached=function(){var a=void 0,b=void 0,c=void 0;if(this.isAttached)for(this.isAttached=!1,c=this.children,a=0,b=c.length;a<b;++a)c[a].detached()},a.prototype.projectTo=function(a){var b=this;this.projectToSlots=a,this.add=this._projectionAdd,this.insert=this._projectionInsert,this.move=this._projectionMove,this.remove=this._projectionRemove,this.removeAt=this._projectionRemoveAt,this.removeMany=this._projectionRemoveMany,this.removeAll=this._projectionRemoveAll,this.children.forEach(function(c){return mb.distributeView(c,a,b)})},a.prototype._projectionAdd=function(a){mb.distributeView(a,this.projectToSlots,this),this.children.push(a),this.isAttached&&a.attached()},a.prototype._projectionInsert=function(a,b){0===a&&!this.children.length||a>=this.children.length?this.add(b):(mb.distributeView(b,this.projectToSlots,this,a),this.children.splice(a,0,b),this.isAttached&&b.attached())},a.prototype._projectionMove=function(a,b){if(a!==b){var c=this.children,d=c[a];mb.undistributeView(d,this.projectToSlots,this),mb.distributeView(d,this.projectToSlots,this,b),c.splice(a,1),c.splice(b,0,d)}},a.prototype._projectionRemove=function(a,b){mb.undistributeView(a,this.projectToSlots,this),this.children.splice(this.children.indexOf(a),1),this.isAttached&&a.detached()},a.prototype._projectionRemoveAt=function(a,b){var c=this.children[a];mb.undistributeView(c,this.projectToSlots,this),this.children.splice(a,1),this.isAttached&&c.detached()},a.prototype._projectionRemoveMany=function(a,b){var c=this;a.forEach(function(a){return c.remove(a,b)})},a.prototype._projectionRemoveAll=function(a){mb.undistributeAll(this.projectToSlots,this);var b=this.children;if(this.isAttached)for(var c=0,d=b.length;c<d;++c)b[c].detached();this.children=[]},a}(),qb=(0,g.resolver)(Aa=function(){function a(){}return a.prototype.get=function(a,b){var c=b.__providerId__;return c in a?a[c]:a[c]=a.invoke(b)},a}())||Aa,rb=new qb,sb=a.BoundViewFactory=function(){function a(a,b,c){this.parentContainer=a,this.viewFactory=b,this.factoryCreateInstruction={partReplacements:c}}return a.prototype.create=function(){var a=this.viewFactory.create(this.parentContainer.createChild(),this.factoryCreateInstruction);return a._isUserControlled=!0,a},a.prototype.setCacheSize=function(a,b){this.viewFactory.setCacheSize(a,b)},a.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},a.prototype.returnViewToCache=function(a){this.viewFactory.returnViewToCache(a)},Oa(a,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),a}(),tb=a.ViewFactory=function(){function a(a,b,c){this.isCaching=!1,this.template=a,this.instructions=b,this.resources=c,this.cacheSize=-1,this.cache=null}return a.prototype.setCacheSize=function(a,b){a&&("*"===a?a=Number.MAX_VALUE:"string"==typeof a&&(a=parseInt(a,10))),-1!==this.cacheSize&&b||(this.cacheSize=a),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0},a.prototype.getCachedView=function(){return null!==this.cache?this.cache.pop()||null:null},a.prototype.returnViewToCache=function(a){a.isAttached&&a.detached(),a.isBound&&a.unbind(),null!==this.cache&&this.cache.length<this.cacheSize&&(a.fromCache=!0,this.cache.push(a))},a.prototype.create=function(a,b,c){b=b||$a.normal;var d=this.getCachedView();if(null!==d)return d;var e=b.enhance?this.template:this.template.cloneNode(!0),f=e.querySelectorAll(".au-target"),g=this.instructions,h=this.resources,i=[],j=[],k=[],l=Object.create(null),m={root:a},n=b.partReplacements,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0;for(this.resources._invokeHook("beforeCreate",this,a,e,b),c&&null!==this.surrogateInstruction&&A(a,c,this.surrogateInstruction,i,j,k),b.enhance&&e.hasAttribute("au-target-id")&&(r=e,s=g[r.getAttribute("au-target-id")],x(m,r,s,i,j,k,l,n,h)),o=0,p=f.length;o<p;++o)r=f[o],s=g[r.getAttribute("au-target-id")],x(m,r,s,i,j,k,l,n,h);return q=new ob(a,this,e,i,j,k,l),b.initiatedByBehavior||q.created(),this.resources._invokeHook("afterCreate",q),q},a}(),ub=0,vb=0,wb=a.ViewCompiler=(Ba=(0,g.inject)(hb,nb))(Ca=function(){function a(a,b){this.bindingLanguage=a,this.resources=b}return a.prototype.compile=function(a,b,c){b=b||this.resources,c=c||Za.normal,a="string"==typeof a?d.DOM.createTemplateFromMarkup(a):a;var e=void 0,f=void 0,g=void 0;a.content?(f=a.getAttribute("part"),g=a.getAttribute("view-cache"),e=d.DOM.adoptNode(a.content)):e=a,c.targetShadowDOM=c.targetShadowDOM&&d.FEATURE.shadowDOM,b._invokeHook("beforeCompile",e,b,c);var h={};this._compileNode(e,b,h,a,"root",!c.targetShadowDOM);var i=e.firstChild;if(i&&1===i.nodeType){var j=i.getAttribute("au-target-id");if(j){var k=h[j];(k.shadowSlot||k.lifting||k.elementInstruction&&!k.elementInstruction.anchorIsContainer)&&e.insertBefore(d.DOM.createComment("view"),i)}}var l=new tb(e,h,b);return l.surrogateInstruction=c.compileSurrogate?this._compileSurrogate(a,b):null,l.part=f,g&&l.setCacheSize(g),b._invokeHook("afterCompile",l),l},a.prototype._compileNode=function(a,b,c,e,f,g){switch(a.nodeType){case 1:return this._compileElement(a,b,c,e,f,g);case 3:var h=b.getBindingLanguage(this.bindingLanguage).inspectTextContent(b,a.wholeText);if(h){var i=d.DOM.createElement("au-marker"),j=D(i);for((a.parentNode||e).insertBefore(i,a),a.textContent=" ",c[j]=_a.contentExpression(h);a.nextSibling&&3===a.nextSibling.nodeType;)(a.parentNode||e).removeChild(a.nextSibling)}else for(;a.nextSibling&&3===a.nextSibling.nodeType;)a=a.nextSibling;return a.nextSibling;case 11:for(var k=a.firstChild;k;)k=this._compileNode(k,b,c,a,f,g)}return a.nextSibling},a.prototype._compileSurrogate=function(a,b){var c=a.tagName.toLowerCase(),d=a.attributes,e=b.getBindingLanguage(this.bindingLanguage),f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=[],q=void 0,r=[],s={},t=!1,u=[];for(i=0,j=d.length;i<j;++i){if(k=d[i],l=k.name,m=k.value,n=e.inspectAttribute(b,c,l,m),(o=b.getAttribute(n.attrName))&&(f=b.mapAttribute(n.attrName))&&(g=o.attributes[f])&&(n.defaultBindingMode=g.defaultBindingMode,n.command||n.expression||(n.command=g.hasOptions?"options":null),n.command&&"options"!==n.command&&o.primaryProperty)){var v=o.primaryProperty;l=n.attrName=v.attribute,n.defaultBindingMode=v.defaultBindingMode}if(h=e.createAttributeInstruction(b,a,n,void 0,o))if(h.alteredAttr&&(o=b.getAttribute(h.attrName)),h.discrete)p.push(h);else if(o){if(h.type=o,this._configureProperties(h,b),o.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");r.push(h)}else p.push(h.attributes[h.attrName]);else if(o){if(h=$a.attribute(l,o),h.attributes[b.mapAttribute(l)]=m,o.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");r.push(h)}else"id"!==l&&"part"!==l&&"replace-part"!==l&&(t=!0,s[l]=m)}if(p.length||r.length||t){for(i=0,j=r.length;i<j;++i)h=r[i],h.type.compile(this,b,a,h),u.push(h.type.target);for(i=0,j=p.length;i<j;++i)q=p[i],void 0!==q.attrToRemove&&a.removeAttribute(q.attrToRemove);return _a.surrogate(u,r,p,s)}return null},a.prototype._compileElement=function(a,b,c,d,e,f){var g=a.tagName.toLowerCase(),h=a.attributes,i=[],j=void 0,k=[],l=[],m=b.getBindingLanguage(this.bindingLanguage),n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0,C=void 0,F=void 0,G=void 0;if("slot"===g)return f&&(a=E(this,b,a,c,e)),a.nextSibling;if("template"===g){if(!("content"in a))throw new Error("You cannot place a template element within "+a.namespaceURI+" namespace");o=this.compile(a,b),o.part=a.getAttribute("part")}else(p=b.getElement(a.getAttribute("as-element")||g))&&(q=$a.element(a,p),p.processAttributes(this,b,a,h,q),k.push(q));for(s=0,t=h.length;s<t;++s){if(u=h[s],x=v=u.name,w=u.value,z=m.inspectAttribute(b,g,v,w),f&&"slot"===z.attrName&&(z.attrName=v="au-slot"),p=b.getAttribute(z.attrName),r=null,p){if((C=b.mapAttribute(z.attrName))&&(A=p.attributes[C])&&(z.defaultBindingMode=A.defaultBindingMode,z.command||z.expression||(z.command=A.hasOptions?"options":null),z.command&&"options"!==z.command&&p.primaryProperty)){var H=p.primaryProperty;v=z.attrName=H.attribute,z.defaultBindingMode=H.defaultBindingMode}}else q&&(r=q.type.attributes[z.attrName])&&(z.defaultBindingMode=r.defaultBindingMode);if(y=r?m.createAttributeInstruction(b,a,z,q):m.createAttributeInstruction(b,a,z,void 0,p))if(y.alteredAttr&&(p=b.getAttribute(y.attrName)),y.discrete)i.push(y);else if(p){if(y.type=p,this._configureProperties(y,b),p.liftsContent){y.originalAttrName=x,n=y;break}k.push(y)}else r?q.attributes[z.attrName].targetProperty=r.name:i.push(y.attributes[y.attrName]);else if(p){if(y=$a.attribute(v,p),y.attributes[b.mapAttribute(v)]=w,p.liftsContent){y.originalAttrName=x,n=y;break}k.push(y)}else r&&(q.attributes[v]=w)}if(n)n.viewFactory=o,a=n.type.compile(this,b,a,n,d),F=D(a),c[F]=_a.lifting(e,n);else{var I=!1;if(i.length||k.length){for(G=!!k.length&&B(),s=0,t=k.length;s<t;++s)y=k[s],y.type.compile(this,b,a,y,d),l.push(y.type.target),I=I||y.skipContentProcessing;for(s=0,t=i.length;s<t;++s)j=i[s],void 0!==j.attrToRemove&&a.removeAttribute(j.attrToRemove);F=D(a),c[F]=_a.normal(G,e,l,k,i,q)}if(I)return a.nextSibling;for(var J=a.firstChild;J;)J=this._compileNode(J,b,c,a,G||e,f)}return a.nextSibling},a.prototype._configureProperties=function(a,b){var c=a.type,d=a.attrName,e=a.attributes,f=void 0,g=void 0,h=void 0,i=b.mapAttribute(d);i&&d in e&&i!==d&&(e[i]=e[d],delete e[d]);for(g in e)null!==(h=e[g])&&"object"===(void 0===h?"undefined":Pa(h))&&(f=c.attributes[g],h.targetProperty=void 0!==f?f.name:g)},a}())||Ca,xb=a.ResourceModule=function(){function a(a){this.id=a,this.moduleInstance=null,this.mainResource=null,this.resources=null,this.viewStrategy=null,this.isInitialized=!1,this.onLoaded=null,this.loadContext=null}return a.prototype.initialize=function(a){var b=this.mainResource,c=this.resources,d=this.viewStrategy;if(!this.isInitialized){this.isInitialized=!0,void 0!==b&&(b.metadata.viewStrategy=d,b.initialize(a));for(var e=0,f=c.length;e<f;++e)b=c[e],b.metadata.viewStrategy=d,b.initialize(a)}},a.prototype.register=function(a,b){var c=this.mainResource,d=this.resources;void 0!==c&&(c.register(a,b),b=null);for(var e=0,f=d.length;e<f;++e)d[e].register(a,b),b=null},a.prototype.load=function(a,b){if(null!==this.onLoaded)return this.loadContext===b?Promise.resolve():this.onLoaded;var c=this.mainResource,d=this.resources,e=void 0;if(void 0!==c){e=new Array(d.length+1),e[0]=c.load(a,b);for(var f=0,g=d.length;f<g;++f)e[f+1]=d[f].load(a,b)}else{e=new Array(d.length);for(var h=0,i=d.length;h<i;++h)e[h]=d[h].load(a,b)}return this.loadContext=b,this.onLoaded=Promise.all(e),this.onLoaded},a}(),yb=a.ResourceDescription=function(){function a(a,b,d){d||(d=c.metadata.get(c.metadata.resource,b))||(d=new Ib,d.elementName=l(a),c.metadata.define(c.metadata.resource,d,b)),d instanceof Ib?void 0===d.elementName?d.elementName=l(a):void 0===d.attributeName?d.attributeName=l(a):null===d.attributeName&&null===d.elementName&&Ib.convention(a,d):d.name||(d.name=l(a)),this.metadata=d,this.value=b}return a.prototype.initialize=function(a){this.metadata.initialize(a,this.value)},a.prototype.register=function(a,b){this.metadata.register(a,b)},a.prototype.load=function(a,b){return this.metadata.load(a,this.value,b)},a}(),zb=a.ModuleAnalyzer=function(){function a(){this.cache=Object.create(null)}return a.prototype.getAnalysis=function(a){return this.cache[a]},a.prototype.analyze=function(a,b,d){var e=void 0,g=void 0,i=void 0,j=void 0,k=void 0,m=void 0,n=[],o=void 0,p=void 0,q=void 0;if(q=this.cache[a])return q;q=new xb(a),this.cache[a]=q,"function"==typeof b&&(b={default:b}),d&&(e=new yb(d,b[d]));for(k in b)m=b[k],k!==d&&"function"==typeof m&&(j=c.metadata.get(c.metadata.resource,m),j?(null===j.attributeName&&null===j.elementName&&Ib.convention(k,j),null===j.attributeName&&null===j.elementName&&(j.elementName=l(k)),!e&&j instanceof Ib&&null!==j.elementName?e=new yb(k,m,j):n.push(new yb(k,m,j))):ab.decorates(m)?p=m:m instanceof f.TemplateRegistryEntry?p=new eb(a,m):(o=Ib.convention(k))?(null===o.elementName||e?n.push(new yb(k,m,o)):e=new yb(k,m,o),c.metadata.define(c.metadata.resource,o,m)):(o=h.ValueConverterResource.convention(k)||h.BindingBehaviorResource.convention(k)||Va.convention(k))?(n.push(new yb(k,m,o)),c.metadata.define(c.metadata.resource,o,m)):g||(g=m,i=k));return!e&&g&&(e=new yb(i,g)),q.moduleInstance=b,q.mainResource=e,q.resources=n,q.viewStrategy=p,q},a}(),Ab=Na.getLogger("templating"),Bb=function(){function a(a){var b=this;a.then(function(a){return b.viewFactory=a})}return a.prototype.create=function(a,b,c,d){return this.viewFactory.create(a,b,c,d)},a.prototype.setCacheSize=function(a,b){this.viewFactory.setCacheSize(a,b)},a.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},a.prototype.returnViewToCache=function(a){this.viewFactory.returnViewToCache(a)},Oa(a,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),a}(),Cb=null,Db=a.ViewEngine=(Da=(0,g.inject)(f.Loader,g.Container,wb,zb,nb))((Ga=Fa=function(){function a(a,b,d,e,f){this.loader=a,this.container=b,this.viewCompiler=d,this.moduleAnalyzer=e,this.appResources=f,this._pluginMap={},null===Cb&&(Cb=new Ib,Cb.attributeName="au-slot",c.metadata.define(c.metadata.resource,Cb,jb)),Cb.initialize(b,jb),Cb.register(f)}return a.prototype.addResourcePlugin=function(a,b){var c=a.replace(".","")+"-resource-plugin";this._pluginMap[a]=c,this.loader.addPlugin(c,b)},a.prototype.loadViewFactory=function(a,b,c,d){var e=this;return c=c||new Ya,F(this.loader,a).then(function(a){var f=a.address;return a.onReady?c.hasDependency(f)?null===a.template?a.onReady:Promise.resolve(new Bb(a.onReady)):(c.addDependency(f),a.onReady):(c.addDependency(f),a.onReady=e.loadTemplateResources(a,b,c,d).then(function(c){if(a.resources=c,null===a.template)return a.factory=null;var d=e.viewCompiler.compile(a.template,c,b);return a.factory=d}),a.onReady)})},a.prototype.loadTemplateResources=function(b,d,f,g){var h=new nb(this.appResources,b.address),i=b.dependencies,j=void 0,k=void 0;if(d=d||Za.normal,0===i.length&&!d.associatedModuleId)return Promise.resolve(h);if(j=i.map(function(a){return a.src}),k=i.map(function(a){return a.name}),Ab.debug("importing resources for "+b.address,j),g){var l=c.metadata.get(a.viewModelRequireMetadataKey,g);if(l){for(var m=j.length,n=0,o=l.length;n<o;++n){var p=l[n],q="function"==typeof p?c.Origin.get(p).moduleId:(0,e.relativeToFile)(p.src||p,b.address);-1===j.indexOf(q)&&(j.push(q),k.push(p.as))}Ab.debug("importing ViewModel resources for "+d.associatedModuleId,j.slice(m))}}return this.importViewResources(j,k,h,d,f)},a.prototype.importViewModelResource=function(a,b){var d=this;return this.loader.loadModule(a).then(function(e){var f=c.Origin.get(e).moduleId,g=d.moduleAnalyzer.analyze(f,e,b);if(!g.mainResource)throw new Error('No view model found in module "'+a+'".');return g.initialize(d.container),g.mainResource})},a.prototype.importViewResources=function(a,b,d,e,f){var g=this;return f=f||new Ya,e=e||Za.normal,a=a.map(function(a){return g._applyLoaderPlugin(a)}),this.loader.loadAllModules(a).then(function(a){var h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=g.container,o=g.moduleAnalyzer,p=new Array(a.length);for(h=0,i=a.length;h<i;++h)l=a[h],k=c.Origin.get(l).moduleId,j=o.analyze(k,l),j.initialize(n),j.register(d,b[h]),p[h]=j;for(e.associatedModuleId&&(m=o.getAnalysis(e.associatedModuleId))&&m.register(d),h=0,i=p.length;h<i;++h)p[h]=p[h].load(n,f);return Promise.all(p).then(function(){return d})})},a.prototype._applyLoaderPlugin=function(a){var b=a.lastIndexOf(".");if(-1!==b){var c=a.substring(b),d=this._pluginMap[c];return void 0===d?a:this.loader.applyPluginToUrl(a,d)}return a},a}(),Fa.viewModelRequireMetadataKey="aurelia:view-model-require",Ea=Ga))||Ea,Eb=a.Controller=function(){function a(a,b,c,d){this.behavior=a,this.instruction=b,this.viewModel=c,this.isAttached=!1,this.view=null,this.isBound=!1,this.scope=null,this.container=d,this.elementEvents=d.elementEvents||null;var e=a.observerLocator.getOrCreateObserversLookup(c),f=a.handlesBind,g=b.attributes,h=this.boundProperties=[],i=a.properties,j=void 0,k=void 0;for(a._ensurePropertiesDefined(c,e),j=0,k=i.length;j<k;++j)i[j]._initialize(c,e,g,f,h)}return a.prototype.created=function(a){this.behavior.handlesCreated&&this.viewModel.created(a,this.view)},a.prototype.automate=function(a,b){this.view.bindingContext=this.viewModel,this.view.overrideContext=a||(0,h.createOverrideContext)(this.viewModel),this.view._isUserControlled=!0,this.behavior.handlesCreated&&this.viewModel.created(b||null,this.view),this.bind(this.view)},a.prototype.bind=function(a){var b=this.behavior.handlesBind,c=this.boundProperties,d=void 0,e=void 0,f=void 0,g=void 0,i=void 0;if(this.isBound){if(this.scope===a)return;this.unbind()}for(this.isBound=!0,this.scope=a,d=0,e=c.length;d<e;++d)f=c[d],g=f.observer,i=g.selfSubscriber,g.publishing=!1,b&&(g.selfSubscriber=null),f.binding.bind(a),g.call(),g.publishing=!0,g.selfSubscriber=i;var j=void 0;null!==this.view?(b&&(this.view.viewModelScope=a),this.viewModel===a.overrideContext.bindingContext?j=a.overrideContext:this.instruction.inheritBindingContext?j=(0,h.createOverrideContext)(this.viewModel,a.overrideContext):(j=(0,h.createOverrideContext)(this.viewModel),j.__parentOverrideContext=a.overrideContext),this.view.bind(this.viewModel,j)):b&&(j=a.overrideContext,void 0!==a.overrideContext.__parentOverrideContext&&this.viewModel.viewFactory&&this.viewModel.viewFactory.factoryCreateInstruction.partReplacements&&(j=Object.assign({},a.overrideContext),j.parentOverrideContext=a.overrideContext.__parentOverrideContext),this.viewModel.bind(a.bindingContext,j))},a.prototype.unbind=function(){if(this.isBound){var a=this.boundProperties,b=void 0,c=void 0;for(this.isBound=!1,this.scope=null,null!==this.view&&this.view.unbind(),this.behavior.handlesUnbind&&this.viewModel.unbind(),null!==this.elementEvents&&this.elementEvents.disposeAll(),b=0,c=a.length;b<c;++b)a[b].binding.unbind()}},a.prototype.attached=function(){this.isAttached||(this.isAttached=!0,this.behavior.handlesAttached&&this.viewModel.attached(),null!==this.view&&this.view.attached())},a.prototype.detached=function(){this.isAttached&&(this.isAttached=!1,null!==this.view&&this.view.detached(),this.behavior.handlesDetached&&this.viewModel.detached())},a}(),Fb=a.BehaviorPropertyObserver=(Ha=(0,h.subscriberCollection)())(Ia=function(){function a(a,b,c,d,e){this.taskQueue=a,this.obj=b,this.propertyName=c,this.notqueued=!0,this.publishing=!1,this.selfSubscriber=d,this.currentValue=this.oldValue=e}return a.prototype.getValue=function(){return this.currentValue},a.prototype.setValue=function(a){var b=this.currentValue;b!==a&&(this.oldValue=b,this.currentValue=a,this.publishing&&this.notqueued&&(this.taskQueue.flushing?this.call():(this.notqueued=!1,this.taskQueue.queueMicroTask(this))))},a.prototype.call=function(){var a=this.oldValue,b=this.currentValue;this.notqueued=!0,b!==a&&(this.selfSubscriber&&this.selfSubscriber(b,a),this.callSubscribers(b,a),this.oldValue=b)},a.prototype.subscribe=function(a,b){this.addSubscriber(a,b)},a.prototype.unsubscribe=function(a,b){this.removeSubscriber(a,b)},a}())||Ia,Gb=a.BindableProperty=function(){function a(a){"string"==typeof a?this.name=a:Object.assign(this,a),this.attribute=this.attribute||l(this.name),null!==this.defaultBindingMode&&void 0!==this.defaultBindingMode||(this.defaultBindingMode=h.bindingMode.oneWay),this.changeHandler=this.changeHandler||null,this.owner=null,this.descriptor=null}return a.prototype.registerWith=function(a,b,c){if(b.properties.push(this),b.attributes[this.attribute]=this,this.owner=b,c)return this.descriptor=c,this._configureDescriptor(c)},a.prototype._configureDescriptor=function(a){var b=this.name;return a.configurable=!0,a.enumerable=!0,"initializer"in a&&(this.defaultValue=a.initializer,delete a.initializer,delete a.writable),"value"in a&&(this.defaultValue=a.value,delete a.value,delete a.writable),a.get=function(){return G(this,b).getValue()},a.set=function(a){G(this,b).setValue(a)},a.get.getObserver=function(a){return G(a,b)},a},a.prototype.defineOn=function(a,b){var c=this.name,d=void 0;null===this.changeHandler&&(d=c+"Changed")in a.prototype&&(this.changeHandler=d),null===this.descriptor&&Object.defineProperty(a.prototype,c,this._configureDescriptor(b,{}))},a.prototype.createObserver=function(a){var b=null,c=this.defaultValue,d=this.changeHandler,e=this.name,f=void 0;if(!this.hasOptions){if(d in a)b="propertyChanged"in a?function(b,c){a[d](b,c),a.propertyChanged(e,b,c)}:function(b,c){return a[d](b,c)};else if("propertyChanged"in a)b=function(b,c){return a.propertyChanged(e,b,c)};else if(null!==d)throw new Error("Change handler "+d+" was specified but not declared on the class.");return void 0!==c&&(f="function"==typeof c?c.call(a):c),new Fb(this.owner.taskQueue,a,this.name,b,f)}},a.prototype._initialize=function(a,b,c,d,e){var f=void 0,g=void 0,h=void 0,i=this.defaultValue;if(this.isDynamic)for(var j in c)this._createDynamicProperty(a,b,d,j,c[j],e);else this.hasOptions||(g=b[this.name],null!==c&&(f=g.selfSubscriber,h=c[this.attribute],d&&(g.selfSubscriber=null),"string"==typeof h?(a[this.name]=h,g.call()):h?e.push({observer:g,binding:h.createBinding(a)}):void 0!==i&&g.call(),g.selfSubscriber=f),g.publishing=!0)},a.prototype._createDynamicProperty=function(a,b,c,d,e,f){var g=d+"Changed",h=null,i=void 0,j=void 0;g in a?h="propertyChanged"in a?function(b,c){a[g](b,c),a.propertyChanged(d,b,c)}:function(b,c){return a[g](b,c)}:"propertyChanged"in a&&(h=function(b,c){return a.propertyChanged(d,b,c)}),i=b[d]=new Fb(this.owner.taskQueue,a,d,h),Object.defineProperty(a,d,{configurable:!0,enumerable:!0,get:i.getValue.bind(i),set:i.setValue.bind(i)}),c&&(i.selfSubscriber=null),"string"==typeof e?(a[d]=e,i.call()):e&&(j={observer:i,binding:e.createBinding(a)},f.push(j)),i.publishing=!0,i.selfSubscriber=h},a}(),Hb=0,Ib=a.HtmlBehaviorResource=function(){function a(){this.elementName=null,this.attributeName=null,this.attributeDefaultBindingMode=void 0,this.liftsContent=!1,this.targetShadowDOM=!1,this.shadowDOMOptions=null,this.processAttributes=J,this.processContent=I,this.usesShadowDOM=!1,this.childBindings=null,this.hasDynamicOptions=!1,this.containerless=!1,this.properties=[],this.attributes={},this.isInitialized=!1,this.primaryProperty=null}return a.convention=function(b,c){var d=void 0;return b.endsWith("CustomAttribute")&&(d=c||new a,d.attributeName=l(b.substring(0,b.length-15))),b.endsWith("CustomElement")&&(d=c||new a,d.elementName=l(b.substring(0,b.length-13))),d},a.prototype.addChildBinding=function(a){null===this.childBindings&&(this.childBindings=[]),this.childBindings.push(a)},a.prototype.initialize=function(a,b){var c=b.prototype,e=this.properties,f=this.attributeName,g=this.attributeDefaultBindingMode,j=void 0,k=void 0,l=void 0;if(!this.isInitialized)if(this.isInitialized=!0,b.__providerId__=H(),this.observerLocator=a.get(h.ObserverLocator),this.taskQueue=a.get(i.TaskQueue),this.target=b,this.usesShadowDOM=this.targetShadowDOM&&d.FEATURE.shadowDOM,this.handlesCreated="created"in c,this.handlesBind="bind"in c,this.handlesUnbind="unbind"in c,this.handlesAttached="attached"in c,this.handlesDetached="detached"in c,this.htmlName=this.elementName||this.attributeName,null!==f)if(0===e.length&&new Gb({name:"value",changeHandler:"valueChanged"in c?"valueChanged":null,attribute:f,defaultBindingMode:g}).registerWith(b,this),l=e[0],1===e.length&&"value"===l.name)l.isDynamic=l.hasOptions=this.hasDynamicOptions,l.defineOn(b,this);else{for(j=0,k=e.length;j<k;++j)if(e[j].defineOn(b,this),e[j].primaryProperty){if(this.primaryProperty)throw new Error("Only one bindable property on a custom element can be defined as the default");this.primaryProperty=e[j]}l=new Gb({name:"value",changeHandler:"valueChanged"in c?"valueChanged":null,attribute:f,defaultBindingMode:g}),l.hasOptions=!0,l.registerWith(b,this)}else{for(j=0,k=e.length;j<k;++j)e[j].defineOn(b,this);this._copyInheritedProperties(a,b)}},a.prototype.register=function(a,b){var c=this;null!==this.attributeName&&(a.registerAttribute(b||this.attributeName,this,this.attributeName),Array.isArray(this.aliases)&&this.aliases.forEach(function(b){a.registerAttribute(b,c,c.attributeName)})),null!==this.elementName&&a.registerElement(b||this.elementName,this)},a.prototype.load=function(a,b,d,e,f){var g=this,h=void 0;return null!==this.elementName?(e=a.get(gb).getViewStrategy(e||this.viewStrategy||b),h=new Za(this.targetShadowDOM,!0),e.moduleId||(e.moduleId=c.Origin.get(b).moduleId),e.loadViewFactory(a.get(Db),h,d,b).then(function(a){return f&&g.viewFactory||(g.viewFactory=a),a})):Promise.resolve(this)},a.prototype.compile=function(a,b,c,e,f){if(this.liftsContent){if(!e.viewFactory){var g=d.DOM.createElement("template"),h=d.DOM.createDocumentFragment(),i=c.getAttribute("view-cache"),j=c.getAttribute("part");c.removeAttribute(e.originalAttrName),d.DOM.replaceNode(g,c,f),h.appendChild(c),e.viewFactory=a.compile(h,b),j&&(e.viewFactory.part=j,c.removeAttribute("part")),i&&(e.viewFactory.setCacheSize(i),c.removeAttribute("view-cache")),c=g}}else if(null!==this.elementName){var k={};if(this.processContent(a,b,c,e)&&c.hasChildNodes()){for(var l=c.firstChild,n=this.usesShadowDOM?null:d.DOM.createElement("au-content"),o=void 0,p=void 0;l;)o=l.nextSibling,"TEMPLATE"===l.tagName&&(p=l.getAttribute("replace-part"))?(k[p]=a.compile(l,b),d.DOM.removeNode(l,f),e.partReplacements=k):null!==n&&(3===l.nodeType&&m(l)?d.DOM.removeNode(l,f):n.appendChild(l)),l=o;null!==n&&n.hasChildNodes()&&c.appendChild(n),e.skipContentProcessing=!1}else e.skipContentProcessing=!0}else this.processContent(a,b,c,e)||(e.skipContentProcessing=!0);return c},a.prototype.create=function(a,b,c,e){var f=void 0,g=null;b=b||$a.normal,c=c||null,e=e||null,null!==this.elementName&&c&&(this.usesShadowDOM?(f=c.attachShadow(this.shadowDOMOptions),a.registerInstance(d.DOM.boundary,f)):(f=c,this.targetShadowDOM&&a.registerInstance(d.DOM.boundary,f))),null!==c&&(c.au=g=c.au||{});var h=b.viewModel||a.get(this.target),i=new Eb(this,b,h,a),j=this.childBindings,k=void 0;if(this.liftsContent)g.controller=i;else if(null!==this.elementName){if(k=b.viewFactory||this.viewFactory,a.viewModel=h,k&&(i.view=k.create(a,b,c)),null!==c){if(g.controller=i,i.view){if(!this.usesShadowDOM&&(1===c.childNodes.length||c.contentElement)){var l=c.childNodes[0]||c.contentElement;i.view.contentView={fragment:l},l.parentNode&&d.DOM.removeNode(l)}if(b.anchorIsContainer){if(null!==j)for(var m=0,n=j.length;m<n;++m)i.view.addBinding(j[m].create(c,h,i));i.view.appendNodesTo(f)}else i.view.insertNodesBefore(f)}else if(null!==j)for(var o=0,p=j.length;o<p;++o)e.push(j[o].create(c,h,i))}else if(i.view){if(i.view.controller=i,null!==j)for(var q=0,r=j.length;q<r;++q)i.view.addBinding(j[q].create(b.host,h,i))}else if(null!==j)for(var s=0,t=j.length;s<t;++s)e.push(j[s].create(b.host,h,i))}else if(null!==j)for(var u=0,v=j.length;u<v;++u)e.push(j[u].create(c,h,i));return null!==g&&(g[this.htmlName]=i),b.initiatedByBehavior&&k&&i.view.created(),i},a.prototype._ensurePropertiesDefined=function(a,b){var c=void 0,d=void 0,e=void 0,f=void 0;if(!("__propertiesDefined__"in b))for(b.__propertiesDefined__=!0,c=this.properties,d=0,e=c.length;d<e;++d)void 0!==(f=c[d].createObserver(a))&&(b[f.propertyName]=f)},a.prototype._copyInheritedProperties=function(a,b){for(var d=this,e=void 0,f=b;;){var g=Object.getPrototypeOf(b.prototype);if(!(b=g&&g.constructor))return;if(e=c.metadata.getOwn(c.metadata.resource,b))break}e.initialize(a,b);for(var h=function(a,b){var c=e.properties[a];if(d.properties.some(function(a){return a.name===c.name}))return"continue";new Gb(c).registerWith(f,d)},i=0,j=e.properties.length;i<j;++i){h(i,j)}},a}(),Jb=function(){function a(a){this.name=a.name,this.changeHandler=a.changeHandler||this.name+"Changed",this.selector=a.selector,this.all=a.all}return a.prototype.create=function(a,b,c){return new Lb(this.selector,a,this.name,b,c,this.changeHandler,this.all)},a}(),Kb=[],Lb=function(){function a(a,b,c,d,e,f,g){this.selector=a,this.viewHost=b,this.property=c,this.viewModel=d,this.controller=e,this.changeHandler=f in d?f:null,this.usesShadowDOM=e.behavior.usesShadowDOM,this.all=g,!this.usesShadowDOM&&e.view&&e.view.contentView?this.contentView=e.view.contentView:this.contentView=null}return a.prototype.matches=function(a){if(a.matches(this.selector)){if(null===this.contentView)return!0;var b=this.contentView,c=a.auAssignedSlot;if(c&&c.projectFromAnchors){for(var d=c.projectFromAnchors,e=0,f=d.length;e<f;++e)if(d[e].auOwnerView===b)return!0;return!1}return a.auOwnerView===b}return!1},a.prototype.bind=function(a){var b=this.viewHost,c=this.viewModel,e=b.__childObserver__;if(!e){e=b.__childObserver__=d.DOM.createMutationObserver(O);var f={childList:!0,subtree:!this.usesShadowDOM};e.observe(b,f),e.binders=[]}if(e.binders.push(this),this.usesShadowDOM){var g=b.firstElementChild;if(this.all){var h=c[this.property];for(h?h.length=0:h=c[this.property]=[];g;)this.matches(g)&&h.push(g.au&&g.au.controller?g.au.controller.viewModel:g),g=g.nextElementSibling;null!==this.changeHandler&&this.viewModel[this.changeHandler](Kb)}else for(;g;){if(this.matches(g)){var i=g.au&&g.au.controller?g.au.controller.viewModel:g;this.viewModel[this.property]=i,null!==this.changeHandler&&this.viewModel[this.changeHandler](i);break}g=g.nextElementSibling}}},a.prototype.onRemove=function(a){if(this.matches(a)){var b=a.au&&a.au.controller?a.au.controller.viewModel:a;if(this.all){var c=this.viewModel[this.property]||(this.viewModel[this.property]=[]),d=c.indexOf(b);return-1!==d&&c.splice(d,1),!0}return!1}return!1},a.prototype.onAdd=function(a){if(this.matches(a)){var b=a.au&&a.au.controller?a.au.controller.viewModel:a;if(this.all){var c=this.viewModel[this.property]||(this.viewModel[this.property]=[]);if("*"===this.selector)return c.push(b),!0;for(var d=0,e=a.previousElementSibling;e;)this.matches(e)&&d++,e=e.previousElementSibling;return c.splice(d,0,b),!0}this.viewModel[this.property]=b,null!==this.changeHandler&&this.viewModel[this.changeHandler](b)}return!1},a.prototype.unbind=function(){this.viewHost.__childObserver__&&(this.viewHost.__childObserver__.disconnect(),this.viewHost.__childObserver__=null)},a}(),Mb=a.SwapStrategies={before:function(a,b,c){return void 0===b?c():c().then(function(){return P(a,b)})},with:function(a,b,c){return void 0===b?c():Promise.all([P(a,b),c()])},after:function(a,b,c){return Promise.resolve(a.removeAll(!0)).then(c)}},Nb=a.CompositionEngine=(Ja=(0,g.inject)(Db,gb))(Ka=function(){function a(a,b){this.viewEngine=a,this.viewLocator=b}return a.prototype._swap=function(a,b){var c=Mb[a.swapOrder]||Mb.after,d=a.viewSlot.children.slice();return c(a.viewSlot,d,function(){return Promise.resolve(a.viewSlot.add(b)).then(function(){a.currentController&&a.currentController.unbind()})}).then(function(){a.compositionTransactionNotifier&&a.compositionTransactionNotifier.done()})},a.prototype._createControllerAndSwap=function(a){var b=this;return this.createController(a).then(function(c){return c.automate(a.overrideContext,a.owningView),a.compositionTransactionOwnershipToken?a.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return b._swap(a,c.view)}).then(function(){return c}):b._swap(a,c.view).then(function(){return c})})},a.prototype.createController=function(a){var b=this,c=void 0,d=void 0,e=void 0,f=void 0;return this.ensureViewModel(a).then(Q).then(function(){c=a.childContainer,d=a.viewModel,e=a.viewModelResource,f=e.metadata;var g=b.viewLocator.getViewStrategy(a.view||d);return a.viewResources&&g.makeRelativeTo(a.viewResources.viewUrl),f.load(c,e.value,null,g,!0)}).then(function(b){return f.create(c,$a.dynamic(a.host,d,b))})},a.prototype.ensureViewModel=function(a){var b=a.childContainer=a.childContainer||a.container.createChild();if("string"==typeof a.viewModel)return a.viewModel=a.viewResources?a.viewResources.relativeToView(a.viewModel):a.viewModel,this.viewEngine.importViewModelResource(a.viewModel).then(function(c){return b.autoRegister(c.value),a.host&&b.registerInstance(d.DOM.Element,a.host),a.viewModel=b.viewModel=b.get(c.value),a.viewModelResource=c,a});var e=c.metadata.getOrCreateOwn(c.metadata.resource,Ib,a.viewModel.constructor);return e.elementName=e.elementName||"dynamic-element",e.initialize(a.container||b,a.viewModel.constructor),a.viewModelResource={metadata:e,value:a.viewModel.constructor},b.viewModel=a.viewModel,Promise.resolve(a)},a.prototype.compose=function(a){var b=this;a.childContainer=a.childContainer||a.container.createChild(),a.view=this.viewLocator.getViewStrategy(a.view);var c=a.childContainer.get(Ta),d=c.tryCapture();return d?a.compositionTransactionOwnershipToken=d:a.compositionTransactionNotifier=c.enlist(),a.viewModel?this._createControllerAndSwap(a):a.view?(a.viewResources&&a.view.makeRelativeTo(a.viewResources.viewUrl),a.view.loadViewFactory(this.viewEngine,new Za).then(function(c){var d=c.create(a.childContainer);return d.bind(a.bindingContext,a.overrideContext),a.compositionTransactionOwnershipToken?a.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return b._swap(a,d)}).then(function(){return d}):b._swap(a,d).then(function(){return d})})):a.viewSlot?(a.viewSlot.removeAll(),a.compositionTransactionNotifier&&a.compositionTransactionNotifier.done(),Promise.resolve(null)):Promise.resolve(null)},a}())||Ka,Ob=a.ElementConfigResource=function(){function a(){}return a.prototype.initialize=function(a,b){},a.prototype.register=function(a,b){},a.prototype.load=function(a,b){var c=new b;a.get(h.EventManager).registerElementConfig(c)},a}(),Pb={mode:"open"};a.TemplatingEngine=(La=(0,g.inject)(g.Container,zb,wb,Nb))(Ma=function(){function a(a,b,c,d){this._container=a,this._moduleAnalyzer=b,this._viewCompiler=c,this._compositionEngine=d,a.registerInstance(Qa,Qa.instance=new Qa)}return a.prototype.configureAnimator=function(a){this._container.unregister(Qa),this._container.registerInstance(Qa,Qa.instance=a)},a.prototype.compose=function(a){return this._compositionEngine.compose(a)},a.prototype.enhance=function(a){a instanceof d.DOM.Element&&(a={element:a});var b={},c=a.resources||this._container.get(nb);this._viewCompiler._compileNode(a.element,c,b,a.element.parentNode,"root",!0);var e=new tb(a.element,b,c),f=a.container||this._container.createChild(),g=e.create(f,$a.enhance());return g.bind(a.bindingContext||{},a.overrideContext),g.firstChild=g.lastChild=g.fragment,g.fragment=d.DOM.createDocumentFragment(),g.attached(),g},a}())||Ma}.call(b,b,a("aurelia-logging"),a("aurelia-metadata"),a("aurelia-pal"),a("aurelia-path"),a("aurelia-loader"),a("aurelia-dependency-injection"),a("aurelia-binding"),a("aurelia-task-queue"))}),System.registerDynamic("npm:aurelia-templating@1.7.0.js",["npm:aurelia-templating@1.7.0/aurelia-templating"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-templating@1.7.0/aurelia-templating"))}),System.registerDynamic("npm:aurelia-metadata@1.0.3/aurelia-metadata.js",["aurelia-pal"],!1,function(a,b,c){return function(a,b){"use strict";function c(a){return a&&("function"==typeof a||"object"===(void 0===a?"undefined":n(a)))}function d(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=function(a,c,d){var e=b.length;if(c){for(d=d||{value:a[c],writable:!0,configurable:!0,enumerable:!0};e--;)d=b[e](a,c,d)||d;Object.defineProperty(a,c,d)}else for(;e--;)a=b[e](a)||a;return a};return d.on=d,d}function e(a,b,c){function d(c,d,e){var f=c.constructor.name+"#"+d,g=b?{}:a||{},h="DEPRECATION - "+f;if("function"!=typeof e.value)throw new SyntaxError("Only methods can be marked as deprecated.");return g.message&&(h+=" - "+g.message),m({},e,{value:function(){if(g.error)throw new Error(h);return console.warn(h),e.value.apply(this,arguments)}})}return b?d(a,b,c):d}function f(a){function b(b){var d=function(b){for(var d="function"==typeof b?b.prototype:b,e=c.length;e--;){var f=c[e];Object.defineProperty(d,f,{value:a[f],writable:!0})}};return b?d(b):d}var c=Object.keys(a);return b}function g(){return!0}function h(){}function i(a){return void 0===a?a={}:"function"==typeof a&&(a={validate:a}),a.validate||(a.validate=g),a.compose||(a.compose=h),a}function j(a){return function(b){return!0===a(b)}}function k(a,b){return function(c){var d=b(c);if(!0!==d)throw new Error(d||a+" was not correctly implemented.")}}function l(a,b){b=i(b);var c=function c(d){var e="function"==typeof d?d.prototype:d;b.compose(e),c.assert(e),Object.defineProperty(e,"protocol:"+a,{enumerable:!1,configurable:!1,writable:!1,value:!0})};return c.validate=j(b.validate),c.assert=k(a,b.validate),c}Object.defineProperty(a,"__esModule",{value:!0}),a.Origin=a.metadata=void 0,a.decorators=d,a.deprecated=e,a.mixin=f,a.protocol=l;var m=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},o=a.metadata={resource:"aurelia:resource",paramTypes:"design:paramtypes",propertyType:"design:type",properties:"design:properties",get:function(a,b,d){if(c(b)){var e=o.getOwn(a,b,d);return void 0===e?o.get(a,Object.getPrototypeOf(b),d):e}},getOwn:function(a,b,d){if(c(b))return Reflect.getOwnMetadata(a,b,d)},define:function(a,b,c,d){Reflect.defineMetadata(a,b,c,d)},getOrCreateOwn:function(a,b,c,d){var e=o.getOwn(a,c,d);return void 0===e&&(e=new b,Reflect.defineMetadata(a,e,c,d)),e}},p=new Map,q=Object.freeze({moduleId:void 0,moduleMember:void 0});a.Origin=function(){function a(a,b){this.moduleId=a,this.moduleMember=b}return a.get=function(c){var d=p.get(c);return void 0===d&&b.PLATFORM.eachModule(function(b,e){if("object"===(void 0===e?"undefined":n(e)))for(var f in e){var g=e[f];if(g===c)return p.set(c,d=new a(b,f)),!0}return e===c&&(p.set(c,d=new a(b,"default")),!0)}),d||q},a.set=function(a,b){p.set(a,b)},a}();l.create=function(a,b){b=i(b);var c="protocol:"+a,d=function(c){var d=l(a,b);return c?d(c):d};return d.decorates=function(a){return!0===a[c]},d.validate=j(b.validate),d.assert=k(a,b.validate),d}}.call(b,b,a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-metadata@1.0.3.js",["npm:aurelia-metadata@1.0.3/aurelia-metadata"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-metadata@1.0.3/aurelia-metadata"))}),System.registerDynamic("npm:aurelia-loader@1.0.0/aurelia-loader.js",["aurelia-path","aurelia-metadata"],!1,function(a,b,c){return function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Loader=a.TemplateRegistryEntry=a.TemplateDependency=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a.TemplateDependency=function(a,b){this.src=a,this.name=b},f=a.TemplateRegistryEntry=function(){function a(a){this.templateIsLoaded=!1,this.factoryIsReady=!1,this.resources=null,this.dependencies=null,this.address=a,this.onReady=null,this._template=null,this._factory=null}return a.prototype.addDependency=function(a,d){var f="string"==typeof a?(0,b.relativeToFile)(a,this.address):c.Origin.get(a).moduleId;this.dependencies.push(new e(f,d))},d(a,[{key:"template",get:function(){return this._template},set:function(a){var c=this.address,d=void 0,f=void 0,g=void 0,h=void 0;this._template=a,this.templateIsLoaded=!0,d=a.content.querySelectorAll("require"),h=this.dependencies=new Array(d.length);for(var i=0,j=d.length;i<j;++i){if(f=d[i],!(g=f.getAttribute("from")))throw new Error("<require> element in "+c+' has no "from" attribute.');h[i]=new e((0,b.relativeToFile)(g,c),f.getAttribute("as")),f.parentNode&&f.parentNode.removeChild(f)}}},{key:"factory",get:function(){return this._factory},set:function(a){this._factory=a,this.factoryIsReady=!0}}]),a}();a.Loader=function(){function a(){this.templateRegistry={}}return a.prototype.map=function(a,b){throw new Error("Loaders must implement map(id, source).")},a.prototype.normalizeSync=function(a,b){throw new Error("Loaders must implement normalizeSync(moduleId, relativeTo).")},a.prototype.normalize=function(a,b){throw new Error("Loaders must implement normalize(moduleId: string, relativeTo: string): Promise<string>.")},a.prototype.loadModule=function(a){throw new Error("Loaders must implement loadModule(id).")},a.prototype.loadAllModules=function(a){throw new Error("Loader must implement loadAllModules(ids).")},a.prototype.loadTemplate=function(a){throw new Error("Loader must implement loadTemplate(url).")},a.prototype.loadText=function(a){throw new Error("Loader must implement loadText(url).")},a.prototype.applyPluginToUrl=function(a,b){throw new Error("Loader must implement applyPluginToUrl(url, pluginName).")},a.prototype.addPlugin=function(a,b){throw new Error("Loader must implement addPlugin(pluginName, implementation).")},a.prototype.getOrCreateTemplateRegistryEntry=function(a){return this.templateRegistry[a]||(this.templateRegistry[a]=new f(a))},a}()}.call(b,b,a("aurelia-path"),a("aurelia-metadata"))}),System.registerDynamic("npm:aurelia-loader@1.0.0.js",["npm:aurelia-loader@1.0.0/aurelia-loader"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-loader@1.0.0/aurelia-loader"))}),System.registerDynamic("npm:aurelia-task-queue@1.3.0/aurelia-task-queue.js",["aurelia-pal"],!1,function(a,b,c){return function(a,b){"use strict";function c(a){var c=1,d=b.DOM.createMutationObserver(a),e=b.DOM.createTextNode("");return d.observe(e,{characterData:!0}),function(){c=-c,e.data=c}}function d(a){return function(){function b(){clearTimeout(c),clearInterval(d),a()}var c=setTimeout(b,0),d=setInterval(b,50)}}function e(a,b,c){c&&b.stack&&"object"===(void 0===a?"undefined":i(a))&&null!==a&&(a.stack=h(a.stack)+b.stack),"onError"in b?b.onError(a):setTimeout(function(){throw a},0)}function f(){var a=new Error;if(a.stack)return a.stack;try{throw a}catch(a){return a.stack}}function g(a){return a.replace(/^[\s\S]*?\bqueue(Micro)?Task\b[^\n]*\n/,"")}function h(a){var b=a.lastIndexOf("flushMicroTaskQueue");return b<0&&(b=a.lastIndexOf("flushTaskQueue"))<0?a:(b=a.lastIndexOf("\n",b),b<0?a:a.substr(0,b))}Object.defineProperty(a,"__esModule",{value:!0}),a.TaskQueue=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},j="\nEnqueued in TaskQueue by:\n",k="\nEnqueued in MicroTaskQueue by:\n";a.TaskQueue=function(){function a(){var a=this;this.flushing=!1,this.longStacks=!1,this.microTaskQueue=[],this.microTaskQueueCapacity=1024,this.taskQueue=[],b.FEATURE.mutationObserver?this.requestFlushMicroTaskQueue=c(function(){return a.flushMicroTaskQueue()}):this.requestFlushMicroTaskQueue=d(function(){return a.flushMicroTaskQueue()}),this.requestFlushTaskQueue=d(function(){return a.flushTaskQueue()})}return a.prototype._flushQueue=function(a,b){var c=0,d=void 0;try{for(this.flushing=!0;c<a.length;)if(d=a[c],this.longStacks&&(this.stack="string"==typeof d.stack?d.stack:void 0),d.call(),++c>b){for(var f=0,g=a.length-c;f<g;f++)a[f]=a[f+c];a.length-=c,c=0}}catch(a){e(a,d,this.longStacks)}finally{this.flushing=!1}},a.prototype.queueMicroTask=function(a){this.microTaskQueue.length<1&&this.requestFlushMicroTaskQueue(),this.longStacks&&(a.stack=this.prepareQueueStack(k)),this.microTaskQueue.push(a)},a.prototype.queueTask=function(a){this.taskQueue.length<1&&this.requestFlushTaskQueue(),this.longStacks&&(a.stack=this.prepareQueueStack(j)),this.taskQueue.push(a)},a.prototype.flushTaskQueue=function(){var a=this.taskQueue;this.taskQueue=[],this._flushQueue(a,Number.MAX_VALUE)},a.prototype.flushMicroTaskQueue=function(){var a=this.microTaskQueue;this._flushQueue(a,this.microTaskQueueCapacity),a.length=0},a.prototype.prepareQueueStack=function(a){var b=a+g(f());return"string"==typeof this.stack&&(b=h(b)+this.stack),b},a}()}.call(b,b,a("aurelia-pal"))}),System.registerDynamic("npm:aurelia-task-queue@1.3.0.js",["npm:aurelia-task-queue@1.3.0/aurelia-task-queue"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-task-queue@1.3.0/aurelia-task-queue"))}),System.registerDynamic("npm:aurelia-path@1.1.1/aurelia-path.js",[],!1,function(a,b,c){return function(a){"use strict";function b(a){for(var b=0;b<a.length;++b){var c=a[b];if("."===c)a.splice(b,1),b-=1;else if(".."===c){if(0===b||1===b&&".."===a[2]||".."===a[b-1])continue;b>0&&(a.splice(b-1,2),b-=2)}}}function c(a,c){var d=c&&c.split("/"),e=a.trim().split("/");if("."===e[0].charAt(0)&&d){var f=d.slice(0,d.length-1);e.unshift.apply(e,f)}return b(e),e.join("/")}function d(a,b){if(!a)return b;if(!b)return a;var c=a.match(/^([^\/]*?:)\//),d=c&&c.length>0?c[1]:"";a=a.substr(d.length);var e=void 0;e=0===a.indexOf("///")&&"file:"===d?"///":0===a.indexOf("//")?"//":0===a.indexOf("/")?"/":"";for(var f="/"===b.slice(-1)?"/":"",g=a.split("/"),h=b.split("/"),i=[],j=0,k=g.length;j<k;++j)if(".."===g[j])i.pop();else{if("."===g[j]||""===g[j])continue;i.push(g[j])}for(var l=0,m=h.length;l<m;++l)if(".."===h[l])i.pop();else{if("."===h[l]||""===h[l])continue;i.push(h[l])}return d+e+i.join("/")+f}function e(a,b,c){var d=[];if(null===b||void 0===b)return d;if(Array.isArray(b))for(var f=0,g=b.length;f<g;f++)if(c)d.push(l(a)+"="+k(b[f]));else{var h=a+"["+("object"===j(b[f])&&null!==b[f]?f:"")+"]";d=d.concat(e(h,b[f]))}else if("object"!==(void 0===b?"undefined":j(b))||c)d.push(l(a)+"="+k(b));else for(var i in b)d=d.concat(e(a+"["+i+"]",b[i]));return d}function f(a,b){for(var c=[],d=Object.keys(a||{}).sort(),f=0,g=d.length;f<g;f++){var h=d[f];c=c.concat(e(h,a[h],b))}return 0===c.length?"":c.join("&")}function g(a,b){return Array.isArray(a)?(a.push(b),a):void 0!==a?[a,b]:b}function h(a,b,c){for(var d=a,e=b.length-1,f=0;f<=e;f++){var g=""===b[f]?d.length:b[f];if(f<e){var h=d[g]&&"object"!==j(d[g])?[d[g]]:d[g];d=d[g]=h||(isNaN(b[f+1])?{}:[])}else d=d[g]=c}}function i(a){var b={};if(!a||"string"!=typeof a)return b;var c=a;"?"===c.charAt(0)&&(c=c.substr(1));for(var d=c.replace(/\+/g," ").split("&"),e=0;e<d.length;e++){var f=d[e].split("="),i=decodeURIComponent(f[0]);if(i){var j=i.split("]["),k=j.length-1;if(/\[/.test(j[0])&&/\]$/.test(j[k])?(j[k]=j[k].replace(/\]$/,""),j=j.shift().split("[").concat(j),k=j.length-1):k=0,f.length>=2){var l=f[1]?decodeURIComponent(f[1]):"";k?h(b,j,l):b[i]=g(b[i],l)}else b[i]=!0}}return b}Object.defineProperty(a,"__esModule",{value:!0}),a.relativeToFile=c,a.join=d,a.buildQueryString=f,a.parseQueryString=i;var j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=encodeURIComponent,l=function(a){return k(a).replace("%24","$")}}.call(b,b,a)}),System.registerDynamic("npm:aurelia-path@1.1.1.js",["npm:aurelia-path@1.1.1/aurelia-path"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-path@1.1.1/aurelia-path"))}),System.registerDynamic("npm:aurelia-pal@1.8.0/aurelia-pal.js",[],!1,function(a,b,c){return function(a){"use strict";function b(a,b,c){if(b){if(b.innerError&&c)return b;var d="\n------------------------------------------------\n";a+=d+"Inner Error:\n","string"==typeof b?a+="Message: "+b:(b.message?a+="Message: "+b.message:a+="Unknown Inner Error Type. Displaying Inner Error as JSON:\n "+JSON.stringify(b,null,"  "),b.stack&&(a+="\nInner Error Stack:\n"+b.stack,a+="\nEnd Inner Error Stack")),a+=d}var e=new Error(a);return b&&(e.innerError=b),e}function c(b){h||(a.isInitialized=h=!0,"function"!=typeof Object.getPropertyDescriptor&&(Object.getPropertyDescriptor=function(a,b){for(var c=Object.getOwnPropertyDescriptor(a,b),d=Object.getPrototypeOf(a);void 0===c&&null!==d;)c=Object.getOwnPropertyDescriptor(d,b),d=Object.getPrototypeOf(d);return c}),b(f,e,g))}function d(){a.isInitialized=h=!1}Object.defineProperty(a,"__esModule",{value:!0}),a.AggregateError=b,a.initializePAL=c,a.reset=d;var e=a.FEATURE={},f=a.PLATFORM={noop:function(){},eachModule:function(){},moduleName:function(a){function b(b){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a){return a})};f.global=function(){return"undefined"!=typeof self?self:"undefined"!=typeof global?global:new Function("return this")()}();var g=a.DOM={},h=a.isInitialized=!1}.call(b,b,a)}),System.registerDynamic("npm:aurelia-pal@1.8.0.js",["npm:aurelia-pal@1.8.0/aurelia-pal"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-pal@1.8.0/aurelia-pal"))}),System.registerDynamic("npm:aurelia-logging@1.4.0/aurelia-logging.js",[],!1,function(a,b,c){return function(a){"use strict";function b(a){return u.filter(function(b){return b===a}).length>0}function c(){return[this].concat(Array.prototype.slice.call(arguments))}function d(a){var b=q[a];return function(){if(!(this.level<b))for(var d=c.apply(this,arguments),e=s.length;e--;){var f;(f=s[e])[a].apply(f,d)}}}function e(a){var b=q[a];return function(){if(!(this.level<b))for(var d=c.apply(this,arguments),e=s.length;e--;){var f=s[e];void 0!==f[a]&&f[a].apply(f,d)}}}function f(){var a=v.prototype;for(var c in q)b(c)?"none"!==c&&(a[c]=d(c)):a[c]=e(c)}function g(){var a=v.prototype;for(var b in q)"none"!==b&&(a[b]=function(){})}function h(a){return r[a]||new v(a)}function i(a){1===s.push(a)&&f()}function j(a){s=s.filter(function(b){return b!==a})}function k(){return[].concat(s)}function l(){s=[],g()}function m(a,b){if(void 0!==q[a])throw Error('Log level "'+a+'" already exists.');if(isNaN(b))throw Error("Value must be a number.");q[a]=b,s.length>0?f():v.prototype[a]=function(){}}function n(a){if(void 0!==q[a]){if(b(a))throw Error('Built-in log level "'+a+'" cannot be removed.');delete q[a],delete v.prototype[a]}}function o(a){t=a;for(var b in r)r[b].setLevel(a)}function p(){return t}Object.defineProperty(a,"__esModule",{value:!0}),a.getLogger=h,a.addAppender=i,a.removeAppender=j,a.getAppenders=k,a.clearAppenders=l,a.addCustomLevel=m,a.removeCustomLevel=n,a.setLevel=o,a.getLevel=p;var q=a.logLevel={none:0,error:10,warn:20,info:30,debug:40},r={},s=[],t=q.none,u=["none","error","warn","info","debug"],v=a.Logger=function(){function a(a){var b=r[a];if(b)return b;r[a]=this,this.id=a,this.level=t}return a.prototype.debug=function(a){},a.prototype.info=function(a){},a.prototype.warn=function(a){},a.prototype.error=function(a){},a.prototype.setLevel=function(a){this.level=a},a}()}.call(b,b,a)}),System.registerDynamic("npm:aurelia-logging@1.4.0.js",["npm:aurelia-logging@1.4.0/aurelia-logging"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-logging@1.4.0/aurelia-logging"))}),System.registerDynamic("npm:aurelia-framework@1.2.0/aurelia-framework.js",["aurelia-dependency-injection","aurelia-binding","aurelia-metadata","aurelia-templating","aurelia-loader","aurelia-task-queue","aurelia-path","aurelia-pal","aurelia-logging"],!1,function(a,b,c){return function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function l(){i.DOM.addEventListener("submit",function(a){var b=a.target,c=b.action;"form"!==b.tagName.toLowerCase()||c||a.preventDefault()})}function m(a,b){var c=void 0;return function d(){return c=b.shift(),c?Promise.resolve(c(a)).then(d):Promise.resolve()}()}function n(a,b,c){function d(d){return b.loadModule(d).then(function(b){if("configure"in b)return Promise.resolve(b.configure(a,c.config||{})).then(function(){a.resourcesRelativeTo=null,s.debug("Configured plugin "+c.moduleId+".")});a.resourcesRelativeTo=null,s.debug("Loaded plugin "+c.moduleId+".")})}s.debug("Loading plugin "+c.moduleId+"."),a.resourcesRelativeTo=c.resourcesRelativeTo;var e=c.moduleId;return c.resourcesRelativeTo.length>1?b.normalize(c.moduleId,c.resourcesRelativeTo[1]).then(function(a){return d(a)}):d(e)}function o(a,b,c){function d(b){var c=b.moduleId,d=p(c);return f(c)&&(c=g(c)),a.loader.normalize(c,b.relativeTo).then(function(a){return{name:b.moduleId,importId:f(b.moduleId)?h(a,d):a}})}function f(a){var b=p(a);return!!b&&(""!==b&&(".js"!==b&&".ts"!==b))}function g(a){return a.replace(t,"")}function h(a,b){return g(a)+"."+b}var i=a.container.get(e.ViewEngine);return Promise.all(Object.keys(b).map(function(a){return d(b[a])})).then(function(a){var b=[],d=[];return a.forEach(function(a){b.push(void 0),d.push(a.importId)}),i.importViewResources(d,b,c)})}function p(a){var b=a.match(t);if(b&&b.length>0)return b[0].split(".")[1]}function q(a){if(a.processed)throw new Error("This config instance has already been applied. To load more plugins or global resources, create a new FrameworkConfiguration instance.")}Object.defineProperty(a,"__esModule",{value:!0}),a.LogManager=a.FrameworkConfiguration=a.Aurelia=void 0,Object.keys(b).forEach(function(c){"default"!==c&&"__esModule"!==c&&Object.defineProperty(a,c,{enumerable:!0,get:function(){return b[c]}})}),Object.keys(c).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(a,b,{enumerable:!0,get:function(){return c[b]}})}),Object.keys(d).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(a,b,{enumerable:!0,get:function(){return d[b]}})}),Object.keys(e).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(a,b,{enumerable:!0,get:function(){return e[b]}})}),Object.keys(f).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(a,b,{enumerable:!0,get:function(){return f[b]}})}),Object.keys(g).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(a,b,{enumerable:!0,get:function(){return g[b]}})}),Object.keys(h).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(a,b,{enumerable:!0,get:function(){return h[b]}})}),Object.keys(i).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(a,b,{enumerable:!0,get:function(){return i[b]}})});var r=k(j),s=(a.Aurelia=function(){function a(c,d,g){this.loader=c||new i.PLATFORM.Loader,this.container=d||(new b.Container).makeGlobal(),this.resources=g||new e.ViewResources,this.use=new u(this),this.logger=r.getLogger("aurelia"),this.hostConfigured=!1,this.host=null,this.use.instance(a,this),this.use.instance(f.Loader,this.loader),this.use.instance(e.ViewResources,this.resources)}return a.prototype.start=function(){var a=this;return this._started?this._started:(this.logger.info("Aurelia Starting"),this._started=this.use.apply().then(function(){if(l(),!a.container.hasResolver(e.BindingLanguage)){var b="You must configure Aurelia with a BindingLanguage implementation.";throw a.logger.error(b),new Error(b)}a.logger.info("Aurelia Started");var c=i.DOM.createCustomEvent("aurelia-started",{bubbles:!0,cancelable:!0});return i.DOM.dispatchEvent(c),a}))},a.prototype.enhance=function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._configureHost(c||i.DOM.querySelectorAll("body")[0]),new Promise(function(c){var d=a.container.get(e.TemplatingEngine);a.root=d.enhance({container:a.container,element:a.host,resources:a.resources,bindingContext:b}),a.root.attached(),a._onAureliaComposed(),c(a)})},a.prototype.setRoot=function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d={};this.root&&this.root.viewModel&&this.root.viewModel.router&&(this.root.viewModel.router.deactivate(),this.root.viewModel.router.reset()),this._configureHost(c);var f=this.container.get(e.TemplatingEngine);return delete this.container.get(e.CompositionTransaction).initialComposition,b||(b=this.configModuleId?(0,h.relativeToFile)("./app",this.configModuleId):"app"),d.viewModel=b,d.container=d.childContainer=this.container,d.viewSlot=this.hostSlot,d.host=this.host,f.compose(d).then(function(b){return a.root=b,d.viewSlot.attached(),a._onAureliaComposed(),a})},a.prototype._configureHost=function(a){if(!this.hostConfigured){if(a=a||this.host,this.host=a&&"string"!=typeof a?a:i.DOM.getElementById(a||"applicationHost"),!this.host)throw new Error("No applicationHost was specified.");this.hostConfigured=!0,this.host.aurelia=this,this.hostSlot=new e.ViewSlot(this.host,!0),this.hostSlot.transformChildNodesIntoView(),this.container.registerInstance(i.DOM.boundary,this.host)}},a.prototype._onAureliaComposed=function(){var a=i.DOM.createCustomEvent("aurelia-composed",{bubbles:!0,cancelable:!0});setTimeout(function(){return i.DOM.dispatchEvent(a)},1)},a}(),r.getLogger("aurelia")),t=/\.[^\/.]+$/,u=function(){function a(a){var b=this;this.aurelia=a,this.container=a.container,this.info=[],this.processed=!1,this.preTasks=[],this.postTasks=[],this.resourcesToLoad={},this.preTask(function(){return a.loader.normalize("aurelia-bootstrapper").then(function(a){return b.bootstrapperName=a})}),this.postTask(function(){return o(a,b.resourcesToLoad,a.resources)})}return a.prototype.instance=function(a,b){return this.container.registerInstance(a,b),this},a.prototype.singleton=function(a,b){return this.container.registerSingleton(a,b),this},a.prototype.transient=function(a,b){return this.container.registerTransient(a,b),this},a.prototype.preTask=function(a){return q(this),this.preTasks.push(a),this},a.prototype.postTask=function(a){return q(this),this.postTasks.push(a),this},a.prototype.feature=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=/\/index$/i.test(a),d=c||p(a)?a:a+"/index",e=c?a.substr(0,a.length-6):a;return this.plugin({moduleId:d,resourcesRelativeTo:[e,""],config:b})},a.prototype.globalResources=function(a){q(this);for(var b=Array.isArray(a)?a:arguments,c=void 0,d=this.resourcesRelativeTo||["",""],e=0,f=b.length;e<f;++e){if("string"!=typeof(c=b[e]))throw new Error("Invalid resource path ["+c+"]. Resources must be specified as relative module IDs.");var g=d[0],i=d[1],j=c;(c.startsWith("./")||c.startsWith("../"))&&""!==g&&(j=(0,h.join)(g,c)),this.resourcesToLoad[j]={moduleId:j,relativeTo:i}}return this},a.prototype.globalName=function(a,b){return q(this),this.resourcesToLoad[a]={moduleId:b,relativeTo:""},this},a.prototype.plugin=function(a,b){return q(this),"string"==typeof a?this.plugin({moduleId:a,resourcesRelativeTo:[a,""],config:b||{}}):(this.info.push(a),this)},a.prototype._addNormalizedPlugin=function(a,b){var c=this,d={moduleId:a,resourcesRelativeTo:[a,""],config:b||{}};return this.plugin(d),this.preTask(function(){var b=[a,c.bootstrapperName];return d.moduleId=a,d.resourcesRelativeTo=b,Promise.resolve()}),this},a.prototype.defaultBindingLanguage=function(){return this._addNormalizedPlugin("aurelia-templating-binding")},a.prototype.router=function(){return this._addNormalizedPlugin("aurelia-templating-router")},a.prototype.history=function(){return this._addNormalizedPlugin("aurelia-history-browser")},a.prototype.defaultResources=function(){return this._addNormalizedPlugin("aurelia-templating-resources")},a.prototype.eventAggregator=function(){return this._addNormalizedPlugin("aurelia-event-aggregator")},a.prototype.basicConfiguration=function(){return this.defaultBindingLanguage().defaultResources().eventAggregator()},a.prototype.standardConfiguration=function(){return this.basicConfiguration().history().router()},a.prototype.developmentLogging=function(a){var b=this,c=a?r.logLevel[a]:void 0;return void 0===c&&(c=r.logLevel.debug),this.preTask(function(){return b.aurelia.loader.normalize("aurelia-logging-console",b.bootstrapperName).then(function(a){return b.aurelia.loader.loadModule(a).then(function(a){r.addAppender(new a.ConsoleAppender),r.setLevel(c)})})}),this},a.prototype.apply=function(){var a=this;return this.processed?Promise.resolve():m(this,this.preTasks).then(function(){var b=a.aurelia.loader,c=a.info,d=void 0;return function e(){return(d=c.shift())?n(a,b,d).then(e):(a.processed=!0,Promise.resolve())}().then(function(){return m(a,a.postTasks)})})},a}();a.FrameworkConfiguration=u;a.LogManager=r}.call(b,b,a("aurelia-dependency-injection"),a("aurelia-binding"),a("aurelia-metadata"),a("aurelia-templating"),a("aurelia-loader"),a("aurelia-task-queue"),a("aurelia-path"),a("aurelia-pal"),a("aurelia-logging"))}),System.registerDynamic("npm:aurelia-framework@1.2.0.js",["npm:aurelia-framework@1.2.0/aurelia-framework"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-framework@1.2.0/aurelia-framework"))}),System.registerDynamic("npm:timers@0.1.1/index.js",[],!0,function(a,b,c){function d(a){this.count=0;var b=e(a);b&&(this.time=Number(b[0])*f[b[1]],this.type=b[1])}function e(a){var b=a.match(h);return b&&f[b[2]]?b.slice(1):null}this||self;b.every=function(a){return new d(a)};var f={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5};for(var g in f)"millisecond"===g?f.ms=f[g]:f[g.charAt(0)]=f[g],f[g+"s"]=f[g];d.prototype.do=function(a){function b(){c.count++,a.call(c)}this.time&&(this.interval=setInterval(b,this.time));var c=this;return this},d.prototype.stop=function(){return this.interval&&(clearInterval(this.interval),delete this.interval),this};var h=/^\s*(\d+(?:\.\d+)?)\s*([a-z]+)\s*$/}),System.registerDynamic("npm:timers@0.1.1.js",["npm:timers@0.1.1/index.js"],!0,function(a,b,c){this||self;c.exports=a("npm:timers@0.1.1/index.js")}),System.registerDynamic("npm:aurelia-tinymce-wrapper@1.2.2/tiny-mce.js",["aurelia-framework","./utilities/guid","timers","tinymce/tinymce"],!1,function(a,b,c){return function(a,b,c,d){"use strict";function e(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}Object.defineProperty(a,"__esModule",{value:!0}),a.TinyMce=void 0;var h,i,j,k,l,m,n,o;tinymce;a.TinyMce=(h=(0,b.customElement)("tiny-mce"),i=(0,b.inject)(Element),h(j=i((k=function(){function a(b){f(this,a),e(this,"theme",l,this),e(this,"inline",m,this),e(this,"content",n,this),e(this,"options",o,this),this.editorId="",this.editorInstance=null,this.element=b}return a.prototype.bind=function(){this.setEditorId(),!1!==this.inline&&(this.inline=!0),this.attachCount=0},a.prototype.attached=function(){var a=this;window.setTimeout(function(){var b=document.getElementById(a.editorId);if(!b&&a.attachCount<100)return a.attached(),void(a.attachCount+=1);b.removeAttribute("style"),b.removeAttribute("aria-hidden"),a.options.selector="#"+a.editorId,a.options.theme=a.theme,a.options.inline=a.inline;var c=a.options.init_instance_callback;a.options.init_instance_callback=function(b){b.on("Change KeyUp",function(b){a.content=a.editorInstance.getContent()}),c&&c(b)},tinymce.init(a.options),a.editorInstance=tinymce.editors[a.editorId],a.editorInstance&&a.editorInstance.setContent(a.content)},10)},a.prototype.detached=function(){this.editorInstance&&this.editorInstance.destroy()},a.prototype.setEditorId=function(){var a=c.Guid.newGuid(),b="editor-"+a.toString();this.editorId=b},a.prototype.contentChanged=function(a){a!==this.editorInstance.getContent()&&this.editorInstance.setContent(a)},a.prototype.setContent=function(a){this.editorInstance&&this.editorInstance.setContent(a)},a.prototype.getContent=function(){if(this.editorInstance)return this.editorInstance.getContent()},a}(),l=g(k.prototype,"theme",[b.bindable],{enumerable:!0,initializer:function(){return"modern"}}),m=g(k.prototype,"inline",[b.bindable],{enumerable:!0,initializer:function(){return!1}}),n=g(k.prototype,"content",[b.bindable],{enumerable:!0,initializer:function(){return""}}),o=g(k.prototype,"options",[b.bindable],{enumerable:!0,initializer:function(){return{}}}),j=k))||j)||j)}.call(b,b,a("aurelia-framework"),a("./utilities/guid"),a("timers"),a("tinymce/tinymce"))}),System.registerDynamic("npm:aurelia-tinymce-wrapper@1.2.2/utilities/guid.js",[],!1,function(a,b,c){return function(a){"use strict";function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});a.Guid=function(){function a(){b(this,a),this.internalGuid="",this.setRandomInternalGuid()}return a.prototype.toString=function(){return this.internalGuid},a.newGuid=function(){return new a},a.prototype.setRandomInternalGuid=function(){this.internalGuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})},a}()}.call(b,b,a)}),System.registerDynamic("npm:aurelia-tinymce-wrapper@1.2.2/index.js",["./tiny-mce","./utilities/guid"],!1,function(a,b,c){return function(a,b,c){"use strict";function d(a){a.globalResources("./tiny-mce")}Object.defineProperty(a,"__esModule",{value:!0}),a.configure=d}.call(b,b,a("./tiny-mce"),a("./utilities/guid"))}),System.registerDynamic("npm:aurelia-tinymce-wrapper@1.2.2.js",["npm:aurelia-tinymce-wrapper@1.2.2/index"],!1,function(a,b,c){return function(a){return a}.call(this,a("npm:aurelia-tinymce-wrapper@1.2.2/index"))}),System.registerDynamic("npm:process@0.11.10/browser.js",[],!0,function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=(this||self,c.exports={});!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}),System.registerDynamic("npm:process@0.11.10.js",["npm:process@0.11.10/browser.js"],!0,function(a,b,c){this||self;c.exports=a("npm:process@0.11.10/browser.js")}),System.registerDynamic("github:jspm/nodelibs-process@0.1.2/index.js",["process"],!0,function(a,b,c){this||self;c.exports=System._nodeRequire?process:a("process")}),System.registerDynamic("github:jspm/nodelibs-process@0.1.2.js",["github:jspm/nodelibs-process@0.1.2/index"],!0,function(a,b,c){this||self;c.exports=a("github:jspm/nodelibs-process@0.1.2/index")}),System.registerDynamic("npm:tinymce@4.7.12/tinymce.js",["process"],!0,function(a,b,c){this||self;!function(a){!function(){!function(){"use strict";function a(){function a(c,d){return b.push(c+" ")>ic.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function b(a){return a[zc]=!0,a}function d(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||Ic)-(~a.sourceIndex||Ic);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function e(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function f(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function g(a){return b(function(c){return c=+c,b(function(b,d){for(var e,f=a([],b.length,c),g=f.length;g--;)b[e=f[g]]&&(b[e]=!(d[e]=b[e]))})})}function h(a){return a&&typeof a.getElementsByTagName!==Hc&&a}function i(){}function j(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function k(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Cc++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[Bc,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[zc]||(b[zc]={}),(h=i[d])&&h[0]===Bc&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function l(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function m(a,b,c){for(var d=0,e=b.length;d<e;d++)id(a,b[d],c);return c}function n(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function o(a,c,d,e,f,g){return e&&!e[zc]&&(e=o(e)),f&&!f[zc]&&(f=o(f,g)),b(function(b,g,h,i){var j,k,l,o=[],p=[],q=g.length,r=b||m(c||"*",h.nodeType?[h]:h,[]),s=!a||!b&&c?r:n(r,o,a,h,i),t=d?f||(b?a:q||e)?[]:g:s;if(d&&d(s,t,h,i),e)for(j=n(t,p),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[p[k]]=!(s[p[k]]=l));if(b){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?Pc.call(b,l):o[k])>-1&&(b[j]=!(g[j]=l))}}else t=n(t===g?t.splice(q,t.length):t),f?f(null,g,t,i):Nc.apply(g,t)})}function p(a){for(var b,c,d,e=a.length,f=ic.relative[a[0].type],g=f||ic.relative[" "],h=f?1:0,i=k(function(a){return a===b},g,!0),m=k(function(a){return Pc.call(b,a)>-1},g,!0),n=[function(a,c,d){return!f&&(d||c!==oc)||((b=c).nodeType?i(a,c,d):m(a,c,d))}];h<e;h++)if(c=ic.relative[a[h].type])n=[k(l(n),c)];else{if(c=ic.filter[a[h].type].apply(null,a[h].matches),c[zc]){for(d=++h;d<e&&!ic.relative[a[d].type];d++);return o(h>1&&l(n),h>1&&j(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(Vc,"$1"),c,h<d&&p(a.slice(h,d)),d<e&&p(a=a.slice(d)),d<e&&j(a))}n.push(c)}return l(n)}function q(a,c){var d=c.length>0,e=a.length>0,f=function(b,f,g,h,i){var j,k,l,m=0,o="0",p=b&&[],q=[],r=oc,s=b||e&&ic.find.TAG("*",i),t=Bc+=null==r?1:Math.random()||.1,u=s.length;for(i&&(oc=f!==sc&&f);o!==u&&null!=(j=s[o]);o++){if(e&&j){for(k=0;l=a[k++];)if(l(j,f,g)){h.push(j);break}i&&(Bc=t)}d&&((j=!l&&j)&&m--,b&&p.push(j))}if(m+=o,d&&o!==m){for(k=0;l=c[k++];)l(p,q,f,g);if(b){if(m>0)for(;o--;)p[o]||q[o]||(q[o]=Lc.call(h));q=n(q)}Nc.apply(h,q),i&&!b&&q.length>0&&m+c.length>1&&id.uniqueSort(h)}return i&&(Bc=t,oc=r),p};return d?b(f):f}function r(a,b,c){var d=a.isiOS()&&!0===/ipad/i.test(c),e=a.isiOS()&&!d,f=a.isAndroid()&&3===a.version.major,g=a.isAndroid()&&4===a.version.major,h=d||f||g&&!0===/mobile/i.test(c),i=a.isiOS()||a.isAndroid(),j=i&&!h,k=b.isSafari()&&a.isiOS()&&!1===/safari/i.test(c);return{isiPad:Ea.constant(d),isiPhone:Ea.constant(e),isTablet:Ea.constant(h),isPhone:Ea.constant(j),isTouch:Ea.constant(i),isAndroid:a.isAndroid,isiOS:a.isiOS,isWebView:Ea.constant(k)}}function s(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];if(a.length!==b.length)throw new Error('Wrong number of arguments to struct. Expected "['+a.length+']", got '+b.length+" arguments");var d={};return sb.each(a,function(a,c){d[a]=Ea.constant(b[c])}),d}}function t(a,b){var c=a.concat(b);if(0===c.length)throw new Error("You must specify at least one required or optional field.");return Lg.validateStrArr("required",a),Lg.validateStrArr("optional",b),Lg.checkDupes(c),function(d){var e=Yf.keys(d);sb.forall(a,function(a){return sb.contains(e,a)})||Lg.reqMessage(a,e);var f=sb.filter(e,function(a){return!sb.contains(c,a)});f.length>0&&Lg.unsuppMessage(f);var g={};return sb.each(a,function(a){g[a]=Ea.constant(d[a])}),sb.each(b,function(a){g[a]=Ea.constant(Object.prototype.hasOwnProperty.call(d,a)?La.some(d[a]):La.none())}),g}}function u(a,b){var c,d=0,e={};b=b||{},c=b.maxLoadTime||5e3;var f=function(b){a.getElementsByTagName("head")[0].appendChild(b)},g=function(b,g,h){var i,j,k,l,m=function(){for(var a=l.passed,b=a.length;b--;)a[b]();l.status=2,l.passed=[],l.failed=[]},n=function(){for(var a=l.failed,b=a.length;b--;)a[b]();l.status=3,l.passed=[],l.failed=[]},o=function(){var a=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(a&&parseInt(a[1],10)<536)},p=function(a,b){a()||((new Date).getTime()-k<c?Vb.setTimeout(b):n())},q=function(){p(function(){for(var b,c,d=a.styleSheets,e=d.length;e--;)if(b=d[e],(c=b.ownerNode?b.ownerNode:b.owningElement)&&c.id===i.id)return m(),!0},q)},r=function(){p(function(){try{var a=j.sheet.cssRules;return m(),!!a}catch(a){}},r)};if(b=Gd._addCacheSuffix(b),e[b]?l=e[b]:(l={passed:[],failed:[]},e[b]=l),g&&l.passed.push(g),h&&l.failed.push(h),1!==l.status){if(2===l.status)return void m();if(3===l.status)return void n();if(l.status=1,i=a.createElement("link"),i.rel="stylesheet",i.type="text/css",i.id="u"+d++,i.async=!1,i.defer=!1,k=(new Date).getTime(),"onload"in i&&!o())i.onload=q,i.onerror=n;else{if(navigator.userAgent.indexOf("Firefox")>0)return j=a.createElement("style"),j.textContent='@import "'+b+'"',r(),void f(j);q()}f(i),i.href=b}},h=function(a){return Oh.nu(function(b){g(a,Ea.compose(b,Ea.constant(Xh.value(a))),Ea.compose(b,Ea.constant(Xh.error(a))))})},i=function(a){return a.fold(Ea.identity,Ea.identity)};return{load:g,loadAll:function(a,b,c){Uh.par(sb.map(a,h)).get(function(a){var d=sb.partition(a,function(a){return a.isValue()});d.fail.length>0?c(d.fail.map(i)):b(d.pass.map(i))})}}}function v(a,b){var c=a,d=function(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!==b){if(f=a[d])return f;for(g=a.parentNode;g&&g!==b;g=g.parentNode)if(f=g[d])return f}}},e=function(a,c,d,e){var f,g,h;if(a){if(f=a[d],b&&f===b)return;if(f){if(!e)for(h=f[c];h;h=h[c])if(!h[c])return h;return f}if((g=a.parentNode)&&g!==b)return g}};this.current=function(){return c},this.next=function(a){return c=d(c,"firstChild","nextSibling",a)},this.prev=function(a){return c=d(c,"lastChild","previousSibling",a)},this.prev2=function(a){return c=e(c,"lastChild","previousSibling",a)}}function w(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o={},p={},q=[],r={},s={},t=function(b,c,d){var e=a[b];return e?e=aj(e,/[, ]/,aj(e.toUpperCase(),/[, ]/)):(e=$i[b])||(e=aj(c," ",aj(c.toUpperCase()," ")),e=cj(e,d),$i[b]=e),e};a=a||{},d=gj(a.schema),!1===a.verify_html&&(a.valid_elements="*[*]"),b=hj(a.valid_styles),c=hj(a.invalid_styles,"map"),i=hj(a.valid_classes,"map"),e=t("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=t("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),g=t("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=t("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),k=t("non_empty_elements","td th iframe video audio object script pre code",g),l=t("move_caret_before_on_enter_elements","table",k),m=t("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),j=t("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",m),n=t("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),bj((a.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(a){s[a]=new RegExp("</"+a+"[^>]*>","gi")});var u=function(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")},v=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,p,r,s,t,v,w,x=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,y=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,z=/[*?+]/;if(a)for(a=fj(a,","),o["@"]&&(s=o["@"].attributes,t=o["@"].attributesOrder),b=0,c=a.length;b<c;b++)if(f=x.exec(a[b])){if(p=f[1],j=f[2],r=f[3],i=f[5],m={},n=[],g={attributes:m,attributesOrder:n},"#"===p&&(g.paddEmpty=!0),"-"===p&&(g.removeEmpty=!0),"!"===f[4]&&(g.removeEmptyAttrs=!0),s){for(v in s)m[v]=s[v];n.push.apply(n,t)}if(i)for(i=fj(i,"|"),d=0,e=i.length;d<e;d++)if(f=y.exec(i[d])){if(h={},l=f[1],k=f[2].replace(/[\\:]:/g,":"),p=f[3],w=f[4],"!"===l&&(g.attributesRequired=g.attributesRequired||[],g.attributesRequired.push(k),h.required=!0),"-"===l){delete m[k],n.splice(ej(n,k),1);continue}p&&("="===p&&(g.attributesDefault=g.attributesDefault||[],g.attributesDefault.push({name:k,value:w}),h.defaultValue=w),":"===p&&(g.attributesForced=g.attributesForced||[],g.attributesForced.push({name:k,value:w}),h.forcedValue=w),"<"===p&&(h.validValues=aj(w,"?"))),z.test(k)?(g.attributePatterns=g.attributePatterns||[],h.pattern=u(k),g.attributePatterns.push(h)):(m[k]||n.push(k),m[k]=h)}s||"@"!==j||(s=m,t=n),r&&(g.outputName=j,o[r]=g),z.test(j)?(g.pattern=u(j),q.push(g)):o[j]=g}},w=function(a){o={},q=[],v(a),bj(d,function(a,b){p[b]=a.children})},x=function(a){var b=/^(~)?(.+)$/;a&&($i.text_block_elements=$i.block_elements=null,bj(fj(a,","),function(a){var c=b.exec(a),d="~"===c[1],e=d?"span":"div",f=c[2];if(p[f]=p[e],r[f]=e,d||(j[f.toUpperCase()]={},j[f]={}),!o[f]){var g=o[e];g=cj({},g),delete g.removeEmptyAttrs,delete g.removeEmpty,o[f]=g}bj(p,function(a,b){a[e]&&(p[b]=a=cj({},p[b]),a[f]=a[e])})}))},y=function(b){var c=/^([+\-]?)(\w+)\[([^\]]+)\]$/;$i[a.schema]=null,b&&bj(fj(b,","),function(a){var b,d,e=c.exec(a);e&&(d=e[1],b=d?p[e[2]]:p[e[2]]={"#comment":{}},b=p[e[2]],bj(fj(e[3],"|"),function(a){"-"===d?delete b[a]:b[a]={}}))})},z=function(a){var b,c=o[a];if(c)return c;for(b=q.length;b--;)if(c=q[b],c.pattern.test(a))return c};a.valid_elements?w(a.valid_elements):(bj(d,function(a,b){o[b]={attributes:a.attributes,attributesOrder:a.attributesOrder},p[b]=a.children}),"html5"!==a.schema&&bj(fj("strong/b em/i"),function(a){a=fj(a,"/"),o[a[1]].outputName=a[0]}),bj(fj("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(a){o[a]&&(o[a].removeEmpty=!0)}),bj(fj("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(a){o[a].paddEmpty=!0}),bj(fj("span"),function(a){o[a].removeEmptyAttrs=!0})),x(a.custom_elements),y(a.valid_children),v(a.extended_valid_elements),y("+ol[ul|ol],+ul[ul|ol]"),bj({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(a,b){o[b]&&(o[b].parentsRequired=fj(a))}),a.invalid_elements&&bj(dj(a.invalid_elements),function(a){o[a]&&delete o[a]}),z("span")||v("span[!data-mce-type|*]");var A=function(){return b},B=function(){return c},C=function(){return i},D=function(){return h},E=function(){return j},F=function(){return m},G=function(){return n};return{children:p,elements:o,getValidStyles:A,getValidClasses:C,getBlockElements:E,getInvalidStyles:B,getShortEndedElements:function(){return g},getTextBlockElements:F,getTextInlineElements:G,getBoolAttrs:D,getElementRule:z,getSelfClosingElements:function(){return f},getNonEmptyElements:function(){return k},getMoveCaretBeforeOnEnterElements:function(){return l},getWhiteSpaceElements:function(){return e},getSpecialElements:function(){return s},isValidChild:function(a,b){var c=p[a.toLowerCase()];return!(!c||!c[b.toLowerCase()])},isValid:function(a,b){var c,d,e=z(a);if(e){if(!b)return!0;if(e.attributes[b])return!0;if(c=e.attributePatterns)for(d=c.length;d--;)if(c[d].pattern.test(a))return!0}return!1},getCustomElements:function(){return r},addValidElements:v,setValidElements:w,addCustomElements:x,addValidChildren:y}}function x(a,b){var c,d,e,f,g=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,h=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,j=/\s+$/,k={},l="\ufeff";for(a=a||{},b&&(e=b.getValidStyles(),f=b.getInvalidStyles()),d=("\\\" \\' \\; \\: ; : "+l).split(" "),c=0;c<d.length;c++)k[d[c]]=l+c,k[l+c]=d[c];return{toHex:function(a){return a.replace(g,ij)},parse:function(b){var d,e,f,m,n={},o=a.url_converter,p=a.url_converter_scope||this,q=function(a,b,d){var e,f,g,h;if((e=n[a+"-top"+b])&&(f=n[a+"-right"+b])&&(g=n[a+"-bottom"+b])&&(h=n[a+"-left"+b])){var i=[e,f,g,h];for(c=i.length-1;c--&&i[c]===i[c+1];);c>-1&&d||(n[a+b]=-1===c?i[0]:i.join(" "),delete n[a+"-top"+b],delete n[a+"-right"+b],delete n[a+"-bottom"+b],delete n[a+"-left"+b])}},r=function(a){var b,c=n[a];if(c){for(c=c.split(" "),b=c.length;b--;)if(c[b]!==c[0])return!1;return n[a]=c[0],!0}},s=function(a,b,c,d){r(b)&&r(c)&&r(d)&&(n[a]=n[b]+" "+n[c]+" "+n[d],delete n[b],delete n[c],delete n[d])},t=function(a){return m=!0,k[a]},u=function(a,b){return m&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return k[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a},v=function(a){return String.fromCharCode(parseInt(a.slice(1),16))},w=function(a){return a.replace(/\\[0-9a-f]+/gi,v)},x=function(b,c,d,e,f,g){if(f=f||g)return f=u(f),"'"+f.replace(/\'/g,"\\'")+"'";if(c=u(c||d||e),!a.allow_script_urls){var h=c.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(h))return"";if(!a.allow_svg_data_urls&&/^data:image\/svg/i.test(h))return""}return o&&(c=o.call(p,c,"style")),"url('"+c.replace(/\'/g,"\\'")+"')"};if(b){for(b=b.replace(/[\u0000-\u001F]/g,""),b=b.replace(/\\[\"\';:\uFEFF]/g,t).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,t)});d=i.exec(b);)if(i.lastIndex=d.index+d[0].length,e=d[1].replace(j,"").toLowerCase(),f=d[2].replace(j,""),e&&f){if(e=w(e),f=w(f),-1!==e.indexOf(l)||-1!==e.indexOf('"'))continue;if(!a.allow_script_urls&&("behavior"===e||/expression\s*\(|\/\*|\*\//.test(f)))continue;"font-weight"===e&&"700"===f?f="bold":"color"!==e&&"background-color"!==e||(f=f.toLowerCase()),f=f.replace(g,ij),f=f.replace(h,x),n[e]=m?u(f,!0):f}q("border","",!0),q("border","-width"),q("border","-color"),q("border","-style"),q("padding",""),q("margin",""),s("border","border-width","border-style","border-color"),"medium none"===n.border&&delete n.border,"none"===n["border-image"]&&delete n["border-image"]}return n},serialize:function(a,b){var c,d,g="",h=function(b){var c,d,f,h;if(c=e[b])for(d=0,f=c.length;d<f;d++)b=c[d],(h=a[b])&&(g+=(g.length>0?" ":"")+b+": "+h+";")},i=function(a,b){var c;return(!(c=f["*"])||!c[a])&&(!(c=f[b])||!c[a])};if(b&&e)h("*"),h(b);else for(c in a)!(d=a[c])||f&&!i(c,b)||(g+=(g.length>0?" ":"")+c+": "+d+";");return g}}}function y(a,b){var c=this;void 0===b&&(b={});var d,e={},f=window,g={},h=0,i=!0,j=!0,k=u(a),l=[],m=b.schema?b.schema:w({}),n=x({url_converter:b.url_converter,url_converter_scope:b.url_converter_scope},b.schema),o=b.ownEvents?new fc(b.proxy):fc.Event,p=m.getBlockElements(),q=$d.overrideDefaults(function(){return{context:a,element:Fa.getRoot()}}),r=function(a){if("string"==typeof a)return!!p[a];if(a){var b=a.nodeType;if(b)return!(1!==b||!p[a.nodeName])}return!1},s=function(b){if(b&&a&&"string"==typeof b){var c=a.getElementById(b);return c&&c.id!==b?a.getElementsByName(b)[1]:c}return b},t=function(a){return"string"==typeof a&&(a=s(a)),q(a)},z=function(a,b,c){var e,f,g=t(a);return g.length&&(e=d[b],f=e&&e.get?e.get(g,b):g.attr(b)),void 0===f&&(f=c||""),f},A=function(a){var b=s(a);return b?b.attributes:[]},B=function(a,c,e){var f,g;""===e&&(e=null);var h=t(a);f=h.attr(c),h.length&&(g=d[c],g&&g.set?g.set(h,e,c):h.attr(c,e),f!==e&&b.onSetAttrib&&b.onSetAttrib({attrElm:h,attrName:c,attrValue:e}))},C=function(b,c){if(!lj||1!==b.nodeType||c)return b.cloneNode(c);if(!c){var d=a.createElement(b.nodeName);return jj(A(b),function(a){B(d,a.nodeName,z(b,a.nodeName))}),d}return null},D=function(){return b.root_element||a.body},E=function(a){var b=a||f,c=b.document,d=j?c.documentElement:c.body;return{x:b.pageXOffset||d.scrollLeft,y:b.pageYOffset||d.scrollTop,w:b.innerWidth||d.clientWidth,h:b.innerHeight||d.clientHeight}},F=function(b,c){return Gh.getPos(a.body,s(b),c)},G=function(a,c,d){var e=t(a).css(c,d);b.update_styles&&pj(n,e)},H=function(a,c){var d=t(a).css(c);b.update_styles&&pj(n,d)},I=function(a,b,c){var d=t(a);return c?d.css(b):(b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),"float"===b&&(b=Mb.ie&&Mb.ie<12?"styleFloat":"cssFloat"),d[0]&&d[0].style?d[0].style[b]:void 0)},J=function(a){var b,c;return a=s(a),b=I(a,"width"),c=I(a,"height"),-1===b.indexOf("px")&&(b=0),-1===c.indexOf("px")&&(c=0),{w:parseInt(b,10)||a.offsetWidth||a.clientWidth,h:parseInt(c,10)||a.offsetHeight||a.clientHeight}},K=function(a){var b,c;return a=s(a),b=F(a),c=J(a),{x:b.x,y:b.y,w:c.w,h:c.h}},L=function(a,b){var c;if(!a)return!1;if(!Array.isArray(a)){if("*"===b)return 1===a.nodeType;if(mj.test(b)){var d=b.toLowerCase().split(/,/),e=a.nodeName.toLowerCase();for(c=d.length-1;c>=0;c--)if(d[c]===e)return!0;return!1}if(a.nodeType&&1!==a.nodeType)return!1}var f=Array.isArray(a)?a:[a];return id(b,f[0].ownerDocument||f[0],null,f).length>0},M=function(a,b,c,d){var e,f=[],g=s(a);for(d=void 0===d,c=c||("BODY"!==D().nodeName?D().parentNode:null),Gd.is(b,"string")&&(e=b,b="*"===b?function(a){return 1===a.nodeType}:function(a){return L(a,e)});g&&g!==c&&g.nodeType&&9!==g.nodeType;){if(!b||"function"==typeof b&&b(g)){if(!d)return[g];f.push(g)}g=g.parentNode}return d?f:null},N=function(a,b,c){var d=M(a,b,c,!1);return d&&d.length>0?d[0]:null},O=function(a,b,c){var d=b;if(a)for("string"==typeof b&&(d=function(a){return L(a,b)}),a=a[c];a;a=a[c])if("function"==typeof d&&d(a))return a;return null},P=function(a,b){return O(a,b,"nextSibling")},Q=function(a,b){return O(a,b,"previousSibling")},R=function(c,d){return id(c,s(d)||b.root_element||a,[])},S=function(a,b,d){var e,f="string"==typeof a?s(a):a;if(!f)return!1;if(Gd.isArray(f)&&(f.length||0===f.length))return e=[],jj(f,function(a,c){a&&("string"==typeof a&&(a=s(a)),e.push(b.call(d,a,c)))}),e;var g=d||c;return b.call(g,f)},T=function(a,b){t(a).each(function(a,c){jj(b,function(a,b){B(c,b,a)})})},U=function(a,b){var c=t(a);lj?c.each(function(a,c){if(!1!==c.canHaveHTML){for(;c.firstChild;)c.removeChild(c.firstChild);try{c.innerHTML="<br>"+b,c.removeChild(c.firstChild)}catch(a){$d("<div></div>").html("<br>"+b).contents().slice(1).appendTo(c)}return b}}):c.html(b)},V=function(b,c,d,e,f){return S(b,function(b){var g="string"==typeof c?a.createElement(c):c;return T(g,d),e&&("string"!=typeof e&&e.nodeType?g.appendChild(e):"string"==typeof e&&U(g,e)),f?g:b.appendChild(g)})},W=function(b,c,d){return V(a.createElement(b),b,c,d,!0)},X=Zi.decode,Y=Zi.encodeAllRaw,Z=function(a,b,c){var d,e="";e+="<"+a;for(d in b)b.hasOwnProperty(d)&&null!==b[d]&&void 0!==b[d]&&(e+=" "+d+'="'+Y(b[d])+'"');return void 0!==c?e+">"+c+"</"+a+">":e+" />"},$=function(b){var c,d=a.createElement("div"),e=a.createDocumentFragment();for(b&&(d.innerHTML=b);c=d.firstChild;)e.appendChild(c);return e},_=function(a,b){var c=t(a);return b?c.each(function(){for(var a;a=this.firstChild;)3===a.nodeType&&0===a.data.length?this.removeChild(a):this.parentNode.insertBefore(a,this)}).remove():c.remove(),c.length>1?c.toArray():c[0]},aa=function(a){return S(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},ba=function(a){return n.parse(a)},ca=function(a,b){return n.serialize(a,b)},da=function(b){var c,d;if(Fa!==y.DOM&&a===document){if(e[b])return;e[b]=!0}d=a.getElementById("mceDefaultStyles"),d||(d=a.createElement("style"),d.id="mceDefaultStyles",d.type="text/css",c=a.getElementsByTagName("head")[0],c.firstChild?c.insertBefore(d,c.firstChild):c.appendChild(d)),d.styleSheet?d.styleSheet.cssText+=b:d.appendChild(a.createTextNode(b))},ea=function(b){var c;if(Fa!==y.DOM&&a===document)return void y.DOM.loadCSS(b);b||(b=""),c=a.getElementsByTagName("head")[0],jj(b.split(","),function(a){var b;a=Gd._addCacheSuffix(a),g[a]||(g[a]=!0,b=W("link",{rel:"stylesheet",href:a}),c.appendChild(b))})},fa=function(a,b,c){t(a).toggleClass(b,c).each(function(){""===this.className&&$d(this).attr("class",null)})},ga=function(a,b){t(a).addClass(b)},ha=function(a,b){fa(a,b,!1)},ia=function(a,b){return t(a).hasClass(b)},ja=function(a){t(a).show()},ka=function(a){t(a).hide()},la=function(a){return"none"===t(a).css("display")},ma=function(a){return(a||"mce_")+h++},na=function(a){var b="string"==typeof a?s(a):a;return Gi.isElement(b)?b.outerHTML:$d("<div></div>").append($d(b).clone()).html()},oa=function(a,b){t(a).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=b)}catch(a){}_($d(this).html(b),!0)})},pa=function(a,b){var c=s(b);return S(a,function(a){var b,d;return b=c.parentNode,d=c.nextSibling,d?b.insertBefore(a,d):b.appendChild(a),a})},qa=function(a,b,c){return S(b,function(b){return Gd.is(b,"array")&&(a=a.cloneNode(!0)),c&&jj(kj(b.childNodes),function(b){a.appendChild(b)}),b.parentNode.replaceChild(a,b)})},ra=function(a,b){var c;return a.nodeName!==b.toUpperCase()&&(c=W(b),jj(A(a),function(b){B(c,b.nodeName,z(a,b.nodeName))}),qa(c,a,!0)),c||a},sa=function(a,b){for(var c,d=a;d;){for(c=b;c&&d!==c;)c=c.parentNode;if(d===c)break;d=d.parentNode}return!d&&a.ownerDocument?a.ownerDocument.documentElement:d},ta=function(a){return n.toHex(Gd.trim(a))},ua=function(a,b){var c,d,e,f,g,h,i=0;if(a=a.firstChild){g=new v(a,a.parentNode),b=b||(m?m.getNonEmptyElements():null),f=m?m.getWhiteSpaceElements():{};do{if(e=a.nodeType,Gi.isElement(a)){var j=a.getAttribute("data-mce-bogus");if(j){a=g.next("all"===j);continue}if(h=a.nodeName.toLowerCase(),b&&b[h]){if("br"===h){i++,a=g.next();continue}return!1}for(d=A(a),c=d.length;c--;)if("name"===(h=d[c].nodeName)||"data-mce-bookmark"===h)return!1}if(8===e)return!1;if(3===e&&!nj.test(a.nodeValue))return!1;if(3===e&&a.parentNode&&f[a.parentNode.nodeName]&&nj.test(a.nodeValue))return!1;a=g.next()}while(a)}return i<=1},va=function(){return a.createRange()},wa=function(a,b,c){var d,e,f,g=va();if(a&&b)return g.setStart(a.parentNode,qj(a)),g.setEnd(b.parentNode,qj(b)),d=g.extractContents(),g=va(),g.setStart(b.parentNode,qj(b)+1),g.setEnd(a.parentNode,qj(a)+1),e=g.extractContents(),f=a.parentNode,f.insertBefore(Ki.trimNode(Fa,d),a),c?f.insertBefore(c,a):f.insertBefore(b,a),f.insertBefore(Ki.trimNode(Fa,e),a),_(a),c||b},xa=function(c,d,e,g){if(Gd.isArray(c)){for(var h=c.length;h--;)c[h]=xa(c[h],d,e,g);return c}return!b.collect||c!==a&&c!==f||l.push([c,d,e,g]),o.bind(c,d,e,g||Fa)},ya=function(b,c,d){var e;if(Gd.isArray(b)){for(e=b.length;e--;)b[e]=ya(b[e],c,d);return b}if(l&&(b===a||b===f))for(e=l.length;e--;){var g=l[e];b!==g[0]||c&&c!==g[1]||d&&d!==g[2]||o.unbind(g[0],g[1],g[2])}return o.unbind(b,c,d)},za=function(a,b,c){return o.fire(a,b,c)},Aa=function(a){if(a&&Gi.isElement(a)){var b=a.getAttribute("data-mce-contenteditable");return b&&"inherit"!==b?b:"inherit"!==a.contentEditable?a.contentEditable:null}return null},Ba=function(a){for(var b=D(),c=null;a&&a!==b&&null===(c=Aa(a));a=a.parentNode);return c},Ca=function(){if(l)for(var a=l.length;a--;){var b=l[a];o.unbind(b[0],b[1],b[2])}id.setDocument&&id.setDocument()},Da=function(a,b){for(;a;){if(b===a)return!0;a=a.parentNode}return!1},Ea=function(a){return"startContainer: "+a.startContainer.nodeName+", startOffset: "+a.startOffset+", endContainer: "+a.endContainer.nodeName+", endOffset: "+a.endOffset},Fa={doc:a,settings:b,win:f,files:g,stdMode:i,boxModel:j,styleSheetLoader:k,boundEvents:l,styles:n,schema:m,events:o,isBlock:r,$:q,$$:t,root:null,clone:C,getRoot:D,getViewPort:E,getRect:K,getSize:J,getParent:N,getParents:M,get:s,getNext:P,getPrev:Q,select:R,is:L,add:V,create:W,createHTML:Z,createFragment:$,remove:_,setStyle:G,getStyle:I,setStyles:H,removeAllAttribs:aa,setAttrib:B,setAttribs:T,getAttrib:z,getPos:F,parseStyle:ba,serializeStyle:ca,addStyle:da,loadCSS:ea,addClass:ga,removeClass:ha,hasClass:ia,toggleClass:fa,show:ja,hide:ka,isHidden:la,uniqueId:ma,setHTML:U,getOuterHTML:na,setOuterHTML:oa,decode:X,encode:Y,insertAfter:pa,replace:qa,rename:ra,findCommonAncestor:sa,toHex:ta,run:S,getAttribs:A,isEmpty:ua,createRng:va,nodeIndex:qj,split:wa,bind:xa,unbind:ya,fire:za,getContentEditable:Aa,getContentEditableParent:Ba,destroy:Ca,isChildOf:Da,dumpRng:Ea};return d=oj(n,b,function(){return Fa}),Fa}function z(){var a=this,b=[],c={},d={},e=[],f=function(a){if(d[a])return d[a].instance},g=function(a){var b;return d[a]&&(b=d[a].dependencies),b||[]},h=function(a,b){var d=z.language;if(d&&!1!==z.languageLoad){if(b)if(b=","+b+",",-1!==b.indexOf(","+d.substr(0,2)+","))d=d.substr(0,2);else if(-1===b.indexOf(","+d+","))return;wj.ScriptLoader.add(c[a]+"/langs/"+d+".js")}},i=function(a,c,f){b.push(c),d[a]={instance:c,dependencies:f};var g=sb.partition(e,function(b){return b.name===a});return e=g.fail,xj(g.pass,function(a){a.callback()}),c},j=function(a){delete c[a],delete d[a]},k=function(a,b){return"object"==typeof b?b:"string"==typeof a?{prefix:"",resource:b,suffix:""}:{prefix:a.prefix,resource:b,suffix:a.suffix}},l=function(b,c){var d=a.urls[b];xj(c,function(a){wj.ScriptLoader.add(d+"/"+a)})},m=function(a,b,c){var d=g(name);xj(d,function(b){var c=k(a,b);n(c.resource,c,void 0,void 0)}),b&&(c?b.call(c):b.call(wj))},n=function(a,b,e,f,g){if(!c[a]){var h="string"==typeof b?b:b.prefix+b.resource+b.suffix;0!==h.indexOf("/")&&-1===h.indexOf("://")&&(h=z.baseURL+"/"+h),c[a]=h.substring(0,h.lastIndexOf("/")),d[a]?m(b,e,f):wj.ScriptLoader.add(h,function(){return m(b,e,f)},f,g)}};return{items:b,urls:c,lookup:d,_listeners:e,get:f,dependencies:g,requireLangPack:h,add:i,remove:j,createUrl:k,addComponents:l,load:n,waitFor:function(a,b){d.hasOwnProperty(a)?b():e.push({name:a,callback:b})}}}function A(a,b,c){var d=function(){return Nk(a),0===b},e=function(){return Nk(a)?b>=a.data.length:b>=a.childNodes.length},f=function(){var c;return c=Rk(a.ownerDocument),c.setStart(a,b),c.setEnd(a,b),c},g=function(){return c||(c=$k(A(a,b))),c},h=function(){return g().length>0},i=function(c){return c&&a===c.container()&&b===c.offset()},j=function(c){return Qk(a,c?b-1:b)};return{container:Ck.constant(a),offset:Ck.constant(b),toRange:f,getClientRects:g,isVisible:h,isAtStart:d,isAtEnd:e,isEqual:i,getNode:j}}function B(a,b){var c=function(c){if(!a(c))throw new Error("Can only get "+b+" value of a "+b+" node");return g(c).getOr("")},d=function(a){try{return e(a)}catch(a){return La.none()}},e=function(b){return a(b)?La.from(b.dom().nodeValue):La.none()},f=yf.detect().browser,g=f.isIE()&&10===f.version.major?d:e;return{get:c,getOption:g,set:function(c,d){if(!a(c))throw new Error("Can only set raw "+b+" value of a "+b+" node");c.dom().nodeValue=d}}}function C(a){var b,c,d,e,f,g=[];return a=a||{},b=a.indent,c=bq(a.indent_before||""),d=bq(a.indent_after||""),e=Zi.getEncodeFunc(a.entity_encoding||"raw",a.entities),f="html"===a.element_format,{start:function(a,h,i){var j,k,l,m;if(b&&c[a]&&g.length>0&&(m=g[g.length-1],m.length>0&&"\n"!==m&&g.push("\n")),g.push("<",a),h)for(j=0,k=h.length;j<k;j++)l=h[j],g.push(" ",l.name,'="',e(l.value,!0),'"');g[g.length]=!i||f?">":" />",i&&b&&d[a]&&g.length>0&&(m=g[g.length-1],m.length>0&&"\n"!==m&&g.push("\n"))},end:function(a){var c;g.push("</",a,">"),b&&d[a]&&g.length>0&&(c=g[g.length-1],c.length>0&&"\n"!==c&&g.push("\n"))},text:function(a,b){a.length>0&&(g[g.length]=b?a:e(a))},cdata:function(a){g.push("<![CDATA[",a,"]]>")},comment:function(a){g.push("\x3c!--",a,"--\x3e")},pi:function(a,c){c?g.push("<?",a," ",e(c),"?>"):g.push("<?",a,"?>"),b&&g.push("\n")},doctype:function(a){g.push("<!DOCTYPE",a,">",b?"\n":"")},reset:function(){g.length=0},getContent:function(){return g.join("").replace(/\n$/,"")}}}function D(a,b){void 0===b&&(b=w());var c=C(a);return a=a||{},a.validate=!("validate"in a)||a.validate,{serialize:function(d){var e,f;f=a.validate,e={3:function(a){c.text(a.value,a.raw)},8:function(a){c.comment(a.value)},7:function(a){c.pi(a.name,a.value)},10:function(a){c.doctype(a.value)},4:function(a){c.cdata(a.value)},11:function(a){if(a=a.firstChild)do{g(a)}while(a=a.next)}},c.reset();var g=function(a){var d,h,i,j,k,l,m,n,o,p=e[a.type];if(p)p(a);else{if(d=a.name,h=a.shortEnded,i=a.attributes,f&&i&&i.length>1&&(l=[],l.map={},o=b.getElementRule(a.name))){for(m=0,n=o.attributesOrder.length;m<n;m++)(j=o.attributesOrder[m])in i.map&&(k=i.map[j],l.map[j]=k,l.push({name:j,value:k}));for(m=0,n=i.length;m<n;m++)(j=i[m].name)in l.map||(k=i.map[j],l.map[j]=k,l.push({name:j,value:k}));i=l}if(c.start(a.name,i,h),!h){if(a=a.firstChild)do{g(a)}while(a=a.next);c.end(d)}}};return 1!==d.type||a.inner?e[11](d):g(d),c.getContent()}}}function E(a,b,c,d,e){return a(c,d)?La.some(c):Oa.isFunction(e)&&e(c)?La.none():b(c,d,e)}function F(a){var b,c,d,e,f={state:{},exec:{},value:{}},g=a.settings;a.on("PreInit",function(){b=a.dom,c=a.selection,g=a.settings,d=a.formatter});var h=function(b,c,d,e){var g,h,i=!1;if(!a.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(b)||e&&e.skip_focus?uw.restore(a):a.focus(),e=a.fire("BeforeExecCommand",{command:b,ui:c,value:d}),e.isDefaultPrevented())return!1;if(h=b.toLowerCase(),g=f.exec[h])return g(h,c,d),a.fire("ExecCommand",{command:b,ui:c,value:d}),!0;if(xw(a.plugins,function(e){if(e.execCommand&&e.execCommand(b,c,d))return a.fire("ExecCommand",{command:b,ui:c,value:d}),i=!0,!1}),i)return i;if(a.theme&&a.theme.execCommand&&a.theme.execCommand(b,c,d))return a.fire("ExecCommand",{command:b,ui:c,value:d}),!0;try{i=a.getDoc().execCommand(b,c,d)}catch(a){}return!!i&&(a.fire("ExecCommand",{command:b,ui:c,value:d}),!0)}},i=function(b){var c;if(!a.quirks.isHidden()&&!a.removed){if(b=b.toLowerCase(),c=f.state[b])return c(b);try{return a.getDoc().queryCommandState(b)}catch(a){}return!1}},j=function(b){var c;if(!a.quirks.isHidden()&&!a.removed){if(b=b.toLowerCase(),c=f.value[b])return c(b);try{return a.getDoc().queryCommandValue(b)}catch(a){}}},k=function(a,b){b=b||"exec",xw(a,function(a,c){xw(c.toLowerCase().split(","),function(c){f[b][c]=a})})},l=function(b,c,d){b=b.toLowerCase(),f.exec[b]=function(b,e,f,g){return c.call(d||a,e,f,g)}},m=function(b){if(b=b.toLowerCase(),f.exec[b])return!0;try{return a.getDoc().queryCommandSupported(b)}catch(a){}return!1},n=function(b,c,d){b=b.toLowerCase(),f.state[b]=function(){return c.call(d||a)}},o=function(b,c,d){b=b.toLowerCase(),f.value[b]=function(){return c.call(d||a)}};yw(this,{execCommand:h,queryCommandState:i,queryCommandValue:j,queryCommandSupported:m,addCommands:k,addCommand:l,addQueryStateHandler:n,addQueryValueHandler:o,hasCustomCommand:function(a){return a=a.toLowerCase(),!!f.exec[a]}});var p=function(b,c,d){return void 0===c&&(c=!1),void 0===d&&(d=null),a.getDoc().execCommand(b,c,d)},q=function(a){return d.match(a)},r=function(b,c){d.toggle(b,c?{value:c}:void 0),a.nodeChanged()},s=function(a){e=c.getBookmark(a)},t=function(){c.moveToBookmark(e)};k({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){a.undoManager.add()},"Cut,Copy,Paste":function(b){var c,d=a.getDoc();try{p(b)}catch(a){c=!0}if("paste"!==b||d.queryCommandEnabled(b)||(c=!0),c||!d.queryCommandSupported(b)){var e=a.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");Mb.mac&&(e=e.replace(/Ctrl\+/g,"+")),a.notificationManager.open({text:e,type:"error"})}},unlink:function(){if(c.isCollapsed()){var b=a.dom.getParent(a.selection.getStart(),"a");return void(b&&a.dom.remove(b,!0))}d.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(a){var b=a.substring(7);"full"===b&&(b="justify"),xw("left,center,right,justify".split(","),function(a){b!==a&&d.remove("align"+a)}),"none"!==b&&r("align"+b)},"InsertUnorderedList,InsertOrderedList":function(a){var d,e;p(a),(d=b.getParent(c.getNode(),"ol,ul"))&&(e=d.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(e.nodeName)&&(s(),b.split(e,d),t()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){r(a)},"ForeColor,HiliteColor":function(a,b,c){r(a,c)},FontName:function(b,c,d){qv(a,d)},FontSize:function(b,c,d){sv(a,d)},RemoveFormat:function(a){d.remove(a)},mceBlockQuote:function(){r("blockquote")},FormatBlock:function(a,b,c){return r(c||"p")},mceCleanup:function(){var b=c.getBookmark();a.setContent(a.getContent()),c.moveToBookmark(b)},mceRemoveNode:function(b,d,e){var f=e||c.getNode();f!==a.getBody()&&(s(),a.dom.remove(f,!0),t())},mceSelectNodeDepth:function(d,e,f){var g=0;b.getParent(c.getNode(),function(a){if(1===a.nodeType&&g++===f)return c.select(a),!1},a.getBody())},mceSelectNode:function(a,b,d){c.select(d)},mceInsertContent:function(b,c,d){mq.insertAtCaret(a,d)},mceInsertRawHTML:function(b,d,e){var f=a.getContent();c.setContent("tiny_mce_marker"),a.setContent(f.replace(/tiny_mce_marker/g,function(){return e}))},mceToggleFormat:function(a,b,c){r(c)},mceSetContent:function(b,c,d){a.setContent(d)},"Indent,Outdent":function(b){ww(a,b)},mceRepaint:function(){},InsertHorizontalRule:function(){a.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){a.hasVisual=!a.hasVisual,a.addVisual()},mceReplaceContent:function(b,d,e){a.execCommand("mceInsertContent",!1,e.replace(/\{\$selection\}/g,c.getContent({format:"text"})))},mceInsertLink:function(a,e,f){var g;"string"==typeof f&&(f={href:f}),g=b.getParent(c.getNode(),"a"),f.href=f.href.replace(" ","%20"),g&&f.href||d.remove("link"),f.href&&d.apply("link",f,g)},selectAll:function(){var a=b.getParent(c.getStart(),Gi.isContentEditableTrue);if(a){var d=b.createRng();d.selectNodeContents(a),c.setRng(d)}},delete:function(){ev.deleteCommand(a)},forwardDelete:function(){ev.forwardDeleteCommand(a)},mceNewDocument:function(){a.setContent("")},InsertLineBreak:function(b,c,d){return Wv.insert(a,d),!0}}),k({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var e="align"+a.substring(7),f=c.isCollapsed()?[b.getParent(c.getNode(),b.isBlock)]:c.getSelectedBlocks(),g=zw(f,function(a){return!!d.matchNode(a,e)});return-1!==Aw(g,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return q(a)},mceBlockQuote:function(){return q("blockquote")},Outdent:function(){var a;if(g.inline_styles){if((a=b.getParent(c.getStart(),b.isBlock))&&parseInt(a.style.paddingLeft,10)>0)return!0;if((a=b.getParent(c.getEnd(),b.isBlock))&&parseInt(a.style.paddingLeft,10)>0)return!0}return i("InsertUnorderedList")||i("InsertOrderedList")||!g.inline_styles&&!!b.getParent(c.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){var d=b.getParent(c.getNode(),"ul,ol");return d&&("insertunorderedlist"===a&&"UL"===d.tagName||"insertorderedlist"===a&&"OL"===d.tagName)}},"state"),k({Undo:function(){a.undoManager.undo()},Redo:function(){a.undoManager.redo()}}),o("FontName",function(){return rv(a)},this),o("FontSize",function(){return tv(a)},this)}function G(a,b,c){var d=c||!1,e=function(){b(),d=!0},f=function(){a(),d=!1};return{on:e,off:f,toggle:function(){(d?f:e)()},isOn:function(){return d}}}function H(a){var b=this,c={},d=[],e=function(a){var b,c,d={};qx(rx(a,"+"),function(a){a in tx?d[a]=!0:/^[0-9]{2,}$/.test(a)?d.keyCode=parseInt(a,10):(d.charCode=a.charCodeAt(0),d.keyCode=sx[a]||a.toUpperCase().charCodeAt(0))}),b=[d.keyCode];for(c in tx)d[c]?b.push(c):d[c]=!1;return d.id=b.join(","),d.access&&(d.alt=!0,Mb.mac?d.ctrl=!0:d.shift=!0),d.meta&&(Mb.mac?d.meta=!0:(d.ctrl=!0,d.meta=!1)),d},f=function(b,c,d,f){var g;return g=Gd.map(rx(b,">"),e),g[g.length-1]=Gd.extend(g[g.length-1],{func:d,scope:f||a}),Gd.extend(g[0],{desc:a.translate(c),subpatterns:g.slice(1)})},g=function(a){return a.altKey||a.ctrlKey||a.metaKey},h=function(a){return"keydown"===a.type&&a.keyCode>=112&&a.keyCode<=123},i=function(a,b){return!!b&&(b.ctrl===a.ctrlKey&&b.meta===a.metaKey&&(b.alt===a.altKey&&b.shift===a.shiftKey&&(!!(a.keyCode===b.keyCode||a.charCode&&a.charCode===b.charCode)&&(a.preventDefault(),!0))))},j=function(a){return a.func?a.func.call(a.scope):null};a.on("keyup keypress keydown",function(a){!g(a)&&!h(a)||a.isDefaultPrevented()||(qx(c,function(b){if(i(a,b))return d=b.subpatterns.slice(0),"keydown"===a.type&&j(b),!0}),i(a,d[0])&&(1===d.length&&"keydown"===a.type&&j(d[0]),d.shift()))}),b.add=function(b,d,e,g){var h;return h=e,"string"==typeof e?e=function(){a.execCommand(h,!1,null)}:Gd.isArray(h)&&(e=function(){a.execCommand(h[0],h[1],h[2])}),qx(rx(Gd.trim(b.toLowerCase())),function(a){var b=f(a,d,e,g);c[b.id]=b}),!0},b.remove=function(a){var b=f(a);return!!c[b.id]&&(delete c[b.id],!0)}}function I(){var a=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:a,close:a,reposition:a,getArgs:a}}function J(a){var b=[],c=function(){var b=a.theme;return b&&b.getNotificationManagerImpl?b.getNotificationManagerImpl():I()},d=function(){return La.from(b[0])},e=function(a,b){return!(a.type!==b.type||a.text!==b.text||a.progressBar||a.timeout||b.progressBar||b.timeout)},f=function(){b.length>0&&c().reposition(b)},g=function(a){b.push(a)},h=function(a){sb.findIndex(b,function(b){return b===a}).each(function(a){b.splice(a,1)})},i=function(d){if(!a.removed&&fy.isEditorAttachedToDom(a))return sb.find(b,function(a){return e(c().getArgs(a),d)}).getOrThunk(function(){a.editorManager.setActive(a);var b=c().open(d,function(){h(b),f()});return g(b),f(),b})},j=function(){d().each(function(a){c().close(a),h(a),f()})},k=function(){return b};return function(a){a.on("SkinLoaded",function(){var b=a.settings.service_message;b&&i({text:b,type:"warning",timeout:0,icon:""})}),a.on("ResizeEditor ResizeWindow",function(){Vb.requestAnimationFrame(f)}),a.on("remove",function(){sb.each(b,function(a){c().close(a)})})}(a),{open:i,close:j,getNotifications:k}}function K(){var a=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:a,alert:a,confirm:a,close:a,getParams:a,setParams:a}}function L(a){var b=[],c=function(){var b=a.theme;return b&&b.getWindowManagerImpl?b.getWindowManagerImpl():K()},d=function(a,b){return function(){return b?b.apply(a,arguments):void 0}},e=function(b){a.fire("OpenWindow",{win:b})},f=function(b){a.fire("CloseWindow",{win:b})},g=function(a){b.push(a),e(a)},h=function(c){sb.findIndex(b,function(a){return a===c}).each(function(d){b.splice(d,1),f(c),0===b.length&&a.focus()})},i=function(){return La.from(b[b.length-1])},j=function(b,d){a.editorManager.setActive(a),uw.store(a);var e=c().open(b,d,h);return g(e),e},k=function(a,b,e){var f=c().alert(a,d(e||this,b),h);g(f)},l=function(a,b,e){var f=c().confirm(a,d(e||this,b),h);g(f)},m=function(){i().each(function(a){c().close(a),h(a)})},n=function(){return i().map(c().getParams).getOr(null)},o=function(a){i().each(function(b){c().setParams(b,a)})},p=function(){return b};return a.on("remove",function(){sb.each(b.slice(0),function(a){c().close(a)})}),{windows:b,open:j,alert:k,confirm:l,close:m,getParams:n,setParams:o,getWindows:p}}function M(){return new(Cb.getOrDie("XMLHttpRequest"))}function N(a,b){var c={},d=function(a,b){return a?a.replace(/\/$/,"")+"/"+b.replace(/^\//,""):b},e=function(a,c,e,f){var g,h;g=new M,g.open("POST",b.url),g.withCredentials=b.credentials,g.upload.onprogress=function(a){f(a.loaded/a.total*100)},g.onerror=function(){e("Image upload failed due to a XHR Transport error. Code: "+g.status)},g.onload=function(){var a;return g.status<200||g.status>=300?void e("HTTP Error: "+g.status):(a=JSON.parse(g.responseText))&&"string"==typeof a.location?void c(d(b.basePath,a.location)):void e("Invalid JSON: "+g.responseText)},h=new FormData,h.append("file",a.blob(),a.filename()),g.send(h)},f=function(){return new Ob(function(a){a([])})},g=function(a,b){return{url:b,blobInfo:a,status:!0}},h=function(a,b){return{url:"",blobInfo:a,status:!1,error:b}},i=function(a,b){Gd.each(c[a],function(a){a(b)}),delete c[a]},j=function(b,c,d){return a.markPending(b.blobUri()),new Ob(function(e){var f,j,k=function(){};try{var l=function(){f&&(f.close(),j=k)},m=function(c){l(),a.markUploaded(b.blobUri(),c),i(b.blobUri(),g(b,c)),e(g(b,c))},n=function(c){l(),a.removeFailed(b.blobUri()),i(b.blobUri(),h(b,c)),e(h(b,c))};j=function(a){a<0||a>100||(f||(f=d()),f.progressBar.value(a))},c(b,m,n,j)}catch(a){e(h(b,a.message))}})},k=function(a){return a===e},l=function(a){var b=a.blobUri();return new Ob(function(a){c[b]=c[b]||[],c[b].push(a)})},m=function(c,d){return c=Gd.grep(c,function(b){return!a.isUploaded(b.blobUri())}),Ob.all(Gd.map(c,function(c){return a.isPending(c.blobUri())?l(c):j(c,b.handler,d)}))},n=function(a,c){return!b.url&&k(b.handler)?f():m(a,c)};return b=Gd.extend({credentials:!1,handler:e},b),{upload:n}}function O(a,b){return new(Cb.getOrDie("Blob"))(a,b)}function P(){return new(Cb.getOrDie("FileReader"))}function Q(a){return new(Cb.getOrDie("Uint8Array"))(a)}function R(a,b){var c={};return{findAll:function(d,e){var f;e||(e=Ck.constant(!0)),f=td.filter(Dy(d),function(b){var c=b.src;return!!Mb.fileApi&&(!b.hasAttribute("data-mce-bogus")&&(!b.hasAttribute("data-mce-placeholder")&&(!(!c||c===Mb.transparentSrc)&&(0===c.indexOf("blob:")?!a.isUploaded(c):0===c.indexOf("data:")&&e(b)))))});var g=td.map(f,function(a){if(c[a.src])return new Ob(function(b){c[a.src].then(function(c){if("string"==typeof c)return c;b({image:a,blobInfo:c.blobInfo})})});var d=new Ob(function(c,d){Cy(b,a,c,d)}).then(function(a){return delete c[a.image.src],a}).catch(function(b){return delete c[a.src],b});return c[a.src]=d,d});return Ob.all(g)}}}function S(){var a=[],b=Ck.constant,c=function(a){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[a.toLowerCase()]||"dat"},d=function(a,b,c,d){return e("object"==typeof a?a:{id:a,name:d,blob:b,base64:c})},e=function(a){var d,e;if(!a.blob||!a.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return d=a.id||Hy.uuid("blobid"),e=a.name||d,{id:b(d),name:b(e),filename:b(e+"."+c(a.blob.type)),blob:b(a.blob),base64:b(a.base64),blobUri:b(a.blobUri||Gb.createObjectURL(a.blob)),uri:b(a.uri)}},f=function(b){g(b.id())||a.push(b)},g=function(a){return h(function(b){return b.id()===a})},h=function(b){return td.filter(a,b)[0]};return{create:d,add:f,get:g,getByUri:function(a){return h(function(b){return b.blobUri()===a})},findFirst:h,removeByUri:function(b){a=td.filter(a,function(a){return a.blobUri()!==b||(Gb.revokeObjectURL(a.blobUri()),!1)})},destroy:function(){td.each(a,function(a){Gb.revokeObjectURL(a.blobUri())}),a=[]}}}function T(){var a=1,b=2,c={},d=function(a,b){return{status:a,resultUri:b}},e=function(a){return a in c};return{hasBlobUri:e,getResultUri:function(a){var b=c[a];return b?b.resultUri:null},isPending:function(b){return!!e(b)&&c[b].status===a},isUploaded:function(a){return!!e(a)&&c[a].status===b},markPending:function(b){c[b]=d(a,null)},markUploaded:function(a,e){c[a]=d(b,e)},removeFailed:function(a){delete c[a]},destroy:function(){c={}}}}function U(a){var b,c,d=S(),e=a.settings,f=T(),g=function(b){return function(c){return a.selection?b(c):[]}},h=function(){return"?"+(new Date).getTime()},i=function(a,b,c){var d=0;do{-1!==(d=a.indexOf(b,d))&&(a=a.substring(0,d)+c+a.substr(d+b.length),d+=c.length-b.length+1)}while(-1!==d);return a},j=function(a,b,c){return a=i(a,'src="'+b+'"','src="'+c+'"'),a=i(a,'data-mce-src="'+b+'"','data-mce-src="'+c+'"')},k=function(b,c){td.each(a.undoManager.data,function(a){"fragmented"===a.type?a.fragments=td.map(a.fragments,function(a){return j(a,b,c)}):a.content=j(a.content,b,c)})},l=function(){return a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},m=function(b,c){d.removeByUri(b.src),k(b.src,c),a.$(b).attr({src:e.images_reuse_filename?c+h():c,"data-mce-src":a.convertURL(c,"src")})},n=function(c){return b||(b=N(f,{url:e.images_upload_url,basePath:e.images_upload_base_path,credentials:e.images_upload_credentials,handler:e.images_upload_handler})),q().then(g(function(d){var e;return e=td.map(d,function(a){return a.blobInfo}),b.upload(e,l).then(g(function(b){var e=td.map(b,function(b,c){var e=d[c].image;return b.status&&!1!==a.settings.images_replace_blob_uris?m(e,b.url):b.error&&oy.uploadError(a,b.error),{element:e,status:b.status}});return c&&c(e),e}))}))},o=function(a){if(!1!==e.automatic_uploads)return n(a)},p=function(a){return!e.images_dataimg_filter||e.images_dataimg_filter(a)},q=function(){return c||(c=R(f,d)),c.findAll(a.getBody(),p).then(g(function(b){return b=td.filter(b,function(b){return"string"!=typeof b||(oy.displayError(a,b),!1)}),td.each(b,function(a){k(a.image.src,a.blobInfo.blobUri()),a.image.src=a.blobInfo.blobUri(),a.image.removeAttribute("data-mce-src")}),b}))},r=function(){d.destroy(),f.destroy(),c=b=null},s=function(b){return b.replace(/src="(blob:[^"]+)"/g,function(b,c){var e=f.getResultUri(c);if(e)return'src="'+e+'"';var g=d.getByUri(c);return g||(g=td.reduce(a.editorManager.get(),function(a,b){return a||b.editorUpload&&b.editorUpload.blobCache.getByUri(c)},null)),g?'src="data:'+g.blob().type+";base64,"+g.base64()+'"':b})};return a.on("setContent",function(){!1!==a.settings.automatic_uploads?o():q()}),a.on("RawSaveContent",function(a){a.content=s(a.content)}),a.on("getContent",function(a){a.source_view||"raw"===a.format||(a.content=s(a.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(a){td.each(a,function(a){var b=a.attr("src");if(!d.getByUri(b)){var c=f.getResultUri(b);c&&a.attr("src",c)}})})}),{blobCache:d,uploadImages:n,uploadImagesAuto:o,scanForImages:q,destroy:r}}function V(a){var b,c=[],d=function(b){var d,e;if(e=a.$(b).parentsUntil(a.getBody()).add(b),e.length===c.length){for(d=e.length;d>=0&&e[d]===c[d];d--);if(-1===d)return c=e,!0}return c=e,!1};"onselectionchange"in a.getDoc()||a.on("NodeChange Click MouseUp KeyUp Focus",function(c){var d,e;d=a.selection.getRng(),e={startContainer:d.startContainer,startOffset:d.startOffset,endContainer:d.endContainer,endOffset:d.endOffset},"nodechange"!==c.type&&vv.isEq(e,b)||a.fire("SelectionChange"),b=e}),a.on("contextmenu",function(){a.fire("SelectionChange")}),a.on("SelectionChange",function(){var b=a.selection.getStart(!0);!b||!Mb.range&&a.selection.isCollapsed()||!d(b)&&a.dom.isChildOf(b,a.getBody())&&a.nodeChanged({selectionChange:!0})}),a.on("MouseUp",function(b){b.isDefaultPrevented()||("IMG"===a.selection.getNode().nodeName?Vb.setEditorTimeout(a,function(){a.nodeChanged()}):a.nodeChanged())}),this.nodeChanged=function(b){var c,d,e,f=a.selection;a.initialized&&f&&!a.settings.disable_nodechange&&!a.readonly&&(e=a.getBody(),c=f.getStart(!0)||e,c.ownerDocument===a.getDoc()&&a.dom.isChildOf(c,e)||(c=e),d=[],a.dom.getParent(c,function(a){if(a===e)return!0;d.push(a)}),b=b||{},b.element=c,b.parents=d,a.fire("NodeChange",b))}}function W(a,b){void 0===b&&(b=w());var c=function(){};a=a||{},!1!==a.fix_self_closing&&(a.fix_self_closing=!0);var d=a.comment?a.comment:c,e=a.cdata?a.cdata:c,f=a.text?a.text:c,g=a.start?a.start:c,h=a.end?a.end:c,i=a.pi?a.pi:c,j=a.doctype?a.doctype:c;return{parse:function(c){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=0,P=[],Q=0,R=Zi.decode,S=Gd.makeMap("src,href,data,background,formaction,poster,xlink:href"),T=/((java|vb)script|mhtml):/i,U=function(a){var b,c;for(b=P.length;b--&&P[b].name!==a;);if(b>=0){for(c=P.length-1;c>=b;c--)a=P[c],a.valid&&h(a.name);P.length=b}},V=function(b,c,d,e,f){var g,h,i=/[\s\u0000-\u001F]+/g;if(c=c.toLowerCase(),d=c in u?c:R(d||e||f||""),w&&!r&&!1===aA(c)){if(!(g=B[c])&&C){for(h=C.length;h--&&(g=C[h],!g.pattern.test(c)););-1===h&&(g=null)}if(!g)return;if(g.validValues&&!(d in g.validValues))return}if(S[c]&&!a.allow_script_urls){var j=d.replace(i,"");try{j=decodeURIComponent(j)}catch(a){j=unescape(j)}if(T.test(j))return;if(cA(a,j))return}r&&(c in S||0===c.indexOf("on"))||(n.map[c]=d,n.push({name:c,value:d}))};for(J=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),K=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,t=b.getShortEndedElements(),I=a.self_closing_elements||b.getSelfClosingElements(),u=b.getBoolAttrs(),w=a.validate,s=a.remove_internals,N=a.fix_self_closing,L=b.getSpecialElements(),G=c+">";k=J.exec(G);){if(O<k.index&&f(R(c.substr(O,k.index-O))),l=k[6])l=l.toLowerCase(),":"===l.charAt(0)&&(l=l.substr(1)),U(l);else if(l=k[7]){if(k.index+k[0].length>c.length){f(R(c.substr(k.index))),O=k.index+k[0].length;continue}if(l=l.toLowerCase(),":"===l.charAt(0)&&(l=l.substr(1)),v=l in t,N&&I[l]&&P.length>0&&P[P.length-1].name===l&&U(l),!w||(x=b.getElementRule(l))){if(y=!0,w&&(B=x.attributes,C=x.attributePatterns),(A=k[8])?(r=-1!==A.indexOf("data-mce-type"),r&&s&&(y=!1),n=[],n.map={},A.replace(K,V)):(n=[],n.map={}),w&&!r){if(D=x.attributesRequired,E=x.attributesDefault,F=x.attributesForced,H=x.removeEmptyAttrs,H&&!n.length&&(y=!1),F)for(o=F.length;o--;)z=F[o],q=z.name,M=z.value,"{$uid}"===M&&(M="mce_"+Q++),n.map[q]=M,n.push({name:q,value:M});if(E)for(o=E.length;o--;)z=E[o],(q=z.name)in n.map||(M=z.value,"{$uid}"===M&&(M="mce_"+Q++),n.map[q]=M,n.push({name:q,value:M}));if(D){for(o=D.length;o--&&!(D[o]in n.map););-1===o&&(y=!1)}if(z=n.map["data-mce-bogus"]){if("all"===z){O=dA(b,c,J.lastIndex),J.lastIndex=O;continue}y=!1}}y&&g(l,n,v)}else y=!1;if(m=L[l]){m.lastIndex=O=k.index+k[0].length,(k=m.exec(c))?(y&&(p=c.substr(O,k.index-O)),O=k.index+k[0].length):(p=c.substr(O),O=c.length),y&&(p.length>0&&f(p,!0),h(l)),J.lastIndex=O;continue}v||(A&&A.indexOf("/")===A.length-1?y&&h(l):P.push({name:l,valid:y}))}else(l=k[1])?(">"===l.charAt(0)&&(l=" "+l),a.allow_conditional_comments||"[if"!==l.substr(0,3).toLowerCase()||(l=" "+l),d(l)):(l=k[2])?e(bA(l)):(l=k[3])?j(l):(l=k[4])&&i(l,k[5]);O=k.index+k[0].length}for(O<c.length&&f(R(c.substr(O))),o=P.length-1;o>=0;o--)l=P[o],l.valid&&h(l.name)}}}function X(a){var b,c,d=this,e=0,f=[],g=0,h=function(){return 0===g},i=function(a){h()&&(d.typing=a)},j=function(b){a.setDirty(b)},k=function(a){i(!1),d.add({},a)},l=function(){d.typing&&(i(!1),d.add())};a.on("init",function(){d.add()}),a.on("BeforeExecCommand",function(a){var b=a.command;"Undo"!==b&&"Redo"!==b&&"mceRepaint"!==b&&(l(),d.beforeChange())}),a.on("ExecCommand",function(a){var b=a.command;"Undo"!==b&&"Redo"!==b&&"mceRepaint"!==b&&k(a)}),a.on("ObjectResizeStart Cut",function(){d.beforeChange()}),a.on("SaveContent ObjectResized blur",k),a.on("DragEnd",k),a.on("KeyUp",function(b){var e=b.keyCode;b.isDefaultPrevented()||((e>=33&&e<=36||e>=37&&e<=40||45===e||b.ctrlKey)&&(k(),a.nodeChanged()),46!==e&&8!==e||a.nodeChanged(),c&&d.typing&&!1===RA.isEq(RA.createFromEditor(a),f[0])&&(!1===a.isDirty()&&(j(!0),a.fire("change",{level:f[0],lastLevel:null})),a.fire("TypingUndo"),c=!1,a.nodeChanged()))}),a.on("KeyDown",function(a){var b=a.keyCode;if(!a.isDefaultPrevented()){if(b>=33&&b<=36||b>=37&&b<=40||45===b)return void(d.typing&&k(a));var e=a.ctrlKey&&!a.altKey||a.metaKey;!(b<16||b>20)||224===b||91===b||d.typing||e||(d.beforeChange(),i(!0),d.add({},a),c=!0)}}),a.on("MouseDown",function(a){d.typing&&k(a)});var m=function(a){return"insertReplacementText"===a.inputType},n=function(a){return"insertText"===a.inputType&&null===a.data};return a.on("input",function(a){a.inputType&&(m(a)||n(a))&&k(a)}),a.addShortcut("meta+z","","Undo"),a.addShortcut("meta+y,meta+shift+z","","Redo"),a.on("AddUndo Undo Redo ClearUndos",function(b){b.isDefaultPrevented()||a.nodeChanged()}),d={data:f,typing:!1,beforeChange:function(){h()&&(b=ep.getUndoBookmark(a.selection))},add:function(c,d){var g,i,k,l=a.settings;if(k=RA.createFromEditor(a),c=c||{},c=Gd.extend(c,k),!1===h()||a.removed)return null;if(i=f[e],a.fire("BeforeAddUndo",{level:c,lastLevel:i,originalEvent:d}).isDefaultPrevented())return null;if(i&&RA.isEq(i,c))return null;if(f[e]&&(f[e].beforeBookmark=b),l.custom_undo_redo_levels&&f.length>l.custom_undo_redo_levels){for(g=0;g<f.length-1;g++)f[g]=f[g+1];f.length--,e=f.length}c.bookmark=ep.getUndoBookmark(a.selection),e<f.length-1&&(f.length=e+1),f.push(c),e=f.length-1;var m={level:c,lastLevel:i,originalEvent:d};return a.fire("AddUndo",m),e>0&&(j(!0),a.fire("change",m)),c},undo:function(){var b;return d.typing&&(d.add(),d.typing=!1,i(!1)),e>0&&(b=f[--e],RA.applyToEditor(a,b,!0),j(!0),a.fire("undo",{level:b})),b},redo:function(){var b;return e<f.length-1&&(b=f[++e],RA.applyToEditor(a,b,!1),j(!0),a.fire("redo",{level:b})),b},clear:function(){f=[],e=0,d.typing=!1,d.data=f,a.fire("ClearUndos")},hasUndo:function(){return e>0||d.typing&&f[0]&&!RA.isEq(RA.createFromEditor(a),f[0])},hasRedo:function(){return e<f.length-1&&!d.typing},transact:function(a){return l(),d.beforeChange(),d.ignore(a),d.add()},ignore:function(a){try{g++,a()}finally{g--}},extra:function(b,c){var g,h;d.transact(b)&&(h=f[e].bookmark,g=f[e-1],RA.applyToEditor(a,g,!0),d.transact(c)&&(f[e-1].beforeBookmark=h))}}}function Y(a){var b={},c=function(a){return a?b[a]:b},d=function(a,c){a&&("string"!=typeof a?Gd.each(a,function(a,b){d(b,a)}):(c=c.length?c:[c],Gd.each(c,function(a){void 0===a.deep&&(a.deep=!a.selector),void 0===a.split&&(a.split=!a.selector||a.inline),void 0===a.remove&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),"string"==typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),b[a]=c))},e=function(a){return a&&b[a]&&delete b[a],b};return d(WC.get(a.dom)),d(a.settings.formats),{get:c,register:d,unregister:e}}function Z(a){var b=Y(a),c=ln(null);return gD.setup(a),VB(a),{get:b.get,register:b.register,unregister:b.unregister,apply:Ea.curry(PC.applyFormat,a),remove:Ea.curry(uC.remove,a),toggle:Ea.curry(eD.toggle,a,b),match:Ea.curry(BB.match,a),matchAll:Ea.curry(BB.matchAll,a),matchNode:Ea.curry(BB.matchNode,a),canApply:Ea.curry(BB.canApply,a),formatChanged:Ea.curry(UC.formatChanged,a,c),getCssText:Ea.curry(cD.getCssText,a)}}function $(a,b){void 0===b&&(b=w());var c={},d=[],e={},f={};a=a||{},a.validate=!("validate"in a)||a.validate,a.root_name=a.root_name||"body";var g=function(a){var c,d,e,f,g,i,j,k,l,m,n,o,p,q,r,s;for(o=LD("tr,td,th,tbody,thead,tfoot,table"),m=b.getNonEmptyElements(),n=b.getWhiteSpaceElements(),p=b.getTextBlockElements(),q=b.getSpecialElements(),c=0;c<a.length;c++)if(d=a[c],d.parent&&!d.fixed)if(p[d.name]&&"li"===d.parent.name){for(r=d.next;r&&p[r.name];)r.name="li",r.fixed=!0,d.parent.insert(r,d.parent),r=r.next;d.unwrap(d)}else{for(f=[d],e=d.parent;e&&!b.isValidChild(e.name,d.name)&&!o[e.name];e=e.parent)f.push(e);if(e&&f.length>1){for(f.reverse(),g=i=h(f[0].clone()),l=0;l<f.length-1;l++){for(b.isValidChild(i.name,f[l].name)?(j=h(f[l].clone()),i.append(j)):j=i,k=f[l].firstChild;k&&k!==f[l+1];)s=k.next,j.append(k),k=s;i=j}ID(b,m,n,g)?e.insert(d,f[0],!0):(e.insert(g,f[0],!0),e.insert(d,g)),e=f[0],(ID(b,m,n,e)||GD(e,"br"))&&e.empty().remove()}else if(d.parent){if("li"===d.name){if((r=d.prev)&&("ul"===r.name||"ul"===r.name)){r.append(d);continue}if((r=d.next)&&("ul"===r.name||"ul"===r.name)){r.insert(d,r.firstChild,!0);continue}d.wrap(h(new DD("ul",1)));continue}b.isValidChild(d.parent.name,"div")&&b.isValidChild("div",d.name)?d.wrap(h(new DD("div",1))):q[d.name]?d.empty().remove():d.unwrap()}}},h=function(a){var b,g,h;g in c&&(h=e[g],h?h.push(a):e[g]=[a]),b=d.length;for(;b--;)(g=d[b].name)in a.attributes.map&&(h=f[g],h?h.push(a):f[g]=[a]);return a},i=function(a,b){MD(ND(a),function(a){var d=c[a];d||(c[a]=d=[]),d.push(b)})},j=function(){var a=[];for(var b in c)c.hasOwnProperty(b)&&a.push({name:b,callbacks:c[b]});return a},k=function(a,b){MD(ND(a),function(a){var c;for(c=0;c<d.length;c++)if(d[c].name===a)return void d[c].callbacks.push(b);d.push({name:a,callbacks:[b]})})},l=function(){return[].concat(d)},m=function(h,i){var j,k,l,m,n,o,p,q,r,s,t,u=[];i=i||{},e={},f={},r=OD(LD("script,style,head,html,body,title,meta,param"),b.getBlockElements());var v=b.getNonEmptyElements(),w=b.children,x=a.validate,y="forced_root_block"in i?i.forced_root_block:a.forced_root_block,z=b.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,B=/[ \t\r\n]+$/,C=/[ \t\r\n]+/g,D=/^[ \t\r\n]+$/,E=function(){var c,d,e=I.firstChild,f=function(a){a&&(e=a.firstChild,e&&3===e.type&&(e.value=e.value.replace(A,"")),(e=a.lastChild)&&3===e.type&&(e.value=e.value.replace(B,"")))};if(b.isValidChild(I.name,y.toLowerCase())){for(;e;)c=e.next,3===e.type||1===e.type&&"p"!==e.name&&!r[e.name]&&!e.attr("data-mce-type")?d?d.append(e):(d=F(y,1),d.attr(a.forced_root_block_attrs),I.insert(d,e),d.append(e)):(f(d),d=null),e=c;f(d)}},F=function(a,b){var d,f=new DD(a,b);return a in c&&(d=e[a],d?d.push(f):e[a]=[f]),f},G=function(a){var c,d,e,f,g=b.getBlockElements();for(c=a.prev;c&&3===c.type;){if(e=c.value.replace(B,""),e.length>0)return void(c.value=e);if(d=c.next){if(3===d.type&&d.value.length){c=c.prev;continue}if(!g[d.name]&&"script"!==d.name&&"style"!==d.name){c=c.prev;continue}}f=c.prev,c.remove(),c=f}},H=function(a){var b,c={};for(b in a)"li"!==b&&"p"!==b&&(c[b]=a[b]);return c};j=eA({validate:x,allow_script_urls:a.allow_script_urls,allow_conditional_comments:a.allow_conditional_comments,self_closing_elements:H(b.getSelfClosingElements()),cdata:function(a){t.append(F("#cdata",4)).value=a},text:function(a,b){var c;s||(a=a.replace(C," "),JD(t.lastChild,r)&&(a=a.replace(A,""))),0!==a.length&&(c=F("#text",3),c.raw=!!b,t.append(c).value=a)},comment:function(a){t.append(F("#comment",8)).value=a},pi:function(a,b){t.append(F(a,7)).value=b,G(t)},doctype:function(a){var b;b=t.append(F("#doctype",10)),b.value=a,G(t)},start:function(a,c,e){var g,h,i,j,k;if(i=x?b.getElementRule(a):{}){for(g=F(i.outputName||a,1),g.attributes=c,g.shortEnded=e,t.append(g),k=w[t.name],k&&w[g.name]&&!k[g.name]&&u.push(g),h=d.length;h--;)(j=d[h].name)in c.map&&(p=f[j],p?p.push(g):f[j]=[g]);r[a]&&G(g),e||(t=g),!s&&z[a]&&(s=!0)}},end:function(c){var d,e,f,g,h;if(e=x?b.getElementRule(c):{}){if(r[c]&&!s){if((d=t.firstChild)&&3===d.type)if(f=d.value.replace(A,""),f.length>0)d.value=f,d=d.next;else for(g=d.next,d.remove(),d=g;d&&3===d.type;)f=d.value,g=d.next,(0===f.length||D.test(f))&&(d.remove(),d=g),d=g;if((d=t.lastChild)&&3===d.type)if(f=d.value.replace(B,""),f.length>0)d.value=f,d=d.prev;else for(g=d.prev,d.remove(),d=g;d&&3===d.type;)f=d.value,g=d.prev,(0===f.length||D.test(f))&&(d.remove(),d=g),d=g}if(s&&z[c]&&(s=!1),e.removeEmpty&&ID(b,v,z,t)&&!t.attributes.map.name&&!t.attr("id"))return h=t.parent,r[t.name]?t.empty().remove():t.unwrap(),void(t=h);e.paddEmpty&&(FD(t)||ID(b,v,z,t))&&ED(a,i,r,t),t=t.parent}}},b);var I=t=new DD(i.context||a.root_name,11);if(j.parse(h),x&&u.length&&(i.context?i.invalid=!0:g(u)),y&&("body"===I.name||i.isRootContent)&&E(),!i.invalid){for(q in e){for(p=c[q],k=e[q],n=k.length;n--;)k[n].parent||k.splice(n,1);for(l=0,m=p.length;l<m;l++)p[l](k,q,i)}for(l=0,m=d.length;l<m;l++)if(p=d[l],p.name in f){for(k=f[p.name],n=k.length;n--;)k[n].parent||k.splice(n,1);for(n=0,o=p.callbacks.length;n<o;n++)p.callbacks[n](k,p.name,i)}}return I},n={schema:b,addAttributeFilter:k,getAttributeFilters:l,addNodeFilter:i,getNodeFilters:j,filterNode:h,parse:m};return KD(n,a),zD.register(n,a),n}function _(a,b){var c,d,e,f=["data-mce-selected"];c=b&&b.dom?b.dom:rj.DOM,d=b&&b.schema?b.schema:w(a),a.entity_encoding=a.entity_encoding||"named",a.remove_trailing_brs=!("remove_trailing_brs"in a)||a.remove_trailing_brs,e=$(a,d),pD.register(e,a,c);var g=function(f,g){var h=mD.merge({format:"html"},g||{}),i=tD.process(b,f,h),j=RD(c,i,h),k=SD(e,c,j,h);return"tree"===h.format?k:UD(b,a,d,k,h)};return{schema:d,addNodeFilter:e.addNodeFilter,addAttributeFilter:e.addAttributeFilter,serialize:g,addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)},addTempAttr:Ea.curry(PD,e,f),getTempAttrs:function(){return f}}}function aa(a,b){var c=_(a,b);return{schema:c.schema,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,serialize:c.serialize,addRules:c.addRules,setRules:c.setRules,addTempAttr:c.addTempAttr,getTempAttrs:c.getTempAttrs}}function ba(a){return{getBookmark:Ea.curry(Fp.getBookmark,a),moveToBookmark:Ea.curry(Fp.moveToBookmark,a)}}function ca(a){var b=Gd.each,c=Vz.BACKSPACE,d=Vz.DELETE,e=a.dom,f=a.selection,g=a.settings,h=a.parser,i=Mb.gecko,j=Mb.ie,k=Mb.webkit,l="data:text/mce-internal,",m=j?"Text":"URL",n=function(b,c){try{a.getDoc().execCommand(b,!1,c)}catch(a){}},o=function(a){return a.isDefaultPrevented()},p=function(b){var c,d;b.dataTransfer&&(a.selection.isCollapsed()&&"IMG"===b.target.tagName&&f.select(b.target),c=a.selection.getContent(),c.length>0&&(d=l+escape(a.id)+","+escape(c),b.dataTransfer.setData(m,d)))},q=function(a){var b;return a.dataTransfer&&(b=a.dataTransfer.getData(m))&&b.indexOf(l)>=0?(b=b.substr(l.length).split(","),{id:unescape(b[0]),html:unescape(b[1])}):null},r=function(b,c){a.queryCommandSupported("mceInsertClipboardContent")?a.execCommand("mceInsertClipboardContent",!1,{content:b,internal:c}):a.execCommand("mceInsertContent",!1,b)},s=function(){var b=function(a){var b=e.create("body"),c=a.cloneContents();return b.appendChild(c),f.serializer.serialize(b,{format:"html"})},g=function(c){var d=b(c),f=e.createRng();return f.selectNode(a.getBody()),d===b(f)};a.on("keydown",function(b){var f,h,i=b.keyCode;if(!o(b)&&(i===d||i===c)){if(f=a.selection.isCollapsed(),h=a.getBody(),f&&!e.isEmpty(h))return;if(!f&&!g(a.selection.getRng()))return;b.preventDefault(),a.setContent(""),h.firstChild&&e.isBlock(h.firstChild)?a.selection.setCursorLocation(h.firstChild,0):a.selection.setCursorLocation(h,0),a.nodeChanged()}})},t=function(){a.shortcuts.add("meta+a",null,"SelectAll")},u=function(){a.settings.content_editable||e.bind(a.getDoc(),"mousedown mouseup",function(b){var c;if(b.target===a.getDoc().documentElement)if(c=f.getRng(),a.getBody().focus(),"mousedown"===b.type){if(Gj(c.startContainer))return;f.placeCaretAt(b.clientX,b.clientY)}else f.setRng(c)})},v=function(){a.on("keydown",function(b){if(!o(b)&&b.keyCode===c){if(!a.getBody().getElementsByTagName("hr").length)return;if(f.isCollapsed()&&0===f.getRng().startOffset){var d=f.getNode(),g=d.previousSibling;if("HR"===d.nodeName)return e.remove(d),void b.preventDefault();g&&g.nodeName&&"hr"===g.nodeName.toLowerCase()&&(e.remove(g),b.preventDefault())}}})},w=function(){Range.prototype.getClientRects||a.on("mousedown",function(b){if(!o(b)&&"HTML"===b.target.nodeName){var c=a.getBody();c.blur(),Vb.setEditorTimeout(a,function(){c.focus()})}})},x=function(){a.on("click",function(b){var c=b.target;/^(IMG|HR)$/.test(c.nodeName)&&"false"!==e.getContentEditableParent(c)&&(b.preventDefault(),a.selection.select(c),a.nodeChanged()),"A"===c.nodeName&&e.hasClass(c,"mce-item-anchor")&&(b.preventDefault(),f.select(c))})},y=function(){var c=function(){var c=e.getAttribs(f.getStart().cloneNode(!1));return function(){var d=f.getStart();d!==a.getBody()&&(e.setAttrib(d,"style",null),b(c,function(a){d.setAttributeNode(a.cloneNode(!0))}))}},d=function(){return!f.isCollapsed()&&e.getParent(f.getStart(),e.isBlock)!==e.getParent(f.getEnd(),e.isBlock)};a.on("keypress",function(b){var e;if(!o(b)&&(8===b.keyCode||46===b.keyCode)&&d())return e=c(),a.getDoc().execCommand("delete",!1,null),e(),b.preventDefault(),!1}),e.bind(a.getDoc(),"cut",function(b){var e;!o(b)&&d()&&(e=c(),Vb.setEditorTimeout(a,function(){e()}))})},z=function(){a.on("keydown",function(a){if(!o(a)&&a.keyCode===c&&f.isCollapsed()&&0===f.getRng().startOffset){var b=f.getNode().previousSibling;if(b&&b.nodeName&&"table"===b.nodeName.toLowerCase())return a.preventDefault(),!1}})},A=function(){a.on("keydown",function(b){var c,d,g,h,i;if(!o(b)&&b.keyCode===Vz.BACKSPACE&&(c=f.getRng(),d=c.startContainer,g=c.startOffset,h=e.getRoot(),i=d,c.collapsed&&0===g)){for(;i&&i.parentNode&&i.parentNode.firstChild===i&&i.parentNode!==h;)i=i.parentNode;"BLOCKQUOTE"===i.tagName&&(a.formatter.toggle("blockquote",null,i),c=e.createRng(),c.setStart(d,0),c.setEnd(d,0),f.setRng(c))}})},B=function(){var b=function(){n("StyleWithCSS",!1),n("enableInlineTableEditing",!1),g.object_resizing||n("enableObjectResizing",!1)};g.readonly||a.on("BeforeExecCommand MouseDown",b)},C=function(){var c=function(){b(e.select("a"),function(a){var b=a.parentNode,c=e.getRoot();if(b.lastChild===a){for(;b&&!e.isBlock(b);){if(b.parentNode.lastChild!==b||b===c)return;b=b.parentNode}e.add(b,"br",{"data-mce-bogus":1})}})};a.on("SetContent ExecCommand",function(a){"setcontent"!==a.type&&"mceInsertLink"!==a.command||c()})},D=function(){g.forced_root_block&&a.on("init",function(){n("DefaultParagraphSeparator",g.forced_root_block)})},E=function(){a.on("keyup focusin mouseup",function(a){Vz.modifierPressed(a)||f.normalize()},!0)},F=function(){a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},G=function(){a.inline||a.on("keydown",function(){document.activeElement===document.body&&a.getWin().focus()})},H=function(){a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(b){var c;if("HTML"===b.target.nodeName){if(Mb.ie>11)return void a.getBody().focus();c=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(c),a.selection.normalize(),a.nodeChanged()}}))},I=function(){Mb.mac&&a.on("keydown",function(b){!Vz.metaKeyPressed(b)||b.shiftKey||37!==b.keyCode&&39!==b.keyCode||(b.preventDefault(),a.selection.getSel().modify("move",37===b.keyCode?"backward":"forward","lineboundary"))})},J=function(){n("AutoUrlDetect",!1)},K=function(){a.on("click",function(a){var b=a.target;do{if("A"===b.tagName)return void a.preventDefault()}while(b=b.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},L=function(){a.on("init",function(){a.dom.bind(a.getBody(),"submit",function(a){a.preventDefault()})})},M=function(){h.addNodeFilter("br",function(a){for(var b=a.length;b--;)"Apple-interchange-newline"===a[b].attr("class")&&a[b].remove()})},N=function(){a.on("dragstart",function(a){p(a)}),a.on("drop",function(b){if(!o(b)){var c=q(b);if(c&&c.id!==a.id){b.preventDefault();var d=dE.fromPoint(b.x,b.y,a.getDoc());f.setRng(d),r(c.html,!0)}}})},O=function(){},P=function(){var b;return!i||a.removed?0:!(b=a.selection.getSel())||!b.rangeCount||0===b.rangeCount};return A(),s(),Mb.windowsPhone||E(),k&&(u(),x(),D(),L(),z(),M(),Mb.iOS?(G(),H(),K()):t()),Mb.ie>=11&&(H(),z()),Mb.ie&&(t(),J(),N()),i&&(v(),w(),y(),B(),C(),F(),I(),z()),{refreshContentEditable:O,isHidden:P}}function da(a){return{walk:function(b,c){return fC.walk(a,b,c)},split:EB.split,normalize:function(b){return Iv.normalize(a,b).fold(Ea.constant(!1),function(a){return b.setStart(a.startContainer,a.startOffset),b.setEnd(a.endContainer,a.endOffset),!0})}}}var ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},sa=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return a()}},ta=function(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a(b.apply(null,arguments))}},ua=function(a){return function(){return a}},va=function(a){return a},wa=function(a,b){return a===b},xa=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=new Array(arguments.length-1),e=1;e<arguments.length;e++)d[e-1]=arguments[e];return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];for(var e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];var g=d.concat(e);return a.apply(null,g)}},ya=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return!a.apply(null,arguments)}},za=function(a){return function(){throw new Error(a)}},Aa=function(a){return a()},Ba=function(a){a()},Ca=ua(!1),Da=ua(!0),Ea={noop:ra,noarg:sa,compose:ta,constant:ua,identity:va,tripleEquals:wa,curry:xa,not:ya,die:za,apply:Aa,call:Ba,never:Ca,always:Da},Fa=Ea.never,Ga=Ea.always,Ha=function(){return Ia},Ia=function(){var a=function(a){return a.isNone()},b=function(a){return a()},c=function(a){return a},d=function(){},e={fold:function(a,b){return a()},is:Fa,isSome:Fa,isNone:Ga,getOr:c,getOrThunk:b,getOrDie:function(a){throw new Error(a||"error: getOrDie called on none.")},or:c,orThunk:b,map:Ha,ap:Ha,each:d,bind:Ha,flatten:Ha,exists:Fa,forall:Ga,filter:Ha,equals:a,equals_:a,toArray:function(){return[]},toString:Ea.constant("none()")};return Object.freeze&&Object.freeze(e),e}(),Ja=function(a){var b=function(){return a},c=function(){return f},d=function(b){return Ja(b(a))},e=function(b){return b(a)},f={fold:function(b,c){return c(a)},is:function(b){return a===b},isSome:Ga,isNone:Fa,getOr:b,getOrThunk:b,getOrDie:b,or:c,orThunk:c,map:d,ap:function(b){return b.fold(Ha,function(b){return Ja(b(a))})},each:function(b){b(a)},bind:e,flatten:b,exists:e,forall:e,filter:function(b){return b(a)?f:Ia},equals:function(b){return b.is(a)},equals_:function(b,c){return b.fold(Fa,function(b){return c(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return f},Ka=function(a){return null===a||void 0===a?Ia:Ja(a)},La={some:Ja,none:Ha,from:Ka},Ma=function(a){if(null===a)return"null";var b=typeof a;return"object"===b&&Array.prototype.isPrototypeOf(a)?"array":"object"===b&&String.prototype.isPrototypeOf(a)?"string":b},Na=function(a){return function(b){return Ma(b)===a}},Oa={isString:Na("string"),isObject:Na("object"),isArray:Na("array"),isNull:Na("null"),isBoolean:Na("boolean"),isUndefined:Na("undefined"),isFunction:Na("function"),isNumber:Na("number")},Pa=function(){var a=Array.prototype.indexOf,b=function(b,c){return a.call(b,c)},c=function(a,b){return db(a,b)};return void 0===a?c:b}(),Qa=function(a,b){var c=Pa(a,b);return-1===c?La.none():La.some(c)},Ra=function(a,b){return Pa(a,b)>-1},Sa=function(a,b){return cb(a,b).isSome()},Ta=function(a,b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c},Ua=function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},Va=function(a,b){for(var c=a.length,d=new Array(c),e=0;e<c;e++){var f=a[e];d[e]=b(f,e,a)}return d},Wa=function(a,b){for(var c=0,d=a.length;c<d;c++){b(a[c],c,a)}},Xa=function(a,b){for(var c=a.length-1;c>=0;c--){b(a[c],c,a)}},Ya=function(a,b){for(var c=[],d=[],e=0,f=a.length;e<f;e++){var g=a[e];(b(g,e,a)?c:d).push(g)}return{pass:c,fail:d}},Za=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];b(f,d,a)&&c.push(f)}return c},$a=function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],e=[],f=0,g=a.length;f<g;f++){var h=a[f],i=b(h);i!==c&&(d.push(e),e=[]),c=i,e.push(h)}return 0!==e.length&&d.push(e),d},_a=function(a,b,c){return Xa(a,function(a){c=b(c,a)}),c},ab=function(a,b,c){return Wa(a,function(a){c=b(c,a)}),c},bb=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return La.some(e)}return La.none()},cb=function(a,b){for(var c=0,d=a.length;c<d;c++){if(b(a[c],c,a))return La.some(c)}return La.none()},db=function(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c]===b)return c;return-1},eb=Array.prototype.push,fb=function(a){for(var b=[],c=0,d=a.length;c<d;++c){if(!Array.prototype.isPrototypeOf(a[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+a);eb.apply(b,a[c])}return b},gb=function(a,b){var c=Va(a,b);return fb(c)},hb=function(a,b){for(var c=0,d=a.length;c<d;++c){if(!0!==b(a[c],c,a))return!1}return!0},ib=function(a,b){return a.length===b.length&&hb(a,function(a,c){return a===b[c]})},jb=Array.prototype.slice,kb=function(a){var b=jb.call(a,0);return b.reverse(),b},lb=function(a,b){return Za(a,function(a){return!Ra(b,a)})},mb=function(a,b){for(var c={},d=0,e=a.length;d<e;d++){var f=a[d];c[String(f)]=b(f,d)}return c},nb=function(a){return[a]},ob=function(a,b){var c=jb.call(a,0);return c.sort(b),c},pb=function(a){return 0===a.length?La.none():La.some(a[0])},qb=function(a){return 0===a.length?La.none():La.some(a[a.length-1])},rb=Oa.isFunction(Array.from)?Array.from:function(a){return jb.call(a)},sb={map:Va,each:Wa,eachr:Xa,partition:Ya,filter:Za,groupBy:$a,indexOf:Qa,foldr:_a,foldl:ab,find:bb,findIndex:cb,flatten:fb,bind:gb,forall:hb,exists:Sa,contains:Ra,equal:ib,reverse:kb,chunk:Ua,difference:lb,mapToObject:mb,pure:nb,sort:ob,range:Ta,head:pb,last:qb,from:rb},tb="undefined"!=typeof window?window:Function("return this;")(),ub=function(a,b){for(var c=void 0!==b&&null!==b?b:tb,d=0;d<a.length&&void 0!==c&&null!==c;++d)c=c[a[d]];return c},vb=function(a,b){var c=a.split(".");return ub(c,b)},wb=function(a,b){return void 0!==a[b]&&null!==a[b]||(a[b]={}),a[b]},xb=function(a,b){for(var c=void 0!==b?b:tb,d=0;d<a.length;++d)c=wb(c,a[d]);return c},yb=function(a,b){var c=a.split(".");return xb(c,b)},zb={path:ub,resolve:vb,forge:xb,namespace:yb},Ab=function(a,b){return zb.resolve(a,b)},Bb=function(a,b){var c=Ab(a,b);if(void 0===c||null===c)throw a+" not available on this browser";return c},Cb={getOrDie:Bb},Db=function(){return Cb.getOrDie("URL")},Eb=function(a){return Db().createObjectURL(a)},Fb=function(a){Db().revokeObjectURL(a)},Gb={createObjectURL:Eb,revokeObjectURL:Fb},Hb=navigator,Ib=Hb.userAgent,Jb=function(a){return"matchMedia"in window&&matchMedia(a).matches};ea=!1,ma=/Android/.test(Ib),fa=/WebKit/.test(Ib),ga=!fa&&!ea&&/MSIE/gi.test(Ib)&&/Explorer/gi.test(Hb.appName),ga=ga&&/MSIE (\w+)\./.exec(Ib)[1],ha=-1!==Ib.indexOf("Trident/")&&(-1!==Ib.indexOf("rv:")||-1!==Hb.appName.indexOf("Netscape"))&&11,ia=-1!==Ib.indexOf("Edge/")&&!ga&&!ha&&12,ga=ga||ha||ia,ja=!fa&&!ha&&/Gecko/.test(Ib),ka=-1!==Ib.indexOf("Mac"),la=/(iPad|iPhone)/.test(Ib),na="FormData"in window&&"FileReader"in window&&"URL"in window&&!!Gb.createObjectURL,oa=Jb("only screen and (max-device-width: 480px)")&&(ma||la),pa=Jb("only screen and (min-width: 800px)")&&(ma||la),qa=-1!==Ib.indexOf("Windows Phone"),ia&&(fa=!1);var Kb,Lb=!la||na||parseInt(Ib.match(/AppleWebKit\/(\d*)/)[1],10)>=534,Mb={opera:ea,webkit:fa,ie:ga,gecko:ja,mac:ka,iOS:la,android:ma,contentEditable:Lb,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==ga,range:window.getSelection&&"Range"in window,documentMode:ga&&!ia?document.documentMode||7:10,fileApi:na,ceFalse:!1===ga||ga>8,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===ga||ga>11,desktop:!oa&&!pa,windowsPhone:qa},Nb=function(){function a(a,b){return function(){a.apply(b,arguments)}}function b(a){var b=this;if(null===this._state)return void this._deferreds.push(a);j(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(b){return void a.reject(b)}a.resolve(d)})}function c(b){try{if(b===this)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"==typeof b||"function"==typeof b)){var f=b.then;if("function"==typeof f)return void g(a(f,b),a(c,this),a(d,this))}this._state=!0,this._value=b,e.call(this)}catch(a){d.call(this,a)}}function d(a){this._state=!1,this._value=a,e.call(this)}function e(){for(var a=0,c=this._deferreds.length;a<c;a++)b.call(this,this._deferreds[a]);this._deferreds=null}function f(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function g(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(a){if(d)return;d=!0,c(a)}}var h=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},i=function(b){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof b)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],g(b,a(c,this),a(d,this))},j=i.immediateFn||"function"==typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)};return i.prototype.catch=function(a){return this.then(null,a)},i.prototype.then=function(a,c){var d=this;return new i(function(e,g){b.call(d,new f(a,c,e,g))})},i.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&h(arguments[0])?arguments[0]:arguments);return new i(function(b,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0==--e&&b(a)}catch(a){c(a)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},i.resolve=function(a){return a&&"object"==typeof a&&a.constructor===i?a:new i(function(b){b(a)})},i.reject=function(a){return new i(function(b,c){c(a)})},i.race=function(a){return new i(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})},i},Ob=window.Promise?window.Promise:Nb(),Pb=function(a,b){var c,d=window.requestAnimationFrame,e=["ms","moz","webkit"],f=function(a){window.setTimeout(a,0)};for(c=0;c<e.length&&!d;c++)d=window[e[c]+"RequestAnimationFrame"];d||(d=f),d(a,b)},Qb=function(a,b){return"number"!=typeof b&&(b=0),setTimeout(a,b)},Rb=function(a,b){return"number"!=typeof b&&(b=1),setInterval(a,b)},Sb=function(a){return clearTimeout(a)},Tb=function(a){return clearInterval(a)},Ub=function(a,b){var c,d;return d=function(){var d=arguments;clearTimeout(c),c=Qb(function(){a.apply(this,d)},b)},d.stop=function(){clearTimeout(c)},d},Vb={requestAnimationFrame:function(a,b){if(Kb)return void Kb.then(a);Kb=new Ob(function(a){b||(b=document.body),Pb(a,b)}).then(a)},setTimeout:Qb,setInterval:Rb,setEditorTimeout:function(a,b,c){return Qb(function(){a.removed||b()},c)},setEditorInterval:function(a,b,c){var d;return d=Rb(function(){a.removed?clearInterval(d):b()},c)},debounce:Ub,throttle:Ub,clearInterval:Tb,clearTimeout:Sb},Wb="mce-data-",Xb=/^(?:mouse|contextmenu)|click/,Yb={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Zb=function(a){return a.isDefaultPrevented===_b||a.isDefaultPrevented===$b},$b=function(){return!1},_b=function(){return!0},ac=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},bc=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c)},cc=function(a,b){var c,d=b;return c=a.path,c&&c.length>0&&(d=c[0]),a.composedPath&&(c=a.composedPath())&&c.length>0&&(d=c[0]),d},dc=function(a,b){var c,d=b||{};for(c in a)Yb[c]||(d[c]=a[c]);if(d.target||(d.target=d.srcElement||document),Mb.experimentalShadowDom&&(d.target=cc(a,d.target)),a&&Xb.test(a.type)&&void 0===a.pageX&&void 0!==a.clientX){var e=d.target.ownerDocument||document,f=e.documentElement,g=e.body;d.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),d.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}return d.preventDefault=function(){d.isDefaultPrevented=_b,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},d.stopPropagation=function(){d.isPropagationStopped=_b,a&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)},d.stopImmediatePropagation=function(){d.isImmediatePropagationStopped=_b,d.stopPropagation()},!1===Zb(d)&&(d.isDefaultPrevented=$b,d.isPropagationStopped=$b,d.isImmediatePropagationStopped=$b),void 0===d.metaKey&&(d.metaKey=!1),d},ec=function(a,b,c){var d=a.document,e={type:"ready"};if(c.domLoaded)return void b(e);var f=function(){return"complete"===d.readyState||"interactive"===d.readyState&&d.body},g=function(){c.domLoaded||(c.domLoaded=!0,b(e))},h=function(){f()&&(bc(d,"readystatechange",h),g())},i=function(){try{d.documentElement.doScroll("left")}catch(a){return void Vb.setTimeout(i)}g()};!d.addEventListener||Mb.ie&&Mb.ie<11?(ac(d,"readystatechange",h),d.documentElement.doScroll&&a.self===a.top&&i()):f()?g():ac(a,"DOMContentLoaded",g),ac(a,"load",g)},fc=function(){var a,b,c,d,e,f=this,g={};b=Wb+(+new Date).toString(32),d="onmouseenter"in document.documentElement,c="onfocusin"in document.documentElement,e={mouseenter:"mouseover",mouseleave:"mouseout"},a=1,f.domLoaded=!1,f.events=g;var h=function(a,b){var c,d,e,f,h=g[b];if(c=h&&h[a.type])for(d=0,e=c.length;d<e;d++)if(f=c[d],f&&!1===f.func.call(f.scope,a)&&a.preventDefault(),a.isImmediatePropagationStopped())return};f.bind=function(i,j,k,l){var m,n,o,p,q,r,s,t=window,u=function(a){h(dc(a||t.event),m)};if(i&&3!==i.nodeType&&8!==i.nodeType){for(i[b]?m=i[b]:(m=a++,i[b]=m,g[m]={}),l=l||i,j=j.split(" "),o=j.length;o--;)p=j[o],r=u,q=s=!1,"DOMContentLoaded"===p&&(p="ready"),f.domLoaded&&"ready"===p&&"complete"===i.readyState?k.call(l,dc({type:p})):(d||(q=e[p])&&(r=function(a){var b,c;if(b=a.currentTarget,(c=a.relatedTarget)&&b.contains)c=b.contains(c);else for(;c&&c!==b;)c=c.parentNode;c||(a=dc(a||t.event),a.type="mouseout"===a.type?"mouseleave":"mouseenter",a.target=b,h(a,m))}),c||"focusin"!==p&&"focusout"!==p||(s=!0,q="focusin"===p?"focus":"blur",r=function(a){a=dc(a||t.event),a.type="focus"===a.type?"focusin":"focusout",h(a,m)}),n=g[m][p],n?"ready"===p&&f.domLoaded?k({type:p}):n.push({func:k,scope:l}):(g[m][p]=n=[{func:k,scope:l}],n.fakeName=q,n.capture=s,n.nativeHandler=r,"ready"===p?ec(i,r,f):ac(i,q||p,r,s)));return i=n=0,k}},f.unbind=function(a,c,d){var e,h,i,j,k,l;if(!a||3===a.nodeType||8===a.nodeType)return f;if(e=a[b]){if(l=g[e],c){for(c=c.split(" "),i=c.length;i--;)if(k=c[i],h=l[k]){if(d)for(j=h.length;j--;)if(h[j].func===d){var m=h.nativeHandler,n=h.fakeName,o=h.capture;h=h.slice(0,j).concat(h.slice(j+1)),h.nativeHandler=m,h.fakeName=n,h.capture=o,l[k]=h}d&&0!==h.length||(delete l[k],bc(a,h.fakeName||k,h.nativeHandler,h.capture))}}else{for(k in l)h=l[k],bc(a,h.fakeName||k,h.nativeHandler,h.capture);l={}}for(k in l)return f;delete g[e];try{delete a[b]}catch(c){a[b]=null}}return f},f.fire=function(a,c,d){var e;if(!a||3===a.nodeType||8===a.nodeType)return f;d=dc(null,d),d.type=c,d.target=a;do{e=a[b],e&&h(d,e),a=a.parentNode||a.ownerDocument||a.defaultView||a.parentWindow}while(a&&!d.isPropagationStopped());return f},f.clean=function(a){var c,d,e=f.unbind;if(!a||3===a.nodeType||8===a.nodeType)return f;if(a[b]&&e(a),a.getElementsByTagName||(a=a.document),a&&a.getElementsByTagName)for(e(a),d=a.getElementsByTagName("*"),c=d.length;c--;)a=d[c],a[b]&&e(a);return f},f.destroy=function(){g={}},f.cancel=function(a){return a&&(a.preventDefault(),a.stopImmediatePropagation()),!1}};fc.Event=new fc,fc.Event.bind(window,"ready",function(){});var gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc="sizzle"+-new Date,Ac=window.document,Bc=0,Cc=0,Dc=a(),Ec=a(),Fc=a(),Gc=function(a,b){return a===b&&(qc=!0),0},Hc="undefined",Ic=1<<31,Jc={}.hasOwnProperty,Kc=[],Lc=Kc.pop,Mc=Kc.push,Nc=Kc.push,Oc=Kc.slice,Pc=Kc.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},Qc="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Rc="[\\x20\\t\\r\\n\\f]",Sc="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Tc="\\["+Rc+"*("+Sc+")(?:"+Rc+"*([*^$|!~]?=)"+Rc+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Sc+"))|)"+Rc+"*\\]",Uc=":("+Sc+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Tc+")*)|.*)\\)|)",Vc=new RegExp("^"+Rc+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Rc+"+$","g"),Wc=new RegExp("^"+Rc+"*,"+Rc+"*"),Xc=new RegExp("^"+Rc+"*([>+~]|"+Rc+")"+Rc+"*"),Yc=new RegExp("="+Rc+"*([^\\]'\"]*?)"+Rc+"*\\]","g"),Zc=new RegExp(Uc),$c=new RegExp("^"+Sc+"$"),_c={ID:new RegExp("^#("+Sc+")"),CLASS:new RegExp("^\\.("+Sc+")"),TAG:new RegExp("^("+Sc+"|[*])"),ATTR:new RegExp("^"+Tc),PSEUDO:new RegExp("^"+Uc),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Rc+"*(even|odd|(([+-]|)(\\d*)n|)"+Rc+"*(?:([+-]|)"+Rc+"*(\\d+)|))"+Rc+"*\\)|)","i"),bool:new RegExp("^(?:"+Qc+")$","i"),needsContext:new RegExp("^"+Rc+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Rc+"*((?:-\\d)?\\d*)"+Rc+"*\\)|)(?=[^-]|$)","i")},ad=/^(?:input|select|textarea|button)$/i,bd=/^h\d$/i,cd=/^[^{]+\{\s*\[native \w/,dd=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ed=/[+~]/,fd=/'|\\/g,gd=new RegExp("\\\\([\\da-f]{1,6}"+Rc+"?|("+Rc+")|.)","ig"),hd=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{Nc.apply(Kc=Oc.call(Ac.childNodes),Ac.childNodes),Kc[Ac.childNodes.length].nodeType}catch(a){Nc={apply:Kc.length?function(a,b){Mc.apply(a,Oc.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}var id=function(a,b,c,d){var e,f,g,i,k,l,m,n,o,p;if((b?b.ownerDocument||b:Ac)!==sc&&rc(b),b=b||sc,c=c||[],!a||"string"!=typeof a)return c;if(1!==(i=b.nodeType)&&9!==i)return[];if(uc&&!d){if(e=dd.exec(a))if(g=e[1]){if(9===i){if(!(f=b.getElementById(g))||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&yc(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return Nc.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&hc.getElementsByClassName)return Nc.apply(c,b.getElementsByClassName(g)),c}if(hc.qsa&&(!vc||!vc.test(a))){if(n=m=zc,o=b,p=9===i&&a,1===i&&"object"!==b.nodeName.toLowerCase()){for(l=lc(a),(m=b.getAttribute("id"))?n=m.replace(fd,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",k=l.length;k--;)l[k]=n+j(l[k]);o=ed.test(a)&&h(b.parentNode)||b,p=l.join(",")}if(p)try{return Nc.apply(c,o.querySelectorAll(p)),c}catch(a){}finally{m||b.removeAttribute("id")}}}return nc(a.replace(Vc,"$1"),b,c,d)};hc=id.support={},kc=id.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},rc=id.setDocument=function(a){function b(a){try{return a.top}catch(a){}return null}var c,e=a?a.ownerDocument||a:Ac,f=e.defaultView;return e!==sc&&9===e.nodeType&&e.documentElement?(sc=e,tc=e.documentElement,uc=!kc(e),f&&f!==b(f)&&(f.addEventListener?f.addEventListener("unload",function(){rc()},!1):f.attachEvent&&f.attachEvent("onunload",function(){rc()})),hc.attributes=!0,hc.getElementsByTagName=!0,hc.getElementsByClassName=cd.test(e.getElementsByClassName),hc.getById=!0,ic.find.ID=function(a,b){if(typeof b.getElementById!==Hc&&uc){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},ic.filter.ID=function(a){var b=a.replace(gd,hd);return function(a){return a.getAttribute("id")===b}},ic.find.TAG=hc.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==Hc)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},ic.find.CLASS=hc.getElementsByClassName&&function(a,b){if(uc)return b.getElementsByClassName(a)},wc=[],vc=[],hc.disconnectedMatch=!0,vc=vc.length&&new RegExp(vc.join("|")),wc=wc.length&&new RegExp(wc.join("|")),c=cd.test(tc.compareDocumentPosition),yc=c||cd.test(tc.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},Gc=c?function(a,b){if(a===b)return qc=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c||(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!hc.sortDetached&&b.compareDocumentPosition(a)===c?a===e||a.ownerDocument===Ac&&yc(Ac,a)?-1:b===e||b.ownerDocument===Ac&&yc(Ac,b)?1:pc?Pc.call(pc,a)-Pc.call(pc,b):0:4&c?-1:1)}:function(a,b){if(a===b)return qc=!0,0;var c,f=0,g=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!g||!h)return a===e?-1:b===e?1:g?-1:h?1:pc?Pc.call(pc,a)-Pc.call(pc,b):0;if(g===h)return d(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[f]===j[f];)f++;return f?d(i[f],j[f]):i[f]===Ac?-1:j[f]===Ac?1:0},e):sc},id.matches=function(a,b){return id(a,null,null,b)},id.matchesSelector=function(a,b){if((a.ownerDocument||a)!==sc&&rc(a),b=b.replace(Yc,"='$1']"),hc.matchesSelector&&uc&&(!wc||!wc.test(b))&&(!vc||!vc.test(b)))try{var c=xc.call(a,b);if(c||hc.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(a){}return id(b,sc,null,[a]).length>0},id.contains=function(a,b){return(a.ownerDocument||a)!==sc&&rc(a),yc(a,b)},id.attr=function(a,b){(a.ownerDocument||a)!==sc&&rc(a);var c=ic.attrHandle[b.toLowerCase()],d=c&&Jc.call(ic.attrHandle,b.toLowerCase())?c(a,b,!uc):void 0;return void 0!==d?d:hc.attributes||!uc?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},id.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},id.uniqueSort=function(a){var b,c=[],d=0,e=0;if(qc=!hc.detectDuplicates,pc=!hc.sortStable&&a.slice(0),a.sort(Gc),qc){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return pc=null,a},jc=id.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=jc(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=jc(b);return c},ic=id.selectors={cacheLength:50,createPseudo:b,match:_c,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(gd,hd),a[3]=(a[3]||a[4]||a[5]||"").replace(gd,hd),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||id.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&id.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return _c.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&Zc.test(c)&&(b=lc(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(gd,hd).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=Dc[a+" "];return b||(b=new RegExp("(^|"+Rc+")"+a+"("+Rc+"|$)"))&&Dc(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==Hc&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=id.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[zc]||(q[zc]={}),j=k[a]||[],n=j[0]===Bc&&j[1],m=j[0]===Bc&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[Bc,n,m];break}}else if(s&&(j=(b[zc]||(b[zc]={}))[a])&&j[0]===Bc)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[zc]||(l[zc]={}))[a]=[Bc,m]),l!==b)););return(m-=e)===d||m%d==0&&m/d>=0}}},PSEUDO:function(a,c){var d,e=ic.pseudos[a]||ic.setFilters[a.toLowerCase()]||id.error("unsupported pseudo: "+a);return e[zc]?e(c):e.length>1?(d=[a,a,"",c],ic.setFilters.hasOwnProperty(a.toLowerCase())?b(function(a,b){for(var d,f=e(a,c),g=f.length;g--;)d=Pc.call(a,f[g]),a[d]=!(b[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:b(function(a){var c=[],d=[],e=mc(a.replace(Vc,"$1"));return e[zc]?b(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,b,f){return c[0]=a,e(c,null,f,d),!d.pop()}}),has:b(function(a){return function(b){return id(a,b).length>0}}),contains:b(function(a){return a=a.replace(gd,hd),function(b){return(b.textContent||b.innerText||jc(b)).indexOf(a)>-1}}),lang:b(function(a){return $c.test(a||"")||id.error("unsupported lang: "+a),a=a.replace(gd,hd).toLowerCase(),function(b){var c;do{if(c=uc?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(a){var b=window.location&&window.location.hash;return b&&b.slice(1)===a.id},root:function(a){return a===tc},focus:function(a){return a===sc.activeElement&&(!sc.hasFocus||sc.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!ic.pseudos.empty(a)},header:function(a){return bd.test(a.nodeName)},input:function(a){return ad.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:g(function(){return[0]}),last:g(function(a,b){return[b-1]}),eq:g(function(a,b,c){return[c<0?c+b:c]}),even:g(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:g(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:g(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:g(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},ic.pseudos.nth=ic.pseudos.eq;for(gc in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})ic.pseudos[gc]=e(gc);for(gc in{submit:!0,reset:!0})ic.pseudos[gc]=f(gc);i.prototype=ic.filters=ic.pseudos,ic.setFilters=new i,lc=id.tokenize=function(a,b){var c,d,e,f,g,h,i,j=Ec[a+" "];if(j)return b?0:j.slice(0);for(g=a,h=[],i=ic.preFilter;g;){c&&!(d=Wc.exec(g))||(d&&(g=g.slice(d[0].length)||g),h.push(e=[])),c=!1,(d=Xc.exec(g))&&(c=d.shift(),e.push({value:c,type:d[0].replace(Vc," ")}),g=g.slice(c.length));for(f in ic.filter)!(d=_c[f].exec(g))||i[f]&&!(d=i[f](d))||(c=d.shift(),e.push({value:c,type:f,matches:d}),g=g.slice(c.length));if(!c)break}return b?g.length:g?id.error(a):Ec(a,h).slice(0)},mc=id.compile=function(a,b){var c,d=[],e=[],f=Fc[a+" "];if(!f){for(b||(b=lc(a)),c=b.length;c--;)f=p(b[c]),f[zc]?d.push(f):e.push(f);f=Fc(a,q(e,d)),f.selector=a}return f},nc=id.select=function(a,b,c,d){var e,f,g,i,k,l="function"==typeof a&&a,m=!d&&lc(a=l.selector||a);if(c=c||[],1===m.length){if(f=m[0]=m[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&hc.getById&&9===b.nodeType&&uc&&ic.relative[f[1].type]){if(!(b=(ic.find.ID(g.matches[0].replace(gd,hd),b)||[])[0]))return c;l&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=_c.needsContext.test(a)?0:f.length;e--&&(g=f[e],!ic.relative[i=g.type]);)if((k=ic.find[i])&&(d=k(g.matches[0].replace(gd,hd),ed.test(f[0].type)&&h(b.parentNode)||b))){if(f.splice(e,1),!(a=d.length&&j(f)))return Nc.apply(c,d),c;break}}return(l||mc(a,m))(d,b,!uc,c,ed.test(a)&&h(b.parentNode)||b),c},hc.sortStable=zc.split("").sort(Gc).join("")===zc,hc.detectDuplicates=!!qc,rc(),hc.sortDetached=!0;var jd=Array.isArray,kd=function(a){var b,c,d=a;if(!jd(a))for(d=[],b=0,c=a.length;b<c;b++)d[b]=a[b];return d},ld=function(a,b,c){var d,e;if(!a)return 0;if(c=c||a,void 0!==a.length){for(d=0,e=a.length;d<e;d++)if(!1===b.call(c,a[d],d,a))return 0}else for(d in a)if(a.hasOwnProperty(d)&&!1===b.call(c,a[d],d,a))return 0;return 1},md=function(a,b){var c=[];return ld(a,function(d,e){c.push(b(d,e,a))}),c},nd=function(a,b){var c=[];return ld(a,function(d,e){b&&!b(d,e,a)||c.push(d)}),c},od=function(a,b){var c,d;if(a)for(c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},pd=function(a,b,c,d){var e=0;for(arguments.length<3&&(c=a[0]);e<a.length;e++)c=b.call(d,c,a[e],e);return c},qd=function(a,b,c){var d,e;for(d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a))return d;return-1},rd=function(a,b,c){var d=qd(a,b,c);if(-1!==d)return a[d]},sd=function(a){return a[a.length-1]},td={isArray:jd,toArray:kd,each:ld,map:md,filter:nd,indexOf:od,reduce:pd,findIndex:qd,find:rd,last:sd},ud=/^\s*|\s*$/g,vd=function(a){return null===a||void 0===a?"":(""+a).replace(ud,"")},wd=function(a,b){return b?!("array"!==b||!td.isArray(a))||typeof a===b:void 0!==a},xd=function(a,b,c){var d;for(a=a||[],b=b||",","string"==typeof a&&(a=a.split(b)),c=c||{},d=a.length;d--;)c[a[d]]={};return c},yd=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},zd=function(a,b,c){var d,e,f,g,h,i=this,j=0;if(a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),f=a[3].match(/(^|\.)(\w+)$/i)[2],e=i.createNS(a[3].replace(/\.\w+$/,""),c),!e[f]){if("static"===a[2])return e[f]=b,void(this.onCreate&&this.onCreate(a[2],a[3],e[f]));b[f]||(b[f]=function(){},j=1),e[f]=b[f],i.extend(e[f].prototype,b),a[5]&&(d=i.resolve(a[5]).prototype,g=a[5].match(/\.(\w+)$/i)[1],h=e[f],e[f]=j?function(){return d[g].apply(this,arguments)}:function(){return this.parent=d[g],h.apply(this,arguments)},e[f].prototype[f]=e[f],i.each(d,function(a,b){e[f].prototype[b]=d[b]}),i.each(b,function(a,b){d[b]?e[f].prototype[b]=function(){return this.parent=d[b],a.apply(this,arguments)}:b!==f&&(e[f].prototype[b]=a)})),i.each(b.static,function(a,b){e[f][b]=a})}},Ad=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var e,f,g,h,i=arguments;for(e=1,f=i.length;e<f;e++){b=i[e];for(g in b)b.hasOwnProperty(g)&&void 0!==(h=b[g])&&(a[g]=h)}return a},Bd=function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),td.each(a,function(a,e){if(!1===b.call(d,a,e,c))return!1;Bd(a,b,c,d)}))},Cd=function(a,b){var c,d;for(b=b||window,a=a.split("."),c=0;c<a.length;c++)d=a[c],b[d]||(b[d]={}),b=b[d];return b},Dd=function(a,b){var c,d;for(b=b||window,a=a.split("."),c=0,d=a.length;c<d&&(b=b[a[c]]);c++);return b},Ed=function(a,b){return!a||wd(a,"array")?a:td.map(a.split(b||","),vd)},Fd=function(a){var b=Mb.cacheSuffix;return b&&(a+=(-1===a.indexOf("?")?"?":"&")+b),a},Gd={trim:vd,isArray:td.isArray,is:wd,toArray:td.toArray,makeMap:xd,each:td.each,map:td.map,grep:td.filter,inArray:td.indexOf,hasOwn:yd,extend:Ad,create:zd,walk:Bd,createNS:Cd,resolve:Dd,explode:Ed,_addCacheSuffix:Fd},Hd=document,Id=Array.prototype.push,Jd=Array.prototype.slice,Kd=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Ld=fc.Event,Md=Gd.makeMap("children,contents,next,prev"),Nd=function(a){return void 0!==a},Od=function(a){return"string"==typeof a},Pd=function(a){return a&&a===a.window},Qd=function(a,b){var c,d,e;for(b=b||Hd,e=b.createElement("div"),c=b.createDocumentFragment(),e.innerHTML=a;d=e.firstChild;)c.appendChild(d);return c},Rd=function(a,b,c,d){var e;if(Od(b))b=Qd(b,ee(a[0]));else if(b.length&&!b.nodeType){if(b=$d.makeArray(b),d)for(e=b.length-1;e>=0;e--)Rd(a,b[e],c,d);else for(e=0;e<b.length;e++)Rd(a,b[e],c,d);return a}if(b.nodeType)for(e=a.length;e--;)c.call(a[e],b);return a},Sd=function(a,b){return a&&b&&-1!==(" "+a.className+" ").indexOf(" "+b+" ")},Td=function(a,b,c){var d,e;return b=$d(b)[0],a.each(function(){var a=this;c&&d===a.parentNode?e.appendChild(a):(d=a.parentNode,e=b.cloneNode(!1),a.parentNode.insertBefore(e,a),e.appendChild(a))}),a},Ud=Gd.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Vd=Gd.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Wd={for:"htmlFor",class:"className",readonly:"readOnly"},Xd={float:"cssFloat"},Yd={},Zd={},$d=function(a,b){return new $d.fn.init(a,b)},_d=function(a,b){var c;if(b.indexOf)return b.indexOf(a);for(c=b.length;c--;)if(b[c]===a)return c;return-1},ae=/^\s*|\s*$/g,be=function(a){return null===a||void 0===a?"":(""+a).replace(ae,"")},ce=function(a,b){var c,d,e,f;if(a)if(void 0===(c=a.length)){for(d in a)if(a.hasOwnProperty(d)&&(f=a[d],!1===b.call(f,d,f)))break}else for(e=0;e<c&&(f=a[e],!1!==b.call(f,e,f));e++);return a},de=function(a,b){var c=[];return ce(a,function(a,d){b(d,a)&&c.push(d)}),c},ee=function(a){return a?9===a.nodeType?a:a.ownerDocument:Hd};$d.fn=$d.prototype={constructor:$d,selector:"",context:null,length:0,init:function(a,b){var c,d,e=this;if(!a)return e;if(a.nodeType)return e.context=e[0]=a,e.length=1,e;if(b&&b.nodeType)e.context=b;else{if(b)return $d(a).attr(b);e.context=b=document}if(Od(a)){if(e.selector=a,!(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:Kd.exec(a)))return $d(b).find(a);if(c[1])for(d=Qd(a,ee(b)).firstChild;d;)Id.call(e,d),d=d.nextSibling;else{if(!(d=ee(b).getElementById(c[2])))return e;if(d.id!==c[2])return e.find(a);e.length=1,e[0]=d}}else this.add(a,!1);return e},toArray:function(){return Gd.toArray(this)},add:function(a,b){var c,d,e=this;if(Od(a))return e.add($d(a));if(!1!==b)for(c=$d.unique(e.toArray().concat($d.makeArray(a))),e.length=c.length,d=0;d<c.length;d++)e[d]=c[d];else Id.apply(e,$d.makeArray(a));return e},attr:function(a,b){var c,d=this;if("object"==typeof a)ce(a,function(a,b){d.attr(a,b)});else{if(!Nd(b)){if(d[0]&&1===d[0].nodeType){if((c=Yd[a])&&c.get)return c.get(d[0],a);if(Vd[a])return d.prop(a)?a:void 0;b=d[0].getAttribute(a,2),null===b&&(b=void 0)}return b}this.each(function(){var c;if(1===this.nodeType){if((c=Yd[a])&&c.set)return void c.set(this,b);null===b?this.removeAttribute(a,2):this.setAttribute(a,b,2)}})}return d},removeAttr:function(a){return this.attr(a,null)},prop:function(a,b){var c=this;if("object"==typeof(a=Wd[a]||a))ce(a,function(a,b){c.prop(a,b)});else{if(!Nd(b))return c[0]&&c[0].nodeType&&a in c[0]?c[0][a]:b;this.each(function(){1===this.nodeType&&(this[a]=b)})}return c},css:function(a,b){var c,d,e=this,f=function(a){return a.replace(/-(\D)/g,function(a,b){return b.toUpperCase()})},g=function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a})};if("object"==typeof a)ce(a,function(a,b){e.css(a,b)});else if(Nd(b))a=f(a),"number"!=typeof b||Ud[a]||(b=b.toString()+"px"),e.each(function(){var c=this.style;if((d=Zd[a])&&d.set)return void d.set(this,b);try{this.style[Xd[a]||a]=b}catch(a){}null!==b&&""!==b||(c.removeProperty?c.removeProperty(g(a)):c.removeAttribute(a))});else{if(c=e[0],(d=Zd[a])&&d.get)return d.get(c);if(!c.ownerDocument.defaultView)return c.currentStyle?c.currentStyle[f(a)]:"";try{return c.ownerDocument.defaultView.getComputedStyle(c,null).getPropertyValue(g(a))}catch(a){return}}return e},remove:function(){for(var a,b=this,c=this.length;c--;)a=b[c],Ld.clean(a),a.parentNode&&a.parentNode.removeChild(a);return this},empty:function(){for(var a,b=this,c=this.length;c--;)for(a=b[c];a.firstChild;)a.removeChild(a.firstChild);return this},html:function(a){var b,c=this;if(Nd(a)){b=c.length;try{for(;b--;)c[b].innerHTML=a}catch(d){$d(c[b]).empty().append(a)}return c}return c[0]?c[0].innerHTML:""},text:function(a){var b,c=this;if(Nd(a)){for(b=c.length;b--;)"innerText"in c[b]?c[b].innerText=a:c[0].textContent=a;return c}return c[0]?c[0].innerText||c[0].textContent:""},append:function(){return Rd(this,arguments,function(a){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(a)})},prepend:function(){return Rd(this,arguments,function(a){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(a,this.firstChild)},!0)},before:function(){var a=this;return a[0]&&a[0].parentNode?Rd(a,arguments,function(a){this.parentNode.insertBefore(a,this)}):a},after:function(){var a=this;return a[0]&&a[0].parentNode?Rd(a,arguments,function(a){this.parentNode.insertBefore(a,this.nextSibling)},!0):a},appendTo:function(a){return $d(a).append(this),this},prependTo:function(a){return $d(a).prepend(this),this},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return Td(this,a)},wrapAll:function(a){return Td(this,a,!0)},wrapInner:function(a){return this.each(function(){$d(this).contents().wrapAll(a)}),this},unwrap:function(){return this.parent().each(function(){$d(this).replaceWith(this.childNodes)})},clone:function(){var a=[];return this.each(function(){a.push(this.cloneNode(!0))}),$d(a)},addClass:function(a){return this.toggleClass(a,!0)},removeClass:function(a){return this.toggleClass(a,!1)},toggleClass:function(a,b){var c=this;return"string"!=typeof a?c:(-1!==a.indexOf(" ")?ce(a.split(" "),function(){c.toggleClass(this,b)}):c.each(function(c,d){var e,f;(f=Sd(d,a))!==b&&(e=d.className,f?d.className=be((" "+e+" ").replace(" "+a+" "," ")):d.className+=e?" "+a:a)}),c)},hasClass:function(a){return Sd(this[0],a)},each:function(a){return ce(this,a)},on:function(a,b){return this.each(function(){Ld.bind(this,a,b)})},off:function(a,b){return this.each(function(){Ld.unbind(this,a,b)})},trigger:function(a){return this.each(function(){"object"==typeof a?Ld.fire(this,a.type,a):Ld.fire(this,a)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new $d(Jd.apply(this,arguments))},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(a){var b,c,d=[];for(b=0,c=this.length;b<c;b++)$d.find(a,this[b],d);return $d(d)},filter:function(a){return $d("function"==typeof a?de(this.toArray(),function(b,c){return a(c,b)}):$d.filter(a,this.toArray()))},closest:function(a){var b=[];return a instanceof $d&&(a=a[0]),this.each(function(c,d){for(;d;){if("string"==typeof a&&$d(d).is(a)){b.push(d);break}if(d===a){b.push(d);break}d=d.parentNode}}),$d(b)},offset:function(a){var b,c,d,e,f=0,g=0;return a?this.css(a):(b=this[0],b&&(c=b.ownerDocument,d=c.documentElement,b.getBoundingClientRect&&(e=b.getBoundingClientRect(),f=e.left+(d.scrollLeft||c.body.scrollLeft)-d.clientLeft,g=e.top+(d.scrollTop||c.body.scrollTop)-d.clientTop)),{left:f,top:g})},push:Id,sort:[].sort,splice:[].splice},Gd.extend($d,{extend:Gd.extend,makeArray:function(a){return Pd(a)||a.nodeType?[a]:Gd.toArray(a)},inArray:_d,isArray:Gd.isArray,each:ce,trim:be,grep:de,find:id,expr:id.selectors,unique:id.uniqueSort,text:id.getText,contains:id.contains,filter:function(a,b,c){var d=b.length;for(c&&(a=":not("+a+")");d--;)1!==b[d].nodeType&&b.splice(d,1);return b=1===b.length?$d.find.matchesSelector(b[0],a)?[b[0]]:[]:$d.find.matches(a,b)}});var fe=function(a,b,c){var d=[],e=a[b];for("string"!=typeof c&&c instanceof $d&&(c=c[0]);e&&9!==e.nodeType;){if(void 0!==c){if(e===c)break;if("string"==typeof c&&$d(e).is(c))break}1===e.nodeType&&d.push(e),e=e[b]}return d},ge=function(a,b,c,d){var e=[];for(d instanceof $d&&(d=d[0]);a;a=a[b])if(!c||a.nodeType===c){if(void 0!==d){if(a===d)break;if("string"==typeof d&&$d(a).is(d))break}e.push(a)}return e},he=function(a,b,c){for(a=a[b];a;a=a[b])if(a.nodeType===c)return a;return null};ce({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return fe(a,"parentNode")},next:function(a){return he(a,"nextSibling",1)},prev:function(a){return he(a,"previousSibling",1)},children:function(a){return ge(a.firstChild,"nextSibling",1)},contents:function(a){return Gd.toArray(("iframe"===a.nodeName?a.contentDocument||a.contentWindow.document:a).childNodes)}},function(a,b){$d.fn[a]=function(c){var d=this,e=[];return d.each(function(){var a=b.call(e,this,c,e);a&&($d.isArray(a)?e.push.apply(e,a):e.push(a))}),this.length>1&&(Md[a]||(e=$d.unique(e)),0===a.indexOf("parents")&&(e=e.reverse())),e=$d(e),c?e.filter(c):e}}),ce({parentsUntil:function(a,b){return fe(a,"parentNode",b)},nextUntil:function(a,b){return ge(a,"nextSibling",1,b).slice(1)},prevUntil:function(a,b){return ge(a,"previousSibling",1,b).slice(1)}},function(a,b){$d.fn[a]=function(c,d){var e=this,f=[];return e.each(function(){var a=b.call(f,this,c,f);a&&($d.isArray(a)?f.push.apply(f,a):f.push(a))}),this.length>1&&(f=$d.unique(f),0!==a.indexOf("parents")&&"prevUntil"!==a||(f=f.reverse())),f=$d(f),d?f.filter(d):f}}),$d.fn.is=function(a){return!!a&&this.filter(a).length>0},$d.fn.init.prototype=$d.fn,$d.overrideDefaults=function(a){var b,c=function(d,e){return b=b||a(),0===arguments.length&&(d=b.element),e||(e=b.context),new c.fn.init(d,e)};return $d.extend(c,this),c};var ie=function(a,b,c){ce(c,function(c,d){a[c]=a[c]||{},a[c][b]=d})};Mb.ie&&Mb.ie<8&&(ie(Yd,"get",{maxlength:function(a){var b=a.maxLength;if(2147483647!==b)return b},size:function(a){var b=a.size;if(20!==b)return b},class:function(a){return a.className},style:function(a){var b=a.style.cssText;if(0!==b.length)return b}}),ie(Yd,"set",{class:function(a,b){a.className=b},style:function(a,b){a.style.cssText=b}})),Mb.ie&&Mb.ie<9&&(Xd.float="styleFloat",ie(Zd,"set",{opacity:function(a,b){var c=a.style;null===b||""===b?c.removeAttribute("filter"):(c.zoom=1,c.filter="alpha(opacity="+100*b+")")}})),$d.attrHooks=Yd,$d.cssHooks=Zd;var je,ke,le,me=function(a){var b,c=!1;return function(){return c||(c=!0,b=a.apply(null,arguments)),b}},ne={cached:me},oe=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.test(b))return d}},pe=function(a,b){var c=oe(a,b);if(!c)return{major:0,minor:0};var d=function(a){return Number(b.replace(c,"$"+a))};return se(d(1),d(2))},qe=function(a,b){var c=String(b).toLowerCase();return 0===a.length?re():pe(a,c)},re=function(){return se(0,0)},se=function(a,b){return{major:a,minor:b}},te={nu:se,detect:qe,unknown:re},ue="Edge",ve="Chrome",we="IE",xe="Opera",ye="Firefox",ze="Safari",Ae=function(a,b){return function(){return b===a}},Be=function(){return Ce({current:void 0,version:te.unknown()})},Ce=function(a){var b=a.current;return{current:b,version:a.version,isEdge:Ae(ue,b),isChrome:Ae(ve,b),isIE:Ae(we,b),isOpera:Ae(xe,b),isFirefox:Ae(ye,b),isSafari:Ae(ze,b)}},De={unknown:Be,nu:Ce,edge:Ea.constant(ue),chrome:Ea.constant(ve),ie:Ea.constant(we),opera:Ea.constant(xe),firefox:Ea.constant(ye),safari:Ea.constant(ze)},Ee="Windows",Fe="iOS",Ge="Android",He="Linux",Ie="OSX",Je="Solaris",Ke="FreeBSD",Le=function(a,b){return function(){return b===a}},Me=function(){return Ne({current:void 0,version:te.unknown()})},Ne=function(a){var b=a.current;return{current:b,version:a.version,isWindows:Le(Ee,b),isiOS:Le(Fe,b),isAndroid:Le(Ge,b),isOSX:Le(Ie,b),isLinux:Le(He,b),isSolaris:Le(Je,b),isFreeBSD:Le(Ke,b)}},Oe={unknown:Me,nu:Ne,windows:Ea.constant(Ee),ios:Ea.constant(Fe),android:Ea.constant(Ge),linux:Ea.constant(He),osx:Ea.constant(Ie),solaris:Ea.constant(Je),freebsd:Ea.constant(Ke)},Pe=function(a,b){var c=String(b).toLowerCase();return sb.find(a,function(a){return a.search(c)})},Qe=function(a,b){return Pe(a,b).map(function(a){var c=te.detect(a.versionRegexes,b);return{current:a.name,version:c}})},Re=function(a,b){return Pe(a,b).map(function(a){var c=te.detect(a.versionRegexes,b);return{current:a.name,version:c}})},Se={detectBrowser:Qe,detectOs:Re},Te=function(a,b){return b+a},Ue=function(a,b){return a+b},Ve=function(a,b){return a.substring(b)},We=function(a,b){return a.substring(0,a.length-b)},Xe={addToStart:Te,addToEnd:Ue,removeFromStart:Ve,removeFromEnd:We},Ye=function(a,b){return a.substr(0,b)},Ze=function(a,b){return a.substr(a.length-b,a.length)},$e=function(a){return""===a?La.none():La.some(a.substr(0,1))},_e=function(a){return""===a?La.none():La.some(a.substring(1))},af={first:Ye,last:Ze,head:$e,tail:_e},bf=function(a,b,c){return""===b||!(a.length<b.length)&&a.substr(c,c+b.length)===b},cf=function(a,b){var c=function(a){var b=typeof a;return"string"===b||"number"===b};return a.replace(/\${([^{}]*)}/g,function(a,d){var e=b[d];return c(e)?e:a})},df=function(a,b){return kf(a,b)?Xe.removeFromStart(a,b.length):a},ef=function(a,b){return lf(a,b)?Xe.removeFromEnd(a,b.length):a},ff=function(a,b){return kf(a,b)?a:Xe.addToStart(a,b)},gf=function(a,b){return lf(a,b)?a:Xe.addToEnd(a,b)},hf=function(a,b){return-1!==a.indexOf(b)},jf=function(a){return af.head(a).bind(function(b){return af.tail(a).map(function(a){return b.toUpperCase()+a})}).getOr(a)},kf=function(a,b){return bf(a,b,0)},lf=function(a,b){return bf(a,b,a.length-b.length)},mf=function(a){return a.replace(/^\s+|\s+$/g,"")},nf=function(a){return a.replace(/^\s+/g,"")},of=function(a){return a.replace(/\s+$/g,"")},pf={supplant:cf,startsWith:kf,removeLeading:df,removeTrailing:ef,ensureLeading:ff,ensureTrailing:gf,endsWith:lf,contains:hf,trim:mf,lTrim:nf,rTrim:of,capitalize:jf},qf=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rf=function(a){return function(b){return pf.contains(b,a)}},sf=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){return pf.contains(a,"edge/")&&pf.contains(a,"chrome")&&pf.contains(a,"safari")&&pf.contains(a,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,qf],search:function(a){return pf.contains(a,"chrome")&&!pf.contains(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){return pf.contains(a,"msie")||pf.contains(a,"trident")}},{name:"Opera",versionRegexes:[qf,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rf("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rf("firefox")},{name:"Safari",versionRegexes:[qf,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return(pf.contains(a,"safari")||pf.contains(a,"mobile/"))&&pf.contains(a,"applewebkit")}}],tf=[{name:"Windows",search:rf("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(a){return pf.contains(a,"iphone")||pf.contains(a,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rf("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:rf("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rf("linux"),versionRegexes:[]},{name:"Solaris",search:rf("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rf("freebsd"),versionRegexes:[]}],uf={browsers:Ea.constant(sf),oses:Ea.constant(tf)},vf=function(a){var b=uf.browsers(),c=uf.oses(),d=Se.detectBrowser(b,a).fold(De.unknown,De.nu),e=Se.detectOs(c,a).fold(Oe.unknown,Oe.nu);return{browser:d,os:e,deviceType:r(e,d,a)}},wf={detect:vf},xf=ne.cached(function(){var a=navigator.userAgent;return wf.detect(a)}),yf={detect:xf},zf=function(a,b){var c=b||document,d=c.createElement("div");if(d.innerHTML=a,!d.hasChildNodes()||d.childNodes.length>1)throw console.error("HTML does not have a single root node",a),"HTML must have a single root node";return Cf(d.childNodes[0])},Af=function(a,b){var c=b||document,d=c.createElement(a);return Cf(d)},Bf=function(a,b){var c=b||document,d=c.createTextNode(a);return Cf(d)},Cf=function(a){if(null===a||void 0===a)throw new Error("Node cannot be null or undefined");return{dom:Ea.constant(a)}},Df=function(a,b,c){return La.from(a.dom().elementFromPoint(b,c)).map(Cf)},Ef={fromHtml:zf,fromTag:Af,fromText:Bf,fromDom:Cf,fromPoint:Df},Ff={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12},Gf=function(a){return a.dom().nodeName.toLowerCase()},Hf=function(a){return a.dom().nodeType},If=function(a){return a.dom().nodeValue},Jf=function(a){return function(b){return Hf(b)===a}},Kf=function(a){return Hf(a)===Ff.COMMENT||"#comment"===Gf(a)},Lf=Jf(Ff.ELEMENT),Mf=Jf(Ff.TEXT),Nf=Jf(Ff.DOCUMENT),Of={name:Gf,type:Hf,value:If,isElement:Lf,isText:Mf,isDocument:Nf,isComment:Kf},Pf=function(){var a=Object.keys,b=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};return void 0===a?b:a}(),Qf=function(a,b){for(var c=Pf(a),d=0,e=c.length;d<e;d++){var f=c[d];b(a[f],f,a)}},Rf=function(a,b){return Sf(a,function(a,c,d){return{k:c,v:b(a,c,d)}})},Sf=function(a,b){var c={};return Qf(a,function(d,e){var f=b(d,e,a);c[f.k]=f.v}),c},Tf=function(a,b){var c={},d={};return Qf(a,function(a,e){(b(a,e)?c:d)[e]=a}),{t:c,f:d}},Uf=function(a,b){var c=[];return Qf(a,function(a,d){c.push(b(a,d))}),c},Vf=function(a,b){for(var c=Pf(a),d=0,e=c.length;d<e;d++){var f=c[d],g=a[f];if(b(g,f,a))return La.some(g)}return La.none()},Wf=function(a){return Uf(a,function(a){return a})},Xf=function(a){return Wf(a).length},Yf={bifilter:Tf,each:Qf,map:Rf,mapToArray:Uf,tupleMap:Sf,find:Vf,keys:Pf,values:Wf,size:Xf},Zf=function(a,b,c){if(!(Oa.isString(c)||Oa.isBoolean(c)||Oa.isNumber(c)))throw console.error("Invalid call to Attr.set. Key ",b,":: Value ",c,":: Element ",a),new Error("Attribute value was not simple");a.setAttribute(b,c+"")},$f=function(a,b,c){Zf(a.dom(),b,c)},_f=function(a,b){var c=a.dom();Yf.each(b,function(a,b){Zf(c,b,a)})},ag=function(a,b){var c=a.dom().getAttribute(b);return null===c?void 0:c},bg=function(a,b){var c=a.dom();return!(!c||!c.hasAttribute)&&c.hasAttribute(b)},cg=function(a,b){a.dom().removeAttribute(b)},dg=function(a){var b=a.dom().attributes;return void 0===b||null===b||0===b.length},eg=function(a){return sb.foldl(a.dom().attributes,function(a,b){return a[b.name]=b.value,a},{})},fg=function(a,b,c){bg(a,c)&&!bg(b,c)&&$f(b,c,ag(a,c))},gg=function(a,b,c){Of.isElement(a)&&Of.isElement(b)&&sb.each(c,function(c){fg(a,b,c)})},hg={clone:eg,set:$f,setAll:_f,get:ag,has:bg,remove:cg,hasNone:dg,transfer:gg},ig=function(a){var b=Of.isText(a)?a.dom().parentNode:a.dom();return void 0!==b&&null!==b&&b.ownerDocument.body.contains(b)},jg=ne.cached(function(){return kg(Ef.fromDom(document))}),kg=function(a){var b=a.dom().body;if(null===b||void 0===b)throw"Body is not available yet";return Ef.fromDom(b)},lg={body:jg,getBody:kg,inBody:ig},mg=function(a){return void 0!==a.style},ng={isSupported:mg},og=function(a,b,c){if(!Oa.isString(c))throw console.error("Invalid call to CSS.set. Property ",b,":: Value ",c,":: Element ",a),new Error("CSS value must be a string: "+c);ng.isSupported(a)&&a.style.setProperty(b,c)},pg=function(a,b){ng.isSupported(a)&&a.style.removeProperty(b)},qg=function(a,b,c){var d=a.dom();og(d,b,c)},rg=function(a,b){var c=a.dom();Yf.each(b,function(a,b){og(c,b,a)})},sg=function(a,b){var c=a.dom();Yf.each(b,function(a,b){a.fold(function(){pg(c,b)},function(a){og(c,b,a)})})},tg=function(a,b){var c=a.dom(),d=window.getComputedStyle(c),e=d.getPropertyValue(b),f=""!==e||lg.inBody(a)?e:ug(c,b);return null===f?void 0:f},ug=function(a,b){return ng.isSupported(a)?a.style.getPropertyValue(b):""},vg=function(a,b){var c=a.dom(),d=ug(c,b);return La.from(d).filter(function(a){return a.length>0})},wg=function(a){var b={},c=a.dom();if(ng.isSupported(c))for(var d=0;d<c.style.length;d++){var e=c.style.item(d);b[e]=c.style[e]}return b},xg=function(a,b,c){var d=Ef.fromTag(a);return qg(d,b,c),vg(d,b).isSome()},yg=function(a,b){var c=a.dom();pg(c,b),hg.has(a,"style")&&""===pf.trim(hg.get(a,"style"))&&hg.remove(a,"style")},zg=function(a,b){var c=hg.get(a,"style"),d=b(a);return(void 0===c?hg.remove:hg.set)(a,"style",c),d},Ag=function(a,b){var c=a.dom(),d=b.dom();ng.isSupported(c)&&ng.isSupported(d)&&(d.style.cssText=c.style.cssText)},Bg=function(a){return a.dom().offsetWidth},Cg=function(a,b,c){vg(a,c).each(function(a){vg(b,c).isNone()&&qg(b,c,a)})},Dg=function(a,b,c){Of.isElement(a)&&Of.isElement(b)&&sb.each(c,function(c){Cg(a,b,c)})},Eg={copy:Ag,set:qg,preserve:zg,setAll:rg,setOptions:sg,remove:yg,get:tg,getRaw:vg,getAllRaw:wg,isValidValue:xg,reflow:Bg,transfer:Dg},Fg=function(a){return a.slice(0).sort()},Gg=function(a,b){throw new Error("All required keys ("+Fg(a).join(", ")+") were not specified. Specified keys were: "+Fg(b).join(", ")+".")},Hg=function(a){throw new Error("Unsupported keys for object: "+Fg(a).join(", "))},Ig=function(a,b){if(!Oa.isArray(b))throw new Error("The "+a+" fields must be an array. Was: "+b+".");sb.each(b,function(b){if(!Oa.isString(b))throw new Error("The value "+b+" in the "+a+" fields was not a string.")})},Jg=function(a,b){throw new Error("All values need to be of type: "+b+". Keys ("+Fg(a).join(", ")+") were not.")},Kg=function(a){var b=Fg(a);sb.find(b,function(a,c){return c<b.length-1&&a===b[c+1]}).each(function(a){throw new Error("The field: "+a+" occurs more than once in the combined fields: ["+b.join(", ")+"].")})},Lg={sort:Fg,reqMessage:Gg,unsuppMessage:Hg,validateStrArr:Ig,invalidTypeMessage:Jg,checkDupes:Kg},Mg={immutable:s,immutableBag:t},Ng=function(a,b){var c=[],d=function(a){return c.push(a),b(a)},e=b(a);do{e=e.bind(d)}while(e.isSome());return c},Og={toArray:Ng},Pg=function(){return Cb.getOrDie("Node")},Qg=function(a,b,c){return 0!=(a.compareDocumentPosition(b)&c)},Rg=function(a,b){return Qg(a,b,Pg().DOCUMENT_POSITION_PRECEDING)},Sg=function(a,b){return Qg(a,b,Pg().DOCUMENT_POSITION_CONTAINED_BY)},Tg={documentPositionPreceding:Rg,documentPositionContainedBy:Sg},Ug=Ff.ELEMENT,Vg=Ff.DOCUMENT,Wg=function(a,b){var c=a.dom();if(c.nodeType!==Ug)return!1;if(void 0!==c.matches)return c.matches(b);if(void 0!==c.msMatchesSelector)return c.msMatchesSelector(b);if(void 0!==c.webkitMatchesSelector)return c.webkitMatchesSelector(b);if(void 0!==c.mozMatchesSelector)return c.mozMatchesSelector(b);throw new Error("Browser lacks native selectors")},Xg=function(a){return a.nodeType!==Ug&&a.nodeType!==Vg||0===a.childElementCount},Yg=function(a,b){var c=void 0===b?document:b.dom();return Xg(c)?[]:sb.map(c.querySelectorAll(a),Ef.fromDom)},Zg=function(a,b){var c=void 0===b?document:b.dom();return Xg(c)?La.none():La.from(c.querySelector(a)).map(Ef.fromDom)},$g={all:Yg,is:Wg,one:Zg},_g=function(a,b){return a.dom()===b.dom()},ah=function(a,b){return a.dom().isEqualNode(b.dom())},bh=function(a,b){return sb.exists(b,Ea.curry(_g,a))},ch=function(a,b){var c=a.dom(),d=b.dom();return c!==d&&c.contains(d)},dh=function(a,b){return Tg.documentPositionContainedBy(a.dom(),b.dom())},eh=yf.detect().browser,fh=eh.isIE()?dh:ch,gh={eq:_g,isEqualNode:ah,member:bh,contains:fh,is:$g.is},hh=function(a){return Ef.fromDom(a.dom().ownerDocument)},ih=function(a){var b=hh(a);return Ef.fromDom(b.dom().documentElement)},jh=function(a){var b=a.dom(),c=b.ownerDocument.defaultView;return Ef.fromDom(c)},kh=function(a){var b=a.dom();return La.from(b.parentNode).map(Ef.fromDom)},lh=function(a){return kh(a).bind(function(b){var c=th(b);return sb.findIndex(c,function(b){return gh.eq(a,b)})})},mh=function(a,b){for(var c=Oa.isFunction(b)?b:Ea.constant(!1),d=a.dom(),e=[];null!==d.parentNode&&void 0!==d.parentNode;){var f=d.parentNode,g=Ef.fromDom(f);if(e.push(g),!0===c(g))break;d=f}return e},nh=function(a){var b=function(b){return sb.filter(b,function(b){return!gh.eq(a,b)})};return kh(a).map(th).map(b).getOr([])},oh=function(a){var b=a.dom();return La.from(b.offsetParent).map(Ef.fromDom)},ph=function(a){var b=a.dom();return La.from(b.previousSibling).map(Ef.fromDom)},qh=function(a){var b=a.dom();return La.from(b.nextSibling).map(Ef.fromDom)},rh=function(a){return sb.reverse(Og.toArray(a,ph))},sh=function(a){return Og.toArray(a,qh)},th=function(a){var b=a.dom();return sb.map(b.childNodes,Ef.fromDom)},uh=function(a,b){var c=a.dom().childNodes;return La.from(c[b]).map(Ef.fromDom)},vh=function(a){return uh(a,0)},wh=function(a){return uh(a,a.dom().childNodes.length-1)},xh=function(a){return a.dom().childNodes.length},yh=function(a){return a.dom().hasChildNodes()},zh=Mg.immutable("element","offset"),Ah=function(a,b){var c=th(a);return c.length>0&&b<c.length?zh(c[b],0):zh(a,b)},Bh={owner:hh,defaultView:jh,documentElement:ih,parent:kh,findIndex:lh,parents:mh,siblings:nh,prevSibling:ph,offsetParent:oh,prevSiblings:rh,nextSibling:qh,nextSiblings:sh,children:th,child:uh,firstChild:vh,lastChild:wh,childNodesCount:xh,hasChildNodes:yh,leaf:Ah},Ch=yf.detect().browser,Dh=function(a){return sb.find(a,Of.isElement)},Eh=function(a){return Ch.isFirefox()&&"table"===Of.name(a)?Dh(Bh.children(a)).filter(function(a){return"caption"===Of.name(a)}).bind(function(a){return Dh(Bh.nextSiblings(a)).map(function(b){var c=b.dom().offsetTop,d=a.dom().offsetTop,e=a.dom().offsetHeight;return c<=d?-e:0})}).getOr(0):0},Fh=function(a,b,c){var d,e,f=0,g=0,h=a.ownerDocument;if(c=c||a,b){if(c===a&&b.getBoundingClientRect&&"static"===Eg.get(Ef.fromDom(a),"position"))return e=b.getBoundingClientRect(),f=e.left+(h.documentElement.scrollLeft||a.scrollLeft)-h.documentElement.clientLeft,g=e.top+(h.documentElement.scrollTop||a.scrollTop)-h.documentElement.clientTop,{x:f,y:g};for(d=b;d&&d!==c&&d.nodeType;)f+=d.offsetLeft||0,g+=d.offsetTop||0,d=d.offsetParent;for(d=b.parentNode;d&&d!==c&&d.nodeType;)f-=d.scrollLeft||0,g-=d.scrollTop||0,d=d.parentNode;g+=Eh(Ef.fromDom(b))}return{x:f,y:g}},Gh={getPos:Fh},Hh=function(a){var b=La.none(),c=[],d=function(a){return Hh(function(b){e(function(c){b(a(c))})})},e=function(a){g()?i(a):c.push(a)},f=function(a){b=La.some(a),h(c),c=[]},g=function(){return b.isSome()},h=function(a){sb.each(a,i)},i=function(a){b.each(function(b){setTimeout(function(){a(b)},0)})};return a(f),{get:e,map:d,isReady:g}},Ih=function(a){return Hh(function(b){b(a)})},Jh={nu:Hh,pure:Ih},Kh=function(a){return function(){var b=Array.prototype.slice.call(arguments),c=this;setTimeout(function(){a.apply(c,b)},0)}},Lh={bounce:Kh},Mh=function(a){var b=function(b){a(Lh.bounce(b))};return{map:function(a){return Mh(function(c){b(function(b){var d=a(b);c(d)})})},bind:function(a){return Mh(function(c){b(function(b){a(b).get(c)})})},anonBind:function(a){return Mh(function(c){b(function(b){a.get(c)})})},toLazy:function(){return Jh.nu(b)},get:b}},Nh=function(a){return Mh(function(b){b(a)})},Oh={nu:Mh,pure:Nh},Ph=function(a,b){return b(function(b){var c=[],d=0,e=function(e){return function(f){c[e]=f,++d>=a.length&&b(c)}};0===a.length?b([]):sb.each(a,function(a,b){a.get(e(b))})})},Qh={par:Ph},Rh=function(a){return Qh.par(a,Oh.nu)},Sh=function(a,b){var c=sb.map(a,b);return Rh(c)},Th=function(a,b){return function(c){return b(c).bind(a)}},Uh={par:Rh,mapM:Sh,compose:Th},Vh=function(a){var b=function(b){return a===b},c=function(b){return Vh(a)},d=function(b){return Vh(a)},e=function(b){return Vh(b(a))},f=function(b){b(a)},g=function(b){return b(a)},h=function(b,c){return c(a)},i=function(b){return b(a)},j=function(b){return b(a)},k=function(){return La.some(a)};return{is:b,isValue:Ea.always,isError:Ea.never,getOr:Ea.constant(a),getOrThunk:Ea.constant(a),getOrDie:Ea.constant(a),or:c,orThunk:d,fold:h,map:e,each:f,bind:g,exists:i,forall:j,toOption:k}},Wh=function(a){var b=function(a){return a()},c=function(){return Ea.die(String(a))()},d=function(a){return a},e=function(a){return a()},f=function(b){return Wh(a)},g=function(b){return Wh(a)},h=function(b,c){return b(a)};return{is:Ea.never,isValue:Ea.never,isError:Ea.always,getOr:Ea.identity,getOrThunk:b,getOrDie:c,or:d,orThunk:e,fold:h,map:f,each:Ea.noop,bind:g,exists:Ea.never,forall:Ea.always,toOption:La.none}},Xh={value:Vh,error:Wh},Yh=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Zh=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],$h=["td","th"],_h=["thead","tbody","tfoot"],ai=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],bi=["h1","h2","h3","h4","h5","h6"],ci=["li","dd","dt"],di=["ul","ol","dl"],ei=function(a){var b;return function(c){return b=b||sb.mapToObject(a,Ea.constant(!0)),b.hasOwnProperty(Of.name(c))}},fi=ei(bi),gi=ei(Yh),hi=function(a){return Of.isElement(a)&&!gi(a)},ii=function(a){return Of.isElement(a)&&"br"===Of.name(a)},ji=ei(ai),ki=ei(di),li=ei(ci),mi=ei(Zh),ni=ei(_h),oi=ei($h),pi=function(a){return function(b){return!!b&&b.nodeType===a}},qi=pi(1),ri=function(a){var b=a.toLowerCase().split(" ");return function(a){var c,d;if(a&&a.nodeType)for(d=a.nodeName.toLowerCase(),c=0;c<b.length;c++)if(d===b[c])return!0;return!1}},si=function(a,b){var c=b.toLowerCase().split(" ");return function(b){var d;if(qi(b))for(d=0;d<c.length;d++){var e=b.ownerDocument.defaultView.getComputedStyle(b,null);if((e?e.getPropertyValue(a):null)===c[d])return!0}return!1}},ti=function(a,b){return function(c){return qi(c)&&c[a]===b}},ui=function(a,b){return function(b){return qi(b)&&b.hasAttribute(a)}},vi=function(a,b){return function(c){return qi(c)&&c.getAttribute(a)===b}},wi=function(a){return qi(a)&&a.hasAttribute("data-mce-bogus")},xi=function(a){return qi(a)&&"all"===a.getAttribute("data-mce-bogus")},yi=function(a){return qi(a)&&"TABLE"===a.tagName},zi=function(a){return function(b){if(qi(b)){if(b.contentEditable===a)return!0;if(b.getAttribute("data-mce-contenteditable")===a)return!0}return!1}},Ai=pi(3),Bi=pi(8),Ci=pi(9),Di=ri("br"),Ei=zi("true"),Fi=zi("false"),Gi={isText:Ai,isElement:qi,isComment:Bi,isDocument:Ci,isBr:Di,isContentEditableTrue:Ei,isContentEditableFalse:Fi,matchNodeNames:ri,hasPropValue:ti,hasAttribute:ui,hasAttributeValue:vi,matchStyleValues:si,isBogus:wi,isBogusAll:xi,isTable:yi},Hi=function(a){var b=a.previousSibling&&"SPAN"===a.previousSibling.nodeName,c=a.nextSibling&&"SPAN"===a.nextSibling.nodeName;return b&&c},Ii=function(a){return a&&"SPAN"===a.tagName&&"bookmark"===a.getAttribute("data-mce-type")},Ji=function(a,b){var c,d=b.childNodes;if(!Gi.isElement(b)||!Ii(b)){for(c=d.length-1;c>=0;c--)Ji(a,d[c]);if(!1===Gi.isDocument(b)){if(Gi.isText(b)&&b.nodeValue.length>0){var e=Gd.trim(b.nodeValue).length;if(a.isBlock(b.parentNode)||e>0)return;if(0===e&&Hi(b))return}else if(Gi.isElement(b)&&(d=b.childNodes,1===d.length&&Ii(d[0])&&b.parentNode.insertBefore(d[0],b),d.length||mi(Ef.fromDom(b))))return;a.remove(b)}return b}},Ki={trimNode:Ji},Li=Gd.makeMap,Mi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ni=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Oi=/[<>&\"\']/g,Pi=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Qi={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};ke={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},le={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Ri=function(a){var b;return b=Ef.fromTag("div").dom(),b.innerHTML=a,b.textContent||b.innerText||a},Si=function(a,b){var c,d,e,f={};if(a){for(a=a.split(","),b=b||10,c=0;c<a.length;c+=2)d=String.fromCharCode(parseInt(a[c],b)),ke[d]||(e="&"+a[c+1]+";",f[d]=e,f[e]=d);return f}};je=Si("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Ti=function(a,b){return a.replace(b?Mi:Ni,function(a){return ke[a]||a})},Ui=function(a){return(""+a).replace(Oi,function(a){return ke[a]||a})},Vi=function(a,b){return a.replace(b?Mi:Ni,function(a){return a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":ke[a]||"&#"+a.charCodeAt(0)+";"})},Wi=function(a,b,c){return c=c||je,a.replace(b?Mi:Ni,function(a){return ke[a]||c[a]||a})},Xi=function(a,b){var c=Si(b)||je,d=function(a,b){return a.replace(b?Mi:Ni,function(a){return void 0!==ke[a]?ke[a]:void 0!==c[a]?c[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"})},e=function(a,b){return Wi(a,b,c)},f=Li(a.replace(/\+/g,","));return f.named&&f.numeric?d:f.named?b?e:Wi:f.numeric?Vi:Ti},Yi=function(a){return a.replace(Pi,function(a,b){return b?(b="x"===b.charAt(0).toLowerCase()?parseInt(b.substr(1),16):parseInt(b,10),b>65535?(b-=65536,String.fromCharCode(55296+(b>>10),56320+(1023&b))):Qi[b]||String.fromCharCode(b)):le[a]||je[a]||Ri(a)})},Zi={encodeRaw:Ti,encodeAllRaw:Ui,encodeNumeric:Vi,encodeNamed:Wi,getEncodeFunc:Xi,decode:Yi},$i={},_i={},aj=Gd.makeMap,bj=Gd.each,cj=Gd.extend,dj=Gd.explode,ej=Gd.inArray,fj=function(a,b){return a=Gd.trim(a),a?a.split(b||" "):[]},gj=function(a){var b,c,d,e,f,g,h={},i=function(a,c,d){var e,f,g,i=function(a,b){var c,d,e={};for(c=0,d=a.length;c<d;c++)e[a[c]]=b||{};return e};for(d=d||[],c=c||"","string"==typeof d&&(d=fj(d)),a=fj(a),e=a.length;e--;)f=fj([b,c].join(" ")),g={attributes:i(f),attributesOrder:f,children:i(d,_i)},h[a[e]]=g},j=function(a,b){var c,d,e,f;for(a=fj(a),c=a.length,b=fj(b);c--;)for(d=h[a[c]],e=0,f=b.length;e<f;e++)d.attributes[b[e]]={},d.attributesOrder.push(b[e])};return $i[a]?$i[a]:(b="id accesskey class dir lang style tabindex title role",c="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",d="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==a&&(b+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",c+=" article aside details dialog figure header footer hgroup section nav",d+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==a&&(b+=" xml:lang",g="acronym applet basefont big font strike tt",d=[d,g].join(" "),bj(fj(g),function(a){i(a,"",d)}),f="center dir isindex noframes",c=[c,f].join(" "),e=[c,d].join(" "),bj(fj(f),function(a){i(a,"",e)})),e=e||[c,d].join(" "),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",e),i("address dt dd div caption","",e),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",d),i("blockquote","cite",e),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",e),i("dl","","dt dd"),i("a","href target rel media hreflang type",d),i("q","cite",d),i("ins del","cite datetime",e),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",e),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[e,"param"].join(" ")),i("param","name value"),i("map","name",[e,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+("html4"===a?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",e),i("th","colspan rowspan headers scope abbr",e),i("form","accept-charset action autocomplete enctype method name novalidate target",e),i("fieldset","disabled form name",[e,"legend"].join(" ")),i("label","form for",d),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===a?e:d),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[e,"li"].join(" ")),i("noscript","",e),"html4"!==a&&(i("wbr"),i("ruby","",[d,"rt rp"].join(" ")),i("figcaption","",e),i("mark rt rp summary bdi","",d),i("canvas","width height",e),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[e,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[e,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[d,"option"].join(" ")),i("article section nav aside header footer","",e),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[e,"figcaption"].join(" ")),i("time","datetime",d),i("dialog","open",e),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",d),i("progress","value max",d),i("meter","value min max low high optimum",d),i("details","open",[e,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==a&&(j("script","language xml:space"),j("style","xml:space"),j("object","declare classid code codebase codetype archive standby align border hspace vspace"),j("embed","align name hspace vspace"),j("param","valuetype type"),j("a","charset name rev shape coords"),j("br","clear"),j("applet","codebase archive code object alt name width height align hspace vspace"),j("img","name longdesc align border hspace vspace"),j("iframe","longdesc frameborder marginwidth marginheight scrolling align"),j("font basefont","size color face"),j("input","usemap align"),j("select","onchange"),j("textarea"),j("h1 h2 h3 h4 h5 h6 div p legend caption","align"),j("ul","type compact"),j("li","type"),j("ol dl menu dir","compact"),j("pre","width xml:space"),j("hr","align noshade size width"),j("isindex","prompt"),j("table","summary width frame rules cellspacing cellpadding align bgcolor"),j("col","width align char charoff valign"),j("colgroup","width align char charoff valign"),j("thead","align char charoff valign"),j("tr","align char charoff valign bgcolor"),j("th","axis align char charoff valign nowrap bgcolor width height"),j("form","accept"),j("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),j("tfoot","align char charoff valign"),j("tbody","align char charoff valign"),j("area","nohref"),j("body","background bgcolor text link vlink alink")),"html4"!==a&&(j("input button select textarea","autofocus"),j("input textarea","placeholder"),j("a","download"),j("link script img","crossorigin"),j("iframe","sandbox seamless allowfullscreen")),bj(fj("a form meter progress dfn"),function(a){h[a]&&delete h[a].children[a]}),delete h.caption.children.table,delete h.script,$i[a]=h,h)},hj=function(a,b){var c;return a&&(c={},"string"==typeof a&&(a={"*":a}),bj(a,function(a,d){c[d]=c[d.toUpperCase()]="map"===b?aj(a,/[, ]/):dj(a,/[, ]/)})),c},ij=function(a,b,c,d){var e=function(a){return a=parseInt(a,10).toString(16),a.length>1?a:"0"+a};return"#"+e(b)+e(c)+e(d)},jj=Gd.each,kj=Gd.grep,lj=Mb.ie,mj=/^([a-z0-9],?)+$/i,nj=/^[ \t\r\n]*$/,oj=function(a,b,c){var d={},e=b.keep_values,f={set:function(a,d,e){b.url_converter&&(d=b.url_converter.call(b.url_converter_scope||c(),d,e,a[0])),a.attr("data-mce-"+e,d).attr(e,d)},get:function(a,b){return a.attr("data-mce-"+b)||a.attr(b)}};return d={style:{set:function(a,b){if(null!==b&&"object"==typeof b)return void a.css(b);e&&a.attr("data-mce-style",b),a.attr("style",b)},get:function(b){var c=b.attr("data-mce-style")||b.attr("style");return c=a.serialize(a.parse(c),b[0].nodeName)}}},e&&(d.href=d.src=f),d},pj=function(a,b){var c=b.attr("style"),d=a.serialize(a.parse(c),b[0].nodeName);d||(d=null),b.attr("data-mce-style",d)},qj=function(a,b){var c,d,e=0;if(a)for(c=a.nodeType,a=a.previousSibling;a;a=a.previousSibling)d=a.nodeType,(!b||3!==d||d!==c&&a.nodeValue.length)&&(e++,c=d);return e};!function(a){a.DOM=a(document),a.nodeIndex=qj}(y||(y={}));var rj=y,sj=rj.DOM,tj=Gd.each,uj=Gd.grep,vj=function(a){return"function"==typeof a},wj=function(){var a=1,b=2,c=3,d={},e=[],f={},g=[],h=0,i=function(a,b,c){var d,e,f=sj,g=function(){f.remove(e),d&&(d.onreadystatechange=d.onload=d=null),b()},h=function(){vj(c)?c():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+a)};e=f.uniqueId(),d=document.createElement("script"),d.id=e,d.type="text/javascript",d.src=Gd._addCacheSuffix(a),"onreadystatechange"in d?d.onreadystatechange=function(){/loaded|complete/.test(d.readyState)&&g()}:d.onload=g,d.onerror=h,(document.getElementsByTagName("head")[0]||document.body).appendChild(d)};this.isDone=function(a){return d[a]===b},this.markDone=function(a){d[a]=b},this.add=this.load=function(a,b,c,g){void 0===d[a]&&(e.push(a),d[a]=0),b&&(f[a]||(f[a]=[]),f[a].push({success:b,failure:g,scope:c||this}))},this.remove=function(a){delete d[a],delete f[a]},this.loadQueue=function(a,b,c){this.loadScripts(e,a,b,c)},this.loadScripts=function(e,j,k,l){var m,n=[],o=function(a,b){tj(f[b],function(b){vj(b[a])&&b[a].call(b.scope)}),f[b]=void 0};g.push({success:j,failure:l,scope:k||this}),(m=function(){var f=uj(e);if(e.length=0,tj(f,function(e){return d[e]===b?void o("success",e):d[e]===c?void o("failure",e):void(d[e]!==a&&(d[e]=a,h++,i(e,function(){d[e]=b,h--,o("success",e),m()},function(){d[e]=c,h--,n.push(e),o("failure",e),m()})))}),!h){var j=g.slice(0);g.length=0,tj(j,function(a){0===n.length?vj(a.success)&&a.success.call(a.scope):vj(a.failure)&&a.failure.call(a.scope,n)})}})()}};wj.ScriptLoader=new wj;var xj=Gd.each;!function(a){a.PluginManager=a(),a.ThemeManager=a()}(z||(z={}));var yj="\ufeff",zj=function(a){return a===yj},Aj=function(a){return a.replace(new RegExp(yj,"g"),"")},Bj={isZwsp:zj,ZWSP:yj,trim:Aj},Cj=Gi.isElement,Dj=Gi.isText,Ej=function(a){return Dj(a)&&(a=a.parentNode),Cj(a)&&a.hasAttribute("data-mce-caret")},Fj=function(a){return Dj(a)&&Bj.isZwsp(a.data)},Gj=function(a){return Ej(a)||Fj(a)},Hj=function(a){return a.firstChild!==a.lastChild||!Gi.isBr(a.firstChild)},Ij=function(a,b){var c,d,e,f;if(c=a.ownerDocument,e=c.createTextNode(Bj.ZWSP),f=a.parentNode,b){if(d=a.previousSibling,Dj(d)){if(Gj(d))return d;if(Oj(d))return d.splitText(d.data.length-1)}f.insertBefore(e,a)}else{if(d=a.nextSibling,Dj(d)){if(Gj(d))return d;if(Nj(d))return d.splitText(1),d}a.nextSibling?f.insertBefore(e,a.nextSibling):f.appendChild(e)}return e},Jj=function(a){var b=a.container();return a&&Gi.isText(b)&&b.data.charAt(a.offset())===Bj.ZWSP},Kj=function(a){var b=a.container();return a&&Gi.isText(b)&&b.data.charAt(a.offset()-1)===Bj.ZWSP},Lj=function(){var a=document.createElement("br");return a.setAttribute("data-mce-bogus","1"),a},Mj=function(a,b,c){var d,e,f;return d=b.ownerDocument,e=d.createElement(a),e.setAttribute("data-mce-caret",c?"before":"after"),e.setAttribute("data-mce-bogus","all"),e.appendChild(Lj()),f=b.parentNode,c?f.insertBefore(e,b):b.nextSibling?f.insertBefore(e,b.nextSibling):f.appendChild(e),e},Nj=function(a){return Dj(a)&&a.data[0]===Bj.ZWSP},Oj=function(a){return Dj(a)&&a.data[a.data.length-1]===Bj.ZWSP},Pj=function(a){var b=a.getElementsByTagName("br"),c=b[b.length-1];Gi.isBogus(c)&&c.parentNode.removeChild(c)},Qj=function(a){return a&&a.hasAttribute("data-mce-caret")?(Pj(a),a.removeAttribute("data-mce-caret"),a.removeAttribute("data-mce-bogus"),a.removeAttribute("style"),a.removeAttribute("_moz_abspos"),a):null},Rj=function(a){return Ej(a.startContainer)},Sj=Gi.isContentEditableTrue,Tj=Gi.isContentEditableFalse,Uj=Gi.isBr,Vj=Gi.isText,Wj=Gi.matchNodeNames("script style textarea"),Xj=Gi.matchNodeNames("img input textarea hr iframe video audio object"),Yj=Gi.matchNodeNames("table"),Zj=Gj,$j=function(a){return!Zj(a)&&(Vj(a)?!Wj(a.parentNode):Xj(a)||Uj(a)||Yj(a)||ak(a))},_j=function(a){return Gi.isElement(a)&&"true"===a.getAttribute("unselectable")},ak=function(a){return!1===_j(a)&&Tj(a)},bk=function(a,b){for(a=a.parentNode;a&&a!==b;a=a.parentNode){if(ak(a))return!1;if(Sj(a))return!0}return!0},ck=function(a){return!!ak(a)&&!0!==td.reduce(a.getElementsByTagName("*"),function(a,b){return a||Sj(b)},!1)},dk=function(a){return Xj(a)||ck(a)},ek=function(a,b){return $j(a)&&bk(a,b)},fk=Math.round,gk=function(a){return a?{left:fk(a.left),top:fk(a.top),bottom:fk(a.bottom),right:fk(a.right),width:fk(a.width),height:fk(a.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},hk=function(a,b){return a=gk(a),b?a.right=a.left:(a.left=a.left+a.width,a.right=a.left),a.width=0,a},ik=function(a,b){return a.left===b.left&&a.top===b.top&&a.bottom===b.bottom&&a.right===b.right},jk=function(a,b,c){return a>=0&&a<=Math.min(b.height,c.height)/2},kk=function(a,b){return a.bottom-a.height/2<b.top||!(a.top>b.bottom)&&jk(b.top-a.bottom,a,b)},lk=function(a,b){return a.top>b.bottom||!(a.bottom<b.top)&&jk(b.bottom-a.top,a,b)},mk=function(a,b,c){return b>=a.left&&b<=a.right&&c>=a.top&&c<=a.bottom},nk=function(a,b){return b.left>a.left&&b.right<a.right?0:b.left<a.left?b.left-a.left:b.right-a.right},ok=function(a,b){return b.top>a.top&&b.bottom<a.bottom?0:b.top<a.top?b.top-a.top:b.bottom-a.bottom},pk=function(a,b){return{x:nk(a,b),y:ok(a,b)}},qk=function(a){var b=a.startContainer,c=a.startOffset;return b.hasChildNodes()&&a.endOffset===c+1?b.childNodes[c]:null},rk=function(a,b){return 1===a.nodeType&&a.hasChildNodes()&&(b>=a.childNodes.length&&(b=a.childNodes.length-1),a=a.childNodes[b]),a},sk=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),tk=function(a){return"string"==typeof a&&a.charCodeAt(0)>=768&&sk.test(a)},uk=[].slice,vk=function(a){return function(){return a}},wk=function(a){return function(b){return!a(b)}},xk=function(a,b){return function(c){return a(b(c))}},yk=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=uk.call(arguments);return function(a){for(var b=0;b<c.length;b++)if(c[b](a))return!0;return!1}},zk=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=uk.call(arguments);return function(a){for(var b=0;b<c.length;b++)if(!c[b](a))return!1;return!0}},Ak=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=uk.call(arguments);return d.length-1>=a.length?a.apply(this,d.slice(1)):function(){var a=d.concat([].slice.call(arguments));return Ak.apply(this,a)}},Bk=function(){},Ck={constant:vk,negate:wk,and:zk,or:yk,curry:Ak,compose:xk,noop:Bk},Dk=function(a){for(var b=[],c=function(a){b.push(a)},d=0;d<a.length;d++)a[d].each(c);return b},Ek=function(a,b){for(var c=0;c<a.length;c++){var d=b(a[c],c);if(d.isSome())return d}return La.none()},Fk=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];if(!e.isSome())return La.none();c.push(e.getOrDie())}return La.some(b.apply(null,c))},Gk={cat:Dk,findMap:Ek,liftN:Fk},Hk=Gi.isElement,Ik=$j,Jk=Gi.matchStyleValues("display","block table"),Kk=Gi.matchStyleValues("float","left right"),Lk=Ck.and(Hk,Ik,Ck.negate(Kk)),Mk=Ck.negate(Gi.matchStyleValues("white-space","pre pre-line pre-wrap")),Nk=Gi.isText,Ok=Gi.isBr,Pk=rj.nodeIndex,Qk=rk,Rk=function(a){return"createRange"in a?a.createRange():rj.DOM.createRng()},Sk=function(a){return a&&/[\r\n\t ]/.test(a)},Tk=function(a){return!!a.setStart&&!!a.setEnd},Uk=function(a){var b,c=a.startContainer,d=a.startOffset;return!!(Sk(a.toString())&&Mk(c.parentNode)&&Gi.isText(c)&&(b=c.data,Sk(b[d-1])||Sk(b[d+1])))},Vk=function(a){var b,c=a.ownerDocument,d=Rk(c),e=c.createTextNode(""),f=a.parentNode;return f.insertBefore(e,a),d.setStart(e,0),d.setEnd(e,1),b=gk(d.getBoundingClientRect()),f.removeChild(e),b},Wk=function(a){var b=a.startContainer,c=a.endContainer,d=a.startOffset,e=a.endOffset;if(b===c&&Gi.isText(c)&&0===d&&1===e){var f=a.cloneRange();return f.setEndAfter(c),Yk(f)}return null},Xk=function(a){return 0===a.left&&0===a.right&&0===a.top&&0===a.bottom},Yk=function(a){var b,c;return c=a.getClientRects(),b=gk(c.length>0?c[0]:a.getBoundingClientRect()),!Tk(a)&&Ok(a)&&Xk(b)?Vk(a):Xk(b)&&Tk(a)?Wk(a):b},Zk=function(a,b){var c=hk(a,b);return c.width=1,c.right=c.left+1,c},$k=function(a){var b,c,d=[],e=function(a){0!==a.height&&(d.length>0&&ik(a,d[d.length-1])||d.push(a))},f=function(a,b){var c=Rk(a.ownerDocument);if(b<a.data.length){if(tk(a.data[b]))return d;if(tk(a.data[b-1])&&(c.setStart(a,b),c.setEnd(a,b+1),!Uk(c)))return e(Zk(Yk(c),!1)),d}b>0&&(c.setStart(a,b-1),c.setEnd(a,b),Uk(c)||e(Zk(Yk(c),!1))),b<a.data.length&&(c.setStart(a,b),c.setEnd(a,b+1),Uk(c)||e(Zk(Yk(c),!0)))};if(Nk(a.container()))return f(a.container(),a.offset()),d;if(Hk(a.container()))if(a.isAtEnd())c=Qk(a.container(),a.offset()),Nk(c)&&f(c,c.data.length),Lk(c)&&!Ok(c)&&e(Zk(Yk(c),!1));else{if(c=Qk(a.container(),a.offset()),Nk(c)&&f(c,0),Lk(c)&&a.isAtEnd())return e(Zk(Yk(c),!1)),d;b=Qk(a.container(),a.offset()-1),Lk(b)&&!Ok(b)&&(Jk(b)||Jk(c)||!Lk(c))&&e(Zk(Yk(b),!1)),Lk(c)&&e(Zk(Yk(c),!0))}return d};!function(a){a.fromRangeStart=function(b){return a(b.startContainer,b.startOffset)},a.fromRangeEnd=function(b){return a(b.endContainer,b.endOffset)},a.after=function(b){return a(b.parentNode,Pk(b)+1)},a.before=function(b){return a(b.parentNode,Pk(b))},a.isAbove=function(a,b){return Gk.liftN([sb.head(b.getClientRects()),sb.last(a.getClientRects())],kk).getOr(!1)},a.isBelow=function(a,b){return Gk.liftN([sb.last(b.getClientRects()),sb.head(a.getClientRects())],lk).getOr(!1)},a.isAtStart=function(a){return!!a&&a.isAtStart()},a.isAtEnd=function(a){return!!a&&a.isAtEnd()},a.isTextPosition=function(a){return!!a&&Gi.isText(a.container())},a.isElementPosition=function(b){return!1===a.isTextPosition(b)}}(A||(A={}));var _k,al=A,bl=Gi.isElement,cl=Gi.isText,dl=function(a){var b=a.parentNode;b&&b.removeChild(a)},el=function(a){try{return a.nodeValue}catch(a){return""}},fl=function(a,b){0===b.length?dl(a):a.nodeValue=b},gl=function(a){var b=Bj.trim(a);return{count:a.length-b.length,text:b}},hl=function(a,b){return nl(a),b},il=function(a,b){var c=gl(a.data.substr(0,b.offset())),d=gl(a.data.substr(b.offset())),e=c.text+d.text;return e.length>0?(fl(a,e),al(a,b.offset()-c.count)):b},jl=function(a,b){var c=b.container(),d=sb.indexOf(sb.from(c.childNodes),a).map(function(a){return a<b.offset()?al(c,b.offset()-1):b}).getOr(b);return nl(a),d},kl=function(a,b){return cl(a)&&b.container()===a?il(a,b):hl(a,b)},ll=function(a,b){return b.container()===a.parentNode?jl(a,b):hl(a,b)},ml=function(a,b){return al.isTextPosition(b)?kl(a,b):ll(a,b)},nl=function(a){if(bl(a)&&Gj(a)&&(Hj(a)?a.removeAttribute("data-mce-caret"):dl(a)),cl(a)){var b=Bj.trim(el(a));fl(a,b)}},ol={removeAndReposition:ml,remove:nl},pl=function(a,b,c){var d=a?al.before(c):al.after(c);return wl(a,b,d)},ql=function(a){return Gi.isBr(a)?al.before(a):al.after(a)},rl=function(a){return al.isTextPosition(a)?0===a.offset():$j(a.getNode())},sl=function(a){if(al.isTextPosition(a)){var b=a.container();return a.offset()===b.data.length}return $j(a.getNode(!0))},tl=function(a,b){return!al.isTextPosition(a)&&!al.isTextPosition(b)&&a.getNode()===b.getNode(!0)},ul=function(a){return!al.isTextPosition(a)&&Gi.isBr(a.getNode())},vl=function(a,b,c){return a?!tl(b,c)&&!ul(b)&&sl(b)&&rl(c):!tl(c,b)&&rl(b)&&sl(c)},wl=function(a,b,c){var d=fo(b);return La.from(a?d.next(c):d.prev(c))},xl=function(a,b,c){return wl(a,b,c).bind(function(d){return En(c,d,b)&&vl(a,c,d)?wl(a,b,d):La.some(d)})},yl=function(a,b){var c=a?b.firstChild:b.lastChild;return Gi.isText(c)?La.some(al(c,a?0:c.data.length)):c?$j(c)?La.some(a?al.before(c):ql(c)):pl(a,b,c):La.none()},zl={fromPosition:wl,nextPosition:Ea.curry(wl,!0),prevPosition:Ea.curry(wl,!1),navigate:xl,positionIn:yl,firstPositionIn:Ea.curry(yl,!0),lastPositionIn:Ea.curry(yl,!1)},Al=Gi.isContentEditableTrue,Bl=Gi.isContentEditableFalse,Cl=function(a,b,c,d,e){return b._selectionOverrides.showCaret(a,c,d,e)},Dl=function(a){var b=a.ownerDocument.createRange();return b.selectNode(a),b},El=function(a,b){return a.fire("BeforeObjectSelected",{target:b}).isDefaultPrevented()?null:Dl(b)},Fl=function(a,b,c){var d=Ln(1,a.getBody(),b),e=al.fromRangeStart(d),f=e.getNode();if(Bl(f))return Cl(1,a,f,!e.isAtEnd(),!1);var g=e.getNode(!0);if(Bl(g))return Cl(1,a,g,!1,!1);var h=a.dom.getParent(e.getNode(),function(a){return Bl(a)||Al(a)});return Bl(h)?Cl(1,a,h,!1,c):null},Gl=function(a,b,c){if(!b||!b.collapsed)return b;var d=Fl(a,b,c);return d||b};!function(a){a[a.Br=0]="Br",a[a.Block=1]="Block",a[a.Wrap=2]="Wrap",a[a.Eol=3]="Eol"}(_k||(_k={}));var Hl,Il=function(a,b){return a===Hl.Backwards?b.reverse():b},Jl=function(a,b,c){return a===Hl.Forwards?b.next(c):b.prev(c)},Kl=function(a,b,c,d){return Gi.isBr(d.getNode(b===Hl.Forwards))?_k.Br:!1===En(c,d)?_k.Block:_k.Wrap},Ll=function(a,b,c,d){for(var e,f=fo(c),g=d,h=[];g&&(e=Jl(b,f,g));){if(Gi.isBr(e.getNode(!1)))return b===Hl.Forwards?{positions:Il(b,h).concat([e]),breakType:_k.Br,breakAt:La.some(e)}:{positions:Il(b,h),breakType:_k.Br,breakAt:La.some(e)};if(e.isVisible()){if(a(g,e)){var i=Kl(c,b,g,e);return{positions:Il(b,h),breakType:i,breakAt:La.some(e)}}h.push(e),g=e}else g=e}return{positions:Il(b,h),breakType:_k.Eol,breakAt:La.none()}},Ml=function(a,b,c,d){return b(c,d).breakAt.map(function(d){var e=b(c,d).positions;return a===Hl.Backwards?e.concat(d):[d].concat(e)}).getOr([])},Nl=function(a,b){return sb.foldl(a,function(a,c){return a.fold(function(){return La.some(c)},function(d){return Gk.liftN([sb.head(d.getClientRects()),sb.head(c.getClientRects())],function(a,e){var f=Math.abs(b-a.left);return Math.abs(b-e.left)<=f?c:d}).or(a)})},La.none())},Ol=function(a,b){return sb.head(b.getClientRects()).bind(function(b){return Nl(a,b.left)})},Pl=Ea.curry(Ll,A.isAbove,-1),Ql=Ea.curry(Ll,A.isBelow,1),Rl=Ea.curry(Ml,-1,Pl),Sl=Ea.curry(Ml,1,Ql),Tl=function(a){return zl.firstPositionIn(a).map(function(b){return[b].concat(Ql(a,b).positions)}).getOr([])},Ul=function(a){return zl.lastPositionIn(a).map(function(b){return Pl(a,b).positions.concat(b)}).getOr([])},Vl=function(a){return Zl(lg.body(),a)},Wl=function(a,b,c){return sb.filter(Bh.parents(a,c),b)},Xl=function(a,b){return sb.filter(Bh.siblings(a),b)},Yl=function(a,b){return sb.filter(Bh.children(a),b)},Zl=function(a,b){var c=[];return sb.each(Bh.children(a),function(a){b(a)&&(c=c.concat([a])),c=c.concat(Zl(a,b))}),c},$l={all:Vl,ancestors:Wl,siblings:Xl,children:Yl,descendants:Zl},_l=function(a){return $g.all(a)},am=function(a,b,c){return $l.ancestors(a,function(a){return $g.is(a,b)},c)},bm=function(a,b){return $l.siblings(a,function(a){return $g.is(a,b)})},cm=function(a,b){return $l.children(a,function(a){return $g.is(a,b)})},dm=function(a,b){return $g.all(b,a)},em={all:_l,ancestors:am,siblings:bm,children:cm,descendants:dm},fm=function(a,b){return{left:a.left-b,top:a.top-b,right:a.right+2*b,bottom:a.bottom+2*b,width:a.width+b,height:a.height+b}},gm=function(a,b){return sb.bind(b,function(b){var c=fm(b.getBoundingClientRect(),-1);return[{x:c.left,y:a(c),cell:b},{x:c.right,y:a(c),cell:b}]})},hm=function(a,b,c){return sb.foldl(a,function(a,d){return a.fold(function(){return La.some(d)},function(a){var e=Math.sqrt(Math.abs(a.x-b)+Math.abs(a.y-c)),f=Math.sqrt(Math.abs(d.x-b)+Math.abs(d.y-c));return La.some(f<e?d:a)})},La.none())},im=function(a,b,c,d,e){var f=em.descendants(Ef.fromDom(c),"td,th").map(function(a){return a.dom()}),g=sb.filter(gm(a,f),function(a){return b(a,e)});return hm(g,d,e).map(function(a){return a.cell})},jm=function(a){return a.bottom},km=function(a){return a.top},lm=function(a,b){return a.y<b},mm=function(a,b){return a.y>b},nm=Ea.curry(im,jm,lm),om=Ea.curry(im,km,mm),pm=function(a,b){return sb.head(b.getClientRects()).bind(function(b){return nm(a,b.left,b.top)}).bind(function(a){return Ol(Ul(a),b)})},qm=function(a,b){return sb.last(b.getClientRects()).bind(function(b){return om(a,b.left,b.top)}).bind(function(a){return Ol(Tl(a),b)})},rm=function(a){for(var b=0,c=0,d=a;d&&d.nodeType;)b+=d.offsetLeft||0,c+=d.offsetTop||0,d=d.offsetParent;return{x:b,y:c}},sm=function(a,b,c){var d={elm:b,alignToTop:c};return a.fire("scrollIntoView",d),d.isDefaultPrevented()},tm=function(a,b,c){var d,e,f,g,h=a.dom,i=h.getRoot(),j=0;if(!sm(a,b,c)&&Gi.isElement(b)){if(!1===c&&(j=b.offsetHeight),"BODY"!==i.nodeName){var k=a.selection.getScrollContainer();if(k)return d=rm(b).y-rm(k).y+j,g=k.clientHeight,f=k.scrollTop,void((d<f||d+25>f+g)&&(k.scrollTop=d<f?d:d-g+25))}e=h.getViewPort(a.getWin()),d=h.getPos(b).y+j,f=e.y,g=e.h,(d<e.y||d+25>f+g)&&a.getWin().scrollTo(0,d<f?d:d-g+25)}},um=function(a){if(a.inline)return a.getBody().getBoundingClientRect();var b=a.getWin();return{left:0,right:b.innerWidth,top:0,bottom:b.innerHeight,width:b.innerWidth,height:b.innerHeight}},vm=function(a,b,c){a.inline?(a.getBody().scrollLeft+=b,a.getBody().scrollTop+=c):a.getWin().scrollBy(b,c)},wm=function(a,b){sb.head(A.fromRangeStart(b).getClientRects()).each(function(b){var c=um(a),d=pk(c,b),e=4,f=d.x>0?d.x+e:d.x-e,g=d.y>0?d.y+e:d.y-e;vm(a,0!==d.x?f:0,0!==d.y?g:0)})},xm={scrollElementIntoView:tm,scrollRangeIntoView:wm},ym=function(a,b,c){var d=a.getParam(b,c);if(-1!==d.indexOf("=")){var e=a.getParam(b,"","hash");return e.hasOwnProperty(a.id)?e[a.id]:c}return d},zm=function(a){return a.getParam("iframe_attrs",{})},Am=function(a){return a.getParam("doctype","<!DOCTYPE html>")},Bm=function(a){return a.getParam("document_base_url","")},Cm=function(a){return ym(a,"body_id","tinymce")},Dm=function(a){return ym(a,"body_class","")},Em=function(a){return a.getParam("content_security_policy","")},Fm=function(a){return a.getParam("br_in_pre",!0)},Gm=function(a){if(a.getParam("force_p_newlines",!1))return"p";var b=a.getParam("forced_root_block","p");return!1===b?"":b},Hm=function(a){return a.getParam("forced_root_block_attrs",{})},Im=function(a){return a.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},Jm=function(a){return a.getParam("no_newline_selector","")},Km=function(a){return a.getParam("keep_styles",!0)},Lm=function(a){return a.getParam("end_container_on_empty_block",!1)},Mm=function(a){return Gd.explode(a.getParam("font_size_style_values",""))},Nm=function(a){return Gd.explode(a.getParam("font_size_classes",""))},Om={getIframeAttrs:zm,getDocType:Am,getDocumentBaseUrl:Bm,getBodyId:Cm,getBodyClass:Dm,getContentSecurityPolicy:Em,shouldPutBrInPre:Fm,getForcedRootBlock:Gm,getForcedRootBlockAttrs:Hm,getBrNewLineSelector:Im,getNoNewLineSelector:Jm,shouldKeepStyles:Km,shouldEndContainerOnEmptyBlock:Lm,getFontStyleValues:Mm,getFontSizeClasses:Nm},Pm=function(a,b){Bh.parent(a).each(function(c){c.dom().insertBefore(b.dom(),a.dom())})},Qm=function(a,b){Bh.nextSibling(a).fold(function(){Bh.parent(a).each(function(a){Sm(a,b)})},function(a){Pm(a,b)})},Rm=function(a,b){Bh.firstChild(a).fold(function(){Sm(a,b)},function(c){a.dom().insertBefore(b.dom(),c.dom())})},Sm=function(a,b){a.dom().appendChild(b.dom())},Tm=function(a,b,c){Bh.child(a,c).fold(function(){Sm(a,b)},function(a){Pm(a,b)})},Um=function(a,b){Pm(a,b),Sm(b,a)},Vm={before:Pm,after:Qm,prepend:Rm,append:Sm,appendAt:Tm,wrap:Um},Wm=yf.detect().browser,Xm=function(){return Wm.isIE()||Wm.isEdge()||Wm.isFirefox()},Ym=function(a,b){a.selection.setRng(b),xm.scrollRangeIntoView(a,b)},Zm=function(a,b,c){var d=a(b,c);return d.breakType===_k.Wrap&&0===d.positions.length?d.breakAt.map(function(c){return a(b,c).breakAt.isNone()}).getOr(!0):d.breakAt.isNone()},$m=Ck.curry(Zm,Pl),_m=Ck.curry(Zm,Ql),an=function(a,b,c){var d=al.fromRangeStart(b);return zl.positionIn(!a,c).map(function(a){return a.isEqual(d)}).getOr(!1)},bn=function(a,b,c,d){var e=a.selection.getRng(),f=b?1:-1;if(Xm()&&an(b,e,c)){var g=Cl(f,a,c,!b,!0);return Ym(a,g),!0}return!1},cn=function(a,b,c){return pm(b,c).orThunk(function(){return sb.head(c.getClientRects()).bind(function(c){return Nl(Rl(a,al.before(b)),c.left)})}).getOr(al.before(b))},dn=function(a,b,c){return qm(b,c).orThunk(function(){return sb.head(c.getClientRects()).bind(function(c){return Nl(Sl(a,al.after(b)),c.left)})}).getOr(al.after(b))},en=function(a,b){var c=b.getNode(a);return Gi.isElement(c)&&"TABLE"===c.nodeName?La.some(c):La.none()},fn=function(a,b,c,d){var e=Om.getForcedRootBlock(b);e?b.undoManager.transact(function(){var d=Ef.fromTag(e);hg.setAll(d,Om.getForcedRootBlockAttrs(b)),Vm.append(d,Ef.fromTag("br")),a?Vm.after(Ef.fromDom(c),d):Vm.before(Ef.fromDom(c),d);var f=b.dom.createRng();f.setStart(d.dom(),0),f.setEnd(d.dom(),0),Ym(b,f)}):Ym(b,d.toRange())},gn=function(a,b,c){var d=!1===b;(b?en(!0,c):en(!1,c)).fold(function(){return Ym(a,c.toRange())},function(e){return zl.positionIn(d,a.getBody()).filter(function(a){return a.isEqual(c)}).fold(function(){return Ym(a,c.toRange())},function(d){return fn(b,a,e,c)})})},hn=function(a,b,c,d){var e=a.selection.getRng(),f=al.fromRangeStart(e),g=a.getBody();if(!b&&$m(d,f)){var h=cn(g,c,f);return gn(a,b,h),!0}if(b&&_m(d,f)){var h=dn(g,c,f);return gn(a,b,h),!0}return!1},jn=function(a,b){return function(){return La.from(a.dom.getParent(a.selection.getNode(),"td,th")).bind(function(c){return La.from(a.dom.getParent(c,"table")).map(function(d){return bn(a,b,d,c)})}).getOr(!1)}},kn=function(a,b){return function(){return La.from(a.dom.getParent(a.selection.getNode(),"td,th")).bind(function(c){return La.from(a.dom.getParent(c,"table")).map(function(d){return hn(a,b,d,c)})}).getOr(!1)}},ln=function(a){var b=a,c=function(){return b};return{get:c,set:function(a){b=a},clone:function(){return ln(c())}}},mn=Gi.isContentEditableFalse,nn=function(a){return Gi.isElement(a)&&/^(TD|TH)$/i.test(a.tagName)},on=function(a,b,c){var d,e,f,g,h,i=hk(b.getBoundingClientRect(),c);return"BODY"===a.tagName?(d=a.ownerDocument.documentElement,e=a.scrollLeft||d.scrollLeft,f=a.scrollTop||d.scrollTop):(h=a.getBoundingClientRect(),e=a.scrollLeft-h.left,f=a.scrollTop-h.top),i.left+=e,i.right+=e,i.top+=f,i.bottom+=f,i.width=1,g=b.offsetWidth-b.clientWidth,g>0&&(c&&(g*=-1),i.left+=g,i.right+=g),i},pn=function(a){var b,c,d,e,f;for(b=$d("*[contentEditable=false]",a),e=0;e<b.length;e++)c=b[e],d=c.previousSibling,Oj(d)&&(f=d.data,1===f.length?d.parentNode.removeChild(d):d.deleteData(f.length-1,1)),d=c.nextSibling,Nj(d)&&(f=d.data,1===f.length?d.parentNode.removeChild(d):d.deleteData(0,1))},qn=function(a,b,c){var d,e,f=ln(La.none()),g=function(c,d){var g,j;if(h(),nn(d))return null;if(!b(d))return e=Ij(d,c),j=d.ownerDocument.createRange(),mn(e.nextSibling)?(j.setStart(e,0),j.setEnd(e,0)):(j.setStart(e,1),j.setEnd(e,1)),j;e=Mj("p",d,c),g=on(a,d,c),$d(e).css("top",g.top);var k=$d('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(g).appendTo(a)[0];return f.set(La.some({caret:k,element:d,before:c})),f.get().each(function(a){c&&$d(a.caret).addClass("mce-visual-caret-before")}),i(),j=d.ownerDocument.createRange(),j.setStart(e,0),j.setEnd(e,0),j},h=function(){pn(a),e&&(ol.remove(e),e=null),f.get().each(function(a){$d(a.caret).remove(),f.set(La.none())}),clearInterval(d)},i=function(){d=Vb.setInterval(function(){c()?$d("div.mce-visual-caret",a).toggleClass("mce-visual-caret-hidden"):$d("div.mce-visual-caret",a).addClass("mce-visual-caret-hidden")},500)},j=function(){f.get().each(function(b){var c=on(a,b.element,b.before);$d(b.caret).css(c)})},k=function(){return Vb.clearInterval(d)};return{show:g,hide:h,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:j,destroy:k}},rn=function(a){return mn(a)||Gi.isTable(a)&&Xm()},sn=Gi.isContentEditableFalse,tn=Gi.matchStyleValues("display","block table table-cell table-caption list-item"),un=Gj,vn=Ej,wn=Ck.curry,xn=Gi.isElement,yn=$j,zn=function(a){return a>0},An=function(a){return a<0},Bn=function(a,b){for(var c;c=a(b);)if(!vn(c))return c;return null},Cn=function(a,b,c,d,e){var f=new v(a,d);if(An(b)){if((sn(a)||vn(a))&&(a=Bn(f.prev,!0),c(a)))return a;for(;a=Bn(f.prev,e);)if(c(a))return a}if(zn(b)){if((sn(a)||vn(a))&&(a=Bn(f.next,!0),c(a)))return a;for(;a=Bn(f.next,e);)if(c(a))return a}return null},Dn=function(a,b){for(;a&&a!==b;){if(tn(a))return a;a=a.parentNode}return null},En=function(a,b,c){return Dn(a.container(),c)===Dn(b.container(),c)},Fn=function(a,b){var c,d;return b?(c=b.container(),d=b.offset(),xn(c)?c.childNodes[d+a]:null):null},Gn=function(a,b){var c=b.ownerDocument.createRange();return a?(c.setStartBefore(b),c.setEndBefore(b)):(c.setStartAfter(b),c.setEndAfter(b)),c},Hn=function(a,b,c){return Dn(b,a)===Dn(c,a)},In=function(a,b,c){var d,e;for(e=a?"previousSibling":"nextSibling";c&&c!==b;){if(d=c[e],un(d)&&(d=d[e]),sn(d)){if(Hn(b,d,c))return d;break}if(yn(d))break;c=c.parentNode}return null},Jn=wn(Gn,!0),Kn=wn(Gn,!1),Ln=function(a,b,c){var d,e,f,g,h=wn(In,!0,b),i=wn(In,!1,b);if(e=c.startContainer,f=c.startOffset,Ej(e)){if(xn(e)||(e=e.parentNode),"before"===(g=e.getAttribute("data-mce-caret"))&&(d=e.nextSibling,rn(d)))return Jn(d);if("after"===g&&(d=e.previousSibling,rn(d)))return Kn(d)}if(!c.collapsed)return c;if(Gi.isText(e)){if(un(e)){if(1===a){if(d=i(e))return Jn(d);if(d=h(e))return Kn(d)}if(-1===a){if(d=h(e))return Kn(d);if(d=i(e))return Jn(d)}return c}if(Oj(e)&&f>=e.data.length-1)return 1===a&&(d=i(e))?Jn(d):c;if(Nj(e)&&f<=1)return-1===a&&(d=h(e))?Kn(d):c;if(f===e.data.length)return d=i(e),d?Jn(d):c;if(0===f)return d=h(e),d?Kn(d):c}return c},Mn=function(a,b){var c=Fn(a,b);return sn(c)&&!Gi.isBogusAll(c)},Nn=function(a,b){return Gi.isTable(Fn(a,b))},On=function(a,b){return La.from(Fn(a?0:-1,b)).filter(sn)},Pn=function(a,b,c){var d=Ln(a,b,c);return-1===a?A.fromRangeStart(d):A.fromRangeEnd(d)},Qn=wn(Mn,0),Rn=wn(Mn,-1),Sn=wn(Nn,0),Tn=wn(Nn,-1);!function(a){a[a.Backwards=-1]="Backwards",a[a.Forwards=1]="Forwards"}(Hl||(Hl={}));var Un=Gi.isContentEditableFalse,Vn=Gi.isText,Wn=Gi.isElement,Xn=Gi.isBr,Yn=$j,Zn=dk,$n=ek,_n=function(a,b){for(var c=[];a&&a!==b;)c.push(a),a=a.parentNode;return c},ao=function(a,b){return a.hasChildNodes()&&b<a.childNodes.length?a.childNodes[b]:null},bo=function(a,b){if(zn(a)){if(Yn(b.previousSibling)&&!Vn(b.previousSibling))return al.before(b);if(Vn(b))return al(b,0)}if(An(a)){if(Yn(b.nextSibling)&&!Vn(b.nextSibling))return al.after(b);if(Vn(b))return al(b,b.data.length)}return An(a)?Xn(b)?al.before(b):al.after(b):al.before(b)},co=function(a,b){var c;return!!Gi.isBr(a)&&(!!(c=eo(1,al.after(a),b))&&!En(al.before(a),al.before(c),b))},eo=function(a,b,c){var d,e,f,g,h;if(!Wn(c)||!b)return null;if(b.isEqual(al.after(c))&&c.lastChild){if(h=al.after(c.lastChild),An(a)&&Yn(c.lastChild)&&Wn(c.lastChild))return Xn(c.lastChild)?al.before(c.lastChild):h}else h=b;var i=h.container(),j=h.offset();if(Vn(i)){if(An(a)&&j>0)return al(i,--j);if(zn(a)&&j<i.length)return al(i,++j);d=i}else{if(An(a)&&j>0&&(e=ao(i,j-1),Yn(e)))return!Zn(e)&&(f=Cn(e,a,$n,e))?Vn(f)?al(f,f.data.length):al.after(f):Vn(e)?al(e,e.data.length):al.before(e);if(zn(a)&&j<i.childNodes.length&&(e=ao(i,j),Yn(e)))return Xn(e)&&c.lastChild===e?null:co(e,c)?eo(a,al.after(e),c):!Zn(e)&&(f=Cn(e,a,$n,e))?Vn(f)?al(f,0):al.before(f):Vn(e)?al(e,0):al.after(e);d=e||h.getNode()}return(zn(a)&&h.isAtEnd()||An(a)&&h.isAtStart())&&(d=Cn(d,a,Ck.constant(!0),c,!0),$n(d,c))?bo(a,d):(e=Cn(d,a,$n,c),g=td.last(td.filter(_n(i,c),Un)),!g||e&&g.contains(e)?e?bo(a,e):null:h=zn(a)?al.after(g):al.before(g))},fo=function(a){return{next:function(b){return eo(Hl.Forwards,b,a)},prev:function(b){return eo(Hl.Backwards,b,a)}}},go=function(a){return a.firstChild&&a.firstChild===a.lastChild},ho=function(a){return"br"===a.name||""===a.value},io=function(a,b){return a.getBlockElements()[b.name]&&go(b)&&ho(b.firstChild)},jo=function(a,b){var c=a.getNonEmptyElements();return b&&(b.isEmpty(c)||io(a,b))},ko=function(a,b){var c=b.firstChild,d=b.lastChild;return c&&"meta"===c.name&&(c=c.next),d&&"mce_marker"===d.attr("id")&&(d=d.prev),jo(a,d)&&(d=d.prev),!(!c||c!==d)&&("ul"===c.name||"ol"===c.name)},lo=function(a){var b=a.firstChild,c=a.lastChild;return b&&"META"===b.nodeName&&b.parentNode.removeChild(b),c&&"mce_marker"===c.id&&c.parentNode.removeChild(c),a},mo=function(a,b,c){var d=b.serialize(c),e=a.createFragment(d);return lo(e)},no=function(a){return Gd.grep(a.childNodes,function(a){return"LI"===a.nodeName})},oo=function(a){return""===a.data||Gi.isBr(a)},po=function(a){return a&&a.firstChild&&a.firstChild===a.lastChild&&oo(a.firstChild)},qo=function(a){return!a.firstChild||po(a)},ro=function(a){return a.length>0&&qo(a[a.length-1])?a.slice(0,-1):a},so=function(a,b){var c=a.getParent(b,a.isBlock);return c&&"LI"===c.nodeName?c:null},to=function(a,b){return!!so(a,b)},uo=function(a,b){var c=b.cloneRange(),d=b.cloneRange();return c.setStartBefore(a),d.setEndAfter(a),[c.cloneContents(),d.cloneContents()]},vo=function(a,b){var c=al.before(a),d=fo(b),e=d.next(c);return e?e.toRange():null},wo=function(a,b){var c=al.after(a),d=fo(b),e=d.prev(c);return e?e.toRange():null},xo=function(a,b,c,d){var e=uo(a,d),f=a.parentNode;return f.insertBefore(e[0],a),Gd.each(b,function(b){f.insertBefore(b,a)}),f.insertBefore(e[1],a),f.removeChild(a),wo(b[b.length-1],c)},yo=function(a,b,c){var d=a.parentNode;return Gd.each(b,function(b){d.insertBefore(b,a)}),vo(a,c)},zo=function(a,b,c,d){return d.insertAfter(b.reverse(),a),wo(b[0],c)},Ao=function(a,b,c,d){var e=mo(b,a,d),f=so(b,c.startContainer),g=ro(no(e.firstChild)),h=1,i=b.getRoot(),j=function(a){var d=al.fromRangeStart(c),e=fo(b.getRoot()),g=a===h?e.prev(d):e.next(d);return!g||so(b,g.getNode())!==f};return j(h)?yo(f,g,i):j(2)?zo(f,g,i,b):xo(f,g,i,c)},Bo={isListFragment:ko,insertAtCaret:Ao,isParentBlockLi:to,trimListItems:ro,listItems:no},Co=Gi.isText,Do=Gi.isBogus,Eo=rj.nodeIndex,Fo=function(a){var b=a.parentNode;return Do(b)?Fo(b):b},Go=function(a){return a?td.reduce(a.childNodes,function(a,b){return Do(b)&&"BR"!==b.nodeName?a=a.concat(Go(b)):a.push(b),a},[]):[]},Ho=function(a,b){for(;(a=a.previousSibling)&&Co(a);)b+=a.data.length;return b},Io=function(a){return function(b){return a===b}},Jo=function(a){var b,c,d;return b=Go(Fo(a)),c=td.findIndex(b,Io(a),a),b=b.slice(0,c+1),d=td.reduce(b,function(a,c,d){return Co(c)&&Co(b[d-1])&&a++,a},0),b=td.filter(b,Gi.matchNodeNames(a.nodeName)),(c=td.findIndex(b,Io(a),a))-d},Ko=function(a){return(Co(a)?"text()":a.nodeName.toLowerCase())+"["+Jo(a)+"]"},Lo=function(a,b,c){var d=[];for(b=b.parentNode;b!==a&&(!c||!c(b));b=b.parentNode)d.push(b);return d},Mo=function(a,b){var c,d,e,f,g,h=[];return c=b.container(),d=b.offset(),Co(c)?e=Ho(c,d):(f=c.childNodes,d>=f.length?(e="after",d=f.length-1):e="before",c=f[d]),h.push(Ko(c)),g=Lo(a,c),g=td.filter(g,Ck.negate(Gi.isBogus)),h=h.concat(td.map(g,function(a){return Ko(a)})),h.reverse().join("/")+","+e},No=function(a,b,c){var d=Go(a);return d=td.filter(d,function(a,b){return!Co(a)||!Co(d[b-1])}),d=td.filter(d,Gi.matchNodeNames(b)),d[c]},Oo=function(a,b){for(var c,d=a,e=0;Co(d);){if(c=d.data.length,b>=e&&b<=e+c){a=d,b-=e;break}if(!Co(d.nextSibling)){a=d,b=c;break}e+=c,d=d.nextSibling}return Co(a)&&b>a.data.length&&(b=a.data.length),al(a,b)},Po=function(a,b){var c,d,e;return b?(c=b.split(","),b=c[0].split("/"),e=c.length>1?c[1]:"before",d=td.reduce(b,function(a,b){return(b=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b))?("text()"===b[1]&&(b[1]="#text"),No(a,b[1],parseInt(b[2],10))):null},a),d?Co(d)?Oo(d,parseInt(e,10)):(e="after"===e?Eo(d)+1:Eo(d),al(d.parentNode,e)):null):null},Qo=Gi.isContentEditableFalse,Ro=function(a,b,c){var d,e;for(e=a(b.data.slice(0,c)).length,d=b.previousSibling;d&&Gi.isText(d);d=d.previousSibling)e+=a(d.data).length;return e},So=function(a,b,c,d,e){var f,g=d[e?"startContainer":"endContainer"],h=d[e?"startOffset":"endOffset"],i=[],j=0,k=a.getRoot();for(Gi.isText(g)?i.push(c?Ro(b,g,h):h):(f=g.childNodes,h>=f.length&&f.length&&(j=1,h=Math.max(0,f.length-1)),i.push(a.nodeIndex(f[h],c)+j));g&&g!==k;g=g.parentNode)i.push(a.nodeIndex(g,c));return i},To=function(a,b,c,d){var e=b.dom,f={};return f.start=So(e,a,c,d,!0),b.isCollapsed()||(f.end=So(e,a,c,d,!1)),f},Uo=function(a){Gi.isText(a)&&0===a.data.length&&a.parentNode.removeChild(a)},Vo=function(a,b,c){var d=0;return Gd.each(a.select(b),function(a){if("all"!==a.getAttribute("data-mce-bogus"))return a!==c&&void d++}),d},Wo=function(a,b){var c,d,e,f=b?"start":"end";c=a[f+"Container"],d=a[f+"Offset"],Gi.isElement(c)&&"TR"===c.nodeName&&(e=c.childNodes,(c=e[Math.min(b?d:d-1,e.length-1)])&&(d=b?0:c.childNodes.length,a["set"+(b?"Start":"End")](c,d)))},Xo=function(a){return Wo(a,!0),Wo(a,!1),a},Yo=function(a,b){var c;if(Gi.isElement(a)&&(a=rk(a,b),Qo(a)))return a;if(Gj(a)){if(Gi.isText(a)&&Ej(a)&&(a=a.parentNode),c=a.previousSibling,Qo(c))return c;if(c=a.nextSibling,Qo(c))return c}},Zo=function(a){return Yo(a.startContainer,a.startOffset)||Yo(a.endContainer,a.endOffset)},$o=function(a,b,c){var d=c.getNode(),e=d?d.nodeName:null,f=c.getRng();if(Qo(d)||"IMG"===e)return{name:e,index:Vo(c.dom,e,d)};var g=Zo(f);return g?(e=g.tagName,{name:e,index:Vo(c.dom,e,g)}):To(a,c,b,f)},_o=function(a){var b=a.getRng();return{start:Mo(a.dom.getRoot(),al.fromRangeStart(b)),end:Mo(a.dom.getRoot(),al.fromRangeEnd(b))}},ap=function(a){return{rng:a.getRng()}},bp=function(a,b,c){var d={"data-mce-type":"bookmark",id:b,style:"overflow:hidden;line-height:0px"};return c?a.create("span",d,"&#xFEFF;"):a.create("span",d)},cp=function(a,b){var c=a.dom,d=a.getRng(),e=c.uniqueId(),f=a.isCollapsed(),g=a.getNode(),h=g.nodeName;if("IMG"===h)return{name:h,index:Vo(c,h,g)};var i=Xo(d.cloneRange());if(!f){i.collapse(!1);var j=bp(c,e+"_end",b);i.insertNode(j),Uo(j.nextSibling)}d=Xo(d),d.collapse(!0);var k=bp(c,e+"_start",b);return d.insertNode(k),Uo(k.previousSibling),a.moveToBookmark({id:e,keep:1}),{id:e}},dp=function(a,b,c){return 2===b?$o(Bj.trim,c,a):3===b?_o(a):b?ap(a):cp(a,!1)},ep={getBookmark:dp,getUndoBookmark:Ea.curry($o,Ea.identity,!0),getPersistentBookmark:cp},fp="_mce_caret",gp=function(a){return Gi.isElement(a)&&a.id===fp},hp=function(a,b){for(;b&&b!==a;){if(b.id===fp)return b;b=b.parentNode}return null},ip=function(a){return"string"==typeof a.start},jp=function(a){return a.hasOwnProperty("rng")},kp=function(a){return a.hasOwnProperty("id")},lp=function(a){return a.hasOwnProperty("name")},mp=function(a){return Gd.isArray(a.start)},np=function(a,b){return!a.isBlock(b)||b.innerHTML||Mb.ie||(b.innerHTML='<br data-mce-bogus="1" />'),b},op=function(a,b){var c,d;return c=a.createRng(),d=Po(a.getRoot(),b.start),c.setStart(d.container(),d.offset()),d=Po(a.getRoot(),b.end),c.setEnd(d.container(),d.offset()),c},pp=function(a,b){var c=a.ownerDocument.createTextNode(Bj.ZWSP);a.appendChild(c),b.setStart(c,0),b.setEnd(c,0)},qp=function(a){return!1===a.hasChildNodes()},rp=function(a,b){return zl.lastPositionIn(a).fold(function(){return!1},function(a){return b.setStart(a.container(),a.offset()),b.setEnd(a.container(),a.offset()),!0})},sp=function(a,b,c){return!(!qp(b)||!hp(a,b))&&(pp(b,c),!0)},tp=function(a,b,c,d){var e,f,g,h,i=c[b?"start":"end"],j=a.getRoot();if(i){for(g=i[0],f=j,e=i.length-1;e>=1;e--){if(h=f.childNodes,sp(j,f,d))return!0;if(i[e]>h.length-1)return!!sp(j,f,d)||rp(f,d);f=h[i[e]]}3===f.nodeType&&(g=Math.min(i[0],f.nodeValue.length)),1===f.nodeType&&(g=Math.min(i[0],f.childNodes.length)),b?d.setStart(f,g):d.setEnd(f,g)}return!0},up=function(a){return Gi.isText(a)&&a.data.length>0},vp=function(a,b,c){var d,e,f,g,h,i,j=a.get(c.id+"_"+b),k=c.keep;if(j){if(d=j.parentNode,"start"===b?(k?j.hasChildNodes()?(d=j.firstChild,e=1):up(j.nextSibling)?(d=j.nextSibling,e=0):up(j.previousSibling)?(d=j.previousSibling,e=j.previousSibling.data.length):(d=j.parentNode,e=a.nodeIndex(j)+1):e=a.nodeIndex(j),h=d,i=e):(k?j.hasChildNodes()?(d=j.firstChild,e=1):up(j.previousSibling)?(d=j.previousSibling,e=j.previousSibling.data.length):(d=j.parentNode,e=a.nodeIndex(j)):e=a.nodeIndex(j),h=d,i=e),!k){for(g=j.previousSibling,f=j.nextSibling,Gd.each(Gd.grep(j.childNodes),function(a){Gi.isText(a)&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});j=a.get(c.id+"_"+b);)a.remove(j,!0);g&&f&&g.nodeType===f.nodeType&&Gi.isText(g)&&!Mb.opera&&(e=g.nodeValue.length,g.appendData(f.nodeValue),a.remove(f),h=g,i=e)}return La.some(al(h,i))}return La.none()},wp=function(a,b){return a.isSome()?a:b},xp=function(a,b){var c=a.createRng();return tp(a,!0,b,c)&&tp(a,!1,b,c)?La.some(c):La.none()},yp=function(a,b){var c=vp(a,"start",b),d=vp(a,"end",b);return Gk.liftN([c,wp(d,c)],function(b,c){var d=a.createRng();return d.setStart(np(a,b.container()),b.offset()),d.setEnd(np(a,c.container()),c.offset()),d})},zp=function(a,b){return La.from(a.select(b.name)[b.index]).map(function(b){var c=a.createRng();return c.selectNode(b),c})},Ap=function(a,b){var c=a.dom;if(b){if(mp(b))return xp(c,b);if(ip(b))return La.some(op(c,b));if(kp(b))return yp(c,b);if(lp(b))return zp(c,b);if(jp(b))return La.some(b.rng)}return La.none()},Bp={resolve:Ap},Cp=function(a,b,c){return ep.getBookmark(a,b,c)},Dp=function(a,b){Bp.resolve(a,b).each(function(b){a.setRng(b)})},Ep=function(a){return Gi.isElement(a)&&"SPAN"===a.tagName&&"bookmark"===a.getAttribute("data-mce-type")},Fp={getBookmark:Cp,moveToBookmark:Dp,isBookmarkNode:Ep},Gp=Gd.each,Hp=function(a){this.compare=function(b,c){if(b.nodeName!==c.nodeName)return!1;var d=function(b){var c={};return Gp(a.getAttribs(b),function(d){var e=d.nodeName.toLowerCase();0!==e.indexOf("_")&&"style"!==e&&0!==e.indexOf("data-")&&(c[e]=a.getAttrib(b,e))}),c},e=function(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){if(void 0===(c=b[d]))return!1;if(a[d]!==c)return!1;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return!1;return!0};return!!e(d(b),d(c))&&(!!e(a.parseStyle(a.getAttrib(b,"style")),a.parseStyle(a.getAttrib(c,"style")))&&(!Fp.isBookmarkNode(b)&&!Fp.isBookmarkNode(c)))}},Ip=function(a,b){sb.each(b,function(b){Vm.before(a,b)})},Jp=function(a,b){sb.each(b,function(c,d){var e=0===d?a:b[d-1];Vm.after(e,c)})},Kp=function(a,b){sb.each(b.slice().reverse(),function(b){Vm.prepend(a,b)})},Lp=function(a,b){sb.each(b,function(b){Vm.append(a,b)})},Mp={before:Ip,after:Jp,prepend:Kp,append:Lp},Np=function(a){a.dom().textContent="",sb.each(Bh.children(a),function(a){Op(a)})},Op=function(a){var b=a.dom();null!==b.parentNode&&b.parentNode.removeChild(b)},Pp=function(a){var b=Bh.children(a);b.length>0&&Mp.before(a,b),Op(a)},Qp={empty:Np,remove:Op,unwrap:Pp},Rp=B(Of.isText,"text"),Sp=function(a){return Rp.get(a)},Tp=function(a){return Rp.getOption(a)},Up=function(a,b){Rp.set(a,b)},Vp={get:Sp,getOption:Tp,set:Up},Wp=function(a){for(var b=[],c=a.dom();c;)b.push(Ef.fromDom(c)),c=c.lastChild;return b},Xp=function(a){var b=em.descendants(a,"br"),c=sb.filter(Wp(a).slice(-1),ii);b.length===c.length&&sb.each(c,Qp.remove)},Yp=function(a){Qp.empty(a),Vm.append(a,Ef.fromHtml('<br data-mce-bogus="1">'))},Zp=function(a){return Of.isText(a)?""===Vp.get(a):ii(a)},$p=function(a){return 1===sb.filter(Bh.children(a),Zp).length},_p=function(a){Bh.lastChild(a).each(function(b){Bh.prevSibling(b).each(function(c){gi(a)&&ii(b)&&gi(c)&&Qp.remove(b)})})},aq={removeTrailingBr:Xp,fillWithPaddingBr:Yp,isPaddedElement:$p,trimBlockTrailingBr:_p},bq=Gd.makeMap,cq=function(a,b,c,d){var e=document.createRange();return e.setStart(a,b),e.setEnd(c,d),e},dq=function(a){var b=al.fromRangeStart(a),c=al.fromRangeEnd(a),d=a.commonAncestorContainer;return zl.fromPosition(!1,d,c).map(function(e){return!En(b,c,d)&&En(b,e,d)?cq(b.container(),b.offset(),e.container(),e.offset()):a}).getOr(a)},eq=function(a){return a.collapsed?a:dq(a)},fq={normalize:eq},gq=Gi.matchNodeNames("td th"),hq=function(a,b,c){if("all"===c.getAttribute("data-mce-bogus"))c.parentNode.insertBefore(a.dom.createFragment(b),c);else{var d=c.firstChild,e=c.lastChild;!d||d===e&&"BR"===d.nodeName?a.dom.setHTML(c,b):a.selection.setContent(b)}},iq=function(a,b){La.from(a.getParent(b,"td,th")).map(Ef.fromDom).each(aq.trimBlockTrailingBr)},jq=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=a.schema.getTextInlineElements(),q=a.selection,r=a.dom,s=function(a){var b,c,d;b=q.getRng(),c=b.startContainer,d=b.startOffset;var e=function(a){return c[a]&&3===c[a].nodeType};return 3===c.nodeType&&(d>0?a=a.replace(/^&nbsp;/," "):e("previousSibling")||(a=a.replace(/^ /,"&nbsp;")),d<c.length?a=a.replace(/&nbsp;(<br>|)$/," "):e("nextSibling")||(a=a.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),a},t=function(){var a,c,d;a=q.getRng(),c=a.startContainer,d=a.startOffset,3===c.nodeType&&a.collapsed&&(""===c.data[d]?(c.deleteData(d,1),/[\u00a0| ]$/.test(b)||(b+=" ")):""===c.data[d-1]&&(c.deleteData(d-1,1),/[\u00a0| ]$/.test(b)||(b=" "+b)))},u=function(){if(o){var b=a.getBody(),c=new Hp(r);Gd.each(r.select("*[data-mce-fragment]"),function(a){for(var d=a.parentNode;d&&d!==b;d=d.parentNode)p[a.nodeName.toLowerCase()]&&c.compare(d,a)&&r.remove(a,!0)})}},v=function(a){for(var b=a;b=b.walk();)1===b.type&&b.attr("data-mce-fragment","1")},w=function(a){Gd.each(a.getElementsByTagName("*"),function(a){a.removeAttribute("data-mce-fragment")})},x=function(a){return!!a.getAttribute("data-mce-fragment")},y=function(b){return b&&!a.schema.getShortEndedElements()[b.nodeName]},z=function(b){var c,d,e,f=function(b){for(var c=a.getBody();b&&b!==c;b=b.parentNode)if("false"===a.dom.getContentEditable(b))return b;return null};if(b){if(q.scrollIntoView(b),c=f(b))return r.remove(b),void q.select(c);k=r.createRng(),l=b.previousSibling,l&&3===l.nodeType?(k.setStart(l,l.nodeValue.length),Mb.ie||(m=b.nextSibling)&&3===m.nodeType&&(l.appendData(m.data),m.parentNode.removeChild(m))):(k.setStartBefore(b),k.setEndBefore(b));var g=function(b){var c=al.fromRangeStart(b);if(c=fo(a.getBody()).next(c))return c.toRange()};d=r.getParent(b,r.isBlock),r.remove(b),d&&r.isEmpty(d)&&(a.$(d).empty(),k.setStart(d,0),k.setEnd(d,0),gq(d)||x(d)||!(e=g(k))?r.add(d,r.create("br",{"data-mce-bogus":"1"})):(k=e,r.remove(d))),q.setRng(k)}};if(/^ | $/.test(b)&&(b=s(b)),d=a.parser,o=c.merge,e=D({validate:a.settings.validate},a.schema),n='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',i={content:b,format:"html",selection:!0,paste:c.paste},i=a.fire("BeforeSetContent",i),i.isDefaultPrevented())return void a.fire("SetContent",{content:i.content,format:"html",selection:!0,paste:c.paste});b=i.content,-1===b.indexOf("{$caret}")&&(b+="{$caret}"),b=b.replace(/\{\$caret\}/,n),k=q.getRng();var A=k.startContainer||(k.parentElement?k.parentElement():null),B=a.getBody();A===B&&q.isCollapsed()&&r.isBlock(B.firstChild)&&y(B.firstChild)&&r.isEmpty(B.firstChild)&&(k=r.createRng(),k.setStart(B.firstChild,0),k.setEnd(B.firstChild,0),q.setRng(k)),q.isCollapsed()||(a.selection.setRng(fq.normalize(a.selection.getRng())),a.getDoc().execCommand("Delete",!1,null),t()),f=q.getNode();var C={context:f.nodeName.toLowerCase(),data:c.data,insert:!0};if(h=d.parse(b,C),!0===c.paste&&Bo.isListFragment(a.schema,h)&&Bo.isParentBlockLi(r,f))return k=Bo.insertAtCaret(e,r,a.selection.getRng(),h),a.selection.setRng(k),void a.fire("SetContent",i);if(v(h),l=h.lastChild,"mce_marker"===l.attr("id"))for(j=l,l=l.prev;l;l=l.walk(!0))if(3===l.type||!r.isBlock(l.name)){a.schema.isValidChild(l.parent.name,"span")&&l.parent.insert(j,l,"br"===l.name);break}if(a._selectionOverrides.showBlockCaretContainer(f),C.invalid){for(q.setContent(n),f=q.getNode(),g=a.getBody(),9===f.nodeType?f=l=g:l=f;l!==g;)f=l,l=l.parentNode;b=f===g?g.innerHTML:r.getOuterHTML(f),b=e.serialize(d.parse(b.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return e.serialize(h)}))),f===g?r.setHTML(g,b):r.setOuterHTML(f,b)}else b=e.serialize(h),hq(a,b,f);u(),z(r.get("mce_marker")),w(a.getBody()),iq(a.dom,a.selection.getStart()),a.fire("SetContent",i),a.addVisual()},kq=function(a){var b;return"string"!=typeof a?(b=Gd.extend({paste:a.paste,data:{paste:a.paste}},a),{content:a.content,details:b}):{content:a,details:{}}},lq=function(a,b){var c=kq(b);jq(a,c.content,c.details)},mq={insertAtCaret:lq},nq=function(a){return sq(lg.body(),a)},oq=function(a,b,c){for(var d=a.dom(),e=Oa.isFunction(c)?c:Ea.constant(!1);d.parentNode;){d=d.parentNode;var f=Ef.fromDom(d);if(b(f))return La.some(f);if(e(f))break}return La.none()},pq=function(a,b,c){return E(function(a){return b(a)},oq,a,b,c)},qq=function(a,b){var c=a.dom();return c.parentNode?rq(Ef.fromDom(c.parentNode),function(c){return!gh.eq(a,c)&&b(c)}):La.none()},rq=function(a,b){return sb.find(a.dom().childNodes,Ea.compose(b,Ef.fromDom)).map(Ef.fromDom)},sq=function(a,b){var c=function(a){for(var d=0;d<a.childNodes.length;d++){if(b(Ef.fromDom(a.childNodes[d])))return La.some(Ef.fromDom(a.childNodes[d]));var e=c(a.childNodes[d]);if(e.isSome())return e}return La.none()};return c(a.dom())},tq={first:nq,ancestor:oq,closest:pq,sibling:qq,child:rq,descendant:sq},uq=Mg.immutable("sections","settings"),vq=yf.detect(),wq=vq.deviceType.isTouch(),xq=["lists","autolink","autosave"],yq={theme:"mobile"},zq=function(a){var b=Oa.isArray(a)?a.join(" "):a,c=sb.map(Oa.isString(b)?b.split(" "):[],pf.trim);return sb.filter(c,function(a){return a.length>0})},Aq=function(a){return sb.filter(a,Ea.curry(sb.contains,xq))},Bq=function(a,b){var c=Yf.bifilter(b,function(b,c){return sb.contains(a,c)});return uq(c.t,c.f)},Cq=function(a,b,c){var d=a.sections(),e=d.hasOwnProperty(b)?d[b]:{};return Gd.extend({},c,e)},Dq=function(a,b){return a.sections().hasOwnProperty(b)},Eq=function(a,b,c){return{id:a,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:b,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:c.convertURL,url_converter_scope:c,ie7_compat:!0}},Fq=function(a,b){var c=b.external_plugins?b.external_plugins:{};return a&&a.external_plugins?Gd.extend({},a.external_plugins,c):c},Gq=function(a,b){return[].concat(zq(a)).concat(zq(b))},Hq=function(a,b,c,d){var e=zq(c.forced_plugins),f=zq(d.plugins),g=a&&Dq(b,"mobile")?Aq(f):f,h=Gq(e,g);return Gd.extend(d,{plugins:h.join(" ")})},Iq=function(a,b){var c=b.settings().inline;return a&&Dq(b,"mobile")&&!c},Jq=function(a,b,c,d){var e=Bq(["mobile"],d),f=Gd.extend(b,c,e.settings(),Iq(a,e)?Cq(e,"mobile",yq):{},{validate:!0,content_editable:e.settings().inline,external_plugins:Fq(c,e.settings())});return Hq(a,e,c,f)},Kq=function(a,b,c,d,e){var f=Eq(b,c,a);return Jq(wq,f,d,e)},Lq=function(a,b,c){return La.from(b.settings[c]).filter(a)},Mq=Ea.curry(Lq,Oa.isString),Nq=function(a){var b={};return"string"==typeof a?sb.each(a.indexOf("=")>0?a.split(/[;,](?![^=;,]*(?:[;,]|$))/):a.split(","),function(a){var c=a.split("=");c.length>1?b[Gd.trim(c[0])]=Gd.trim(c[1]):b[Gd.trim(c[0])]=Gd.trim(c)}):b=a,b},Oq=function(a){return function(b){return Oa.isArray(b)&&sb.forall(b,a)}},Pq=function(a,b,c,d){var e=b in a.settings?a.settings[b]:c;return"hash"===d?Nq(e):"string"===d?Lq(Oa.isString,a,b).getOr(c):"number"===d?Lq(Oa.isNumber,a,b).getOr(c):"boolean"===d?Lq(Oa.isBoolean,a,b).getOr(c):"object"===d?Lq(Oa.isObject,a,b).getOr(c):"array"===d?Lq(Oa.isArray,a,b).getOr(c):"string[]"===d?Lq(Oq(Oa.isString),a,b).getOr(c):"function"===d?Lq(Oa.isFunction,a,b).getOr(c):e},Qq=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Rq=function(a){return Qq.test(a)},Sq=function(a,b){var c=Mq(a,"inline_boundaries_selector").getOr("a[href],code");return $g.is(Ef.fromDom(b),c)},Tq=function(a){return"rtl"===rj.DOM.getStyle(a,"direction",!0)||Rq(a.textContent)},Uq=function(a,b,c){return sb.filter(rj.DOM.getParents(c.container(),"*",b),a)},Vq=function(a,b,c){var d=Uq(a,b,c);return La.from(d[d.length-1])},Wq=function(a,b,c){var d=Dn(b,a),e=Dn(c,a);return d&&d===e},Xq=function(a){return Jj(a)||Kj(a)},Yq=function(a,b){var c=b.container(),d=b.offset();return a?Fj(c)?Gi.isText(c.nextSibling)?al(c.nextSibling,0):al.after(c):Jj(b)?al(c,d+1):b:Fj(c)?Gi.isText(c.previousSibling)?al(c.previousSibling,c.previousSibling.data.length):al.before(c):Kj(b)?al(c,d-1):b},Zq=Ea.curry(Yq,!0),$q=Ea.curry(Yq,!1),_q={isInlineTarget:Sq,findRootInline:Vq,isRtl:Tq,isAtZwsp:Xq,normalizePosition:Yq,normalizeForwards:Zq,normalizeBackwards:$q,hasSameParentBlock:Wq},ar=function(a){return function(b){return gh.eq(a,Ef.fromDom(b.dom().parentNode))}},br=function(a,b){return gh.contains(a,b)?tq.closest(b,function(a){return ji(a)||li(a)},ar(a)):La.none()},cr=function(a){var b=a.getBody(),c=b.firstChild&&a.dom.isBlock(b.firstChild)?b.firstChild:b;a.selection.setCursorLocation(c,0)},dr=function(a){a.dom.isEmpty(a.getBody())&&(a.setContent(""),cr(a))},er=function(a,b,c){return Gk.liftN([zl.firstPositionIn(c),zl.lastPositionIn(c)],function(d,e){var f=_q.normalizePosition(!0,d),g=_q.normalizePosition(!1,e),h=_q.normalizePosition(!1,b);return a?zl.nextPosition(c,h).map(function(a){return a.isEqual(g)&&b.isEqual(f)}).getOr(!1):zl.prevPosition(c,h).map(function(a){return a.isEqual(f)&&b.isEqual(g)}).getOr(!1)}).getOr(!0)},fr={getParentBlock:br,paddEmptyBody:dr,willDeleteLastPositionInElement:er},gr=function(a){return $g.one(a)},hr=function(a,b,c){return tq.ancestor(a,function(a){return $g.is(a,b)},c)},ir=function(a,b){return tq.sibling(a,function(a){return $g.is(a,b)})},jr=function(a,b){return tq.child(a,function(a){return $g.is(a,b)})},kr=function(a,b){return $g.one(b,a)},lr=function(a,b,c){return E($g.is,hr,a,b,c)},mr={first:gr,ancestor:hr,sibling:ir,child:jr,descendant:kr,closest:lr},nr=function(a){return mr.first(a).isSome()},or=function(a,b,c){return mr.ancestor(a,b,c).isSome()},pr=function(a,b){return mr.sibling(a,b).isSome()},qr=function(a,b){return mr.child(a,b).isSome()},rr=function(a,b){return mr.descendant(a,b).isSome()},sr=function(a,b,c){return mr.closest(a,b,c).isSome()},tr={any:nr,ancestor:or,sibling:pr,child:qr,descendant:rr,closest:sr},ur=function(a,b){var c=Ef.fromDom(a),d=Ef.fromDom(b);return tr.ancestor(d,"pre,code",Ea.curry(gh.eq,c))},vr=function(a,b){return Gi.isText(b)&&/^[ \t\r\n]*$/.test(b.data)&&!1===ur(a,b)},wr=function(a){return Gi.isElement(a)&&"A"===a.nodeName&&a.hasAttribute("name")},xr=function(a,b){return $j(b)&&!1===vr(a,b)||wr(b)||yr(b)},yr=Gi.hasAttribute("data-mce-bookmark"),zr=Gi.hasAttribute("data-mce-bogus"),Ar=Gi.hasAttributeValue("data-mce-bogus","all"),Br=function(a){var b,c,d=0;if(xr(a,a))return!1;if(!(c=a.firstChild))return!0;b=new v(c,a);do{if(Ar(c))c=b.next(!0);else if(zr(c))c=b.next();else if(Gi.isBr(c))d++,c=b.next();else{if(xr(a,c))return!1;c=b.next()}}while(c);return d<=1},Cr=function(a){return Br(a.dom())},Dr={isEmpty:Cr},Er=Mg.immutable("block","position"),Fr=Mg.immutable("from","to"),Gr=function(a,b){var c=Ef.fromDom(a),d=Ef.fromDom(b.container());return fr.getParentBlock(c,d).map(function(a){return Er(a,b)})},Hr=function(a){return!1===gh.eq(a.from().block(),a.to().block())},Ir=function(a){return Bh.parent(a.from().block()).bind(function(b){return Bh.parent(a.to().block()).filter(function(a){return gh.eq(b,a)})}).isSome()},Jr=function(a){return!1===Gi.isContentEditableFalse(a.from().block())&&!1===Gi.isContentEditableFalse(a.to().block())},Kr=function(a,b,c){return Gi.isBr(c.position().getNode())&&!1===Dr.isEmpty(c.block())?zl.positionIn(!1,c.block().dom()).bind(function(d){return d.isEqual(c.position())?zl.fromPosition(b,a,d).bind(function(b){return Gr(a,b)}):La.some(c)}).getOr(c):c},Lr=function(a,b,c){var d=Gr(a,al.fromRangeStart(c)),e=d.bind(function(c){return zl.fromPosition(b,a,c.position()).bind(function(c){return Gr(a,c).map(function(c){return Kr(a,b,c)})})});return Gk.liftN([d,e],Fr).filter(function(a){return Hr(a)&&Ir(a)&&Jr(a)})},Mr=function(a,b,c){return c.collapsed?Lr(a,b,c):La.none()},Nr={read:Mr},Or=function(a){return a.slice(0,-1)},Pr=function(a,b,c){return gh.contains(b,a)?Or(Bh.parents(a,function(a){return c(a)||gh.eq(a,b)})):[]},Qr=function(a,b){return Pr(a,b,Ea.constant(!1))},Rr=function(a,b){return[a].concat(Qr(a,b))},Sr={parentsUntil:Pr,parents:Qr,parentsAndSelf:Rr},Tr=function(a){var b=Bh.children(a);return sb.findIndex(b,gi).fold(function(){return b},function(a){return b.slice(0,a)})},Ur=function(a){var b=Tr(a);return sb.each(b,function(a){Qp.remove(a)}),b},Vr=function(a,b){zl.positionIn(a,b.dom()).each(function(a){var b=a.getNode();Gi.isBr(b)&&Qp.remove(Ef.fromDom(b))})},Wr=function(a,b){var c=Sr.parentsAndSelf(b,a);return sb.find(c.reverse(),Dr.isEmpty).each(Qp.remove)},Xr=function(a,b){var c=Bh.parents(b,function(b){return gh.eq(b,a)});return La.from(c[c.length-2])},Yr=function(a,b){return gh.contains(b,a)?Bh.parent(a).bind(function(c){return gh.eq(c,b)?La.some(a):Xr(b,a)}):La.none()},Zr=function(a,b,c){if(Dr.isEmpty(c))return Qp.remove(c),Dr.isEmpty(b)&&aq.fillWithPaddingBr(b),zl.firstPositionIn(b.dom());Vr(!0,b),Vr(!1,c);var d=Ur(b);return Yr(b,c).fold(function(){Wr(a,b);var e=zl.lastPositionIn(c.dom());return sb.each(d,function(a){Vm.append(c,a)}),e},function(e){var f=zl.prevPosition(c.dom(),al.before(e.dom()));return sb.each(d,function(a){Vm.before(e,a)}),Wr(a,b),f})},$r=function(a,b,c,d){return b?Zr(a,d,c):Zr(a,c,d)},_r={mergeBlocks:$r},as=function(a,b){var c,d=Ef.fromDom(a.getBody());return c=Nr.read(d.dom(),b,a.selection.getRng()).bind(function(a){return _r.mergeBlocks(d,b,a.from().block(),a.to().block())}),c.each(function(b){a.selection.setRng(b.toRange())}),c.isSome()},bs={backspaceDelete:as},cs=function(a,b){var c=b.getRng();return Gk.liftN([fr.getParentBlock(a,Ef.fromDom(c.startContainer)),fr.getParentBlock(a,Ef.fromDom(c.endContainer))],function(d,e){return!1===gh.eq(d,e)&&(c.deleteContents(),_r.mergeBlocks(a,!0,d,e).each(function(a){b.setRng(a.toRange())}),!0)}).getOr(!1)},ds=function(a,b){var c=Ef.fromDom(b),d=Ea.curry(gh.eq,a);return tq.ancestor(c,oi,d).isSome()},es=function(a,b){return ds(a,b.startContainer)||ds(a,b.endContainer)},fs=function(a,b){var c=zl.prevPosition(a.dom(),al.fromRangeStart(b)).isNone(),d=zl.nextPosition(a.dom(),al.fromRangeEnd(b)).isNone();return!es(a,b)&&c&&d},gs=function(a){return a.setContent(""),a.selection.setCursorLocation(),!0},hs=function(a){var b=Ef.fromDom(a.getBody()),c=a.selection.getRng();return fs(b,c)?gs(a):cs(b,a.selection)},is=function(a,b){return!a.selection.isCollapsed()&&hs(a)},js={backspaceDelete:is},ks=function(a){if(!Oa.isArray(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var b=[],c={};return sb.each(a,function(d,e){var f=Yf.keys(d);if(1!==f.length)throw new Error("one and only one name per case");var g=f[0],h=d[g];if(void 0!==c[g])throw new Error("duplicate key detected:"+g);if("cata"===g)throw new Error("cannot have a case named cata (sorry)");if(!Oa.isArray(h))throw new Error("case arguments must be an array");b.push(g),c[g]=function(){var c=arguments.length;if(c!==h.length)throw new Error("Wrong number of arguments to case "+g+". Expected "+h.length+" ("+h+"), got "+c);for(var d=new Array(c),f=0;f<d.length;f++)d[f]=arguments[f];var i=function(a){var c=Yf.keys(a);if(b.length!==c.length)throw new Error("Wrong number of arguments to match. Expected: "+b.join(",")+"\nActual: "+c.join(","));if(!sb.forall(b,function(a){return sb.contains(c,a)}))throw new Error("Not all branches were specified when using match. Specified: "+c.join(", ")+"\nRequired: "+b.join(", "));return a[g].apply(null,d)};return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[e].apply(null,d)},match:i,log:function(a){console.log(a,{constructors:b,constructor:g,params:d})}}}}),c},ls={generate:ks},ms=function(a){return oi(Ef.fromDom(a))||li(Ef.fromDom(a))},ns=ls.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),os=function(a,b){var c=b.getNode(!1===a),d=a?"after":"before";return Gi.isElement(c)&&c.getAttribute("data-mce-caret")===d},ps=function(a,b,c,d){var e=function(b){return hi(Ef.fromDom(b))&&!En(c,d,a)};return On(!b,c).fold(function(){return On(b,d).fold(Ea.constant(!1),e)},e)},qs=function(a,b,c,d){var e=d.getNode(!1===b);return fr.getParentBlock(Ef.fromDom(a),Ef.fromDom(c.getNode())).map(function(a){return Dr.isEmpty(a)?ns.remove(a.dom()):ns.moveToElement(e)}).orThunk(function(){return La.some(ns.moveToElement(e))})},rs=function(a,b,c){return zl.fromPosition(b,a,c).bind(function(d){return ms(d.getNode())?La.none():ps(a,b,c,d)?La.none():b&&Gi.isContentEditableFalse(d.getNode())?qs(a,b,c,d):!1===b&&Gi.isContentEditableFalse(d.getNode(!0))?qs(a,b,c,d):b&&Rn(c)?La.some(ns.moveToPosition(d)):!1===b&&Qn(c)?La.some(ns.moveToPosition(d)):La.none()})},ss=function(a,b){return a&&Gi.isContentEditableFalse(b.nextSibling)?La.some(ns.moveToElement(b.nextSibling)):!1===a&&Gi.isContentEditableFalse(b.previousSibling)?La.some(ns.moveToElement(b.previousSibling)):La.none()},ts=function(a,b,c){return c.fold(function(a){return La.some(ns.remove(a))},function(a){return La.some(ns.moveToElement(a))},function(c){return En(b,c,a)?La.none():La.some(ns.moveToPosition(c))})},us=function(a,b,c){return os(b,c)?ss(b,c.getNode(!1===b)).fold(function(){return rs(a,b,c)},La.some):rs(a,b,c).bind(function(b){return ts(a,c,b)})},vs=function(a,b,c){var d=Ln(b?1:-1,a,c),e=al.fromRangeStart(d);return!1===b&&Rn(e)?La.some(ns.remove(e.getNode(!0))):b&&Qn(e)?La.some(ns.remove(e.getNode())):us(a,b,e)},ws=function(a,b){var c=a.container(),d=a.offset();return!1===al.isTextPosition(a)&&c===b.parentNode&&d>al.before(b).offset()},xs=function(a,b){return ws(b,a)?al(b.container(),b.offset()-1):b},ys=function(a){return Gi.isText(a)?al(a,0):al.before(a)},zs=function(a){return Gi.isText(a)?al(a,a.data.length):al.after(a)},As=function(a){return $j(a.previousSibling)?La.some(zs(a.previousSibling)):a.previousSibling?zl.lastPositionIn(a.previousSibling):La.none()},Bs=function(a){return $j(a.nextSibling)?La.some(ys(a.nextSibling)):a.nextSibling?zl.firstPositionIn(a.nextSibling):La.none()},Cs=function(a,b){var c=al.before(b.previousSibling?b.previousSibling:b.parentNode);return zl.prevPosition(a,c).fold(function(){return zl.nextPosition(a,al.after(b))},La.some)},Ds=function(a,b){return zl.nextPosition(a,al.after(b)).fold(function(){return zl.prevPosition(a,al.before(b))},La.some)},Es=function(a,b){return As(b).orThunk(function(){return Bs(b)}).orThunk(function(){return Cs(a,b)})},Fs=function(a,b){return Bs(b).orThunk(function(){return As(b)}).orThunk(function(){return Ds(a,b)})},Gs=function(a,b,c){return a?Fs(b,c):Es(b,c)},Hs=function(a,b,c){return Gs(a,b,c).map(Ea.curry(xs,c))},Is=function(a,b,c){c.fold(function(){a.focus()},function(c){a.selection.setRng(c.toRange(),b)})},Js=function(a){return function(b){return b.dom()===a}},Ks=function(a,b){return b&&a.schema.getBlockElements().hasOwnProperty(Of.name(b))},Ls=function(a){if(Dr.isEmpty(a)){var b=Ef.fromHtml('<br data-mce-bogus="1">');return Qp.empty(a),Vm.append(a,b),La.some(al.before(b.dom()))}return La.none()},Ms=function(a,b){return Gk.liftN([Bh.prevSibling(a),Bh.nextSibling(a),b],function(b,c,d){var e,f=b.dom(),g=c.dom();return Gi.isText(f)&&Gi.isText(g)?(e=f.data.length,f.appendData(g.data),Qp.remove(c),Qp.remove(a),d.container()===g?al(f,e):d):(Qp.remove(a),d)}).orThunk(function(){return Qp.remove(a),b})},Ns=function(a,b,c){var d=Hs(b,a.getBody(),c.dom()),e=tq.ancestor(c,Ea.curry(Ks,a),Js(a.getBody())),f=Ms(c,d);a.dom.isEmpty(a.getBody())?(a.setContent(""),a.selection.setCursorLocation()):e.bind(Ls).fold(function(){Is(a,b,f)},function(c){Is(a,b,La.some(c))})},Os={deleteElement:Ns},Ps=function(a,b){return function(c){return a._selectionOverrides.hideFakeCaret(),Os.deleteElement(a,b,Ef.fromDom(c)),!0}},Qs=function(a,b){return function(c){var d=b?al.before(c):al.after(c);return a.selection.setRng(d.toRange()),!0}},Rs=function(a){return function(b){return a.selection.setRng(b.toRange()),!0}},Ss=function(a,b){return vs(a.getBody(),b,a.selection.getRng()).map(function(c){return c.fold(Ps(a,b),Qs(a,b),Rs(a))}).getOr(!1)},Ts=function(a){sb.each(em.descendants(a,".mce-offscreen-selection"),Qp.remove)},Us=function(a,b){var c=a.selection.getNode();return!!Gi.isContentEditableFalse(c)&&(Ts(Ef.fromDom(a.getBody())),Os.deleteElement(a,b,Ef.fromDom(a.selection.getNode())),fr.paddEmptyBody(a),!0)},Vs=function(a,b){for(;b&&b!==a;){if(Gi.isContentEditableTrue(b)||Gi.isContentEditableFalse(b))return b;b=b.parentNode}return null},Ws=function(a){var b,c=Vs(a.getBody(),a.selection.getNode());return Gi.isContentEditableTrue(c)&&a.dom.isBlock(c)&&a.dom.isEmpty(c)&&(b=a.dom.create("br",{"data-mce-bogus":"1"}),a.dom.setHTML(c,""),c.appendChild(b),a.selection.setRng(al.before(b).toRange())),!0},Xs=function(a,b){return a.selection.isCollapsed()?Ss(a,b):Us(a,b)},Ys={backspaceDelete:Xs,paddEmptyElement:Ws},Zs=Gi.isText,$s=function(a){return Zs(a)&&a.data[0]===Bj.ZWSP},_s=function(a){return Zs(a)&&a.data[a.data.length-1]===Bj.ZWSP},at=function(a){return a.ownerDocument.createTextNode(Bj.ZWSP)},bt=function(a){if(Zs(a.previousSibling))return _s(a.previousSibling)?a.previousSibling:(a.previousSibling.appendData(Bj.ZWSP),a.previousSibling);if(Zs(a))return $s(a)?a:(a.insertData(0,Bj.ZWSP),a);var b=at(a);return a.parentNode.insertBefore(b,a),b},ct=function(a){if(Zs(a.nextSibling))return $s(a.nextSibling)?a.nextSibling:(a.nextSibling.insertData(0,Bj.ZWSP),a.nextSibling);if(Zs(a))return _s(a)?a:(a.appendData(Bj.ZWSP),a);var b=at(a);return a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b),b},dt=function(a,b){return a?bt(b):ct(b)},et=Ea.curry(dt,!0),ft=Ea.curry(dt,!1),gt=function(a,b){return Gi.isText(a.container())?dt(b,a.container()):dt(b,a.getNode())},ht=function(a,b){var c=b.get();return c&&a.container()===c&&Fj(c)},it=function(a,b){return b.fold(function(b){ol.remove(a.get());var c=et(b);return a.set(c),La.some(al(c,c.length-1))},function(b){return zl.firstPositionIn(b).map(function(b){if(ht(b,a))return al(a.get(),1);ol.remove(a.get());var c=gt(b,!0);return a.set(c),al(c,1)})},function(b){return zl.lastPositionIn(b).map(function(b){if(ht(b,a))return al(a.get(),a.get().length-1);ol.remove(a.get());var c=gt(b,!1);return a.set(c),al(c,c.length-1)})},function(b){ol.remove(a.get());var c=ft(b);return a.set(c),La.some(al(c,1))})},jt={renderCaret:it},kt=function(a,b){for(var c=0;c<a.length;c++){var d=a[c].apply(null,b);if(d.isSome())return d}return La.none()},lt={evaluateUntil:kt},mt=ls.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),nt=function(a,b){var c=Dn(b,a);return c||a},ot=function(a,b,c){var d=_q.normalizeForwards(c),e=nt(b,d.container());return _q.findRootInline(a,e,d).fold(function(){return zl.nextPosition(e,d).bind(Ea.curry(_q.findRootInline,a,e)).map(function(a){return mt.before(a)})},La.none)},pt=function(a,b){return null===hp(a,b)},qt=function(a,b,c){return _q.findRootInline(a,b,c).filter(Ea.curry(pt,b))},rt=function(a,b,c){var d=_q.normalizeBackwards(c);return qt(a,b,d).bind(function(a){return zl.prevPosition(a,d).isNone()?La.some(mt.start(a)):La.none()})},st=function(a,b,c){var d=_q.normalizeForwards(c);return qt(a,b,d).bind(function(a){return zl.nextPosition(a,d).isNone()?La.some(mt.end(a)):La.none()})},tt=function(a,b,c){var d=_q.normalizeBackwards(c),e=nt(b,d.container());return _q.findRootInline(a,e,d).fold(function(){return zl.prevPosition(e,d).bind(Ea.curry(_q.findRootInline,a,e)).map(function(a){return mt.after(a)})},La.none)},ut=function(a){return!1===_q.isRtl(wt(a))},vt=function(a,b,c){return lt.evaluateUntil([ot,rt,st,tt],[a,b,c]).filter(ut)},wt=function(a){return a.fold(Ea.identity,Ea.identity,Ea.identity,Ea.identity)},xt=function(a){return a.fold(Ea.constant("before"),Ea.constant("start"),Ea.constant("end"),Ea.constant("after"))},yt=function(a){return a.fold(mt.before,mt.before,mt.after,mt.after)},zt=function(a){return a.fold(mt.start,mt.start,mt.end,mt.end)},At=function(a,b){return xt(a)===xt(b)&&wt(a)===wt(b)},Bt=function(a,b,c,d,e,f){return Gk.liftN([_q.findRootInline(b,c,d),_q.findRootInline(b,c,e)],function(b,d){return b!==d&&_q.hasSameParentBlock(c,b,d)?mt.after(a?b:d):f}).getOr(f)},Ct=function(a,b){return a.fold(Ea.constant(!0),function(a){return!At(a,b)})},Dt=function(a,b,c,d,e){var f=_q.normalizePosition(a,e);return zl.fromPosition(a,c,f).map(Ea.curry(_q.normalizePosition,a)).fold(function(){return d.map(yt)},function(e){return vt(b,c,e).map(Ea.curry(Bt,a,b,c,f,e)).filter(Ea.curry(Ct,d))}).filter(ut)},Et=function(a,b){return a?b.fold(Ea.compose(La.some,mt.start),La.none,Ea.compose(La.some,mt.after),La.none):b.fold(La.none,Ea.compose(La.some,mt.before),La.none,Ea.compose(La.some,mt.end))},Ft=function(a,b,c,d){var e=_q.normalizePosition(a,d),f=vt(b,c,e);return vt(b,c,e).bind(Ea.curry(Et,a)).orThunk(function(){return Dt(a,b,c,f,d)})},Gt={readLocation:vt,findLocation:Ft,prevLocation:Ea.curry(Ft,!1),nextLocation:Ea.curry(Ft,!0),getElement:wt,outside:yt,inside:zt},Ht=function(a){return Oa.isFunction(a.selection.getSel().modify)},It=function(a,b,c){var d=a?1:-1;return b.setRng(al(c.container(),c.offset()+d).toRange()),b.getSel().modify("move",a?"forward":"backward","word"),!0},Jt=function(a,b){var c=b.selection.getRng(),d=a?al.fromRangeEnd(c):al.fromRangeStart(c);return!!Ht(b)&&(a&&Jj(d)?It(!0,b.selection,d):!(a||!Kj(d))&&It(!1,b.selection,d))},Kt={hasSelectionModifyApi:Ht,moveByWord:Jt},Lt=function(a,b){var c=a.dom.createRng();c.setStart(b.container(),b.offset()),c.setEnd(b.container(),b.offset()),a.selection.setRng(c)},Mt=function(a){return!1!==a.settings.inline_boundaries},Nt=function(a,b){a?b.setAttribute("data-mce-selected","inline-boundary"):b.removeAttribute("data-mce-selected")},Ot=function(a,b,c){return jt.renderCaret(b,c).map(function(b){return Lt(a,b),c})},Pt=function(a,b,c){var d=a.getBody(),e=al.fromRangeStart(a.selection.getRng()),f=Ea.curry(_q.isInlineTarget,a);return Gt.findLocation(c,f,d,e).bind(function(c){return Ot(a,b,c)})},Qt=function(a,b,c){var d=sb.filter(b.select('*[data-mce-selected="inline-boundary"]'),a),e=sb.filter(c,a);sb.each(sb.difference(d,e),Ea.curry(Nt,!1)),sb.each(sb.difference(e,d),Ea.curry(Nt,!0))},Rt=function(a,b){if(a.selection.isCollapsed()&&!0!==a.composing&&b.get()){var c=al.fromRangeStart(a.selection.getRng());al.isTextPosition(c)&&!1===_q.isAtZwsp(c)&&(Lt(a,ol.removeAndReposition(b.get(),c)),b.set(null))}},St=function(a,b,c,d){if(b.selection.isCollapsed()){var e=sb.filter(d,a);sb.each(e,function(d){var e=al.fromRangeStart(b.selection.getRng());Gt.readLocation(a,b.getBody(),e).bind(function(a){return Ot(b,c,a)})})}},Tt=function(a,b,c){return function(){return!!Mt(a)&&Pt(a,b,c).isSome()}},Ut=function(a,b,c){return function(){return!!Mt(b)&&Kt.moveByWord(a,b)}},Vt=function(a){var b=ln(null),c=Ea.curry(_q.isInlineTarget,a);return a.on("NodeChange",function(d){Mt(a)&&(Qt(c,a.dom,d.parents),Rt(a,b),St(c,a,b,d.parents))}),b},Wt=Ea.curry(Ut,!0),Xt=Ea.curry(Ut,!1),Yt={move:Tt,moveNextWord:Wt,movePrevWord:Xt,setupSelectedState:Vt,setCaretPosition:Lt},Zt=function(a){return!1!==a.settings.inline_boundaries},$t=function(a,b){var c=document.createRange();return c.setStart(a.container(),a.offset()),c.setEnd(b.container(),b.offset()),c},_t=function(a){return Gk.liftN([zl.firstPositionIn(a),zl.lastPositionIn(a)],function(b,c){var d=_q.normalizePosition(!0,b),e=_q.normalizePosition(!1,c);return zl.nextPosition(a,d).map(function(a){return a.isEqual(e)}).getOr(!0)}).getOr(!0)},au=function(a,b){return function(c){return jt.renderCaret(b,c).map(function(b){return Yt.setCaretPosition(a,b),!0}).getOr(!1)}},bu=function(a,b,c,d){var e=a.getBody(),f=Ea.curry(_q.isInlineTarget,a);a.undoManager.ignore(function(){a.selection.setRng($t(c,d)),a.execCommand("Delete"),Gt.readLocation(f,e,al.fromRangeStart(a.selection.getRng())).map(Gt.inside).map(au(a,b))}),a.nodeChanged()},cu=function(a,b){var c=Dn(b,a);return c||a},du=function(a,b,c,d){var e=cu(a.getBody(),d.container()),f=Ea.curry(_q.isInlineTarget,a),g=Gt.readLocation(f,e,d);return g.bind(function(a){return c?a.fold(Ea.constant(La.some(Gt.inside(a))),La.none,Ea.constant(La.some(Gt.outside(a))),La.none):a.fold(La.none,Ea.constant(La.some(Gt.outside(a))),La.none,Ea.constant(La.some(Gt.inside(a))))}).map(au(a,b)).getOrThunk(function(){var h=zl.navigate(c,e,d),i=h.bind(function(a){return Gt.readLocation(f,e,a)});return g.isSome()&&i.isSome()?_q.findRootInline(f,e,d).map(function(b){return!!_t(b)&&(Os.deleteElement(a,c,Ef.fromDom(b)),!0)}).getOr(!1):i.bind(function(e){return h.map(function(e){return c?bu(a,b,d,e):bu(a,b,e,d),!0})}).getOr(!1)})},eu=function(a,b,c){if(a.selection.isCollapsed()&&Zt(a)){var d=al.fromRangeStart(a.selection.getRng());return du(a,b,c,d)}return!1},fu={backspaceDelete:eu},gu=Mg.immutable("start","end"),hu=Mg.immutable("rng","table","cells"),iu=ls.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),ju=function(a){return Ea.curry(gh.eq,a)},ku=function(a,b){return mr.closest(Ef.fromDom(a),"td,th",b)},lu=function(a,b){return mr.ancestor(a,"table",b)},mu=function(a){return!1===gh.eq(a.start(),a.end())},nu=function(a,b){return lu(a.start(),b).bind(function(c){return lu(a.end(),b).bind(function(a){return gh.eq(c,a)?La.some(c):La.none()})})},ou=function(a){return em.descendants(a,"td,th")},pu=function(a,b){return lu(a.start(),b).bind(function(b){return sb.last(ou(b)).map(function(b){return gu(a.start(),b)})})},qu=function(a,b){var c=ku(b.startContainer,a),d=ku(b.endContainer,a);return b.collapsed?La.none():Gk.liftN([c,d],gu).fold(function(){return c.fold(function(){return d.bind(function(b){return lu(b,a).bind(function(a){return sb.head(ou(a)).map(function(a){return gu(a,b)})})})},function(b){return lu(b,a).bind(function(a){return sb.last(ou(a)).map(function(a){return gu(b,a)})})})},function(b){return ru(a,b)?La.none():pu(b,a)})},ru=function(a,b){return nu(b,a).isSome()},su=function(a,b){var c=ku(a.startContainer,b),d=ku(a.endContainer,b);return Gk.liftN([c,d],gu).filter(mu).filter(function(a){return ru(b,a)}).orThunk(function(){return qu(b,a)})},tu=function(a,b){return nu(a,b).map(function(b){return hu(a,b,ou(b))})},uu=function(a,b){var c=ju(a);return su(b,c).bind(function(a){return tu(a,c)})},vu=function(a,b){return sb.findIndex(a,function(a){return gh.eq(a,b)})},wu=function(a){return Gk.liftN([vu(a.cells(),a.rng().start()),vu(a.cells(),a.rng().end())],function(b,c){return a.cells().slice(b,c+1)})},xu=function(a){return wu(a).map(function(b){var c=a.cells();return b.length===c.length?iu.removeTable(a.table()):iu.emptyCells(b)})},yu=function(a){return iu.emptyCells(a)},zu=function(a,b){return uu(a,b).bind(xu)},Au={getActionFromRange:zu,getActionFromCells:yu},Bu=function(a){var b=[];if(a)for(var c=0;c<a.rangeCount;c++)b.push(a.getRangeAt(c));return b},Cu=function(a){return sb.bind(a,function(a){var b=qk(a);return b?[Ef.fromDom(b)]:[]})},Du=function(a){return Bu(a).length>1},Eu={getRanges:Bu,getSelectedNodes:Cu,hasMultipleRanges:Du},Fu=function(a){return sb.filter(Eu.getSelectedNodes(a),oi)},Gu=function(a){return em.descendants(a,"td[data-mce-selected],th[data-mce-selected]")},Hu=function(a,b){var c=Gu(b),d=Fu(a);return c.length>0?c:d},Iu=function(a){return Hu(Eu.getRanges(a.selection.getSel()),Ef.fromDom(a.getBody()))},Ju={getCellsFromRanges:Fu,getCellsFromElement:Gu,getCellsFromElementOrRanges:Hu,getCellsFromEditor:Iu},Ku=function(a,b){return sb.each(b,aq.fillWithPaddingBr),a.selection.setCursorLocation(b[0].dom(),0),!0},Lu=function(a,b){return Os.deleteElement(a,!1,b),!0},Mu=function(a,b,c){return Au.getActionFromRange(b,c).map(function(b){return b.fold(Ea.curry(Lu,a),Ea.curry(Ku,a))})},Nu=function(a,b){return Tu(a,b)},Ou=function(a,b,c,d){return Ru(b,d).fold(function(){return Mu(a,b,c)},function(b){return Nu(a,b)}).getOr(!1)},Pu=function(a,b){var c=Ef.fromDom(a.getBody()),d=a.selection.getRng(),e=Ju.getCellsFromEditor(a);return 0!==e.length?Ku(a,e):Ou(a,c,d,b)},Qu=function(a,b){return sb.find(Sr.parentsAndSelf(b,a),oi)},Ru=function(a,b){return sb.find(Sr.parentsAndSelf(b,a),function(a){return"caption"===Of.name(a)})},Su=function(a,b,c,d,e){return zl.navigate(c,a.getBody(),e).bind(function(a){return Qu(b,Ef.fromDom(a.getNode())).map(function(a){return!1===gh.eq(a,d)})})},Tu=function(a,b){return aq.fillWithPaddingBr(b),a.selection.setCursorLocation(b.dom(),0),La.some(!0)},Uu=function(a,b,c,d){return zl.firstPositionIn(a.dom()).bind(function(e){return zl.lastPositionIn(a.dom()).map(function(a){return b?c.isEqual(e)&&d.isEqual(a):c.isEqual(a)&&d.isEqual(e)})}).getOr(!0)},Vu=function(a,b){return Tu(a,b)},Wu=function(a,b,c){return Ru(a,Ef.fromDom(c.getNode())).map(function(a){return!1===gh.eq(a,b)})},Xu=function(a,b,c,d,e){return zl.navigate(c,a.getBody(),e).bind(function(f){return Uu(d,c,e,f)?Vu(a,d):Wu(b,d,f)}).or(La.some(!0))},Yu=function(a,b,c,d){var e=al.fromRangeStart(a.selection.getRng());return Qu(c,d).bind(function(d){return Dr.isEmpty(d)?Tu(a,d):Su(a,c,b,d,e)})},Zu=function(a,b,c,d){var e=al.fromRangeStart(a.selection.getRng());return Dr.isEmpty(d)?Tu(a,d):Xu(a,c,b,d,e)},$u=function(a,b,c){var d=Ef.fromDom(a.getBody());return Ru(d,c).fold(function(){return Yu(a,b,d,c)},function(c){return Zu(a,b,d,c)}).getOr(!1)},_u=function(a,b){var c=Ef.fromDom(a.selection.getStart(!0)),d=Ju.getCellsFromEditor(a);return a.selection.isCollapsed()&&0===d.length?$u(a,b,c):Pu(a,c)},av={backspaceDelete:_u},bv=function(a,b){a.getDoc().execCommand(b,!1,null)},cv=function(a){Ys.backspaceDelete(a,!1)||fu.backspaceDelete(a,!1)||bs.backspaceDelete(a,!1)||av.backspaceDelete(a)||js.backspaceDelete(a,!1)||(bv(a,"Delete"),fr.paddEmptyBody(a))},dv=function(a){Ys.backspaceDelete(a,!0)||fu.backspaceDelete(a,!0)||bs.backspaceDelete(a,!0)||av.backspaceDelete(a)||js.backspaceDelete(a,!0)||bv(a,"ForwardDelete")},ev={deleteCommand:cv,forwardDeleteCommand:dv},fv=function(a,b,c){var d=function(b){return Eg.getRaw(b,a)},e=function(a){return gh.eq(Ef.fromDom(b),a)};return tq.closest(Ef.fromDom(c),function(a){return d(a).isSome()},e).bind(d)},gv=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},hv=function(a,b){return/[0-9.]+px$/.test(a)?gv(72*parseInt(a,10)/96,b||0)+"pt":a},iv=function(a){return a.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},jv=function(a,b){return La.from(rj.DOM.getStyle(b,a,!0))},kv=function(a){return function(b,c){return La.from(c).map(Ef.fromDom).filter(Of.isElement).bind(function(c){return fv(a,b,c.dom()).or(jv(a,c.dom()))}).getOr("")}},lv={getFontSize:kv("font-size"),getFontFamily:Ea.compose(iv,kv("font-family")),toPt:hv},mv=function(a){return zl.firstPositionIn(a.getBody()).map(function(a){var b=a.container();return Gi.isText(b)?b.parentNode:b})},nv=function(a,b){return a.startContainer===b&&0===a.startOffset},ov=function(a){return La.from(a.selection.getRng()).bind(function(b){var c=a.getBody();return nv(b,c)?La.none():La.from(a.selection.getStart(!0))})},pv=function(a,b){var c=parseInt(b,10);if(c>=1&&c<=7){var d=Om.getFontStyleValues(a),e=Om.getFontSizeClasses(a);return e?e[c-1]||b:d[c-1]||b}return b},qv=function(a,b){a.formatter.toggle("fontname",{value:pv(a,b)}),a.nodeChanged()},rv=function(a){return ov(a).fold(function(){return mv(a).map(function(b){return lv.getFontFamily(a.getBody(),b)}).getOr("")},function(b){return lv.getFontFamily(a.getBody(),b)})},sv=function(a,b){a.formatter.toggle("fontsize",{value:pv(a,b)}),a.nodeChanged()},tv=function(a){return ov(a).fold(function(){return mv(a).map(function(b){return lv.getFontSize(a.getBody(),b)}).getOr("")},function(b){return lv.getFontSize(a.getBody(),b)})},uv=function(a,b){return a&&b&&a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},vv={isEq:uv},wv=function(a,b,c){for(;a&&a!==b;){if(c(a))return a;a=a.parentNode}return null},xv=function(a,b,c){return null!==wv(a,b,c)},yv=function(a,b,c){return xv(a,b,function(a){return a.nodeName===c})},zv=function(a){return a&&"TABLE"===a.nodeName},Av=function(a){return a&&/^(TD|TH|CAPTION)$/.test(a.nodeName)},Bv=function(a,b){return Gj(a)&&!1===xv(a,b,gp)},Cv=function(a,b,c){for(var d=new v(b,a.getParent(b.parentNode,a.isBlock)||a.getRoot());b=d[c?"prev":"next"]();)if(Gi.isBr(b))return!0},Dv=function(a,b){return a.previousSibling&&a.previousSibling.nodeName===b},Ev=function(a,b){for(;b&&b!==a;){if(Gi.isContentEditableFalse(b))return!0;b=b.parentNode}return!1},Fv=function(a,b,c,d,e){var f,g,h,i,j=a.getRoot(),k=a.schema.getNonEmptyElements();if(h=a.getParent(e.parentNode,a.isBlock)||j,d&&Gi.isBr(e)&&b&&a.isEmpty(h))return La.some(A(e.parentNode,a.nodeIndex(e)));for(f=new v(e,h);i=f[d?"prev":"next"]();){if("false"===a.getContentEditableParent(i)||Bv(i,j))return La.none();if(Gi.isText(i)&&i.nodeValue.length>0)return!1===yv(i,j,"A")?La.some(A(i,d?i.nodeValue.length:0)):La.none();if(a.isBlock(i)||k[i.nodeName.toLowerCase()])return La.none();g=i}return c&&g?La.some(A(g,0)):La.none()},Gv=function(a,b,c,d){var e,f,g,h,i,j,k,l=a.getRoot(),m=!1;if(e=d[(c?"start":"end")+"Container"],f=d[(c?"start":"end")+"Offset"],k=Gi.isElement(e)&&f===e.childNodes.length,i=a.schema.getNonEmptyElements(),j=c,Gj(e))return La.none();if(Gi.isElement(e)&&f>e.childNodes.length-1&&(j=!1),Gi.isDocument(e)&&(e=l,f=0),e===l){if(j&&(h=e.childNodes[f>0?f-1:0])){if(Gj(h))return La.none();if(i[h.nodeName]||zv(h))return La.none()}if(e.hasChildNodes()){if(f=Math.min(!j&&f>0?f-1:f,e.childNodes.length-1),e=e.childNodes[f],f=Gi.isText(e)&&k?e.data.length:0,!b&&e===l.lastChild&&zv(e))return La.none();if(Ev(l,e)||Gj(e))return La.none();if(e.hasChildNodes()&&!1===zv(e)){h=e,g=new v(e,l);do{if(Gi.isContentEditableFalse(h)||Gj(h)){m=!1;break}if(Gi.isText(h)&&h.nodeValue.length>0){f=j?0:h.nodeValue.length,e=h,m=!0;break}if(i[h.nodeName.toLowerCase()]&&!Av(h)){f=a.nodeIndex(h),e=h.parentNode,j||f++,m=!0;break}}while(h=j?g.next():g.prev())}}}return b&&(Gi.isText(e)&&0===f&&Fv(a,k,b,!0,e).each(function(a){e=a.container(),f=a.offset(),m=!0}),Gi.isElement(e)&&(h=e.childNodes[f],h||(h=e.childNodes[f-1]),!h||!Gi.isBr(h)||Dv(h,"A")||Cv(a,h,!1)||Cv(a,h,!0)||Fv(a,k,b,!0,h).each(function(a){e=a.container(),f=a.offset(),m=!0}))),j&&!b&&Gi.isText(e)&&f===e.nodeValue.length&&Fv(a,k,b,!1,e).each(function(a){e=a.container(),f=a.offset(),m=!0}),m?La.some(A(e,f)):La.none()},Hv=function(a,b){var c=b.collapsed,d=b.cloneRange(),e=A.fromRangeStart(b);return Gv(a,c,!0,d).each(function(a){c&&A.isAbove(e,a)||d.setStart(a.container(),a.offset())}),c||Gv(a,c,!1,d).each(function(a){d.setEnd(a.container(),a.offset())}),c&&d.collapse(!0),vv.isEq(b,d)?La.none():La.some(d)},Iv={normalize:Hv},Jv=function(a,b,c){for(var d,e=new v(b,c),f=a.getNonEmptyElements();d=e.next();)if(f[d.nodeName.toLowerCase()]||d.length>0)return!0},Kv=function(a,b,c){var d=a.create("span",{},"&nbsp;");c.parentNode.insertBefore(d,c),b.scrollIntoView(d),a.remove(d)},Lv=function(a,b,c,d){var e=a.createRng();d?(e.setStartBefore(c),e.setEndBefore(c)):(e.setStartAfter(c),e.setEndAfter(c)),b.setRng(e)},Mv=function(a,b){var c,d,e=a.selection,f=a.dom,g=e.getRng();Iv.normalize(f,g).each(function(a){g.setStart(a.startContainer,a.startOffset),g.setEnd(a.endContainer,a.endOffset)});var h=g.startOffset,i=g.startContainer;if(1===i.nodeType&&i.hasChildNodes()){var j=h>i.childNodes.length-1;i=i.childNodes[Math.min(h,i.childNodes.length-1)]||i,h=j&&3===i.nodeType?i.nodeValue.length:0}var k=f.getParent(i,f.isBlock),l=k?f.getParent(k.parentNode,f.isBlock):null,m=l?l.nodeName.toUpperCase():"",n=b&&b.ctrlKey;"LI"!==m||n||(k=l),i&&3===i.nodeType&&h>=i.nodeValue.length&&(Jv(a.schema,i,k)||(c=f.create("br"),g.insertNode(c),g.setStartAfter(c),g.setEndAfter(c),d=!0)),c=f.create("br"),g.insertNode(c),Kv(f,e,c),Lv(f,e,c,d),a.undoManager.add()},Nv=function(a,b){var c=Ef.fromTag("br");Vm.before(Ef.fromDom(b),c),a.undoManager.add()},Ov=function(a,b){Qv(a.getBody(),b)||Vm.after(Ef.fromDom(b),Ef.fromTag("br"));var c=Ef.fromTag("br");Vm.after(Ef.fromDom(b),c),Kv(a.dom,a.selection,c.dom()),Lv(a.dom,a.selection,c.dom(),!1),a.undoManager.add()},Pv=function(a){return Gi.isBr(a.getNode())},Qv=function(a,b){return!!Pv(al.after(b))||zl.nextPosition(a,al.after(b)).map(function(a){return Gi.isBr(a.getNode())}).getOr(!1)},Rv=function(a){return a&&"A"===a.nodeName&&"href"in a},Sv=function(a){return a.fold(Ea.constant(!1),Rv,Rv,Ea.constant(!1))},Tv=function(a){var b=Ea.curry(_q.isInlineTarget,a),c=al.fromRangeStart(a.selection.getRng());return Gt.readLocation(b,a.getBody(),c).filter(Sv)},Uv=function(a,b){b.fold(Ea.noop,Ea.curry(Nv,a),Ea.curry(Ov,a),Ea.noop)},Vv=function(a,b){var c=Tv(a);c.isSome()?c.each(Ea.curry(Uv,a)):Mv(a,b)},Wv={insert:Vv},Xv=ls.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Yv=function(a,b,c,d){return a.fold(b,c,d)},Zv=function(a){return a.fold(Ea.identity,Ea.identity,Ea.identity)},$v={before:Xv.before,on:Xv.on,after:Xv.after,cata:Yv,getStart:Zv},_v=ls.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),aw=Mg.immutable("start","soffset","finish","foffset"),bw=function(a){return _v.exact(a.start(),a.soffset(),a.finish(),a.foffset())},cw=function(a){return a.match({domRange:function(a){return Ef.fromDom(a.startContainer)},relative:function(a,b){return $v.getStart(a)},exact:function(a,b,c,d){return a}})},dw=function(a){var b=cw(a);return Bh.defaultView(b)},ew={domRange:_v.domRange,relative:_v.relative,exact:_v.exact,exactFromRange:bw,range:aw,getWin:dw},fw=yf.detect().browser,gw=function(a,b){var c=Of.isText(b)?Vp.get(b).length:Bh.children(b).length+1;return a>c?c:a<0?0:a},hw=function(a){return ew.range(a.start(),gw(a.soffset(),a.start()),a.finish(),gw(a.foffset(),a.finish()))},iw=function(a,b){return gh.contains(a,b)||gh.eq(a,b)},jw=function(a){return function(b){return iw(a,b.start())&&iw(a,b.finish())}},kw=function(a){return!0===a.inline||fw.isIE()},lw=function(a){return ew.range(Ef.fromDom(a.startContainer),a.startOffset,Ef.fromDom(a.endContainer),a.endOffset)},mw=function(a){var b=a.getSelection();return(b&&0!==b.rangeCount?La.from(b.getRangeAt(0)):La.none()).map(lw)},nw=function(a){var b=Bh.defaultView(a);return mw(b.dom()).filter(jw(a))},ow=function(a,b){return La.from(b).filter(jw(a)).map(hw)},pw=function(a){var b=document.createRange();try{return b.setStart(a.start().dom(),a.soffset()),b.setEnd(a.finish().dom(),a.foffset()),La.some(b)}catch(a){return La.none()}},qw=function(a){var b=kw(a)?nw(Ef.fromDom(a.getBody())):La.none();a.bookmark=b.isSome()?b:a.bookmark},rw=function(a,b){var c=Ef.fromDom(a.getBody()),d=kw(a)?La.from(b):La.none(),e=d.map(lw).filter(jw(c));a.bookmark=e.isSome()?e:a.bookmark},sw=function(a){return(a.bookmark?a.bookmark:La.none()).bind(Ea.curry(ow,Ef.fromDom(a.getBody()))).bind(pw)},tw=function(a){sw(a).each(function(b){a.selection.setRng(b)})},uw={store:qw,storeNative:rw,readRange:mw,restore:tw,getRng:sw,getBookmark:nw,validate:ow},vw=function(a,b,c,d,e,f){if("false"!==a.getContentEditable(f)&&"LI"!==f.nodeName){var g=c?"margin":"padding";if(g="TABLE"===f.nodeName?"margin":g,g+="rtl"===a.getStyle(f,"direction",!0)?"Right":"Left","outdent"===b){var h=Math.max(0,parseInt(f.style[g]||0,10)-d);a.setStyle(f,g,h?h+e:"")}else{var h=parseInt(f.style[g]||0,10)+d+e;a.setStyle(f,g,h)}}},ww=function(a,b){var c=a.settings,d=a.dom,e=a.selection,f=a.formatter,g=/[a-z%]+$/i.exec(c.indentation)[0],h=parseInt(c.indentation,10),i=a.getParam("indent_use_margin",!1);a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertOrderedList")||(c.forced_root_block||d.getParent(e.getNode(),d.isBlock)||f.apply("div"),sb.each(e.getSelectedBlocks(),function(a){return vw(d,b,i,h,g,a)}))},xw=Gd.each,yw=Gd.extend,zw=Gd.map,Aw=Gd.inArray,Bw=Gd.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Cw=function(a){var b,c,d=this,e={},f=function(){return!1},g=function(){return!0};a=a||{},b=a.scope||d,c=a.toggleEvent||f;var h=function(c,d){var h,i,k,l;if(c=c.toLowerCase(),d=d||{},d.type=c,d.target||(d.target=b),d.preventDefault||(d.preventDefault=function(){d.isDefaultPrevented=g},d.stopPropagation=function(){d.isPropagationStopped=g},d.stopImmediatePropagation=function(){d.isImmediatePropagationStopped=g},d.isDefaultPrevented=f,d.isPropagationStopped=f,d.isImmediatePropagationStopped=f),a.beforeFire&&a.beforeFire(d),h=e[c])for(i=0,k=h.length;i<k;i++){if(l=h[i],l.once&&j(c,l.func),d.isImmediatePropagationStopped())return d.stopPropagation(),d;if(!1===l.func.call(b,d))return d.preventDefault(),d}return d},i=function(a,b,g,h){var i,j,k;if(!1===b&&(b=f),b)for(b={func:b},h&&Gd.extend(b,h),j=a.toLowerCase().split(" "),k=j.length;k--;)a=j[k],i=e[a],i||(i=e[a]=[],c(a,!0)),g?i.unshift(b):i.push(b);return d},j=function(a,b){var f,g,h,i,j;if(a)for(i=a.toLowerCase().split(" "),f=i.length;f--;){if(a=i[f],g=e[a],!a){for(h in e)c(h,!1),delete e[h];return d}if(g){if(b)for(j=g.length;j--;)g[j].func===b&&(g=g.slice(0,j).concat(g.slice(j+1)),e[a]=g);else g.length=0;g.length||(c(a,!1),delete e[a])}}else{for(a in e)c(a,!1);e={}}return d},k=function(a,b,c){return i(a,b,c,{once:!0})},l=function(a){return a=a.toLowerCase(),!(!e[a]||0===e[a].length)};d.fire=h,d.on=i,d.off=j,d.once=k,d.has=l};Cw.isNative=function(a){return!!Bw[a.toLowerCase()]};var Dw,Ew=function(a){return a._eventDispatcher||(a._eventDispatcher=new Cw({scope:a,toggleEvent:function(b,c){Cw.isNative(b)&&a.toggleNativeEvent&&a.toggleNativeEvent(b,c)}})),a._eventDispatcher},Fw={fire:function(a,b,c){var d=this;if(d.removed&&"remove"!==a)return b;if(b=Ew(d).fire(a,b,c),!1!==c&&d.parent)for(var e=d.parent();e&&!b.isPropagationStopped();)e.fire(a,b,!1),e=e.parent();return b},on:function(a,b,c){return Ew(this).on(a,b,c)},off:function(a,b){return Ew(this).off(a,b)},once:function(a,b){return Ew(this).once(a,b)},hasEventListeners:function(a){return Ew(this).has(a)}},Gw=function(a,b){var c=hg.get(a,b);return void 0===c||""===c?[]:c.split(" ")},Hw=function(a,b,c){var d=Gw(a,b),e=d.concat([c]);hg.set(a,b,e.join(" "))},Iw=function(a,b,c){var d=sb.filter(Gw(a,b),function(a){return a!==c});d.length>0?hg.set(a,b,d.join(" ")):hg.remove(a,b)},Jw={read:Gw,add:Hw,remove:Iw},Kw=function(a){return void 0!==a.dom().classList},Lw=function(a){return Jw.read(a,"class")},Mw=function(a,b){return Jw.add(a,"class",b)},Nw=function(a,b){return Jw.remove(a,"class",b)},Ow=function(a,b){sb.contains(Lw(a),b)?Nw(a,b):Mw(a,b)},Pw={get:Lw,add:Mw,remove:Nw,toggle:Ow,supports:Kw},Qw=function(a,b){Pw.supports(a)?a.dom().classList.add(b):Pw.add(a,b)},Rw=function(a){0===(Pw.supports(a)?a.dom().classList:Pw.get(a)).length&&hg.remove(a,"class")},Sw=function(a,b){if(Pw.supports(a)){a.dom().classList.remove(b)}else Pw.remove(a,b);Rw(a)},Tw=function(a,b){return Pw.supports(a)?a.dom().classList.toggle(b):Pw.toggle(a,b)},Uw=function(a,b){var c=Pw.supports(a),d=a.dom().classList;return G(function(){c?d.remove(b):Pw.remove(a,b)},function(){c?d.add(b):Pw.add(a,b)},Vw(a,b))},Vw=function(a,b){return Pw.supports(a)&&a.dom().classList.contains(b)},Ww={add:Qw,remove:Sw,toggle:Tw,toggler:Uw,has:Vw},Xw=function(a,b){return a.fire("PreProcess",b)},Yw=function(a,b){return a.fire("PostProcess",b)},Zw=function(a){return a.fire("remove")},$w=function(a,b){return a.fire("SwitchMode",{mode:b})},_w=function(a,b,c,d){a.fire("ObjectResizeStart",{target:b,width:c,height:d})},ax=function(a,b,c,d){a.fire("ObjectResized",{target:b,width:c,height:d})},bx={firePreProcess:Xw,firePostProcess:Yw,fireRemove:Zw,fireSwitchMode:$w,fireObjectResizeStart:_w,fireObjectResized:ax},cx=function(a,b,c){try{a.getDoc().execCommand(b,!1,c)}catch(a){}},dx=function(a,b,c){Ww.has(a,b)&&!1===c?Ww.remove(a,b):c&&Ww.add(a,b)},ex=function(a,b){dx(Ef.fromDom(a.getBody()),"mce-content-readonly",b),b?(a.selection.controlSelection.hideResizeRect(),a.readonly=!0,a.getBody().contentEditable="false"):(a.readonly=!1,a.getBody().contentEditable="true",cx(a,"StyleWithCSS",!1),cx(a,"enableInlineTableEditing",!1),cx(a,"enableObjectResizing",!1),a.focus(),a.nodeChanged())},fx=function(a,b){b!==gx(a)&&(a.initialized?ex(a,"readonly"===b):a.on("init",function(){ex(a,"readonly"===b)}),bx.fireSwitchMode(a,b))},gx=function(a){return a.readonly?"readonly":"design"},hx=function(a){return!0===a.readonly},ix=rj.DOM,jx=function(a,b){return"selectionchange"===b?a.getDoc():!a.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(b)?a.getDoc().documentElement:a.settings.event_root?(a.eventRoot||(a.eventRoot=ix.select(a.settings.event_root)[0]),a.eventRoot):a.getBody()},kx=function(a){return!a.hidden&&!a.readonly},lx=function(a,b,c){kx(a)?a.fire(b,c):hx(a)&&c.preventDefault()},mx=function(a,b){var c,d;if(a.delegates||(a.delegates={}),!a.delegates[b]&&!a.removed)if(c=jx(a,b),a.settings.event_root){if(Dw||(Dw={},a.editorManager.on("removeEditor",function(){var b;if(!a.editorManager.activeEditor&&Dw){for(b in Dw)a.dom.unbind(jx(a,b));Dw=null}})),Dw[b])return;d=function(c){for(var d=c.target,e=a.editorManager.get(),f=e.length;f--;){var g=e[f].getBody();(g===d||ix.isChildOf(d,g))&&lx(e[f],b,c)}},Dw[b]=d,ix.bind(c,b,d)}else d=function(c){lx(a,b,c)},ix.bind(c,b,d),a.delegates[b]=d},nx={bindPendingEventDelegates:function(){var a=this;Gd.each(a._pendingNativeEvents,function(b){mx(a,b)})},toggleNativeEvent:function(a,b){var c=this;"focus"!==a&&"blur"!==a&&(b?c.initialized?mx(c,a):c._pendingNativeEvents?c._pendingNativeEvents.push(a):c._pendingNativeEvents=[a]:c.initialized&&(c.dom.unbind(jx(c,a),a,c.delegates[a]),delete c.delegates[a]))},unbindAllNativeEvents:function(){var a,b=this,c=b.getBody(),d=b.dom;if(b.delegates){for(a in b.delegates)b.dom.unbind(jx(b,a),a,b.delegates[a]);delete b.delegates}!b.inline&&c&&d&&(c.onload=null,d.unbind(b.getWin()),d.unbind(b.getDoc())),d&&(d.unbind(c),d.unbind(b.getContainer()))}};nx=Gd.extend({},Fw,nx);var ox,px=nx,qx=Gd.each,rx=Gd.explode,sx={f9:120,f10:121,f11:122},tx=Gd.makeMap("alt,ctrl,shift,meta,access"),ux=function(a){return tq.first(a).isSome()},vx=function(a,b,c){return tq.ancestor(a,b,c).isSome()},wx=function(a,b,c){return tq.closest(a,b,c).isSome()},xx=function(a,b){return tq.sibling(a,b).isSome()},yx=function(a,b){return tq.child(a,b).isSome()},zx=function(a,b){return tq.descendant(a,b).isSome()},Ax={any:ux,ancestor:vx,closest:wx,sibling:xx,child:yx,descendant:zx},Bx=function(a){a.dom().focus()},Cx=function(a){a.dom().blur()},Dx=function(a){var b=Bh.owner(a).dom();return a.dom()===b.activeElement},Ex=function(a){var b=void 0!==a?a.dom():document;return La.from(b.activeElement).map(Ef.fromDom)},Fx=function(a){var b=Bh.owner(a);Ex(b).filter(function(b){return Ax.closest(b,Ea.curry(gh.eq,a))}).fold(function(){Bx(a)},Ea.noop)},Gx=function(a){return Ex(Bh.owner(a)).filter(function(b){return a.dom().contains(b.dom())})},Hx={hasFocus:Dx,focus:Bx,blur:Cx,active:Ex,search:Gx,focusInside:Fx},Ix=function(a,b){return a.dom.getParent(b,function(b){return"true"===a.dom.getContentEditable(b)})},Jx=function(a){return a.collapsed?La.from(rk(a.startContainer,a.startOffset)).map(Ef.fromDom):La.none()},Kx=function(a,b){return Jx(b).bind(function(b){return ni(b)?La.some(b):!1===gh.contains(a,b)?La.some(a):La.none()})},Lx=function(a,b){Kx(Ef.fromDom(a.getBody()),b).bind(function(a){return zl.firstPositionIn(a.dom())}).fold(function(){a.selection.normalize()},function(b){return a.selection.setRng(b.toRange())})},Mx=function(a){if(a.setActive)try{a.setActive()}catch(b){a.focus()}else a.focus()},Nx=function(a){return Hx.hasFocus(a)||Hx.search(a).isSome()},Ox=function(a){return a.iframeElement&&Hx.hasFocus(Ef.fromDom(a.iframeElement))},Px=function(a){var b=a.getBody();return b&&Nx(Ef.fromDom(b))},Qx=function(a){return a.inline?Px(a):Ox(a)},Rx=function(a){var b=a.selection,c=a.settings.content_editable,d=a.getBody(),e=b.getRng();a.quirks.refreshContentEditable();var f=Ix(a,b.getNode());if(a.$.contains(d,f))return Mx(f),Lx(a,e),void Sx(a);void 0!==a.bookmark&&!1===Qx(a)&&uw.getRng(a).each(function(b){a.selection.setRng(b),e=b}),c||(Mb.opera||Mx(d),a.getWin().focus()),(Mb.gecko||c)&&(Mx(d),Lx(a,e)),Sx(a)},Sx=function(a){return a.editorManager.setActive(a)},Tx=function(a,b){a.removed||(b?Sx(a):Rx(a))},Ux={focus:Tx,hasFocus:Qx},Vx=function(a,b){return b.dom()[a]},Wx=function(a,b){return parseInt(Eg.get(b,a),10)},Xx=Ea.curry(Vx,"clientWidth"),Yx=Ea.curry(Vx,"clientHeight"),Zx=Ea.curry(Wx,"margin-top"),$x=Ea.curry(Wx,"margin-left"),_x=function(a){return a.dom().getBoundingClientRect()},ay=function(a,b,c){var d=Xx(a),e=Yx(a);return b>=0&&c>=0&&b<=d&&c<=e},by=function(a,b,c,d){var e=_x(b);return{x:c-(a?e.left+b.dom().clientLeft+$x(b):0),y:d-(a?e.top+b.dom().clientTop+Zx(b):0)}},cy=function(a,b,c){var d=Ef.fromDom(a.getBody()),e=a.inline?d:Bh.documentElement(d),f=by(a.inline,e,b,c);return ay(e,f.x,f.y)},dy=function(a){return La.from(a).map(Ef.fromDom)},ey=function(a){var b=a.inline?a.getBody():a.getContentAreaContainer();return dy(b).map(function(a){return gh.contains(Bh.owner(a),a)}).getOr(!1)},fy={isXYInContentArea:cy,isEditorAttachedToDom:ey},gy=z.PluginManager,hy=function(a,b){for(var c in gy.urls){if(gy.urls[c]+"/plugin"+b+".js"===a)return c}return null},iy=function(a,b){var c=hy(b,a.suffix);return c?"Failed to load plugin: "+c+" from url "+b:"Failed to load plugin url: "+b},jy=function(a,b){a.notificationManager.open({type:"error",text:b})},ky=function(a,b){a._skinLoaded?jy(a,b):a.on("SkinLoaded",function(){jy(a,b)})},ly=function(a,b){ky(a,"Failed to upload image: "+b)},my=function(a,b){ky(a,iy(a,b))},ny=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=window.console;d&&(d.error?d.error.apply(d,arguments):d.log.apply(d,arguments))},oy={pluginLoadError:my,uploadError:ly,displayError:ky,initError:ny},py=z.PluginManager,qy=z.ThemeManager,ry=function(a){Cb.getOrDie("requestAnimationFrame")(a)},sy=function(a){return Cb.getOrDie("atob")(a)},ty={atob:sy,requestAnimationFrame:ry},uy=function(a){return new Ob(function(b,c){var d=function(){c("Cannot convert "+a+" to Blob. Resource might not exist or is inaccessible.")};try{var e=new M;e.open("GET",a,!0),e.responseType="blob",e.onload=function(){200===this.status?b(this.response):d()},e.onerror=d,e.send()}catch(a){d()}})},vy=function(a){var b,c;return a=decodeURIComponent(a).split(","),c=/data:([^;]+)/.exec(a[0]),c&&(b=c[1]),{type:b,data:a[1]}},wy=function(a){return new Ob(function(b){var c,d,e;a=vy(a);try{c=ty.atob(a.data)}catch(a){return void b(new O([]))}for(d=new Q(c.length),e=0;e<d.length;e++)d[e]=c.charCodeAt(e);b(new O([d],{type:a.type}))})},xy=function(a){return 0===a.indexOf("blob:")?uy(a):0===a.indexOf("data:")?wy(a):null},yy=function(a){return new Ob(function(b){var c=new P;c.onloadend=function(){b(c.result)},c.readAsDataURL(a)})},zy={uriToBlob:xy,blobToDataUri:yy,parseDataUri:vy},Ay=0,By=function(a){return(a||"blobid")+Ay++},Cy=function(a,b,c,d){var e,f;if(0===b.src.indexOf("blob:"))return f=a.getByUri(b.src),void(f?c({image:b,blobInfo:f}):zy.uriToBlob(b.src).then(function(d){zy.blobToDataUri(d).then(function(g){e=zy.parseDataUri(g).data,f=a.create(By(),d,e),a.add(f),c({image:b,blobInfo:f})})},function(a){d(a)}));e=zy.parseDataUri(b.src).data,f=a.findFirst(function(a){return a.base64()===e}),f?c({image:b,blobInfo:f}):zy.uriToBlob(b.src).then(function(d){f=a.create(By(),d,e),a.add(f),c({image:b,blobInfo:f})},function(a){d(a)})},Dy=function(a){return a?a.getElementsByTagName("img"):[]},Ey=0,Fy=function(){var a=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+a()+a()+a()},Gy=function(a){return a+Ey+++Fy()},Hy={uuid:Gy},Iy=function(a,b){return a.hasOwnProperty(b.nodeName)},Jy=function(a,b){return!!Gi.isText(b)||!!Gi.isElement(b)&&(!Iy(a,b)&&!Fp.isBookmarkNode(b))},Ky=function(a,b,c){return sb.exists(Sr.parents(Ef.fromDom(c),Ef.fromDom(b)),function(b){return Iy(a,b.dom())})},Ly=function(a,b){if(Gi.isText(b)){if(0===b.nodeValue.length)return!0;if(/^\s+$/.test(b.nodeValue)&&(!b.nextSibling||Iy(a,b.nextSibling)))return!0}return!1},My=function(a){var b,c,d,e,f,g,h,i,j,k,l,m=a.settings,n=a.dom,o=a.selection,p=a.schema,q=p.getBlockElements(),r=o.getStart(),s=a.getBody();if(l=m.forced_root_block,r&&Gi.isElement(r)&&l&&(k=s.nodeName.toLowerCase(),p.isValidChild(k,l.toLowerCase())&&!Ky(q,s,r))){for(b=o.getRng(),c=b.startContainer,d=b.startOffset,e=b.endContainer,f=b.endOffset,j=Ux.hasFocus(a),r=s.firstChild;r;)if(Jy(q,r)){if(Ly(q,r)){h=r,r=r.nextSibling,n.remove(h);continue}g||(g=n.create(l,a.settings.forced_root_block_attrs),r.parentNode.insertBefore(g,r),i=!0),h=r,r=r.nextSibling,g.appendChild(h)}else g=null,r=r.nextSibling;i&&j&&(b.setStart(c,d),b.setEnd(e,f),o.setRng(b),a.nodeChanged())}},Ny=function(a){a.settings.forced_root_block&&a.on("NodeChange",Ea.curry(My,a))},Oy={setup:Ny},Py=function(a){var b,c,d,e;return e=a.getBoundingClientRect(),b=a.ownerDocument,c=b.documentElement,d=b.defaultView,{top:e.top+d.pageYOffset-c.clientTop,left:e.left+d.pageXOffset-c.clientLeft}},Qy=function(a){return a.inline?Py(a.getBody()):{left:0,top:0}},Ry=function(a){var b=a.getBody();return a.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0}},Sy=function(a){var b=a.getBody(),c=a.getDoc().documentElement,d={left:b.scrollLeft,top:b.scrollTop},e={left:b.scrollLeft||c.scrollLeft,top:b.scrollTop||c.scrollTop};return a.inline?d:e},Ty=function(a,b){if(b.target.ownerDocument!==a.getDoc()){var c=Py(a.getContentAreaContainer()),d=Sy(a);return{left:b.pageX-c.left+d.left,top:b.pageY-c.top+d.top}}return{left:b.pageX,top:b.pageY}},Uy=function(a,b,c){return{pageX:c.left-a.left+b.left,pageY:c.top-a.top+b.top}},Vy=function(a,b){return Uy(Qy(a),Ry(a),Ty(a,b))},Wy={calc:Vy},Xy=Gi.isContentEditableFalse,Yy=Gi.isContentEditableTrue,Zy=function(a,b){return Xy(b)&&b!==a},$y=function(a,b,c){return b!==c&&!a.dom.isChildOf(b,c)&&!Xy(b)},_y=function(a){var b=a.cloneNode(!0);return b.removeAttribute("data-mce-selected"),b},az=function(a,b,c,d){var e=b.cloneNode(!0);a.dom.setStyles(e,{width:c,height:d}),a.dom.setAttrib(e,"data-mce-selected",null);var f=a.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.dom.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:c,height:d}),a.dom.setStyles(e,{margin:0,boxSizing:"border-box"}),f.appendChild(e),f},bz=function(a,b){a.parentNode!==b&&b.appendChild(a)},cz=function(a,b,c,d,e,f){var g=0,h=0;a.style.left=b.pageX+"px",a.style.top=b.pageY+"px",b.pageX+c>e&&(g=b.pageX+c-e),b.pageY+d>f&&(h=b.pageY+d-f),a.style.width=c-g+"px",a.style.height=d-h+"px"},dz=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},ez=function(a){return 0===a.button},fz=function(a){return a.element},gz=function(a,b){return{pageX:b.pageX-a.relX,pageY:b.pageY+5}},hz=function(a,b){return function(c){if(ez(c)){var d=td.find(b.dom.getParents(c.target),Ck.or(Xy,Yy));if(Zy(b.getBody(),d)){var e=b.dom.getPos(d),f=b.getBody(),g=b.getDoc().documentElement;a.element=d,a.screenX=c.screenX,a.screenY=c.screenY,a.maxX=(b.inline?f.scrollWidth:g.offsetWidth)-2,a.maxY=(b.inline?f.scrollHeight:g.offsetHeight)-2,a.relX=c.pageX-e.x,a.relY=c.pageY-e.y,a.width=d.offsetWidth,a.height=d.offsetHeight,a.ghost=az(b,d,a.width,a.height)}}}},iz=function(a,b){var c=Vb.throttle(function(a,c){b._selectionOverrides.hideFakeCaret(),b.selection.placeCaretAt(a,c)},0);return function(d){var e=Math.max(Math.abs(d.screenX-a.screenX),Math.abs(d.screenY-a.screenY));if(fz(a)&&!a.dragging&&e>10){if(b.fire("dragstart",{target:a.element}).isDefaultPrevented())return;a.dragging=!0,b.focus()}if(a.dragging){var f=gz(a,Wy.calc(b,d));bz(a.ghost,b.getBody()),cz(a.ghost,f,a.width,a.height,a.maxX,a.maxY),c(d.clientX,d.clientY)}}},jz=function(a){var b=a.getSel().getRangeAt(0),c=b.startContainer;return 3===c.nodeType?c.parentNode:c},kz=function(a,b){return function(c){if(a.dragging&&$y(b,jz(b.selection),a.element)){var d=_y(a.element),e=b.fire("drop",{targetClone:d,clientX:c.clientX,clientY:c.clientY});e.isDefaultPrevented()||(d=e.targetClone,b.undoManager.transact(function(){dz(a.element),b.insertContent(b.dom.getOuterHTML(d)),b._selectionOverrides.hideFakeCaret()}))}mz(a)}},lz=function(a,b){return function(){mz(a),a.dragging&&b.fire("dragend")}},mz=function(a){a.dragging=!1,a.element=null,dz(a.ghost)},nz=function(a){var b,c,d,e,f,g,h={};b=rj.DOM,g=document,c=hz(h,a),d=iz(h,a),e=kz(h,a),f=lz(h,a),a.on("mousedown",c),a.on("mousemove",d),a.on("mouseup",e),b.bind(g,"mousemove",d),b.bind(g,"mouseup",f),a.on("remove",function(){b.unbind(g,"mousemove",d),b.unbind(g,"mouseup",f)})},oz=function(a){a.on("drop",function(b){var c=void 0!==b.clientX?a.getDoc().elementFromPoint(b.clientX,b.clientY):null;(Xy(c)||Xy(a.dom.getContentEditableParent(c)))&&b.preventDefault()})},pz=function(a){nz(a),oz(a)},qz={init:pz},rz=function(a){var b=function(b){return td.map(b,function(b){return b=gk(b),b.node=a,b})};if(Gi.isElement(a))return b(a.getClientRects());if(Gi.isText(a)){var c=a.ownerDocument.createRange();return c.setStart(a,0),c.setEnd(a,a.data.length),b(c.getClientRects())}},sz=function(a){return td.reduce(a,function(a,b){return a.concat(rz(b))},[])};!function(a){a[a.Up=-1]="Up",a[a.Down=1]="Down"}(ox||(ox={}));var tz=function(a,b,c,d){for(;d=Cn(d,a,ek,b);)if(c(d))return},uz=function(a,b,c,d,e,f){var g,h,i=0,j=[],k=function(d){var f,g,k;for(k=sz([d]),-1===a&&(k=k.reverse()),f=0;f<k.length;f++)if(g=k[f],!c(g,h)){if(j.length>0&&b(g,td.last(j))&&i++,g.line=i,e(g))return!0;j.push(g)}};return(h=td.last(f.getClientRects()))?(g=f.getNode(),k(g),tz(a,d,k,g),j):j},vz=function(a,b){return b.line>a},wz=function(a,b){return b.line===a},xz=Ea.curry(uz,ox.Up,kk,lk),yz=Ea.curry(uz,ox.Down,lk,kk),zz=function(a,b,c,d){var e,f,g,h,i,j,k=fo(b),l=[],m=0,n=function(a){return td.last(a.getClientRects())};1===a?(e=k.next,f=lk,g=kk,h=al.after(d)):(e=k.prev,f=kk,g=lk,h=al.before(d)),j=n(h);do{if(h.isVisible()&&(i=n(h),!g(i,j))){if(l.length>0&&f(i,td.last(l))&&m++,i=gk(i),i.position=h,i.line=m,c(i))return l;l.push(i)}}while(h=e(h));return l},Az=function(a){return function(b){return vz(a,b)}},Bz=function(a){return function(b){return wz(a,b)}},Cz=Gi.isContentEditableFalse,Dz=Cn,Ez=function(a,b){return Math.abs(a.left-b)},Fz=function(a,b){return Math.abs(a.right-b)},Gz=function(a,b){return a>=b.left&&a<=b.right},Hz=function(a,b){return td.reduce(a,function(a,c){var d,e;return d=Math.min(Ez(a,b),Fz(a,b)),e=Math.min(Ez(c,b),Fz(c,b)),Gz(b,c)?c:Gz(b,a)?a:e===d&&Cz(c.node)?c:e<d?c:a})},Iz=function(a,b,c,d){for(;d=Dz(d,a,ek,b);)if(c(d))return},Jz=function(a,b){var c=[],d=function(a,d){var e;return e=td.filter(sz([d]),function(c){return!a(c,b)}),c=c.concat(e),0===e.length};return c.push(b),Iz(ox.Up,a,Ea.curry(d,kk),b.node),Iz(ox.Down,a,Ea.curry(d,lk),b.node),c},Kz=function(a){return td.filter(td.toArray(a.getElementsByTagName("*")),rn)},Lz=function(a,b){return{node:a.node,before:Ez(a,b)<Fz(a,b)}},Mz=function(a,b,c){var d,e=sz(Kz(a)),f=td.filter(e,function(a){return c>=a.top&&c<=a.bottom});return d=Hz(f,b),d&&(d=Hz(Jz(a,d),b))&&rn(d.node)?Lz(d,b):null},Nz=function(a,b,c){return!c.collapsed&&sb.foldl(c.getClientRects(),function(c,d){return c||mk(d,a,b)},!1)},Oz={isXYWithinRange:Nz},Pz=function(a,b){var c=null,d=null;return{cancel:function(){null!==c&&(clearTimeout(c),c=null,d=null)},throttle:function(){d=arguments,null===c&&(c=setTimeout(function(){a.apply(null,d),c=null,d=null},b))}}},Qz=function(a,b){var c=null;return{cancel:function(){null!==c&&(clearTimeout(c),c=null)},throttle:function(){var d=arguments;null===c&&(c=setTimeout(function(){a.apply(null,d),c=null,d=null},b))}}},Rz=function(a,b){var c=null;return{cancel:function(){null!==c&&(clearTimeout(c),c=null)},throttle:function(){var d=arguments;null!==c&&clearTimeout(c),c=setTimeout(function(){a.apply(null,d),c=null,d=null},b)}}},Sz={adaptable:Pz,first:Qz,last:Rz},Tz=function(a){var b=Sz.first(function(){if(!a.removed){if(a.selection.getRng().collapsed){var b=Gl(a,a.selection.getRng(),!1);a.selection.setRng(b)}}},0);a.on("focus",function(){b.throttle()}),a.on("blur",function(){b.cancel()})},Uz={setup:Tz},Vz={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(a){return a.shiftKey||a.ctrlKey||a.altKey||this.metaKeyPressed(a)},metaKeyPressed:function(a){return Mb.mac?a.metaKey:a.ctrlKey&&!a.altKey}},Wz=Gi.isContentEditableTrue,Xz=Gi.isContentEditableFalse,Yz=Rn,Zz=Qn,$z=function(a,b){for(var c=a.getBody();b&&b!==c;){if(Wz(b)||Xz(b))return b;b=b.parentNode}return null},_z=function(a){var b,c=function(b){return a.dom.isBlock(b)},d=a.getBody(),e=qn(a.getBody(),c,function(){return Ux.hasFocus(a)}),f="sel-"+a.dom.uniqueId(),g=function(b){return a.dom.hasClass(b,"mce-offscreen-selection")},h=function(){var b=a.dom.get(f);return b?b.getElementsByTagName("*")[0]:b},i=function(b){b&&a.selection.setRng(b)},j=function(){return a.selection.getRng()},k=function(b,c,d,f){void 0===f&&(f=!0);var g;return g=a.fire("ShowCaret",{target:c,direction:b,before:d}),g.isDefaultPrevented()?null:(f&&a.selection.scrollIntoView(c,-1===b),e.show(d,c))},l=function(a,b){return b=Ln(a,d,b),-1===a?al.fromRangeStart(b):al.fromRangeEnd(b)},m=function(b){b.hasAttribute("data-mce-caret")&&(Qj(b),i(j()),a.selection.scrollIntoView(b[0]))},n=function(){a.on("mouseup",function(b){var c=j();c.collapsed&&fy.isXYInContentArea(a,b.clientX,b.clientY)&&i(Fl(a,c,!1))}),a.on("click",function(b){var c;(c=$z(a,b.target))&&(Xz(c)&&(b.preventDefault(),a.focus()),Wz(c)&&a.dom.isChildOf(c,a.selection.getNode())&&s())}),a.on("blur NewBlock",function(){s()}),a.on("ResizeWindow FullscreenStateChanged",function(){return e.reposition()});var c=function(a){var b=fo(a);if(!a.firstChild)return!1;var c=al.before(a.firstChild),d=b.next(c);return d&&!Zz(d)&&!Yz(d)},f=function(b,c){return a.dom.getParent(b,a.dom.isBlock)===a.dom.getParent(c,a.dom.isBlock)},l=function(b,d){var e=a.dom.getParent(b,a.dom.isBlock),g=a.dom.getParent(d,a.dom.isBlock);return!(!e||!a.dom.isChildOf(e,g)||!1!==Xz($z(a,e)))||e&&!f(e,g)&&c(e)};(function(a){var b=!1;a.on("touchstart",function(){b=!1}),a.on("touchmove",function(){b=!0}),a.on("touchend",function(c){var d=$z(a,c.target);Xz(d)&&(b||(c.preventDefault(),r(El(a,d))))})})(a),a.on("mousedown",function(b){var c,e=b.target;if((e===d||"HTML"===e.nodeName||a.dom.isChildOf(e,d))&&!1!==fy.isXYInContentArea(a,b.clientX,b.clientY))if(c=$z(a,e))Xz(c)?(b.preventDefault(),r(El(a,c))):(s(),Wz(c)&&b.shiftKey||Oz.isXYWithinRange(b.clientX,b.clientY,a.selection.getRng())||(u(),a.selection.placeCaretAt(b.clientX,b.clientY)));else if(!1===rn(e)){s(),u();var f=Mz(d,b.clientX,b.clientY);if(f&&!l(b.target,f.node)){b.preventDefault();var g=k(1,f.node,f.before,!1);a.getBody().focus(),i(g)}}}),a.on("keypress",function(b){Vz.modifierPressed(b)||(b.keyCode,Xz(a.selection.getNode())&&b.preventDefault())}),a.on("getSelectionRange",function(a){var c=a.range;if(b){if(!b.parentNode)return void(b=null);c=c.cloneRange(),c.selectNode(b),a.range=c}}),a.on("setSelectionRange",function(a){var b;(b=r(a.range,a.forward))&&(a.range=b)}),a.on("AfterSetSelectionRange",function(a){var b=a.range;q(b)||u(),g(b.startContainer.parentNode)||s()}),a.on("copy",function(a){var b=a.clipboardData;if(!a.isDefaultPrevented()&&a.clipboardData&&!Mb.ie){var c=h();c&&(a.preventDefault(),b.clearData(),b.setData("text/html",c.outerHTML),b.setData("text/plain",c.outerText))}}),qz.init(a),Uz.setup(a)},o=function(){var b=a.contentStyles,c=".mce-content-body";b.push(e.getCss()),b.push(c+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+c+" *[contentEditable=false] {cursor: default;}"+c+" *[contentEditable=true] {cursor: text;}")},p=function(a){return Gj(a)||Nj(a)||Oj(a)},q=function(a){return p(a.startContainer)||p(a.endContainer)},r=function(c,d){var e,g,h,i,j,m,n,o,p,r,s=a.$,t=a.dom;if(!c)return null;if(c.collapsed){if(!q(c))if(!1===d){if(o=l(-1,c),rn(o.getNode(!0)))return k(-1,o.getNode(!0),!1,!1);if(rn(o.getNode()))return k(-1,o.getNode(),!o.isAtEnd(),!1)}else{if(o=l(1,c),rn(o.getNode()))return k(1,o.getNode(),!o.isAtEnd(),!1);if(rn(o.getNode(!0)))return k(1,o.getNode(!0),!1,!1)}return null}return i=c.startContainer,j=c.startOffset,m=c.endOffset,3===i.nodeType&&0===j&&Xz(i.parentNode)&&(i=i.parentNode,j=t.nodeIndex(i),i=i.parentNode),1!==i.nodeType?null:(m===j+1&&(e=i.childNodes[j]),Xz(e)?(p=r=e.cloneNode(!0),n=a.fire("ObjectSelected",{target:e,targetClone:p}),n.isDefaultPrevented()?null:(g=mr.descendant(Ef.fromDom(a.getBody()),"#"+f).fold(function(){return s([])},function(a){return s([a.dom()])}),p=n.targetClone,0===g.length&&(g=s('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",f),g.appendTo(a.getBody())),c=a.dom.createRng(),p===r&&Mb.ie?(g.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(p),c.setStartAfter(g[0].firstChild.firstChild),c.setEndAfter(p)):(g.empty().append("").append(p).append(""),c.setStart(g[0].firstChild,1),c.setEnd(g[0].lastChild,0)),g.css({top:t.getPos(e,a.getBody()).y}),g[0].focus(),h=a.selection.getSel(),h.removeAllRanges(),h.addRange(c),sb.each(em.descendants(Ef.fromDom(a.getBody()),"*[data-mce-selected]"),function(a){hg.remove(a,"data-mce-selected")}),e.setAttribute("data-mce-selected","1"),b=e,u(),c)):null)},s=function(){b&&b.removeAttribute("data-mce-selected"),mr.descendant(Ef.fromDom(a.getBody()),"#"+f).each(Qp.remove),b=null},t=function(){e.destroy(),b=null},u=function(){e.hide()};return Mb.ceFalse&&(n(),o()),{showCaret:k,showBlockCaretContainer:m,hideFakeCaret:u,destroy:t}},aA=function(a){return 0===a.indexOf("data-")||0===a.indexOf("aria-")},bA=function(a){return a.replace(/<!--|-->/g,"")},cA=function(a,b){return!a.allow_html_data_urls&&(/^data:image\//i.test(b)?!1===a.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(b):/^data:/i.test(b))},dA=function(a,b,c){var d,e,f,g,h=1;for(g=a.getShortEndedElements(),f=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,f.lastIndex=d=c;e=f.exec(b);){if(d=f.lastIndex,"/"===e[1])h--;else if(!e[1]){if(e[2]in g)continue;h++}if(0===h)break}return d};!function(a){a.findEndTag=dA}(W||(W={}));var eA=W,fA=function(a,b){var c=new RegExp(["\\s?("+a.join("|")+')="[^"]+"'].join("|"),"gi");return b.replace(c,"")},gA=function(a,b){var c,d,e,f,g,h=b,i=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,j=a.schema;for(h=fA(a.getTempAttrs(),h),g=j.getShortEndedElements();f=i.exec(h);)d=i.lastIndex,e=f[0].length,c=g[f[1]]?d:eA.findEndTag(j,h,d),h=h.substring(0,d-e)+h.substring(c),i.lastIndex=d-e;return Bj.trim(h)},hA=gA,iA={trimExternal:hA,trimInternal:gA},jA=0,kA=1,lA=2,mA=function(a,b){var c=a.length+b.length+2,d=new Array(c),e=new Array(c),f=function(a,b,c){return{start:a,end:b,diag:c}},g=function(c,d,e,f,h){var j=i(c,d,e,f);if(null===j||j.start===d&&j.diag===d-f||j.end===c&&j.diag===c-e)for(var k=c,l=e;k<d||l<f;)k<d&&l<f&&a[k]===b[l]?(h.push([jA,a[k]]),++k,++l):d-c>f-e?(h.push([lA,a[k]]),++k):(h.push([kA,b[l]]),++l);else{g(c,j.start,e,j.start-j.diag,h);for(var m=j.start;m<j.end;++m)h.push([jA,a[m]]);g(j.end,d,j.end-j.diag,f,h)}},h=function(c,d,e,g){for(var h=c;h-d<g&&h<e&&a[h]===b[h-d];)++h;return f(c,h,d)},i=function(c,f,g,i){var j=f-c,k=i-g;if(0===j||0===k)return null;var l=j-k,m=k+j,n=(m%2==0?m:m+1)/2;d[1+n]=c,e[1+n]=f+1;var o,p,q,r,s;for(o=0;o<=n;++o){for(p=-o;p<=o;p+=2){for(q=p+n,p===-o||p!==o&&d[q-1]<d[q+1]?d[q]=d[q+1]:d[q]=d[q-1]+1,r=d[q],s=r-c+g-p;r<f&&s<i&&a[r]===b[s];)d[q]=++r,++s;if(l%2!=0&&l-o<=p&&p<=l+o&&e[q-l]<=d[q])return h(e[q-l],p+c-g,f,i)}for(p=l-o;p<=l+o;p+=2){for(q=p+n-l,p===l-o||p!==l+o&&e[q+1]<=e[q-1]?e[q]=e[q+1]-1:e[q]=e[q-1],r=e[q]-1,s=r-c+g-p;r>=c&&s>=g&&a[r]===b[s];)e[q]=r--,s--;if(l%2==0&&-o<=p&&p<=o&&e[q]<=d[q+l])return h(e[q],p+c-g,f,i)}}},j=[];return g(0,a.length,0,b.length,j),j},nA={KEEP:jA,DELETE:lA,INSERT:kA,diff:mA},oA=function(a){return Gi.isElement(a)?a.outerHTML:Gi.isText(a)?Zi.encodeRaw(a.data,!1):Gi.isComment(a)?"\x3c!--"+a.data+"--\x3e":""},pA=function(a){var b,c,d;for(d=document.createElement("div"),b=document.createDocumentFragment(),a&&(d.innerHTML=a);c=d.firstChild;)b.appendChild(c);return b},qA=function(a,b,c){var d=pA(b);if(a.hasChildNodes()&&c<a.childNodes.length){var e=a.childNodes[c];e.parentNode.insertBefore(d,e)}else a.appendChild(d)},rA=function(a,b){if(a.hasChildNodes()&&b<a.childNodes.length){var c=a.childNodes[b];c.parentNode.removeChild(c)}},sA=function(a,b){var c=0;td.each(a,function(a){a[0]===nA.KEEP?c++:a[0]===nA.INSERT?(qA(b,a[1],c),c++):a[0]===nA.DELETE&&rA(b,c)})},tA=function(a){return td.filter(td.map(a.childNodes,oA),function(a){return a.length>0})},uA=function(a,b){var c=td.map(b.childNodes,oA);return sA(nA.diff(c,a),b),b},vA={read:tA,write:uA},wA=function(a,b){var c=b||document,d=c.createElement("div");return d.innerHTML=a,Bh.children(Ef.fromDom(d))},xA=function(a,b){return sb.map(a,function(a){return Ef.fromTag(a,b)})},yA=function(a,b){return sb.map(a,function(a){return Ef.fromText(a,b)})},zA=function(a){return sb.map(a,Ef.fromDom)},AA={fromHtml:wA,fromTags:xA,fromText:yA,fromDom:zA},BA=function(a){return a.dom().innerHTML},CA=function(a,b){var c=Bh.owner(a),d=c.dom(),e=Ef.fromDom(d.createDocumentFragment()),f=AA.fromHtml(b,d);Mp.append(e,f),Qp.empty(a),Vm.append(a,e)},DA=function(a){var b=Ef.fromTag("div"),c=Ef.fromDom(a.dom().cloneNode(!0));return Vm.append(b,c),BA(b)},EA={get:BA,set:CA,getOuter:DA},FA=ln(La.none()),GA=function(){return FA.get().getOrThunk(function(){var a=document.implementation.createHTMLDocument("undo");return FA.set(La.some(a)),a})},HA=function(a){return-1!==a.indexOf("</iframe>")},IA=function(a){return{type:"fragmented",fragments:a,content:"",bookmark:null,beforeBookmark:null}},JA=function(a){return{type:"complete",fragments:null,content:a,bookmark:null,beforeBookmark:null}},KA=function(a){var b,c,d;return b=vA.read(a.getBody()),d=sb.bind(b,function(b){var c=iA.trimInternal(a.serializer,b);return c.length>0?[c]:[]}),c=d.join(""),HA(c)?IA(d):JA(c)},LA=function(a,b,c){"fragmented"===b.type?vA.write(b.fragments,a.getBody()):a.setContent(b.content,{format:"raw"}),a.selection.moveToBookmark(c?b.beforeBookmark:b.bookmark)},MA=function(a){return"fragmented"===a.type?a.fragments.join(""):a.content},NA=function(a){var b=Ef.fromTag("body",GA());return EA.set(b,MA(a)),sb.each(em.descendants(b,"*[data-mce-bogus]"),Qp.unwrap),EA.get(b)},OA=function(a,b){return MA(a)===MA(b)},PA=function(a,b){return NA(a)===NA(b)},QA=function(a,b){return!(!a||!b)&&(!!OA(a,b)||PA(a,b))},RA={createFragmentedLevel:IA,createCompleteLevel:JA,createFromEditor:KA,applyToEditor:LA,isEq:QA},SA=function(a){return a&&/^(IMG)$/.test(a.nodeName)},TA=function(a,b,c){var d,e,f,g=c.startOffset,h=c.startContainer;if((c.startContainer!==c.endContainer||!SA(c.startContainer.childNodes[c.startOffset]))&&1===h.nodeType)for(f=h.childNodes,g<f.length?(h=f[g],d=new v(h,a.getParent(h,a.isBlock))):(h=f[f.length-1],d=new v(h,a.getParent(h,a.isBlock)),d.next(!0)),e=d.current();e;e=d.next())if(3===e.nodeType&&!XA(e))return c.setStart(e,0),void b.setRng(c)},UA=function(a,b,c){if(a)for(b=b?"nextSibling":"previousSibling",a=c?a:a[b];a;a=a[b])if(1===a.nodeType||!XA(a))return a},VA=function(a,b){return b.nodeType&&(b=b.nodeName),!!a.schema.getTextBlockElements()[b.toLowerCase()]},WA=function(a,b,c){return a.schema.isValidChild(b,c)},XA=function(a){return a&&3===a.nodeType&&/^([\t \r\n]+|)$/.test(a.nodeValue)},YA=function(a,b){return"string"!=typeof a?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a},ZA=function(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()===b.toLowerCase()},$A=function(a,b,c){return"color"!==c&&"backgroundColor"!==c||(b=a.toHex(b)),"fontWeight"===c&&700===b&&(b="bold"),"fontFamily"===c&&(b=b.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+b},_A=function(a,b,c){return $A(a,a.getStyle(b,c),c)},aB=function(a,b){var c;return a.getParent(b,function(b){return(c=a.getStyle(b,"text-decoration"))&&"none"!==c}),c},bB=function(a,b,c){return a.getParents(b,c,a.getRoot())},cB={isInlineBlock:SA,moveStart:TA,getNonWhiteSpaceSibling:UA,isTextBlock:VA,isValid:WA,isWhiteSpaceNode:XA,replaceVars:YA,isEq:ZA,normalizeStyleValue:$A,getStyle:_A,getTextDecoration:aB,getParents:bB},dB=Fp.isBookmarkNode,eB=cB.getParents,fB=cB.isWhiteSpaceNode,gB=cB.isTextBlock,hB=function(a,b){for(void 0===b&&(b=3===a.nodeType?a.length:a.childNodes.length);a&&a.hasChildNodes();)(a=a.childNodes[b])&&(b=3===a.nodeType?a.length:a.childNodes.length);return{node:a,offset:b}},iB=function(a,b){var c=hB(a,b);if(c.node){for(;c.node&&0===c.offset&&c.node.previousSibling;)c=hB(c.node.previousSibling);c.node&&c.offset>0&&3===c.node.nodeType&&" "===c.node.nodeValue.charAt(c.offset-1)&&c.offset>1&&(a=c.node,a.splitText(c.offset-1))}return a},jB=function(a){return"BR"===a.nodeName&&a.getAttribute("data-mce-bogus")&&!a.nextSibling},kB=function(a,b){for(var c=b;c;){if(1===c.nodeType&&a.getContentEditable(c))return"false"===a.getContentEditable(c)?c:b;c=c.parentNode}return b},lB=function(a,b,c,d){var e,f,g=c.nodeValue;return void 0===d&&(d=a?g.length:0),a?(e=g.lastIndexOf(" ",d),f=g.lastIndexOf("",d),-1===(e=e>f?e:f)||b||e++):(e=g.indexOf(" ",d),f=g.indexOf("",d),e=-1!==e&&(-1===f||e<f)?e:f),e},mB=function(a,b,c,d,e,f){var g,h,i,j;if(3===c.nodeType){if(-1!==(i=lB(e,f,c,d)))return{container:c,offset:i};j=c}for(g=new v(c,a.getParent(c,a.isBlock)||b);h=g[e?"prev":"next"]();)if(3===h.nodeType){if(j=h,-1!==(i=lB(e,f,h)))return{container:h,offset:i}}else if(a.isBlock(h))break;if(j)return d=e?0:j.length,{container:j,offset:d}},nB=function(a,b,c,d,e){var f,g,h,i;for(3===d.nodeType&&0===d.nodeValue.length&&d[e]&&(d=d[e]),f=eB(a,d),g=0;g<f.length;g++)for(h=0;h<b.length;h++)if(!("collapsed"in(i=b[h])&&i.collapsed!==c.collapsed)&&a.is(f[g],i.selector))return f[g];return d},oB=function(a,b,c,d){var e,f=a.dom,g=f.getRoot();if(b[0].wrapper||(e=f.getParent(c,b[0].block,g)),!e){var h=f.getParent(c,"LI,TD,TH");e=f.getParent(3===c.nodeType?c.parentNode:c,function(b){return b!==g&&gB(a,b)},h)}if(e&&b[0].wrapper&&(e=eB(f,e,"ul,ol").reverse()[0]||e),!e)for(e=c;e[d]&&!f.isBlock(e[d])&&(e=e[d],!cB.isEq(e,"br")););return e||c},pB=function(a,b,c,d,e,f,g){var h,i,j,k,l;if(h=i=g?c:e,k=g?"previousSibling":"nextSibling",l=a.getRoot(),3===h.nodeType&&!fB(h)&&(g?d>0:f<h.nodeValue.length))return h;for(;;){if(!b[0].block_expand&&a.isBlock(i))return i;for(j=i[k];j;j=j[k])if(!dB(j)&&!fB(j)&&!jB(j))return i;if(i===l||i.parentNode===l){h=i;break}i=i.parentNode}return h},qB=function(a,b,c,d){var e,f=b.startContainer,g=b.startOffset,h=b.endContainer,i=b.endOffset,j=a.dom;return 1===f.nodeType&&f.hasChildNodes()&&(f=rk(f,g),3===f.nodeType&&(g=0)),1===h.nodeType&&h.hasChildNodes()&&(h=rk(h,b.collapsed?i:i-1),3===h.nodeType&&(i=h.nodeValue.length)),f=kB(j,f),h=kB(j,h),(dB(f.parentNode)||dB(f))&&(f=dB(f)?f:f.parentNode,f=f.nextSibling||f,3===f.nodeType&&(g=0)),(dB(h.parentNode)||dB(h))&&(h=dB(h)?h:h.parentNode,h=h.previousSibling||h,3===h.nodeType&&(i=h.length)),c[0].inline&&(b.collapsed&&(e=mB(j,a.getBody(),f,g,!0,d),e&&(f=e.container,g=e.offset),(e=mB(j,a.getBody(),h,i,!1,d))&&(h=e.container,i=e.offset)),h=d?h:iB(h,i)),(c[0].inline||c[0].block_expand)&&(c[0].inline&&3===f.nodeType&&0!==g||(f=pB(j,c,f,g,h,i,!0)),c[0].inline&&3===h.nodeType&&i!==h.nodeValue.length||(h=pB(j,c,f,g,h,i,!1))),c[0].selector&&!1!==c[0].expand&&!c[0].inline&&(f=nB(j,c,b,f,"previousSibling"),h=nB(j,c,b,h,"nextSibling")),(c[0].block||c[0].selector)&&(f=oB(a,c,f,"previousSibling"),h=oB(a,c,h,"nextSibling"),c[0].block&&(j.isBlock(f)||(f=pB(j,c,f,g,h,i,!0)),j.isBlock(h)||(h=pB(j,c,f,g,h,i,!1)))),1===f.nodeType&&(g=j.nodeIndex(f),f=f.parentNode),1===h.nodeType&&(i=j.nodeIndex(h)+1,h=h.parentNode),{startContainer:f,startOffset:g,endContainer:h,endOffset:i}},rB={expandRng:qB},sB=cB.isEq,tB=function(a,b,c){var d=a.formatter.get(c);if(d)for(var e=0;e<d.length;e++)if(!1===d[e].inherit&&a.dom.is(b,d[e].selector))return!0;return!1},uB=function(a,b,c,d){var e=a.dom.getRoot();return b!==e&&(b=a.dom.getParent(b,function(b){return!!tB(a,b,c)||(b.parentNode===e||!!xB(a,b,c,d,!0))}),xB(a,b,c,d))},vB=function(a,b,c){return!!sB(b,c.inline)||(!!sB(b,c.block)||(c.selector?1===b.nodeType&&a.is(b,c.selector):void 0))},wB=function(a,b,c,d,e,f){var g,h,i,j=c[d];if(c.onmatch)return c.onmatch(b,c,d);if(j)if(void 0===j.length){for(g in j)if(j.hasOwnProperty(g)){if(h="attributes"===d?a.getAttrib(b,g):cB.getStyle(a,b,g),e&&!h&&!c.exact)return;if((!e||c.exact)&&!sB(h,cB.normalizeStyleValue(a,cB.replaceVars(j[g],f),g)))return}}else for(i=0;i<j.length;i++)if("attributes"===d?a.getAttrib(b,j[i]):cB.getStyle(a,b,j[i]))return c;return c},xB=function(a,b,c,d,e){var f,g,h,i,j=a.formatter.get(c),k=a.dom;if(j&&b)for(g=0;g<j.length;g++)if(f=j[g],vB(a.dom,b,f)&&wB(k,b,f,"attributes",e,d)&&wB(k,b,f,"styles",e,d)){if(i=f.classes)for(h=0;h<i.length;h++)if(!a.dom.hasClass(b,i[h]))return;return f}},yB=function(a,b,c,d){var e;return d?uB(a,d,b,c):(d=a.selection.getNode(),!!uB(a,d,b,c)||!((e=a.selection.getStart())===d||!uB(a,e,b,c)))},zB=function(a,b,c){var d,e=[],f={};return d=a.selection.getStart(),a.dom.getParent(d,function(d){var g,h;for(g=0;g<b.length;g++)h=b[g],!f[h]&&xB(a,d,h,c)&&(f[h]=!0,e.push(h))},a.dom.getRoot()),e},AB=function(a,b){var c,d,e,f,g,h=a.formatter.get(b),i=a.dom;if(h)for(c=a.selection.getStart(),d=cB.getParents(i,c),f=h.length-1;f>=0;f--){if(!(g=h[f].selector)||h[f].defaultBlock)return!0;for(e=d.length-1;e>=0;e--)if(i.is(d[e],g))return!0}return!1},BB={matchNode:xB,matchName:vB,match:yB,matchAll:zB,canApply:AB,matchesUnInheritedFormatSelector:tB},CB=function(a,b){return a.splitText(b)},DB=function(a){var b=a.startContainer,c=a.startOffset,d=a.endContainer,e=a.endOffset;return b===d&&Gi.isText(b)?c>0&&c<b.nodeValue.length&&(d=CB(b,c),b=d.previousSibling,e>c?(e-=c,b=d=CB(d,e).previousSibling,e=d.nodeValue.length,c=0):e=0):(Gi.isText(b)&&c>0&&c<b.nodeValue.length&&(b=CB(b,c),c=0),Gi.isText(d)&&e>0&&e<d.nodeValue.length&&(d=CB(d,e).previousSibling,e=d.nodeValue.length)),{startContainer:b,startOffset:c,endContainer:d,endOffset:e}},EB={split:DB},FB=Bj.ZWSP,GB="_mce_caret",HB=function(a,b){return a.importNode(b,!0)},IB=function(a){for(var b=[];a;){if(3===a.nodeType&&a.nodeValue!==FB||a.childNodes.length>1)return[];1===a.nodeType&&b.push(a),a=a.firstChild}return b},JB=function(a){return IB(a).length>0},KB=function(a){var b;if(a)for(b=new v(a,a),a=b.current();a;a=b.next())if(3===a.nodeType)return a;return null},LB=function(a){var b=Ef.fromTag("span");return hg.setAll(b,{id:GB,"data-mce-bogus":"1","data-mce-type":"format-caret"}),a&&Vm.append(b,Ef.fromText(FB)),b},MB=function(a){var b=KB(a);return b&&b.nodeValue.charAt(0)===FB&&b.deleteData(0,1),b},NB=function(a,b,c,d){var e,f,g;e=b.getRng(!0),f=a.getParent(c,a.isBlock),JB(c)?(!1!==d&&(e.setStartBefore(c),e.setEndBefore(c)),a.remove(c)):(g=MB(c),e.startContainer===g&&e.startOffset>0&&e.setStart(g,e.startOffset-1),e.endContainer===g&&e.endOffset>0&&e.setEnd(g,e.endOffset-1),a.remove(c,!0)),f&&a.isEmpty(f)&&aq.fillWithPaddingBr(Ef.fromDom(f)),b.setRng(e)},OB=function(a,b,c,d,e){if(d)NB(b,c,d,e);else if(!(d=hp(a,c.getStart())))for(;d=b.get(GB);)NB(b,c,d,!1)},PB=function(a,b,c){var d=a.dom,e=d.getParent(c,Ck.curry(cB.isTextBlock,a));e&&d.isEmpty(e)?c.parentNode.replaceChild(b,c):(aq.removeTrailingBr(Ef.fromDom(c)),d.isEmpty(c)?c.parentNode.replaceChild(b,c):d.insertAfter(b,c))},QB=function(a,b){return a.appendChild(b),b},RB=function(a,b){var c=sb.foldr(a,function(a,b){return QB(a,b.cloneNode(!1))},b);return QB(c,c.ownerDocument.createTextNode(FB))},SB=function(a,b,c){var d,e,f,g,h,i,j,k=a.selection;d=k.getRng(!0),g=d.startOffset,i=d.startContainer,j=i.nodeValue,(e=hp(a.getBody(),k.getStart()))&&(f=KB(e));var l=/[^\s\u00a0\u00ad\u200b\ufeff]/;j&&g>0&&g<j.length&&l.test(j.charAt(g))&&l.test(j.charAt(g-1))?(h=k.getBookmark(),d.collapse(!0),d=rB.expandRng(a,d,a.formatter.get(b)),d=EB.split(d),a.formatter.apply(b,c,d),k.moveToBookmark(h)):(e&&f.nodeValue===FB?a.formatter.apply(b,c,e):(e=HB(a.getDoc(),LB(!0).dom()),f=e.firstChild,d.insertNode(e),g=1,a.formatter.apply(b,c,e)),k.setCursorLocation(f,g))},TB=function(a,b,c,d){var e,f,g,h,i,j,k,l=a.dom,m=a.selection,n=[],o=m.getRng();for(e=o.startContainer,f=o.startOffset,i=e,3===e.nodeType&&(f!==e.nodeValue.length&&(h=!0),i=i.parentNode);i;){if(BB.matchNode(a,i,b,c,d)){j=i;break}i.nextSibling&&(h=!0),n.push(i),i=i.parentNode}if(j)if(h){g=m.getBookmark(),o.collapse(!0);var p=rB.expandRng(a,o,a.formatter.get(b),!0);p=EB.split(p),a.formatter.remove(b,c,p),m.moveToBookmark(g)}else{k=hp(a.getBody(),j);var q=LB(!1).dom(),r=RB(n,q);k?PB(a,q,k):PB(a,q,j),NB(l,m,k,!1),m.setCursorLocation(r,1),l.isEmpty(j)&&l.remove(j)}},UB=function(a,b,c,d){OB(a,b,c,null,!1),8===d&&c.isCollapsed()&&c.getStart().innerHTML===FB&&OB(a,b,c,hp(a,c.getStart())),37!==d&&39!==d||OB(a,b,c,hp(a,c.getStart()))},VB=function(a){var b=a.dom,c=a.selection,d=a.getBody();a.on("mouseup keydown",function(a){UB(d,b,c,a.keyCode)})},WB=function(a,b){var c=LB(!1),d=RB(b,c.dom());return Vm.before(Ef.fromDom(a),c),Qp.remove(Ef.fromDom(a)),al(d,0)},XB=function(a,b){return a.schema.getTextInlineElements().hasOwnProperty(Of.name(b))&&!gp(b.dom())&&!Gi.isBogus(b.dom())},YB={},ZB=td.filter,$B=td.each,_B=function(a,b){var c=YB[a];c||(YB[a]=c=[]),YB[a].push(b)},aC=function(a,b){$B(YB[a],function(a){a(b)})};_B("pre",function(a){var b,c,d=a.selection.getRng(),e=function(a){return b(a.previousSibling)&&-1!==td.indexOf(c,a.previousSibling)},f=function(a,b){$d(b).remove(),$d(a).append("<br><br>").append(b.childNodes)};b=Gi.matchNodeNames("pre"),d.collapsed||(c=a.selection.getSelectedBlocks(),$B(ZB(ZB(c,b),e),function(a){f(a.previousSibling,a)}))});var bC={postProcess:aC},cC=Gd.each,dC=function(a,b){var c=a.childNodes;return b--,b>c.length-1?b=c.length-1:b<0&&(b=0),c[b]||a},eC=function(a,b,c){var d,e,f,g,h,i,j,k=b.startContainer,l=b.startOffset,m=b.endContainer,n=b.endOffset;if(j=a.select("td[data-mce-selected],th[data-mce-selected]"),j.length>0)return void cC(j,function(a){c([a])});var o=function(a){var b;return b=a[0],3===b.nodeType&&b===k&&l>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],0===n&&a.length>0&&b===m&&3===b.nodeType&&a.splice(a.length-1,1),a},p=function(a,b,c){for(var d=[];a&&a!==c;a=a[b])d.push(a);return d},q=function(a,b){do{if(a.parentNode===b)return a;a=a.parentNode}while(a)},r=function(a,b,d){var e=d?"nextSibling":"previousSibling";for(g=a,h=g.parentNode;g&&g!==b;g=h)h=g.parentNode,i=p(g===a?g:g[e],e),i.length&&(d||i.reverse(),c(o(i)))};if(1===k.nodeType&&k.hasChildNodes()&&(k=k.childNodes[l]),1===m.nodeType&&m.hasChildNodes()&&(m=dC(m,n)),k===m)return c(o([k]));for(d=a.findCommonAncestor(k,m),g=k;g;g=g.parentNode){if(g===m)return r(k,d,!0);if(g===d)break}for(g=m;g;g=g.parentNode){if(g===k)return r(m,d);if(g===d)break}e=q(k,d)||k,f=q(m,d)||m,r(k,e,!0),i=p(e===k?e:e.nextSibling,"nextSibling",f===m?f.nextSibling:f),i.length&&c(o(i)),r(m,f)},fC={walk:eC},gC=/^(src|href|style)$/,hC=Gd.each,iC=cB.isEq,jC=function(a){return/^(TH|TD)$/.test(a.nodeName)},kC=function(a,b,c){var d,e,f;return d=b[c?"startContainer":"endContainer"],e=b[c?"startOffset":"endOffset"],Gi.isElement(d)&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]),Gi.isText(d)&&c&&e>=d.nodeValue.length&&(d=new v(d,a.getBody()).next()||d),Gi.isText(d)&&!c&&0===e&&(d=new v(d,a.getBody()).prev()||d),d},lC=function(a,b,c,d){var e=a.create(c,d);return b.parentNode.insertBefore(e,b),e.appendChild(b),e},mC=function(a,b,c){return!!iC(b,c.inline)||(!!iC(b,c.block)||(c.selector?Gi.isElement(b)&&a.is(b,c.selector):void 0))},nC=function(a,b){return b.links&&"A"===a.tagName},oC=function(a,b,c,d){return!(b=cB.getNonWhiteSpaceSibling(b,c,d))||"BR"===b.nodeName||a.isBlock(b)},pC=function(a,b,c){var d,e=b.parentNode,f=a.dom,g=a.settings.forced_root_block;c.block&&(g?e===f.getRoot()&&(c.list_block&&iC(b,c.list_block)||hC(Gd.grep(b.childNodes),function(b){cB.isValid(a,g,b.nodeName.toLowerCase())?d?d.appendChild(b):(d=lC(f,b,g),f.setAttribs(d,a.settings.forced_root_block_attrs)):d=0})):f.isBlock(b)&&!f.isBlock(e)&&(oC(f,b,!1)||oC(f,b.firstChild,!0,1)||b.insertBefore(f.create("br"),b.firstChild),oC(f,b,!0)||oC(f,b.lastChild,!1,1)||b.appendChild(f.create("br")))),c.selector&&c.inline&&!iC(c.inline,b)||f.remove(b,1)},qC=function(a,b,c,d,e){var f,g,h,i=a.dom;if(!mC(i,d,b)&&!nC(d,b))return!1;if("all"!==b.remove)for(hC(b.styles,function(a,f){a=cB.normalizeStyleValue(i,cB.replaceVars(a,c),f),"number"==typeof f&&(f=a,e=0),(b.remove_similar||!e||iC(cB.getStyle(i,e,f),a))&&i.setStyle(d,f,""),h=1}),h&&""===i.getAttrib(d,"style")&&(d.removeAttribute("style"),d.removeAttribute("data-mce-style")),hC(b.attributes,function(a,b){var f;if(a=cB.replaceVars(a,c),"number"==typeof b&&(b=a,e=0),!e||iC(i.getAttrib(e,b),a)){if("class"===b&&(a=i.getAttrib(d,b))&&(f="",hC(a.split(/\s+/),function(a){/mce\-\w+/.test(a)&&(f+=(f?" ":"")+a)}),f))return void i.setAttrib(d,b,f);"class"===b&&d.removeAttribute("className"),gC.test(b)&&d.removeAttribute("data-mce-"+b),d.removeAttribute(b)}}),hC(b.classes,function(a){a=cB.replaceVars(a,c),e&&!i.hasClass(e,a)||i.removeClass(d,a)}),g=i.getAttribs(d),f=0;f<g.length;f++){var j=g[f].nodeName;if(0!==j.indexOf("_")&&0!==j.indexOf("data-"))return!1}return"none"!==b.remove?(pC(a,d,b),!0):void 0},rC=function(a,b,c,d,e){var f;return hC(cB.getParents(a.dom,b.parentNode).reverse(),function(b){var g;f||"_start"===b.id||"_end"===b.id||(g=BB.matchNode(a,b,c,d,e))&&!1!==g.split&&(f=b)}),f},sC=function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o=a.dom;if(c){for(n=c.parentNode,i=d.parentNode;i&&i!==n;i=i.parentNode){for(j=o.clone(i,!1),m=0;m<b.length;m++)if(qC(a,b[m],h,j,j)){j=0;break}j&&(k&&j.appendChild(k),l||(l=j),k=j)}!f||g.mixed&&o.isBlock(c)||(d=o.split(c,d)),k&&(e.parentNode.insertBefore(k,e),l.appendChild(e))}return d},tC=function(a,b,c,d,e){var f,g,h=a.formatter.get(b),i=h[0],j=!0,k=a.dom,l=a.selection,m=function(d){var f=rC(a,d,b,c,e);return sC(a,h,f,d,d,!0,i,c)},n=function(b){var d,e,f,g,l;if(Gi.isElement(b)&&k.getContentEditable(b)&&(g=j,j="true"===k.getContentEditable(b),l=!0),d=Gd.grep(b.childNodes),j&&!l)for(e=0,f=h.length;e<f&&!qC(a,h[e],c,b,b);e++);if(i.deep&&d.length){for(e=0,f=d.length;e<f;e++)n(d[e]);l&&(j=g)}},o=function(a){var b=k.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return Fp.isBookmarkNode(c)&&(c=c[a?"firstChild":"lastChild"]),Gi.isText(c)&&0===c.data.length&&(c=a?b.previousSibling||b.nextSibling:b.nextSibling||b.previousSibling),k.remove(b,!0),c},p=function(b){var c,d,e=b.commonAncestorContainer;if(b=rB.expandRng(a,b,h,!0),i.split){if(c=kC(a,b,!0),d=kC(a,b),c!==d){if(/^(TR|TH|TD)$/.test(c.nodeName)&&c.firstChild&&(c="TR"===c.nodeName?c.firstChild.firstChild||c:c.firstChild||c),e&&/^T(HEAD|BODY|FOOT|R)$/.test(e.nodeName)&&jC(d)&&d.firstChild&&(d=d.firstChild||d),k.isChildOf(c,d)&&c!==d&&!k.isBlock(d)&&!jC(c)&&!jC(d))return c=lC(k,c,"span",{id:"_start","data-mce-type":"bookmark"}),m(c),void(c=o(!0));c=lC(k,c,"span",{id:"_start","data-mce-type":"bookmark"}),d=lC(k,d,"span",{id:"_end","data-mce-type":"bookmark"}),m(c),m(d),c=o(!0),d=o()}else c=d=m(c);b.startContainer=c.parentNode?c.parentNode:c,b.startOffset=k.nodeIndex(c),b.endContainer=d.parentNode?d.parentNode:d,b.endOffset=k.nodeIndex(d)+1}fC.walk(k,b,function(b){hC(b,function(b){n(b),Gi.isElement(b)&&"underline"===a.dom.getStyle(b,"text-decoration")&&b.parentNode&&"underline"===cB.getTextDecoration(k,b.parentNode)&&qC(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,b)})})};if(d)return void(d.nodeType?(g=k.createRng(),g.setStartBefore(d),g.setEndAfter(d),p(g)):p(d));if("false"!==k.getContentEditable(l.getNode()))l.isCollapsed()&&i.inline&&!k.select("td[data-mce-selected],th[data-mce-selected]").length?TB(a,b,c,e):(f=ep.getPersistentBookmark(a.selection,!0),p(l.getRng()),l.moveToBookmark(f),i.inline&&BB.match(a,b,c,l.getStart())&&cB.moveStart(k,l,l.getRng()),a.nodeChanged());else{d=l.getNode();for(var q=0,r=h.length;q<r&&(!h[q].ceFalseOverride||!qC(a,h[q],c,d,d));q++);}},uC={removeFormat:qC,remove:tC},vC=Gd.each,wC=function(a){return a&&1===a.nodeType&&!Fp.isBookmarkNode(a)&&!gp(a)&&!Gi.isBogus(a)},xC=function(a,b){var c;for(c=a;c;c=c[b]){if(3===c.nodeType&&0!==c.nodeValue.length)return a;if(1===c.nodeType&&!Fp.isBookmarkNode(c))return c}return a},yC=function(a,b,c){var d,e,f=new Hp(a);if(b&&c&&(b=xC(b,"previousSibling"),c=xC(c,"nextSibling"),f.compare(b,c))){for(d=b.nextSibling;d&&d!==c;)e=d,d=d.nextSibling,b.appendChild(e);return a.remove(c),Gd.each(Gd.grep(c.childNodes),function(a){b.appendChild(a)}),b}return c},zC=function(a,b,c){vC(a.childNodes,function(a){wC(a)&&(b(a)&&c(a),a.hasChildNodes()&&zC(a,b,c))})},AC=function(a,b){return Ea.curry(function(b,c){return!(!c||!cB.getStyle(a,c,b))},b)},BC=function(a,b,c){return Ea.curry(function(b,c,d){a.setStyle(d,b,c),""===d.getAttribute("style")&&d.removeAttribute("style"),CC(a,d)},b,c)},CC=function(a,b){"SPAN"===b.nodeName&&0===a.getAttribs(b).length&&a.remove(b,!0)},DC=function(a,b){var c;1===b.nodeType&&b.parentNode&&1===b.parentNode.nodeType&&(c=cB.getTextDecoration(a,b.parentNode),a.getStyle(b,"color")&&c?a.setStyle(b,"text-decoration",c):a.getStyle(b,"text-decoration")===c&&a.setStyle(b,"text-decoration",null))},EC=function(a,b,c,d){(b.styles.color||b.styles.textDecoration)&&(Gd.walk(d,Ea.curry(DC,a),"childNodes"),DC(a,d))},FC=function(a,b,c,d){b.styles&&b.styles.backgroundColor&&zC(d,AC(a,"fontSize"),BC(a,"backgroundColor",cB.replaceVars(b.styles.backgroundColor,c)))},GC=function(a,b,c,d){"sub"!==b.inline&&"sup"!==b.inline||(zC(d,AC(a,"fontSize"),BC(a,"fontSize","")),a.remove(a.select("sup"===b.inline?"sub":"sup",d),!0))},HC=function(a,b,c,d){d&&!1!==b.merge_siblings&&(d=yC(a,cB.getNonWhiteSpaceSibling(d),d),d=yC(a,d,cB.getNonWhiteSpaceSibling(d,!0)))},IC=function(a,b,c){if(b.clear_child_styles){var d=b.links?"*:not(a)":"*";vC(a.select(d,c),function(c){wC(c)&&vC(b.styles,function(b,d){a.setStyle(c,d,"")})})}},JC=function(a,b,c,d){vC(b,function(b){vC(a.dom.select(b.inline,d),function(d){wC(d)&&uC.removeFormat(a,b,c,d,b.exact?d:null)}),IC(a.dom,b,d)})},KC=function(a,b,c,d,e){BB.matchNode(a,e.parentNode,c,d)&&uC.removeFormat(a,b,d,e)||b.merge_with_parents&&a.dom.getParent(e.parentNode,function(f){if(BB.matchNode(a,f,c,d))return uC.removeFormat(a,b,d,e),!0})},LC={mergeWithChildren:JC,mergeUnderlineAndColor:EC,mergeBackgroundColorAndFontSize:FC,mergeSubSup:GC,mergeSiblings:HC,mergeWithParents:KC},MC=Gd.each,NC=function(a){return a&&1===a.nodeType&&!Fp.isBookmarkNode(a)&&!gp(a)&&!Gi.isBogus(a)},OC=function(a,b,c,d){var e,f,g=a.formatter.get(b),h=g[0],i=!d&&a.selection.isCollapsed(),j=a.dom,k=a.selection,l=function(a,b){if(b=b||h,a){if(b.onformat&&b.onformat(a,b,c,d),MC(b.styles,function(b,d){j.setStyle(a,d,cB.replaceVars(b,c))}),b.styles){var e=j.getAttrib(a,"style");e&&a.setAttribute("data-mce-style",e)}MC(b.attributes,function(b,d){j.setAttrib(a,d,cB.replaceVars(b,c))}),MC(b.classes,function(b){b=cB.replaceVars(b,c),j.hasClass(a,b)||j.addClass(a,b)})}},m=function(a,b){var c=!1;return!!h.selector&&(MC(a,function(a){if(!("collapsed"in a&&a.collapsed!==i))return j.is(b,a.selector)&&!gp(b)?(l(b,a),c=!0,!1):void 0}),c)},n=function(d,e,f,i){var j,k,n=[],o=!0;j=h.inline||h.block,k=d.create(j),l(k),fC.walk(d,e,function(e){var f,p=function(e){var q,r,s,t;if(t=o,q=e.nodeName.toLowerCase(),r=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&d.getContentEditable(e)&&(t=o,o="true"===d.getContentEditable(e),s=!0),cB.isEq(q,"br"))return f=0,void(h.block&&d.remove(e));if(h.wrapper&&BB.matchNode(a,e,b,c))return void(f=0);if(o&&!s&&h.block&&!h.wrapper&&cB.isTextBlock(a,q)&&cB.isValid(a,r,j))return e=d.rename(e,j),l(e),n.push(e),void(f=0);if(h.selector){var u=m(g,e);if(!h.inline||u)return void(f=0)}!o||s||!cB.isValid(a,j,q)||!cB.isValid(a,r,j)||!i&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||gp(e)||h.inline&&d.isBlock(e)?(f=0,MC(Gd.grep(e.childNodes),p),s&&(o=t),f=0):(f||(f=d.clone(k,!1),e.parentNode.insertBefore(f,e),n.push(f)),f.appendChild(e))};MC(e,p)}),!0===h.links&&MC(n,function(a){var b=function(a){"A"===a.nodeName&&l(a,h),MC(Gd.grep(a.childNodes),b)};b(a)}),MC(n,function(e){var f,i=function(a){var b=0;return MC(a.childNodes,function(a){cB.isWhiteSpaceNode(a)||Fp.isBookmarkNode(a)||b++}),b},j=function(a){var b=!1;return MC(a.childNodes,function(a){if(NC(a))return b=a,!1}),b},k=function(a){var b,c;return b=j(a),b&&!Fp.isBookmarkNode(b)&&BB.matchName(d,b,h)&&(c=d.clone(b,!1),l(c),d.replace(c,a,!0),d.remove(b,1)),c||a};if(f=i(e),(n.length>1||!d.isBlock(e))&&0===f)return void d.remove(e,1);(h.inline||h.wrapper)&&(h.exact||1!==f||(e=k(e)),LC.mergeWithChildren(a,g,c,e),LC.mergeWithParents(a,h,b,c,e),LC.mergeBackgroundColorAndFontSize(d,h,c,e),LC.mergeSubSup(d,h,c,e),LC.mergeSiblings(d,h,c,e))})};if("false"!==j.getContentEditable(k.getNode())){if(h){if(d)d.nodeType?m(g,d)||(f=j.createRng(),f.setStartBefore(d),f.setEndAfter(d),n(j,rB.expandRng(a,f,g),null,!0)):n(j,d,null,!0);else if(i&&h.inline&&!j.select("td[data-mce-selected],th[data-mce-selected]").length)SB(a,b,c);else{var o=a.selection.getNode();a.settings.forced_root_block||!g[0].defaultBlock||j.getParent(o,j.isBlock)||OC(a,g[0].defaultBlock),a.selection.setRng(fq.normalize(a.selection.getRng())),e=ep.getPersistentBookmark(a.selection,!0),n(j,rB.expandRng(a,k.getRng(),g),e),h.styles&&LC.mergeUnderlineAndColor(j,h,c,o),k.moveToBookmark(e),cB.moveStart(j,k,k.getRng()),a.nodeChanged()}bC.postProcess(b,a)}}else{d=k.getNode();for(var p=0,q=g.length;p<q;p++)if(g[p].ceFalseOverride&&j.is(d,g[p].selector))return void l(d,g[p])}},PC={applyFormat:OC},QC=Gd.each,RC=function(a,b){var c={};a.set({}),b.on("NodeChange",function(d){var e=cB.getParents(b.dom,d.element),f={};e=Gd.grep(e,function(a){return 1===a.nodeType&&!a.getAttribute("data-mce-bogus")}),QC(a.get(),function(a,d){QC(e,function(g){return b.formatter.matchNode(g,d,{},a.similar)?(c[d]||(QC(a,function(a){a(!0,{node:g,format:d,parents:e})}),c[d]=a),f[d]=a,!1):!BB.matchesUnInheritedFormatSelector(b,g,d)&&void 0})}),QC(c,function(a,b){f[b]||(delete c[b],QC(a,function(a){a(!1,{node:d.element,format:b,parents:e})}))})})},SC=function(a,b,c,d){var e=a.get();QC(b.split(","),function(a){e[a]||(e[a]=[],e[a].similar=d),e[a].push(c)}),a.set(e)},TC=function(a,b,c,d,e){null===b.get()&&RC(b,a),SC(b,c,d,e)},UC={formatChanged:TC},VC=function(a){var b={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(b,c,d){Gd.each(d,function(c,d){a.setAttrib(b,d,c)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Gd.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(a){b[a]={block:a,remove:"all"}}),b},WC={get:VC},XC=Gd.each,YC=rj.DOM,ZC=function(a,b){var c,d,e,f=b&&b.schema||w({}),g=function(a,b){b.classes.length&&YC.addClass(a,b.classes.join(" ")),YC.setAttribs(a,b.attrs)},h=function(a){var b;return d="string"==typeof a?{name:a,classes:[],attrs:{}}:a,b=YC.create(d.name),g(b,d),b},i=function(a,b){var c="string"!=typeof a?a.nodeName.toLowerCase():a,d=f.getElementRule(c),e=d&&d.parentsRequired;return!(!e||!e.length)&&(b&&-1!==Gd.inArray(e,b)?b:e[0])},j=function(a,b,c){var d,e,f,g=b.length>0&&b[0],k=g&&g.name;if(f=i(a,k))k===f?(e=b[0],b=b.slice(1)):e=f;else if(g)e=b[0],b=b.slice(1);else if(!c)return a;return e&&(d=h(e),d.appendChild(a)),c&&(d||(d=YC.create("div"),d.appendChild(a)),Gd.each(c,function(b){var c=h(b);d.insertBefore(c,a)})),j(d,b,e&&e.siblings)};return a&&a.length?(d=a[0],c=h(d),e=YC.create("div"),e.appendChild(j(c,a.slice(1),d.siblings)),e):""},$C=function(a,b){return ZC(aD(a),b)},_C=function(a){var b,c={classes:[],attrs:{}};return a=c.selector=Gd.trim(a),"*"!==a&&(b=a.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(a,b,d,e,f){switch(b){case"#":c.attrs.id=d;break;case".":c.classes.push(d);break;case":":-1!==Gd.inArray("checked disabled enabled read-only required".split(" "),d)&&(c.attrs[d]=d)}if("["===e){var g=f.match(/([\w\-]+)(?:\=\"([^\"]+))?/);g&&(c.attrs[g[1]]=g[2])}return""})),c.name=b||"div",c},aD=function(a){return a&&"string"==typeof a?(a=a.split(/\s*,\s*/)[0],a=a.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Gd.map(a.split(/(?:>|\s+(?![^\[\]]+\]))/),function(a){var b=Gd.map(a.split(/(?:~\+|~|\+)/),_C),c=b.pop();return b.length&&(c.siblings=b),c}).reverse()):[]},bD=function(a,b){var c,d,e,f,g,h,i="";if(!1===(h=a.settings.preview_styles))return"";"string"!=typeof h&&(h="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var j=function(a){return a.replace(/%(\w+)/g,"")};if("string"==typeof b){if(!(b=a.formatter.get(b)))return;b=b[0]}return"preview"in b&&!1===(h=b.preview)?"":(c=b.block||b.inline||"span",f=aD(b.selector),f.length?(f[0].name||(f[0].name=c),c=b.selector,d=ZC(f,a)):d=ZC([c],a),e=YC.select(c,d)[0]||d.firstChild,XC(b.styles,function(a,b){(a=j(a))&&YC.setStyle(e,b,a)}),XC(b.attributes,function(a,b){(a=j(a))&&YC.setAttrib(e,b,a)}),XC(b.classes,function(a){a=j(a),YC.hasClass(e,a)||YC.addClass(e,a)}),a.fire("PreviewFormats"),YC.setStyles(d,{position:"absolute",left:-65535}),a.getBody().appendChild(d),g=YC.getStyle(a.getBody(),"fontSize",!0),g=/px$/.test(g)?parseInt(g,10):0,XC(h.split(" "),function(b){var c=YC.getStyle(e,b,!0);if(!("background-color"===b&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(c)&&(c=YC.getStyle(a.getBody(),b,!0),"#ffffff"===YC.toHex(c).toLowerCase())||"color"===b&&"#000000"===YC.toHex(c).toLowerCase())){if("font-size"===b&&/em|%$/.test(c)){if(0===g)return;c=parseFloat(c)/(/%$/.test(c)?100:1)*g+"px"}"border"===b&&c&&(i+="padding:0 2px;"),i+=b+":"+c+";"}}),a.fire("AfterPreviewFormats"),YC.remove(d),i)},cD={getCssText:bD,parseSelector:aD,selectorToHtml:$C},dD=function(a,b,c,d,e){var f=b.get(c);!BB.match(a,c,d,e)||"toggle"in f[0]&&!f[0].toggle?PC.applyFormat(a,c,d,e):uC.remove(a,c,d,e)},eD={toggle:dD},fD=function(a){a.addShortcut("meta+b","","Bold"),a.addShortcut("meta+i","","Italic"),a.addShortcut("meta+u","","Underline");for(var b=1;b<=6;b++)a.addShortcut("access+"+b,"",["FormatBlock",!1,"h"+b]);a.addShortcut("access+7","",["FormatBlock",!1,"p"]),a.addShortcut("access+8","",["FormatBlock",!1,"div"]),a.addShortcut("access+9","",["FormatBlock",!1,"address"])},gD={setup:fD},hD=function(a,b){return b},iD=function(a,b){return Oa.isObject(a)&&Oa.isObject(b)?kD(a,b):b},jD=function(a){return function(){for(var b=new Array(arguments.length),c=0;c<b.length;c++)b[c]=arguments[c];if(0===b.length)throw new Error("Can't merge zero objects");for(var d={},e=0;e<b.length;e++){var f=b[e];for(var g in f)f.hasOwnProperty(g)&&(d[g]=a(d[g],f[g]))}return d}},kD=jD(iD),lD=jD(hD),mD={deepMerge:kD,merge:lD},nD=function(a,b,c){a.addAttributeFilter("data-mce-tabindex",function(a,b){for(var c,d=a.length;d--;)c=a[d],c.attr("tabindex",c.attributes.map["data-mce-tabindex"]),c.attr(b,null)}),a.addAttributeFilter("src,href,style",function(a,d){for(var e,f,g=a.length,h="data-mce-"+d,i=b.url_converter,j=b.url_converter_scope;g--;)e=a[g],f=e.attributes.map[h],void 0!==f?(e.attr(d,f.length>0?f:null),e.attr(h,null)):(f=e.attributes.map[d],"style"===d?f=c.serializeStyle(c.parseStyle(f),e.name):i&&(f=i.call(j,f,d,e.name)),e.attr(d,f.length>0?f:null))}),a.addAttributeFilter("class",function(a){for(var b,c,d=a.length;d--;)b=a[d],(c=b.attr("class"))&&(c=b.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),b.attr("class",c.length>0?c:null))}),a.addAttributeFilter("data-mce-type",function(a,b,c){for(var d,e=a.length;e--;)d=a[e],"bookmark"!==d.attributes.map["data-mce-type"]||c.cleanup||d.remove()}),a.addNodeFilter("noscript",function(a){for(var b,c=a.length;c--;)(b=a[c].firstChild)&&(b.value=Zi.decode(b.value))}),a.addNodeFilter("script,style",function(a,c){for(var d,e,f,g=a.length,h=function(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};g--;)d=a[g],e=d.firstChild?d.firstChild.value:"","script"===c?(f=d.attr("type"),f&&d.attr("type","mce-no/type"===f?null:f.replace(/^mce\-/,"")),"xhtml"===b.element_format&&e.length>0&&(d.firstChild.value="// <![CDATA[\n"+h(e)+"\n// ]]>")):"xhtml"===b.element_format&&e.length>0&&(d.firstChild.value="\x3c!--\n"+h(e)+"\n--\x3e")}),a.addNodeFilter("#comment",function(a){for(var b,c=a.length;c--;)b=a[c],0===b.value.indexOf("[CDATA[")?(b.name="#cdata",b.type=4,b.value=b.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===b.value.indexOf("mce:protected ")&&(b.name="#text",b.type=3,b.raw=!0,b.value=unescape(b.value).substr(14))}),a.addNodeFilter("xml:namespace,input",function(a,b){for(var c,d=a.length;d--;)c=a[d],7===c.type?c.remove():1===c.type&&("input"!==b||"type"in c.attributes.map||c.attr("type","text"))}),a.addAttributeFilter("data-mce-type",function(b){sb.each(b,function(b){"format-caret"===b.attr("data-mce-type")&&(b.isEmpty(a.schema.getNonEmptyElements())?b.remove():b.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(a,b){for(var c=a.length;c--;)a[c].attr(b,null)})},oD=function(a){var b,c,d=function(a){return a&&"br"===a.name};b=a.lastChild,d(b)&&(c=b.prev,d(c)&&(b.remove(),c.remove()))},pD={register:nD,trimTrailingBr:oD},qD=function(a,b,c){var d,e,f,g=a.dom;return b=b.cloneNode(!0),d=document.implementation,d.createHTMLDocument&&(e=d.createHTMLDocument(""),Gd.each("BODY"===b.nodeName?b.childNodes:[b],function(a){e.body.appendChild(e.importNode(a,!0))}),b="BODY"!==b.nodeName?e.body.firstChild:e.body,f=g.doc,g.doc=e),bx.firePreProcess(a,mD.merge(c,{node:b})),f&&(g.doc=f),b},rD=function(a,b){return a&&a.hasEventListeners("PreProcess")&&!b.no_events},sD=function(a,b,c){return rD(a,c)?qD(a,b,c):b},tD={process:sD},uD=function(a,b){sb.each(b,function(b){a.attr(b,null)})},vD=function(a,b,c){a.addNodeFilter("font",function(a){sb.each(a,function(a){var d=b.parse(a.attr("style")),e=a.attr("color"),f=a.attr("face"),g=a.attr("size");e&&(d.color=e),f&&(d["font-family"]=f),g&&(d["font-size"]=c[parseInt(a.attr("size"),10)-1]),a.name="span",a.attr("style",b.serialize(d)),uD(a,["color","face","size"])})})},wD=function(a,b){a.addNodeFilter("strike",function(a){sb.each(a,function(a){var c=b.parse(a.attr("style"));c["text-decoration"]="line-through",a.name="span",a.attr("style",b.serialize(c))})})},xD=function(a,b){var c=x();b.convert_fonts_to_spans&&vD(a,c,Gd.explode(b.font_size_legacy_values)),wD(a,c)},yD=function(a,b){b.inline_styles&&xD(a,b)},zD={register:yD},AD=/^[ \t\r\n]*$/,BD={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},CD=function(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){if(d=a[g])return d;for(e=a.parent;e&&e!==b;e=e.parent)if(d=e[g])return d}},DD=function(){function a(a,b){this.name=a,this.type=b,1===b&&(this.attributes=[],this.attributes.map={})}return a.create=function(b,c){var d,e;if(d=new a(b,BD[b]||1),c)for(e in c)d.attr(e,c[e]);return d},a.prototype.replace=function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},a.prototype.attr=function(a,b){var c,d,e=this;if("string"!=typeof a){for(d in a)e.attr(d,a[d]);return e}if(c=e.attributes){if(void 0!==b){if(null===b){if(a in c.map)for(delete c.map[a],d=c.length;d--;)if(c[d].name===a)return c=c.splice(d,1),e;return e}if(a in c.map){for(d=c.length;d--;)if(c[d].name===a){c[d].value=b;break}}else c.push({name:a,value:b});return c.map[a]=b,e}return c.map[a]}},a.prototype.clone=function(){var b,c,d,e,f,g=this,h=new a(g.name,g.type);if(d=g.attributes){for(f=[],f.map={},b=0,c=d.length;b<c;b++)e=d[b],"id"!==e.name&&(f[f.length]={name:e.name,value:e.value},f.map[e.name]=e.value);h.attributes=f}return h.value=g.value,h.shortEnded=g.shortEnded,h},a.prototype.wrap=function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},a.prototype.unwrap=function(){var a,b,c=this;for(a=c.firstChild;a;)b=a.next,c.insert(a,c,!0),a=b;c.remove()},a.prototype.remove=function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},a.prototype.append=function(a){var b,c=this;return a.parent&&a.remove(),b=c.lastChild,b?(b.next=a,a.prev=b,c.lastChild=a):c.lastChild=c.firstChild=a,a.parent=c,a},a.prototype.insert=function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},a.prototype.getAll=function(a){var b,c=this,d=[];for(b=c.firstChild;b;b=CD(b,c))b.name===a&&d.push(b);return d},a.prototype.empty=function(){var a,b,c,d=this;if(d.firstChild){for(a=[],c=d.firstChild;c;c=CD(c,d))a.push(c);for(b=a.length;b--;)c=a[b],c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}return d.firstChild=d.lastChild=null,d},a.prototype.isEmpty=function(a,b,c){var d,e,f=this,g=f.firstChild;if(b=b||{},g)do{if(1===g.type){if(g.attributes.map["data-mce-bogus"])continue;if(a[g.name])return!1;for(d=g.attributes.length;d--;)if("name"===(e=g.attributes[d].name)||0===e.indexOf("data-mce-bookmark"))return!1}if(8===g.type)return!1;if(3===g.type&&!AD.test(g.value))return!1;if(3===g.type&&g.parent&&b[g.parent.name]&&AD.test(g.value))return!1;if(c&&c(g))return!1}while(g=CD(g,f));return!0},a.prototype.walk=function(a){return CD(this,null,a)},a}(),ED=function(a,b,c,d){(a.padd_empty_with_br||b.insert)&&c[d.name]?d.empty().append(new DD("br",1)).shortEnded=!0:d.empty().append(new DD("#text",3)).value=""},FD=function(a){return GD(a,"#text")&&""===a.firstChild.value},GD=function(a,b){return a&&a.firstChild&&a.firstChild===a.lastChild&&a.firstChild.name===b},HD=function(a,b){var c=a.getElementRule(b.name);return c&&c.paddEmpty},ID=function(a,b,c,d){return d.isEmpty(b,c,function(b){return HD(a,b)})},JD=function(a,b){return a&&(b[a.name]||"br"===a.name)},KD=function(a,b){var c=a.schema;b.remove_trailing_brs&&a.addNodeFilter("br",function(a,d,e){var f,g,h,i,j,k,l,m,n=a.length,o=Gd.extend({},c.getBlockElements()),p=c.getNonEmptyElements(),q=c.getNonEmptyElements();for(o.body=1,f=0;f<n;f++)if(g=a[f],h=g.parent,o[g.parent.name]&&g===h.lastChild){for(j=g.prev;j;){if("span"!==(k=j.name)||"bookmark"!==j.attr("data-mce-type")){if("br"!==k)break;if("br"===k){g=null;break}}j=j.prev}g&&(g.remove(),ID(c,p,q,h)&&(l=c.getElementRule(h.name))&&(l.removeEmpty?h.remove():l.paddEmpty&&ED(b,e,o,h)))}else{for(i=g;h&&h.firstChild===i&&h.lastChild===i&&(i=h,!o[h.name]);)h=h.parent;i===h&&!0!==b.padd_empty_with_br&&(m=new DD("#text",3),m.value="",g.replace(m))}}),a.addAttributeFilter("href",function(a){var c,d=a.length,e=function(a){return a.split(" ").filter(function(a){return a.length>0}).concat(["noopener"]).sort().join(" ")},f=function(a){var b=a?Gd.trim(a):"";return/\b(noopener)\b/g.test(b)?b:e(b)};if(!b.allow_unsafe_link_target)for(;d--;)c=a[d],"a"===c.name&&"_blank"===c.attr("target")&&c.attr("rel",f(c.attr("rel")))}),b.allow_html_in_named_anchor||a.addAttributeFilter("id,name",function(a){for(var b,c,d,e,f=a.length;f--;)if(e=a[f],"a"===e.name&&e.firstChild&&!e.attr("href")){d=e.parent,b=e.lastChild;do{c=b.prev,d.insert(b,e),b=c}while(b)}}),b.fix_list_elements&&a.addNodeFilter("ul,ol",function(a){for(var b,c,d=a.length;d--;)if(b=a[d],c=b.parent,"ul"===c.name||"ol"===c.name)if(b.prev&&"li"===b.prev.name)b.prev.append(b);else{var e=new DD("li",1);e.attr("style","list-style-type: none"),b.wrap(e)}}),b.validate&&c.getValidClasses()&&a.addAttributeFilter("class",function(a){for(var b,d,e,f,g,h,i,j=a.length,k=c.getValidClasses();j--;){for(b=a[j],d=b.attr("class").split(" "),g="",e=0;e<d.length;e++)f=d[e],i=!1,h=k["*"],h&&h[f]&&(i=!0),h=k[b.name],!i&&h&&h[f]&&(i=!0),i&&(g&&(g+=" "),g+=f);g.length||(g=null),b.attr("class",g)}})},LD=Gd.makeMap,MD=Gd.each,ND=Gd.explode,OD=Gd.extend,PD=function(a,b,c){-1===Gd.inArray(b,c)&&(a.addAttributeFilter(c,function(a,b){for(var c=a.length;c--;)a[c].attr(b,null)}),b.push(c))},QD=function(a,b,c){if(!b.no_events&&a){return bx.firePostProcess(a,mD.merge(b,{content:c})).content}return c},RD=function(a,b,c){var d=Bj.trim(c.getInner?b.innerHTML:a.getOuterHTML(b));return c.selection?d:Gd.trim(d)},SD=function(a,b,c,d){var e=d.selection?mD.merge({forced_root_block:!1},d):d,f=a.parse(c,e);return pD.trimTrailingBr(f),f},TD=function(a,b,c){return D(a,b).serialize(c)},UD=function(a,b,c,d,e){var f=TD(b,c,d);return QD(a,e,f)};!function(a){a.isBookmarkNode=Fp.isBookmarkNode}(ba||(ba={}));var VD=ba,WD=Gi.isContentEditableFalse,XD=Gi.isContentEditableTrue,YD=function(a,b){for(;b&&b!==a;){if(XD(b)||WD(b))return b;b=b.parentNode}return null},ZD=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=b.dom,u=Gd.each,v=b.getDoc(),w=document,x=Math.abs,y=Math.round,z=b.getBody();f={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var A=".mce-content-body";b.contentStyles.push(A+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+A+" .mce-resizehandle:hover {background: #000}"+A+" img[data-mce-selected],"+A+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+A+" .mce-clonedresizable {position: absolute;"+(Mb.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+A+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var B=function(a){return a&&("IMG"===a.nodeName||b.dom.is(a,"figure.image"))},C=function(a,b){return B(a.target)&&!Oz.isXYWithinRange(a.clientX,a.clientY,b)},D=function(a){var c=a.target;C(a,b.selection.getRng())&&!a.isDefaultPrevented()&&(a.preventDefault(),b.selection.select(c))},E=function(a){return b.dom.is(a,"figure.image")?a.querySelector("img"):a},F=function(a){var c=b.settings.object_resizing;return!1!==c&&!Mb.iOS&&("string"!=typeof c&&(c="table,img,figure.image,div"),"false"!==a.getAttribute("data-mce-resize")&&(a!==b.getBody()&&$g.is(Ef.fromDom(a),c)))},G=function(a){var f,u,v,w,A;f=a.screenX-h,u=a.screenY-i,p=f*g[2]+l,q=u*g[3]+m,p=p<5?5:p,q=q<5?5:q,v=B(c)&&!1!==b.settings.resize_img_proportional?!Vz.modifierPressed(a):Vz.modifierPressed(a)||B(c)&&g[2]*g[3]!=0,v&&(x(f)>x(u)?(q=y(p*n),p=y(q/n)):(p=y(q/n),q=y(p*n))),t.setStyles(E(d),{width:p,height:q}),w=g.startPos.x+f,A=g.startPos.y+u,w=w>0?w:0,A=A>0?A:0,t.setStyles(e,{left:w,top:A,display:"block"}),e.innerHTML=p+" &times; "+q,g[2]<0&&d.clientWidth<=p&&t.setStyle(d,"left",j+(l-p)),g[3]<0&&d.clientHeight<=q&&t.setStyle(d,"top",k+(m-q)),f=z.scrollWidth-r,u=z.scrollHeight-s,f+u!==0&&t.setStyles(e,{left:w-f,top:A-u}),o||(bx.fireObjectResizeStart(b,c,l,m),o=!0)},H=function(){o=!1;var a=function(a,d){d&&(c.style[a]||!b.schema.isValid(c.nodeName.toLowerCase(),a)?t.setStyle(E(c),a,d):t.setAttrib(E(c),a,d))};a("width",p),a("height",q),t.unbind(v,"mousemove",G),t.unbind(v,"mouseup",H),w!==v&&(t.unbind(w,"mousemove",G),t.unbind(w,"mouseup",H)),t.remove(d),t.remove(e),I(c),bx.fireObjectResized(b,c,p,q),t.setAttrib(c,"style",t.getAttrib(c,"style")),b.nodeChanged()},I=function(a){var o,x,y,A,B;J(),M(),o=t.getPos(a,z),j=o.x,k=o.y,B=a.getBoundingClientRect(),x=B.width||B.right-B.left,y=B.height||B.bottom-B.top,c!==a&&(c=a,p=q=0),A=b.fire("ObjectSelected",{target:a}),F(a)&&!A.isDefaultPrevented()?u(f,function(a,b){var f,o=function(b){h=b.screenX,i=b.screenY,l=E(c).clientWidth,m=E(c).clientHeight,n=m/l,g=a,a.startPos={x:x*a[0]+j,y:y*a[1]+k},r=z.scrollWidth,s=z.scrollHeight,d=c.cloneNode(!0),t.addClass(d,"mce-clonedresizable"),t.setAttrib(d,"data-mce-bogus","all"),d.contentEditable=!1,d.unSelectabe=!0,t.setStyles(d,{left:j,top:k,margin:0}),d.removeAttribute("data-mce-selected"),z.appendChild(d),t.bind(v,"mousemove",G),t.bind(v,"mouseup",H),w!==v&&(t.bind(w,"mousemove",G),t.bind(w,"mouseup",H)),e=t.add(z,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},l+" &times; "+m)};f=t.get("mceResizeHandle"+b),f&&t.remove(f),f=t.add(z,"div",{id:"mceResizeHandle"+b,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+b+"-resize; margin:0; padding:0"}),Mb.ie&&(f.contentEditable=!1),t.bind(f,"mousedown",function(a){a.stopImmediatePropagation(),a.preventDefault(),o(a)}),a.elm=f,t.setStyles(f,{left:x*a[0]+j-f.offsetWidth/2,top:y*a[1]+k-f.offsetHeight/2})}):J(),c.setAttribute("data-mce-selected","1")},J=function(){var a,b;M(),c&&c.removeAttribute("data-mce-selected");for(a in f)(b=t.get("mceResizeHandle"+a))&&(t.unbind(b),t.remove(b))},K=function(c){var d,e,f=function(a,b){if(a)do{if(a===b)return!0}while(a=a.parentNode)};if(!o&&!b.removed){if(u(t.select("img[data-mce-selected],hr[data-mce-selected]"),function(a){a.removeAttribute("data-mce-selected")}),e="mousedown"===c.type?c.target:a.getNode(),e=t.$(e).closest("table,img,figure.image,hr")[0],f(e,z)&&(N(),d=a.getStart(!0),f(d,e)&&f(a.getEnd(!0),e)))return void I(e);J()}},L=function(a){return WD(YD(b.getBody(),a))},M=function(){for(var a in f){var b=f[a];b.elm&&(t.unbind(b.elm),delete b.elm)}},N=function(){try{b.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(a){}};return b.on("init",function(){N(),Mb.ie&&Mb.ie>=11&&(b.on("mousedown click",function(a){var c=a.target,d=c.nodeName;o||!/^(TABLE|IMG|HR)$/.test(d)||L(c)||(2!==a.button&&b.selection.select(c,"TABLE"===d),"mousedown"===a.type&&b.nodeChanged())}),b.dom.bind(z,"mscontrolselect",function(a){var c=function(a){Vb.setEditorTimeout(b,function(){b.selection.select(a)})};if(L(a.target))return a.preventDefault(),void c(a.target);/^(TABLE|IMG|HR)$/.test(a.target.nodeName)&&(a.preventDefault(),"IMG"===a.target.tagName&&c(a.target))}));var a=Vb.throttle(function(a){b.composing||K(a)});b.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",a),b.on("keyup compositionend",function(b){c&&"TABLE"===c.nodeName&&a(b)}),b.on("hide blur",J),b.on("contextmenu",D)}),b.on("remove",M),{isResizable:F,showResizeRect:I,hideResizeRect:J,updateResizeRect:K,destroy:function(){c=d=null}}},$D=function(a){return Gi.isContentEditableTrue(a)||Gi.isContentEditableFalse(a)},_D=function(a,b,c){for(;a&&a!==b;){if(c(a))return a;a=a.parentNode}return null},aE=function(a,b,c){var d,e,f;if(d=c.elementFromPoint(a,b),e=c.body.createTextRange(),d&&"HTML"!==d.tagName||(d=c.body),e.moveToElementText(d),f=Gd.toArray(e.getClientRects()),f=f.sort(function(a,c){return a=Math.abs(Math.max(a.top-b,a.bottom-b)),c=Math.abs(Math.max(c.top-b,c.bottom-b)),a-c}),f.length>0){b=(f[0].bottom+f[0].top)/2;try{return e.moveToPoint(a,b),e.collapse(!0),e}catch(a){}}return null},bE=function(a,b){var c=a&&a.parentElement?a.parentElement():null;return Gi.isContentEditableFalse(_D(c,b,$D))?null:a},cE=function(a,b,c){var d,e,f=c;if(f.caretPositionFromPoint)(e=f.caretPositionFromPoint(a,b))&&(d=c.createRange(),d.setStart(e.offsetNode,e.offset),d.collapse(!0));else if(c.caretRangeFromPoint)d=c.caretRangeFromPoint(a,b);else if(f.body.createTextRange){d=f.body.createTextRange();try{d.moveToPoint(a,b),d.collapse(!0)}catch(e){d=aE(a,b,c)}return bE(d,c.body)}return d},dE={fromPoint:cE},eE=function(a,b){return sb.map(b,function(b){var c=a.fire("GetSelectionRange",{range:b});return c.range!==b?c.range:b})},fE={processRanges:eE},gE=function(a,b){return Ef.fromDom(a.dom().cloneNode(b))},hE=function(a){return gE(a,!1)},iE=function(a){return gE(a,!0)},jE=function(a,b){var c=Ef.fromTag(b),d=hg.clone(a);return hg.setAll(c,d),c},kE=function(a,b){var c=jE(a,b),d=Bh.children(iE(a));return Mp.append(c,d),c},lE=function(a,b){var c=jE(a,b);Vm.before(a,c);var d=Bh.children(a);return Mp.append(c,d),Qp.remove(a),c},mE={shallow:hE,shallowAs:jE,deep:iE,copy:kE,mutate:lE},nE=function(a,b){var c=b||document,d=c.createDocumentFragment();return sb.each(a,function(a){d.appendChild(a.dom())}),Ef.fromDom(d)},oE={fromElements:nE},pE=function(a){var b=a.startContainer,c=a.startOffset;return Gi.isText(b)?0===c?La.some(Ef.fromDom(b)):La.none():La.from(b.childNodes[c]).map(Ef.fromDom)},qE=function(a){var b=a.endContainer,c=a.endOffset;return Gi.isText(b)?c===b.data.length?La.some(Ef.fromDom(b)):La.none():La.from(b.childNodes[c-1]).map(Ef.fromDom)},rE=function(a){return Bh.firstChild(a).fold(Ea.constant([a]),function(b){return[a].concat(rE(b))})},sE=function(a){return Bh.lastChild(a).fold(Ea.constant([a]),function(b){return"br"===Of.name(b)?Bh.prevSibling(b).map(function(b){return[a].concat(sE(b))}).getOr([]):[a].concat(sE(b))})},tE=function(a,b){return Gk.liftN([pE(b),qE(b)],function(b,c){var d=sb.find(rE(a),Ea.curry(gh.eq,b)),e=sb.find(sE(a),Ea.curry(gh.eq,c));return d.isSome()&&e.isSome()}).getOr(!1)},uE=function(a,b,c,d){var e=c,f=new v(c,e),g=a.schema.getNonEmptyElements();do{if(3===c.nodeType&&0!==Gd.trim(c.nodeValue).length)return void(d?b.setStart(c,0):b.setEnd(c,c.nodeValue.length));if(g[c.nodeName]&&!/^(TD|TH)$/.test(c.nodeName))return void(d?b.setStartBefore(c):"BR"===c.nodeName?b.setEndBefore(c):b.setEndAfter(c));if(Mb.ie&&Mb.ie<11&&a.isBlock(c)&&a.isEmpty(c))return void(d?b.setStart(c,0):b.setEnd(c,0))}while(c=d?f.next():f.prev());"BODY"===e.nodeName&&(d?b.setStart(e,0):b.setEnd(e,e.childNodes.length))},vE=Mg.immutable("element","width","rows"),wE=Mg.immutable("element","cells"),xE=Mg.immutable("x","y"),yE=function(a,b){var c=parseInt(hg.get(a,b),10);return isNaN(c)?1:c},zE=function(a,b,c,d,e){for(var f=yE(e,"rowspan"),g=yE(e,"colspan"),h=a.rows(),i=c;i<c+f;i++){h[i]||(h[i]=wE(mE.deep(d),[]));for(var j=b;j<b+g;j++){h[i].cells()[j]=i===c&&j===b?e:mE.shallow(e)}}},AE=function(a,b,c){var d=a.rows();return!!(d[c]?d[c].cells():[])[b]},BE=function(a,b,c){for(;AE(a,b,c);)b++;return b},CE=function(a){return sb.foldl(a,function(a,b){return b.cells().length>a?b.cells().length:a},0)},DE=function(a,b){for(var c=a.rows(),d=0;d<c.length;d++)for(var e=c[d].cells(),f=0;f<e.length;f++)if(gh.eq(e[f],b))return La.some(xE(f,d));return La.none()},EE=function(a,b,c,d,e){for(var f=[],g=a.rows(),h=c;h<=e;h++){var i=g[h].cells(),j=b<d?i.slice(b,d+1):i.slice(d,b+1);f.push(wE(g[h].element(),j))}return f},FE=function(a,b,c){var d=b.x(),e=b.y(),f=c.x(),g=c.y(),h=e<g?EE(a,d,e,f,g):EE(a,d,g,f,e);return vE(a.element(),CE(h),h)},GE=function(a,b){var c=mE.shallow(a.element()),d=Ef.fromTag("tbody");return Mp.append(d,b),Vm.append(c,d),c},HE=function(a){return sb.map(a.rows(),function(a){var b=sb.map(a.cells(),function(a){var b=mE.deep(a);return hg.remove(b,"colspan"),hg.remove(b,"rowspan"),b}),c=mE.shallow(a.element());return Mp.append(c,b),c})},IE=function(a){var b=vE(mE.shallow(a),0,[]);return sb.each(em.descendants(a,"tr"),function(a,c){sb.each(em.descendants(a,"td,th"),function(d,e){zE(b,BE(b,e,c),c,a,d)})}),vE(b.element(),CE(b.rows()),b.rows())},JE=function(a){return GE(a,HE(a))},KE=function(a,b,c){return DE(a,b).bind(function(b){return DE(a,c).map(function(c){return FE(a,b,c)})})},LE={fromDom:IE,toDom:JE,subsection:KE},ME=function(a){return sb.find(a,function(a){return"ul"===Of.name(a)||"ol"===Of.name(a)})},NE=function(a,b){return sb.find(a,function(a){return"li"===Of.name(a)&&tE(a,b)}).fold(Ea.constant([]),function(b){return ME(a).map(function(a){return[Ef.fromTag("li"),Ef.fromTag(Of.name(a))]}).getOr([])})},OE=function(a,b){var c=sb.foldl(b,function(a,b){return Vm.append(b,a),b},a);return b.length>0?oE.fromElements([c]):c},PE=function(a){return li(a)?Bh.parent(a).filter(ki).fold(Ea.constant([]),function(b){return[a,b]}):ki(a)?[a]:[]},QE=function(a,b){var c=Ef.fromDom(b.commonAncestorContainer),d=Sr.parentsAndSelf(c,a),e=sb.filter(d,function(a){return hi(a)||fi(a)}),f=NE(d,b),g=e.concat(f.length?f:PE(c));return sb.map(g,mE.shallow)},RE=function(){return oE.fromElements([])},SE=function(a,b){return OE(Ef.fromDom(b.cloneContents()),QE(a,b))},TE=function(a,b){return mr.ancestor(b,"table",Ea.curry(gh.eq,a))},UE=function(a,b){return TE(a,b[0]).bind(function(a){var c=b[0],d=b[b.length-1],e=LE.fromDom(a);return LE.subsection(e,c,d).map(function(a){return oE.fromElements([LE.toDom(a)])})}).getOrThunk(RE)},VE=function(a,b){return b.length>0&&b[0].collapsed?RE():SE(a,b[0])},WE=function(a,b){var c=Ju.getCellsFromElementOrRanges(b,a);return c.length>0?UE(a,c):VE(a,b)},XE={read:WE},YE=function(a,b){var c,d=a.selection.getRng(),e=a.dom.create("body"),f=a.selection.getSel(),g=fE.processRanges(a,Eu.getRanges(f));if(b=b||{},b.get=!0,b.format=b.format||"html",b.selection=!0,b=a.fire("BeforeGetContent",b),b.isDefaultPrevented())return a.fire("GetContent",b),b.content;if("text"===b.format)return a.selection.isCollapsed()?"":Bj.trim(d.text||(f.toString?f.toString():""));d.cloneContents?(c=b.contextual?XE.read(Ef.fromDom(a.getBody()),g).dom():d.cloneContents())&&e.appendChild(c):void 0!==d.item||void 0!==d.htmlText?(e.innerHTML="<br>"+(d.item?d.item(0).outerHTML:d.htmlText),e.removeChild(e.firstChild)):e.innerHTML=d.toString(),b.getInner=!0;var h=a.selection.serializer.serialize(e,b);return"tree"===b.format?h:(b.content=a.selection.isCollapsed()?"":h,a.fire("GetContent",b),b.content)},ZE={getContent:YE},$E=function(a,b,c){var d,e,f,g=a.selection.getRng(),h=a.getDoc();if(c=c||{format:"html"},c.set=!0,c.selection=!0,c.content=b,!c.no_events&&(c=a.fire("BeforeSetContent",c),c.isDefaultPrevented()))return void a.fire("SetContent",c);if(b=c.content,g.insertNode){b+='<span id="__caret">_</span>',g.startContainer===h&&g.endContainer===h?h.body.innerHTML=b:(g.deleteContents(),0===h.body.childNodes.length?h.body.innerHTML=b:g.createContextualFragment?g.insertNode(g.createContextualFragment(b)):(e=h.createDocumentFragment(),f=h.createElement("div"),e.appendChild(f),f.outerHTML=b,g.insertNode(e))),d=a.dom.get("__caret"),g=h.createRange(),g.setStartBefore(d),g.setEndBefore(d),a.selection.setRng(g),a.dom.remove("__caret");try{a.selection.setRng(g)}catch(a){}}else g.item&&(h.execCommand("Delete",!1,null),g=a.getRng()),/^\s+/.test(b)?(g.pasteHTML('<span id="__mce_tmp">_</span>'+b),a.dom.remove("__mce_tmp")):g.pasteHTML(b);c.no_events||a.fire("SetContent",c)},_E={setContent:$E},aF=function(a,b,c,d,e){var f=c?b.startContainer:b.endContainer,g=c?b.startOffset:b.endOffset;return La.from(f).map(Ef.fromDom).map(function(a){return d&&b.collapsed?a:Bh.child(a,e(a,g)).getOr(a)}).bind(function(a){return Of.isElement(a)?La.some(a):Bh.parent(a)}).map(function(a){return a.dom()}).getOr(a)},bF=function(a,b,c){return aF(a,b,!0,c,function(a,b){return Math.min(Bh.childNodesCount(a),b)})},cF=function(a,b,c){return aF(a,b,!1,c,function(a,b){return b>0?b-1:b})},dF=function(a,b){for(var c=a;a&&Gi.isText(a)&&0===a.length;)a=b?a.nextSibling:a.previousSibling;return a||c},eF=function(a,b){var c,d,e,f,g;return b?(d=b.startContainer,e=b.endContainer,f=b.startOffset,g=b.endOffset,c=b.commonAncestorContainer,!b.collapsed&&(d===e&&g-f<2&&d.hasChildNodes()&&(c=d.childNodes[f]),3===d.nodeType&&3===e.nodeType&&(d=d.length===f?dF(d.nextSibling,!0):d.parentNode,e=0===g?dF(e.previousSibling,!1):e.parentNode,d&&d===e))?d:c&&3===c.nodeType?c.parentNode:c):a},fF=function(a,b,c,d){var e,f,g=[];if(f=a.getRoot(),c=a.getParent(c||bF(f,b,!1),a.isBlock),d=a.getParent(d||cF(f,b,!1),a.isBlock),c&&c!==f&&g.push(c),c&&d&&c!==d){e=c;for(var h=new v(c,f);(e=h.next())&&e!==d;)a.isBlock(e)&&g.push(e)}return d&&c!==d&&d!==f&&g.push(d),g},gF=function(a,b,c){return La.from(b).map(function(b){var d=a.nodeIndex(b),e=a.createRng();return e.setStart(b.parentNode,d),e.setEnd(b.parentNode,d+1),c&&(uE(a,e,b,!0),uE(a,e,b,!1)),e})},hF=Gd.each,iF=function(a){return!!a.select},jF=function(a){return!(!a||!a.ownerDocument)&&gh.contains(Ef.fromDom(a.ownerDocument),Ef.fromDom(a))},kF=function(a){return!!a&&(!!iF(a)||jF(a.startContainer)&&jF(a.endContainer))},lF=function(a,b,c,d){var e,f,g,h,i,j=function(b,c){var e=a.createRng();b?(e.setStart(b,c),e.setEnd(b,c),v(e),s(!1)):(uE(a,e,d.getBody(),!0),v(e))},k=function(a){return ZE.getContent(d,a)},l=function(a,b){return _E.setContent(d,a,b)},m=function(a){return bF(d.getBody(),u(),a)},n=function(a){return cF(d.getBody(),u(),a)},o=function(a,b){return e.getBookmark(a,b)},p=function(a){return e.moveToBookmark(a)},q=function(b,c){return gF(a,b,c).each(v),b},r=function(){var a=u(),b=t();return!(!a||a.item)&&(a.compareEndPoints?0===a.compareEndPoints("StartToEnd",a):!b||a.collapsed)},s=function(a){var b=u();b.collapse(!!a),v(b)},t=function(){return b.getSelection?b.getSelection():b.document.selection},u=function(){var c,e,f,i,j=function(a,b,c){try{return b.compareBoundaryPoints(a,c)}catch(a){return-1}};if(!b)return null;if(void 0===(i=b.document)||null===i)return null;if(void 0!==d.bookmark&&!1===Ux.hasFocus(d)){var k=uw.getRng(d);if(k.isSome())return k.map(function(a){return fE.processRanges(d,[a])[0]}).getOr(i.createRange())}try{(c=t())&&(e=c.rangeCount>0?c.getRangeAt(0):c.createRange?c.createRange():i.createRange())}catch(a){}return e=fE.processRanges(d,[e])[0],e||(e=i.createRange?i.createRange():i.body.createTextRange()),e.setStart&&9===e.startContainer.nodeType&&e.collapsed&&(f=a.getRoot(),e.setStart(f,0),e.setEnd(f,0)),g&&h&&(0===j(e.START_TO_START,e,g)&&0===j(e.END_TO_END,e,g)?e=h:(g=null,h=null)),e},v=function(a,b){var c,e,f;if(kF(a)){var i=iF(a)?a:null;if(i){h=null;try{i.select()}catch(a){}}else{if(c=t(),f=d.fire("SetSelectionRange",{range:a,forward:b}),a=f.range,c){h=a;try{c.removeAllRanges(),c.addRange(a)}catch(a){}!1===b&&c.extend&&(c.collapse(a.endContainer,a.endOffset),c.extend(a.startContainer,a.startOffset)),g=c.rangeCount>0?c.getRangeAt(0):null}a.collapsed||a.startContainer!==a.endContainer||!c.setBaseAndExtent||Mb.ie||a.endOffset-a.startOffset<2&&a.startContainer.hasChildNodes()&&(e=a.startContainer.childNodes[a.startOffset])&&"IMG"===e.tagName&&(c.setBaseAndExtent(a.startContainer,a.startOffset,a.endContainer,a.endOffset),c.anchorNode===a.startContainer&&c.focusNode===a.endContainer||c.setBaseAndExtent(e,0,e,1)),d.fire("AfterSetSelectionRange",{range:a,forward:b})}}},w=function(b){return l(a.getOuterHTML(b)),b},x=function(){return eF(d.getBody(),u())},y=function(b,c){return fF(a,u(),b,c)},z=function(){var b,c,d=t();return!(d&&d.anchorNode&&d.focusNode)||(b=a.createRng(),b.setStart(d.anchorNode,d.anchorOffset),b.collapse(!0),c=a.createRng(),c.setStart(d.focusNode,d.focusOffset),c.collapse(!0),b.compareBoundaryPoints(b.START_TO_START,c)<=0)},A=function(){var b=u();if(!Eu.hasMultipleRanges(t())){var c=Iv.normalize(a,b);return c.each(function(a){v(a,z())}),c.getOr(b)}return b},B=function(b,c){var e;return i||(i={},e={},d.on("NodeChange",function(b){var c=b.element,d=a.getParents(c,null,a.getRoot()),f={};hF(i,function(b,c){hF(d,function(g){if(a.is(g,c))return e[c]||(hF(b,function(a){a(!0,{node:g,selector:c,parents:d})}),e[c]=b),f[c]=b,!1})}),hF(e,function(a,b){f[b]||(delete e[b],hF(a,function(a){a(!1,{node:c,selector:b,parents:d})}))})})),i[b]||(i[b]=[]),i[b].push(c),H},C=function(){for(var b,c=a.getRoot();c&&"BODY"!==c.nodeName;){if(c.scrollHeight>c.clientHeight){b=c;break}c=c.parentNode}return b},D=function(a,b){return xm.scrollElementIntoView(d,a,b)},E=function(a,b){return v(dE.fromPoint(a,b,d.getDoc()))},F=function(){var a=u();return a.collapsed?al.fromRangeStart(a).getClientRects()[0]:a.getBoundingClientRect()},G=function(){b=g=h=null,f.destroy()},H={bookmarkManager:null,controlSelection:null,dom:a,win:b,serializer:c,editor:d,collapse:s,setCursorLocation:j,getContent:k,setContent:l,getBookmark:o,moveToBookmark:p,select:q,isCollapsed:r,isForward:z,setNode:w,getNode:x,getSel:t,setRng:v,getRng:u,getStart:m,getEnd:n,getSelectedBlocks:y,normalize:A,selectorChanged:B,getScrollContainer:C,scrollIntoView:D,placeCaretAt:E,getBoundingClientRect:F,destroy:G};return e=VD(H),f=ZD(H,d),H.bookmarkManager=e,H.controlSelection=f,H},mF=Gi.isContentEditableFalse,nF=qk,oF=Rn,pF=Qn,qF=function(a,b){for(;b=a(b);)if(b.isVisible())return b;return b},rF=function(a,b){var c=En(a,b);return!(c||!Gi.isBr(a.getNode()))||c},sF=function(a,b,c,d){var e,f,g,h,i=a===Hl.Forwards,j=i?pF:oF;return!d.collapsed&&(e=nF(d),mF(e))?Cl(a,b,e,a===Hl.Backwards,!0):(h=Rj(d),f=Pn(a,b.getBody(),d),j(f)?El(b,f.getNode(!i)):(f=c(f))?j(f)?Cl(a,b,f.getNode(!i),i,!0):(g=c(f),j(g)&&rF(f,g)?Cl(a,b,g.getNode(!i),i,!0):h?Gl(b,f.toRange(),!0):null):h?d:null)},tF=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;if(m=nF(d),e=Pn(a,b.getBody(),d),f=c(b.getBody(),Az(1),e),g=td.filter(f,Bz(1)),i=td.last(e.getClientRects()),(pF(e)||Sn(e))&&(m=e.getNode()),(oF(e)||Tn(e))&&(m=e.getNode(!0)),!i)return null;if(j=i.left,(h=Hz(g,j))&&mF(h.node))return k=Math.abs(j-h.left),l=Math.abs(j-h.right),Cl(a,b,h.node,k<l,!0);if(m){var n=zz(a,b.getBody(),Az(1),m);if(h=Hz(td.filter(n,Bz(1)),j))return Gl(b,h.position.toRange(),!0);if(h=td.last(td.filter(n,Bz(0))))return Gl(b,h.position.toRange(),!0)}},uF=function(a){var b=a.dom.create(a.settings.forced_root_block);return(!Mb.ie||Mb.ie>=11)&&(b.innerHTML='<br data-mce-bogus="1">'),b},vF=function(a,b,c){var d,e,f,g=fo(a.getBody()),h=Ck.curry(qF,g.next),i=Ck.curry(qF,g.prev);if(c.collapsed&&a.settings.forced_root_block){if(!(d=a.dom.getParent(c.startContainer,"PRE")))return;e=1===b?h(al.fromRangeStart(c)):i(al.fromRangeStart(c)),e||(f=uF(a),1===b?a.$(d).after(f):a.$(d).before(f),a.selection.select(f,!0),a.selection.collapse())}},wF=function(a,b){var c,d=fo(a.getBody()),e=Ck.curry(qF,d.next),f=Ck.curry(qF,d.prev),g=b?Hl.Forwards:Hl.Backwards,h=b?e:f,i=a.selection.getRng();return(c=sF(g,a,h,i))?c:(c=vF(a,g,i))||null},xF=function(a,b){var c,d=b?1:-1,e=b?yz:xz,f=a.selection.getRng();return(c=tF(d,a,e,f))?c:(c=vF(a,d,f))||null},yF=function(a,b){return function(){var c=wF(a,b);return!!c&&(a.selection.setRng(c),!0)}},zF=function(a,b){return function(){var c=xF(a,b);return!!c&&(a.selection.setRng(c),!0)}},AF=function(a){return sb.map(a,function(a){return mD.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:Ea.noop},a)})},BF=function(a,b){return b.keyCode===a.keyCode&&b.shiftKey===a.shiftKey&&b.altKey===a.altKey&&b.ctrlKey===a.ctrlKey&&b.metaKey===a.metaKey},CF=function(a,b){return sb.bind(AF(a),function(a){return BF(a,b)?[a]:[]})},DF=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,d)}},EF=function(a,b){return sb.find(CF(a,b),function(a){return a.action()})},FF={match:CF,action:DF,execute:EF},GF=function(a,b,c){var d=yf.detect().os;FF.execute([{keyCode:Vz.RIGHT,action:yF(a,!0)},{keyCode:Vz.LEFT,action:yF(a,!1)},{keyCode:Vz.UP,action:zF(a,!1)},{keyCode:Vz.DOWN,action:zF(a,!0)},{keyCode:Vz.RIGHT,action:jn(a,!0)},{keyCode:Vz.LEFT,action:jn(a,!1)},{keyCode:Vz.UP,action:kn(a,!1)},{keyCode:Vz.DOWN,action:kn(a,!0)},{keyCode:Vz.RIGHT,action:Yt.move(a,b,!0)},{keyCode:Vz.LEFT,action:Yt.move(a,b,!1)},{keyCode:Vz.RIGHT,ctrlKey:!d.isOSX(),altKey:d.isOSX(),action:Yt.moveNextWord(a,b)},{keyCode:Vz.LEFT,ctrlKey:!d.isOSX(),altKey:d.isOSX(),action:Yt.movePrevWord(a,b)}],c).each(function(a){c.preventDefault()})},HF=function(a,b){a.on("keydown",function(c){!1===c.isDefaultPrevented()&&GF(a,b,c)})},IF={setup:HF},JF=function(a,b){var c=Sr.parentsAndSelf(b,a);return sb.findIndex(c,gi).fold(Ea.constant(c),function(a){return c.slice(0,a)})},KF=function(a){return 1===Bh.children(a).length},LF=function(a,b,c,d){var e=Ea.curry(XB,b),f=sb.map(sb.filter(d,e),function(a){return a.dom()});if(0===f.length)Os.deleteElement(b,a,c);else{var g=WB(c.dom(),f);b.selection.setRng(g.toRange())}},MF=function(a,b){var c=Ef.fromDom(a.getBody()),d=Ef.fromDom(a.selection.getStart()),e=sb.filter(JF(c,d),KF);return sb.last(e).map(function(c){var d=al.fromRangeStart(a.selection.getRng());return!!fr.willDeleteLastPositionInElement(b,d,c.dom())&&(LF(b,a,c,e),!0)}).getOr(!1)},NF=function(a,b){return!!a.selection.isCollapsed()&&MF(a,b)},OF={backspaceDelete:NF},PF=function(a,b,c){FF.execute([{keyCode:Vz.BACKSPACE,action:FF.action(Ys.backspaceDelete,a,!1)},{keyCode:Vz.DELETE,action:FF.action(Ys.backspaceDelete,a,!0)},{keyCode:Vz.BACKSPACE,action:FF.action(fu.backspaceDelete,a,b,!1)},{keyCode:Vz.DELETE,action:FF.action(fu.backspaceDelete,a,b,!0)},{keyCode:Vz.BACKSPACE,action:FF.action(js.backspaceDelete,a,!1)},{keyCode:Vz.DELETE,action:FF.action(js.backspaceDelete,a,!0)},{keyCode:Vz.BACKSPACE,action:FF.action(bs.backspaceDelete,a,!1)},{keyCode:Vz.DELETE,action:FF.action(bs.backspaceDelete,a,!0)},{keyCode:Vz.BACKSPACE,action:FF.action(av.backspaceDelete,a,!1)},{keyCode:Vz.DELETE,action:FF.action(av.backspaceDelete,a,!0)},{keyCode:Vz.BACKSPACE,action:FF.action(OF.backspaceDelete,a,!1)},{keyCode:Vz.DELETE,action:FF.action(OF.backspaceDelete,a,!0)}],c).each(function(a){c.preventDefault()})},QF=function(a,b){FF.execute([{keyCode:Vz.BACKSPACE,action:FF.action(Ys.paddEmptyElement,a)},{keyCode:Vz.DELETE,action:FF.action(Ys.paddEmptyElement,a)}],b)},RF=function(a,b){a.on("keydown",function(c){!1===c.isDefaultPrevented()&&PF(a,b,c)}),a.on("keyup",function(b){!1===b.isDefaultPrevented()&&QF(a,b)})},SF={setup:RF},TF=function(a){for(;a;){if(1===a.nodeType||3===a.nodeType&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}},UF=function(a,b){var c,d,e,f,g=b,h=a.dom,i=a.schema.getMoveCaretBeforeOnEnterElements();if(b){if(/^(LI|DT|DD)$/.test(b.nodeName)){var j=TF(b.firstChild);j&&/^(UL|OL|DL)$/.test(j.nodeName)&&b.insertBefore(h.doc.createTextNode(""),b.firstChild)}if(e=h.createRng(),b.normalize(),b.hasChildNodes()){for(c=new v(b,b);d=c.current();){if(Gi.isText(d)){e.setStart(d,0),e.setEnd(d,0);break}if(i[d.nodeName.toLowerCase()]){e.setStartBefore(d),e.setEndBefore(d);break}g=d,d=c.next()}d||(e.setStart(g,0),e.setEnd(g,0))}else Gi.isBr(b)?b.nextSibling&&h.isBlock(b.nextSibling)?(e.setStartBefore(b),e.setEndBefore(b)):(e.setStartAfter(b),e.setEndAfter(b)):(e.setStart(b,0),e.setEnd(b,0));a.selection.setRng(e),h.remove(f),a.selection.scrollIntoView(b)}},VF=function(a,b){var c,d,e=a.getRoot();for(c=b;c!==e&&"false"!==a.getContentEditable(c);)"true"===a.getContentEditable(c)&&(d=c),c=c.parentNode;return c!==e?d:e},WF=function(a){return La.from(a.dom.getParent(a.selection.getStart(!0),a.dom.isBlock))},XF=function(a){return WF(a).fold(Ea.constant(""),function(a){return a.nodeName.toUpperCase()})},YF=function(a){return WF(a).filter(function(a){return li(Ef.fromDom(a))}).isSome()},ZF={moveToCaretPosition:UF,getEditableRoot:VF,getParentBlock:WF,getParentBlockName:XF,isListItemParentBlock:YF},$F=function(a,b){return a.firstChild&&a.firstChild.nodeName===b},_F=function(a,b){return a&&a.parentNode&&a.parentNode.nodeName===b},aG=function(a){return a&&/^(OL|UL|LI)$/.test(a.nodeName)},bG=function(a){return aG(a)&&aG(a.parentNode)},cG=function(a){var b=a.parentNode;return/^(LI|DT|DD)$/.test(b.nodeName)?b:a},dG=function(a,b,c){for(var d=a[c?"firstChild":"lastChild"];d&&!Gi.isElement(d);)d=d[c?"nextSibling":"previousSibling"];return d===b},eG=function(a,b,c,d,e){var f=a.dom,g=a.selection.getRng();if(c!==a.getBody()){bG(c)&&(e="LI");var h=e?b(e):f.create("BR");if(dG(c,d,!0)&&dG(c,d,!1))_F(c,"LI")?f.insertAfter(h,cG(c)):f.replace(h,c);else if(dG(c,d,!0))_F(c,"LI")?(f.insertAfter(h,cG(c)),h.appendChild(f.doc.createTextNode(" ")),h.appendChild(c)):c.parentNode.insertBefore(h,c);else if(dG(c,d,!1))f.insertAfter(h,cG(c));else{c=cG(c);var i=g.cloneRange();i.setStartAfter(d),i.setEndAfter(c);var j=i.extractContents();"LI"===e&&$F(j,"LI")?(h=j.firstChild,f.insertAfter(j,c)):(f.insertAfter(j,c),f.insertAfter(h,c))}f.remove(d),ZF.moveToCaretPosition(a,h)}},fG={insert:eG},gG=function(a){return a&&"A"===a.nodeName&&0===Gd.trim(Bj.trim(a.innerText||a.textContent)).length},hG=function(a){return a&&/^(TD|TH|CAPTION)$/.test(a.nodeName)},iG=function(a){a.innerHTML='<br data-mce-bogus="1">'},jG=function(a,b){return a.nodeName===b||a.previousSibling&&a.previousSibling.nodeName===b},kG=function(a,b){return b&&a.isBlock(b)&&!/^(TD|TH|CAPTION|FORM)$/.test(b.nodeName)&&!/^(fixed|absolute)/i.test(b.style.position)&&"true"!==a.getContentEditable(b)},lG=function(a,b,c){var d,e=c,f=[];if(e){for(;e=e.firstChild;){if(a.isBlock(e))return;Gi.isElement(e)&&!b[e.nodeName.toLowerCase()]&&f.push(e)}for(d=f.length;d--;)e=f[d],!e.hasChildNodes()||e.firstChild===e.lastChild&&""===e.firstChild.nodeValue?a.remove(e):gG(e)&&a.remove(e)}},mG=function(a,b,c){return!1===Gi.isText(b)?c:a?1===c&&b.data.charAt(c-1)===Bj.ZWSP?0:c:c===b.data.length-1&&b.data.charAt(c)===Bj.ZWSP?b.data.length:c},nG=function(a){var b=a.cloneRange();return b.setStart(a.startContainer,mG(!0,a.startContainer,a.startOffset)),b.setEnd(a.endContainer,mG(!1,a.endContainer,a.endOffset)),b},oG=function(a){do{Gi.isText(a)&&(a.nodeValue=a.nodeValue.replace(/^[\r\n]+/,"")),a=a.firstChild}while(a)},pG=function(a,b){var c,d,e=a.getRoot();for(c=b;c!==e&&"false"!==a.getContentEditable(c);)"true"===a.getContentEditable(c)&&(d=c),c=c.parentNode;return c!==e?d:e},qG=function(a,b){var c=Om.getForcedRootBlock(a);c&&c.toLowerCase()===b.tagName.toLowerCase()&&a.dom.setAttribs(b,Om.getForcedRootBlockAttrs(a))},rG=function(a,b,c,d,e){var f,g,h,i,j,k,l=b||"P",m=a.dom,n=pG(m,d);if(!(g=m.getParent(d,m.isBlock))||!kG(m,g)){if(g=g||n,k=g===a.getBody()||hG(g)?g.nodeName.toLowerCase():g.parentNode.nodeName.toLowerCase(),!g.hasChildNodes())return f=m.create(l),qG(a,f),g.appendChild(f),c.setStart(f,0),c.setEnd(f,0),f;for(i=d;i.parentNode!==g;)i=i.parentNode;for(;i&&!m.isBlock(i);)h=i,i=i.previousSibling;if(h&&a.schema.isValidChild(k,l.toLowerCase())){for(f=m.create(l),qG(a,f),h.parentNode.insertBefore(f,h),i=h;i&&!m.isBlock(i);)j=i.nextSibling,f.appendChild(i),i=j;c.setStart(d,e),c.setEnd(d,e)}}return d},sG=function(a,b){var c;b.normalize(),(c=b.lastChild)&&!/^(left|right)$/gi.test(a.getStyle(c,"float",!0))||a.add(b,"br")},tG=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=a.dom,q=a.schema,r=q.getNonEmptyElements(),s=a.selection.getRng(),t=function(b){var c,f,h,i=e,j=q.getTextInlineElements();if(b||"TABLE"===l||"HR"===l?(c=p.create(b||n),qG(a,c)):c=g.cloneNode(!1),h=c,!1===Om.shouldKeepStyles(a))p.setAttrib(c,"style",null),p.setAttrib(c,"class",null);else do{if(j[i.nodeName]){if(gp(i))continue;f=i.cloneNode(!1),p.setAttrib(f,"id",""),c.hasChildNodes()?(f.appendChild(c.firstChild),c.appendChild(f)):(h=f,c.appendChild(f))}}while((i=i.parentNode)&&i!==d);return iG(h),c},u=function(a){var b,c,d,h;if(h=mG(a,e,f),Gi.isText(e)&&(a?h>0:h<e.nodeValue.length))return!1;if(e.parentNode===g&&o&&!a)return!0;if(a&&Gi.isElement(e)&&e===g.firstChild)return!0;if(jG(e,"TABLE")||jG(e,"HR"))return o&&!a||!o&&a;for(b=new v(e,g),Gi.isText(e)&&(a&&0===h?b.prev():a||h!==e.nodeValue.length||b.next());c=b.current();){if(Gi.isElement(c)){if(!c.getAttribute("data-mce-bogus")&&(d=c.nodeName.toLowerCase(),r[d]&&"br"!==d))return!1}else if(Gi.isText(c)&&!/^[ \t\r\n]*$/.test(c.nodeValue))return!1;a?b.prev():b.next()}return!0},w=function(){i=/^(H[1-6]|PRE|FIGURE)$/.test(l)&&"HGROUP"!==m?t(n):t(),Om.shouldEndContainerOnEmptyBlock(a)&&kG(p,k)&&p.isEmpty(g)?i=p.split(k,g):p.insertAfter(i,g),ZF.moveToCaretPosition(a,i)};if(Iv.normalize(p,s).each(function(a){s.setStart(a.startContainer,a.startOffset),s.setEnd(a.endContainer,a.endOffset)}),e=s.startContainer,f=s.startOffset,n=Om.getForcedRootBlock(a),h=b.shiftKey,Gi.isElement(e)&&e.hasChildNodes()&&(o=f>e.childNodes.length-1,e=e.childNodes[Math.min(f,e.childNodes.length-1)]||e,f=o&&Gi.isText(e)?e.nodeValue.length:0),d=pG(p,e)){if((n&&!h||!n&&h)&&(e=rG(a,n,s,e,f)),g=p.getParent(e,p.isBlock),k=g?p.getParent(g.parentNode,p.isBlock):null,l=g?g.nodeName.toUpperCase():"",m=k?k.nodeName.toUpperCase():"","LI"!==m||b.ctrlKey||(g=k,k=k.parentNode,l=m),/^(LI|DT|DD)$/.test(l)&&p.isEmpty(g))return void fG.insert(a,t,k,g,n);n&&g===a.getBody()||(n=n||"P",Ej(g)?(i=Qj(g),p.isEmpty(g)&&iG(g),ZF.moveToCaretPosition(a,i)):u()?w():u(!0)?(i=g.parentNode.insertBefore(t(),g),ZF.moveToCaretPosition(a,jG(g,"HR")?i:g)):(c=nG(s).cloneRange(),c.setEndAfter(g),j=c.extractContents(),oG(j),i=j.firstChild,p.insertAfter(j,g),lG(p,r,i),sG(p,g),p.isEmpty(g)&&iG(g),i.normalize(),p.isEmpty(i)?(p.remove(i),w()):ZF.moveToCaretPosition(a,i)),p.setAttrib(i,"id",""),a.fire("NewBlock",{newBlock:i}))}},uG={insert:tG},vG=function(a,b){return ZF.getParentBlock(a).filter(function(a){return b.length>0&&$g.is(Ef.fromDom(a),b)}).isSome()},wG=function(a){return vG(a,Om.getBrNewLineSelector(a))},xG=function(a){return vG(a,Om.getNoNewLineSelector(a))},yG={shouldInsertBr:wG,shouldBlockNewLine:xG},zG=ls.generate([{br:[]},{block:[]},{none:[]}]),AG=function(a,b){return yG.shouldBlockNewLine(a)},BG=function(a){return function(b,c){return""===Om.getForcedRootBlock(b)===a}},CG=function(a){return function(b,c){return ZF.isListItemParentBlock(b)===a}},DG=function(a,b){return function(c,d){return ZF.getParentBlockName(c)===a.toUpperCase()===b}},EG=function(a){return DG("pre",a)},FG=function(){return DG("summary",!0)},GG=function(a){return function(b,c){return Om.shouldPutBrInPre(b)===a}},HG=function(a,b){return yG.shouldInsertBr(a)},IG=function(a,b){return b},JG=function(a){var b=Om.getForcedRootBlock(a),c=ZF.getEditableRoot(a.dom,a.selection.getStart());return c&&a.schema.isValidChild(c.nodeName,b||"P")},KG=function(a,b){return function(c,d){return sb.foldl(a,function(a,b){return a&&b(c,d)},!0)?La.some(b):La.none()}},LG=function(a,b){return lt.evaluateUntil([KG([AG],zG.none()),KG([FG()],zG.br()),KG([EG(!0),GG(!1),IG],zG.br()),KG([EG(!0),GG(!1)],zG.block()),KG([EG(!0),GG(!0),IG],zG.block()),KG([EG(!0),GG(!0)],zG.br()),KG([CG(!0),IG],zG.br()),KG([CG(!0)],zG.block()),KG([BG(!0),IG,JG],zG.block()),KG([BG(!0)],zG.br()),KG([HG],zG.br()),KG([BG(!1),IG],zG.br()),KG([JG],zG.block())],[a,b.shiftKey]).getOr(zG.none())},MG={getAction:LG},NG=function(a,b){MG.getAction(a,b).fold(function(){Wv.insert(a,b)},function(){uG.insert(a,b)},Ea.noop)},OG={insert:NG},PG=function(a){a.typing&&(a.typing=!1,a.add())},QG=function(a,b){b.isDefaultPrevented()||(b.preventDefault(),PG(a.undoManager),a.undoManager.transact(function(){!1===a.selection.isCollapsed()&&a.execCommand("Delete"),OG.insert(a,b)}))},RG=function(a){a.on("keydown",function(b){b.keyCode===Vz.ENTER&&QG(a,b)})},SG={setup:RG},TG=function(a,b){return XG(a)&&Gi.isText(b.container())},UG=function(a,b){var c=b.container(),d=b.offset();c.insertData(d,""),a.selection.setCursorLocation(c,d+1)},VG=function(a,b,c){return!!TG(c,b)&&(UG(a,b),!0)},WG=function(a){var b=Ea.curry(_q.isInlineTarget,a),c=al.fromRangeStart(a.selection.getRng());return Gt.readLocation(b,a.getBody(),c).map(Ea.curry(VG,a,c)).getOr(!1)},XG=function(a){return a.fold(Ea.constant(!1),Ea.constant(!0),Ea.constant(!0),Ea.constant(!1))},YG=function(a){return!!a.selection.isCollapsed()&&WG(a)},ZG={insertAtSelection:YG},$G=function(a,b){FF.execute([{keyCode:Vz.SPACEBAR,action:FF.action(ZG.insertAtSelection,a)}],b).each(function(a){b.preventDefault()})},_G=function(a){a.on("keydown",function(b){!1===b.isDefaultPrevented()&&$G(a,b)})},aH={setup:_G},bH=function(a){return mr.descendant(Ef.fromDom(a.getBody()),"*[data-mce-caret]").fold(Ea.constant(null),function(a){return a.dom()})},cH=function(a){a.selection.setRng(a.selection.getRng())},dH=function(a,b){b.hasAttribute("data-mce-caret")&&(Qj(b),cH(a),a.selection.scrollIntoView(b))},eH=function(a,b){var c=bH(a);if(c)return"compositionstart"===b.type?(b.preventDefault(),b.stopPropagation(),void dH(a,c)):void(Hj(c)&&(dH(a,c),a.undoManager.add()))},fH=function(a){a.on("keyup compositionstart",Ea.curry(eH,a))},gH={setup:fH},hH=function(a){var b=Yt.setupSelectedState(a);gH.setup(a),IF.setup(a,b),SF.setup(a,b),SG.setup(a),aH.setup(a)},iH={setup:hH},jH=function(a){return Gi.isElement(a)&&ji(Ef.fromDom(a))},kH=function(a){var b=a.selection.getRng(),c=A.fromRangeStart(b),d=A.fromRangeEnd(b);if(A.isElementPosition(c)){var e=c.container();jH(e)&&zl.firstPositionIn(e).each(function(a){return b.setStart(a.container(),a.offset())})}if(A.isElementPosition(d)){var e=c.container();jH(e)&&zl.lastPositionIn(e).each(function(a){return b.setEnd(a.container(),a.offset())})}a.selection.setRng(fq.normalize(b))},lH=function(a){a.on("click",function(b){3===b.detail&&kH(a)})},mH={setup:lH},nH=function(a){a.on("click",function(b){a.dom.getParent(b.target,"details")&&b.preventDefault()})},oH=function(a){a.parser.addNodeFilter("details",function(a){sb.each(a,function(a){a.attr("data-mce-open",a.attr("open")),a.attr("open","open")})}),a.serializer.addNodeFilter("details",function(a){sb.each(a,function(a){var b=a.attr("data-mce-open");a.attr("open",Oa.isString(b)?b:null),a.attr("data-mce-open",null)})})},pH=function(a){nH(a),oH(a)},qH=rj.DOM,rH=function(a,b){var c=Ef.fromDom(a.getDoc().head),d=Ef.fromTag("style");hg.set(d,"type","text/css"),Vm.append(d,Ef.fromText(b)),Vm.append(c,d)},sH=function(a){var b=$(a.settings,a.schema);return b.addAttributeFilter("src,href,style,tabindex",function(b,c){for(var d,e,f,g=b.length,h=a.dom;g--;)if(d=b[g],e=d.attr(c),f="data-mce-"+c,!d.attributes.map[f]){if(0===e.indexOf("data:")||0===e.indexOf("blob:"))continue;"style"===c?(e=h.serializeStyle(h.parseStyle(e),d.name),e.length||(e=null),d.attr(f,e),d.attr(c,e)):"tabindex"===c?(d.attr(f,e),d.attr(c,null)):d.attr(f,a.convertURL(e,c,d.name))}}),b.addNodeFilter("script",function(a){for(var b,c,d=a.length;d--;)b=a[d],c=b.attr("type")||"no/type",0!==c.indexOf("mce-")&&b.attr("type","mce-"+c)}),b.addNodeFilter("#cdata",function(a){for(var b,c=a.length;c--;)b=a[c],b.type=8,b.name="#comment",b.value="[CDATA["+b.value+"]]"}),b.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b){for(var c,d=b.length,e=a.schema.getNonEmptyElements();d--;)c=b[d],c.isEmpty(e)&&0===c.getAll("br").length&&(c.append(new DD("br",1)).shortEnded=!0)}),b},tH=function(a){a.settings.auto_focus&&Vb.setEditorTimeout(a,function(){var b;b=!0===a.settings.auto_focus?a:a.editorManager.get(a.settings.auto_focus),b.destroyed||b.focus()},100)},uH=function(a){a.bindPendingEventDelegates(),a.initialized=!0,a.fire("init"),a.focus(!0),a.nodeChanged({initial:!0}),a.execCallback("init_instance_callback",a),tH(a)},vH=function(a){return a.inline?qH.styleSheetLoader:a.dom.styleSheetLoader},wH=function(a,b){var c,d,e=a.settings,f=a.getElement(),g=a.getDoc();e.inline||(a.getElement().style.visibility=a.orgVisibility),b||e.content_editable||(g.open(),g.write(a.iframeHTML),g.close()),e.content_editable&&(a.on("remove",function(){var a=this.getBody();qH.removeClass(a,"mce-content-body"),qH.removeClass(a,"mce-edit-focus"),qH.setAttrib(a,"contentEditable",null)}),qH.addClass(f,"mce-content-body"),a.contentDocument=g=e.content_document||document,a.contentWindow=e.content_window||window,a.bodyElement=f,e.content_document=e.content_window=null,e.root_name=f.nodeName.toLowerCase()),c=a.getBody(),c.disabled=!0,a.readonly=e.readonly,a.readonly||(a.inline&&"static"===qH.getStyle(c,"position",!0)&&(c.style.position="relative"),c.contentEditable=a.getParam("content_editable_state",!0)),c.disabled=!1,a.editorUpload=U(a),a.schema=w(e),a.dom=rj(g,{keep_values:!0,url_converter:a.convertURL,url_converter_scope:a,hex_colors:e.force_hex_style_colors,class_filter:e.class_filter,update_styles:!0,root_element:a.inline?a.getBody():null,collect:e.content_editable,schema:a.schema,onSetAttrib:function(b){a.fire("SetAttrib",b)}}),a.parser=sH(a),a.serializer=aa(e,a),a.selection=lF(a.dom,a.getWin(),a.serializer,a),a.formatter=Z(a),a.undoManager=X(a),a._nodeChangeDispatcher=new V(a),a._selectionOverrides=_z(a),pH(a),mH.setup(a),iH.setup(a),Oy.setup(a),a.fire("PreInit"),e.browser_spellcheck||e.gecko_spellcheck||(g.body.spellcheck=!1,qH.setAttrib(c,"spellcheck","false")),a.quirks=ca(a),a.fire("PostRender"),e.directionality&&(c.dir=e.directionality),e.nowrap&&(c.style.whiteSpace="nowrap"),e.protect&&a.on("BeforeSetContent",function(a){Gd.each(e.protect,function(b){a.content=a.content.replace(b,function(a){return"\x3c!--mce:protected "+escape(a)+"--\x3e"})})}),a.on("SetContent",function(){a.addVisual(a.getBody())}),a.load({initial:!0,format:"html"}),a.startContent=a.getContent({format:"raw"}),a.on("compositionstart compositionend",function(b){a.composing="compositionstart"===b.type}),a.contentStyles.length>0&&(d="",Gd.each(a.contentStyles,function(a){d+=a+"\r\n"}),a.dom.addStyle(d)),vH(a).loadAll(a.contentCSS,function(b){uH(a)},function(b){uH(a)}),e.content_style&&rH(a,e.content_style)},xH={initContentBody:wH},yH=rj.DOM,zH=function(a,b){if(document.domain!==window.location.hostname&&Mb.ie&&Mb.ie<12){var c=Hy.uuid("mce");a[c]=function(){xH.initContentBody(a)};var d='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+a.id+'");document.write(ed.iframeHTML);document.close();ed.'+c+"(true);})()";return yH.setAttrib(b,"src",d),!0}return!1},AH=function(a){var b="number"==typeof a?a+"px":a;return b||""},BH=function(a,b,c,d){var e=Ef.fromTag("iframe");return hg.setAll(e,d),hg.setAll(e,{id:a+"_ifr",frameBorder:"0",allowTransparency:"true",title:b}),Eg.setAll(e,{width:"100%",height:AH(c),display:"block"}),e},CH=function(a){var b,c,d;return d=Om.getDocType(a)+"<html><head>",Om.getDocumentBaseUrl(a)!==a.documentBaseUrl&&(d+='<base href="'+a.documentBaseURI.getURI()+'" />'),d+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',b=Om.getBodyId(a),c=Om.getBodyClass(a),Om.getContentSecurityPolicy(a)&&(d+='<meta http-equiv="Content-Security-Policy" content="'+Om.getContentSecurityPolicy(a)+'" />'),d+='</head><body id="'+b+'" class="mce-content-body '+c+'" data-id="'+a.id+'"><br></body></html>'},DH=function(a,b){var c=a.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),d=BH(a.id,c,b.height,Om.getIframeAttrs(a)).dom();d.onload=function(){d.onload=null,a.fire("load")};var e=zH(a,d);return a.contentAreaContainer=b.iframeContainer,a.iframeElement=d,a.iframeHTML=CH(a),yH.add(b.iframeContainer,d),e},EH=function(a,b){var c=DH(a,b);b.editorContainer&&(yH.get(b.editorContainer).style.display=a.orgDisplay,a.hidden=yH.isHidden(b.editorContainer)),a.getElement().style.display="none",yH.setAttrib(a.id,"aria-hidden","true"),c||xH.initContentBody(a)},FH={init:EH},GH=rj.DOM,HH=function(a,b,c){var d,e,f=py.get(c);if(d=py.urls[c]||a.documentBaseUrl.replace(/\/$/,""),c=Gd.trim(c),f&&-1===Gd.inArray(b,c)){if(Gd.each(py.dependencies(c),function(c){HH(a,b,c)}),a.plugins[c])return;e=new f(a,d,a.$),a.plugins[c]=e,e.init&&(e.init(a,d),b.push(c))}},IH=function(a){return a.replace(/^\-/,"")},JH=function(a){var b=[];Gd.each(a.settings.plugins.split(/[ ,]/),function(c){HH(a,b,IH(c))})},KH=function(a){var b,c=a.settings.theme;Oa.isString(c)?(a.settings.theme=IH(c),b=qy.get(c),a.theme=new b(a,qy.urls[c]),a.theme.init&&a.theme.init(a,qy.urls[c]||a.documentBaseUrl.replace(/\/$/,""),a.$)):a.theme={}},LH=function(a){var b,c,d,e,f,g=a.settings,h=a.getElement();return b=g.width||GH.getStyle(h,"width")||"100%",c=g.height||GH.getStyle(h,"height")||h.offsetHeight,d=g.min_height||100,e=/^[0-9\.]+(|px)$/i,e.test(""+b)&&(b=Math.max(parseInt(b,10),100)),e.test(""+c)&&(c=Math.max(parseInt(c,10),d)),f=a.theme.renderUI({targetNode:h,width:b,height:c,deltaWidth:g.delta_width,deltaHeight:g.delta_height}),g.content_editable||(c=(f.iframeHeight||c)+("number"==typeof c?f.deltaHeight||0:""))<d&&(c=d),f.height=c,f},MH=function(a){var b,c=a.getElement();return b=a.settings.theme(a,c),b.editorContainer.nodeType&&(b.editorContainer.id=b.editorContainer.id||a.id+"_parent"),b.iframeContainer&&b.iframeContainer.nodeType&&(b.iframeContainer.id=b.iframeContainer.id||a.id+"_iframecontainer"),b.height=b.iframeHeight?b.iframeHeight:c.offsetHeight,b},NH=function(a){return{editorContainer:a,iframeContainer:a}},OH=function(a){var b=GH.create("div");return GH.insertAfter(b,a),NH(b)},PH=function(a){var b=a.getElement();return a.inline?NH(null):OH(b)},QH=function(a){var b=a.settings,c=a.getElement();return a.orgDisplay=c.style.display,Oa.isString(b.theme)?LH(a):Oa.isFunction(b.theme)?MH(a):PH(a)},RH=function(a){var b,c=a.settings,d=a.getElement();return a.rtl=c.rtl_ui||a.editorManager.i18n.rtl,a.editorManager.i18n.setCode(c.language),c.aria_label=c.aria_label||GH.getAttrib(d,"aria-label",a.getLang("aria.rich_text_area")),a.fire("ScriptsLoaded"),KH(a),JH(a),b=QH(a),a.editorContainer=b.editorContainer?b.editorContainer:null,c.content_css&&Gd.each(Gd.explode(c.content_css),function(b){a.contentCSS.push(a.documentBaseURI.toAbsolute(b))}),c.content_editable?xH.initContentBody(a):FH.init(a,b)},SH={init:RH},TH=rj.DOM,UH=function(a){return"-"===a.charAt(0)},VH=function(a,b){var c=b.settings;c.language&&"en"!==c.language&&!c.language_url&&(c.language_url=b.editorManager.baseURL+"/langs/"+c.language+".js"),c.language_url&&!b.editorManager.i18n.data[c.language]&&a.add(c.language_url)},WH=function(a,b,c,d){var e=b.settings,f=e.theme;if(Oa.isString(f)){if(!UH(f)&&!qy.urls.hasOwnProperty(f)){var g=e.theme_url;g?qy.load(f,b.documentBaseURI.toAbsolute(g)):qy.load(f,"themes/"+f+"/theme"+c+".js")}a.loadQueue(function(){qy.waitFor(f,d)})}else d()},XH=function(a,b){Gd.isArray(a.plugins)&&(a.plugins=a.plugins.join(" ")),Gd.each(a.external_plugins,function(b,c){py.load(c,b),a.plugins+=" "+c}),Gd.each(a.plugins.split(/[ ,]/),function(a){if((a=Gd.trim(a))&&!py.urls[a])if(UH(a)){a=a.substr(1,a.length);var c=py.dependencies(a);Gd.each(c,function(a){var c={prefix:"plugins/",resource:a,suffix:"/plugin"+b+".js"};a=py.createUrl(c,a),py.load(a.resource,a)})}else py.load(a,{prefix:"plugins/",resource:a,suffix:"/plugin"+b+".js"})})},YH=function(a,b){var c=wj.ScriptLoader;WH(c,a,b,function(){VH(c,a),XH(a.settings,b),c.loadQueue(function(){a.removed||SH.init(a)},a,function(b){oy.pluginLoadError(a,b[0]),a.removed||SH.init(a)})})},ZH=function(a){var b=a.settings,c=a.id,d=function(){TH.unbind(window,"ready",d),a.render()};if(!fc.Event.domLoaded)return void TH.bind(window,"ready",d);if(a.getElement()&&Mb.contentEditable){b.inline?a.inline=!0:(a.orgVisibility=a.getElement().style.visibility,a.getElement().style.visibility="hidden");var e=a.getElement().form||TH.getParent(c,"form");e&&(a.formElement=e,b.hidden_input&&!/TEXTAREA|INPUT/i.test(a.getElement().nodeName)&&(TH.insertAfter(TH.create("input",{type:"hidden",name:c}),c),a.hasHiddenInput=!0),a.formEventDelegate=function(b){a.fire(b.type,b)},TH.bind(e,"submit reset",a.formEventDelegate),a.on("reset",function(){a.setContent(a.startContent,{format:"raw"})}),!b.submit_patch||e.submit.nodeType||e.submit.length||e._mceOldSubmit||(e._mceOldSubmit=e.submit,e.submit=function(){return a.editorManager.triggerSave(),a.setDirty(!1),e._mceOldSubmit(e)})),a.windowManager=L(a),a.notificationManager=J(a),"xml"===b.encoding&&a.on("GetContent",function(a){a.save&&(a.content=TH.encode(a.content))}),b.add_form_submit_trigger&&a.on("submit",function(){a.initialized&&a.save()}),b.add_unload_trigger&&(a._beforeUnload=function(){!a.initialized||a.destroyed||a.isHidden()||a.save({format:"raw",no_events:!0,set_dirty:!1})},a.editorManager.on("BeforeUnload",a._beforeUnload)),a.editorManager.add(a),YH(a,a.suffix)}},$H={render:ZH},_H=function(a,b,c){var d=a.sidebars?a.sidebars:[];d.push({name:b,settings:c}),a.sidebars=d},aI={add:_H},bI=Gd.each,cI=Gd.trim,dI="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),eI={ftp:21,http:80,https:443,mailto:25},fI=function(a,b){var c,d,e=this;if(a=cI(a),b=e.settings=b||{},c=b.base_uri,/^([\w\-]+):([^\/]{2})/i.test(a)||/^\s*#/.test(a))return void(e.source=a);var f=0===a.indexOf("//");0!==a.indexOf("/")||f||(a=(c?c.protocol||"http":"http")+"://mce_host"+a),/^[\w\-]*:?\/\//.test(a)||(d=b.base_uri?b.base_uri.path:new fI(document.location.href).directory,""==b.base_uri.protocol?a="//mce_host"+e.toAbsPath(d,a):(a=/([^#?]*)([#?]?.*)/.exec(a),a=(c&&c.protocol||"http")+"://mce_host"+e.toAbsPath(d,a[1])+a[2])),a=a.replace(/@@/g,"(mce_at)"),a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a),bI(dI,function(b,c){var d=a[c];d&&(d=d.replace(/\(mce_at\)/g,"@@")),e[b]=d}),c&&(e.protocol||(e.protocol=c.protocol),e.userInfo||(e.userInfo=c.userInfo),e.port||"mce_host"!==e.host||(e.port=c.port),e.host&&"mce_host"!==e.host||(e.host=c.host),e.source=""),f&&(e.protocol="")};fI.prototype={setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b,c=this;if("./"===a)return a;if(a=new fI(a,{base_uri:c}),"mce_host"!==a.host&&c.host!==a.host&&a.host||c.port!==a.port||c.protocol!==a.protocol&&""!==a.protocol)return a.getURI();var d=c.getURI(),e=a.getURI();return d===e||"/"===d.charAt(d.length-1)&&d.substr(0,d.length-1)===e?d:(b=c.toRelPath(c.path,a.path),a.query&&(b+="?"+a.query),a.anchor&&(b+="#"+a.anchor),b)},toAbsolute:function(a,b){return a=new fI(a,{base_uri:this}),a.getURI(b&&this.isSameOrigin(a))},isSameOrigin:function(a){if(this.host==a.host&&this.protocol==a.protocol){if(this.port==a.port)return!0;var b=eI[this.protocol];if(b&&(this.port||b)==(a.port||b))return!0}return!1},toRelPath:function(a,b){var c,d,e,f=0,g="";if(a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/"),a.length>=c.length)for(d=0,e=a.length;d<e;d++)if(d>=c.length||a[d]!==c[d]){f=d+1;break}if(a.length<c.length)for(d=0,e=c.length;d<e;d++)if(d>=a.length||a[d]!==c[d]){f=d+1;break}if(1===f)return b;for(d=0,e=a.length-(f-1);d<e;d++)g+="../";for(d=f-1,e=c.length;d<e;d++)g+=d!==f-1?"/"+c[d]:c[d];return g},toAbsPath:function(a,b){var c,d,e,f=0,g=[];for(d=/\/$/.test(b)?"/":"",a=a.split("/"),b=b.split("/"),bI(a,function(a){a&&g.push(a)}),a=g,c=b.length-1,g=[];c>=0;c--)0!==b[c].length&&"."!==b[c]&&(".."!==b[c]?f>0?f--:g.push(b[c]):f++);return c=a.length-f,e=c<=0?g.reverse().join("/"):a.slice(0,c).join("/")+"/"+g.reverse().join("/"),0!==e.indexOf("/")&&(e="/"+e),d&&e.lastIndexOf("/")!==e.length-1&&(e+=d),e},getURI:function(a){var b,c=this;return c.source&&!a||(b="",a||(c.protocol?b+=c.protocol+"://":b+="//",c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b),c.source}},fI.parseDataUri=function(a){var b,c;return a=decodeURIComponent(a).split(","),c=/data:([^;]+)/.exec(a[0]),c&&(b=c[1]),{type:b,data:a[1]}},fI.getDocumentBaseUrl=function(a){var b;return b=0!==a.protocol.indexOf("http")&&"file:"!==a.protocol?a.href:a.protocol+"//"+a.host+a.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(b)&&(b=b.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(b)||(b+="/")),b};var gI="html",hI=function(a,b){var c=Om.getForcedRootBlock(a),d=new RegExp("^(<"+c+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+c+">[\r\n]*|<br \\/>[\r\n]*)$");return b.replace(d,"")},iI=function(a,b,c){var d;if(b.format=b.format?b.format:gI,b.get=!0,b.getInner=!0,b.no_events||a.fire("BeforeGetContent",b),"raw"===b.format)d=Gd.trim(iA.trimExternal(a.serializer,c.innerHTML));else if("text"===b.format)d=Bj.trim(c.innerText||c.textContent);else{if("tree"===b.format)return a.serializer.serialize(c,b);d=hI(a,a.serializer.serialize(c,b))}return"text"!==b.format?b.content=Gd.trim(d):b.content=d,b.no_events||a.fire("GetContent",b),b.content},jI=function(a,b){return void 0===b&&(b={}),La.from(a.getBody()).fold(Ea.constant("tree"===b.format?new DD("body",11):""),function(c){return iI(a,b,c)})},kI=function(a,b){b(a),a.firstChild&&kI(a.firstChild,b),a.next&&kI(a.next,b)},lI=function(a,b,c){var d={},e={},f=[];c.firstChild&&kI(c.firstChild,function(c){sb.each(a,function(a){a.name===c.name&&(d[a.name]?d[a.name].nodes.push(c):d[a.name]={filter:a,nodes:[c]})}),sb.each(b,function(a){"string"==typeof c.attr(a.name)&&(e[a.name]?e[a.name].nodes.push(c):e[a.name]={filter:a,nodes:[c]})})});for(var g in d)d.hasOwnProperty(g)&&f.push(d[g]);for(var h in e)e.hasOwnProperty(h)&&f.push(e[h]);return f},mI=function(a,b,c){var d=lI(a,b,c);sb.each(d,function(a){sb.each(a.filter.callbacks,function(b){b(a.nodes,a.filter.name,{})})})},nI="html",oI=function(a){return a instanceof DD},pI=function(a){Ux.hasFocus(a)&&zl.firstPositionIn(a.getBody()).each(function(b){var c=b.getNode(),d=Gi.isTable(c)?zl.firstPositionIn(c).getOr(b):b;a.selection.setRng(d.toRange())})},qI=function(a,b){a.dom.setHTML(a.getBody(),b),pI(a)},rI=function(a,b,c,d){var e,f;return 0===c.length||/^\s+$/.test(c)?(f='<br data-mce-bogus="1">',"TABLE"===b.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(b.nodeName)&&(c="<li>"+f+"</li>"),e=Om.getForcedRootBlock(a),e&&a.schema.isValidChild(b.nodeName.toLowerCase(),e.toLowerCase())?(c=f,c=a.dom.createHTML(e,a.settings.forced_root_block_attrs,c)):c||(c='<br data-mce-bogus="1">'),qI(a,c),a.fire("SetContent",d)):("raw"!==d.format&&(c=D({validate:a.validate},a.schema).serialize(a.parser.parse(c,{isRootContent:!0,insert:!0}))),d.content=Gd.trim(c),qI(a,d.content),d.no_events||a.fire("SetContent",d)),d.content},sI=function(a,b,c,d){mI(a.parser.getNodeFilters(),a.parser.getAttributeFilters(),c);var e=D({validate:a.validate},a.schema).serialize(c);return d.content=Gd.trim(e),qI(a,d.content),d.no_events||a.fire("SetContent",d),c},tI=function(a,b,c){return void 0===c&&(c={}),c.format=c.format?c.format:nI,c.set=!0,c.content=oI(b)?"":b,oI(b)||c.no_events||(a.fire("BeforeSetContent",c),b=c.content),La.from(a.getBody()).fold(Ea.constant(b),function(d){return oI(b)?sI(a,d,b,c):rI(a,d,b,c)})},uI=rj.DOM,vI=function(a){uI.setStyle(a.id,"display",a.orgDisplay)},wI=function(a){return La.from(a).each(function(a){return a.destroy()})},xI=function(a){a.contentAreaContainer=a.formElement=a.container=a.editorContainer=null,a.bodyElement=a.contentDocument=a.contentWindow=null,a.iframeElement=a.targetElm=null,a.selection&&(a.selection=a.selection.win=a.selection.dom=a.selection.dom.doc=null)},yI=function(a){var b=a.formElement;b&&(b._mceOldSubmit&&(b.submit=b._mceOldSubmit,b._mceOldSubmit=null),uI.unbind(b,"submit reset",a.formEventDelegate))},zI=function(a){if(!a.removed){var b=a._selectionOverrides,c=a.editorUpload,d=a.getBody(),e=a.getElement();d&&a.save(),a.removed=!0,a.unbindAllNativeEvents(),a.hasHiddenInput&&e&&uI.remove(e.nextSibling),!a.inline&&d&&vI(a),bx.fireRemove(a),a.editorManager.remove(a),uI.remove(a.getContainer()),wI(b),wI(c),a.destroy()}},AI=function(a,b){var c=a.selection,d=a.dom;if(!a.destroyed){if(!b&&!a.removed)return void a.remove();b||(a.editorManager.off("beforeunload",a._beforeUnload),a.theme&&a.theme.destroy&&a.theme.destroy(),wI(c),wI(d)),yI(a),xI(a),a.destroyed=!0}},BI=rj.DOM,CI=Gd.extend,DI=Gd.each,EI=Gd.resolve,FI=Mb.ie,GI=function(a,b,c){var d=this,e=d.documentBaseUrl=c.documentBaseURL,f=c.baseURI;b=Kq(d,a,e,c.defaultSettings,b),d.settings=b,z.language=b.language||"en",z.languageLoad=b.language_load,z.baseURL=c.baseURL,d.id=a,d.setDirty(!1),d.plugins={},d.documentBaseURI=new fI(b.document_base_url,{base_uri:f}),d.baseURI=f,d.contentCSS=[],d.contentStyles=[],d.shortcuts=new H(d),d.loadedCSS={},d.editorCommands=new F(d),d.suffix=c.suffix,d.editorManager=c,d.inline=b.inline,d.buttons={},d.menuItems={},b.cache_suffix&&(Mb.cacheSuffix=b.cache_suffix.replace(/^[\?\&]+/,"")),!1===b.override_viewport&&(Mb.overrideViewPort=!1),c.fire("SetupEditor",{editor:d}),d.execCallback("setup",d),d.$=$d.overrideDefaults(function(){return{context:d.inline?d.getBody():d.getDoc(),element:d.getBody()}})};GI.prototype={render:function(){$H.render(this)},focus:function(a){Ux.focus(this,a)},hasFocus:function(){return Ux.hasFocus(this)},execCallback:function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d,e=this,f=e.settings[a];if(f)return e.callbackLookup&&(d=e.callbackLookup[a])&&(f=d.func,d=d.scope),"string"==typeof f&&(d=f.replace(/\.\w+$/,""),d=d?EI(d):0,f=EI(f),e.callbackLookup=e.callbackLookup||{},e.callbackLookup[a]={func:f,scope:d}),f.apply(d||e,Array.prototype.slice.call(arguments,1))},translate:function(a){if(a&&Gd.is(a,"string")){var b=this.settings.language||"en",c=this.editorManager.i18n;a=c.data[b+"."+a]||a.replace(/\{\#([^\}]+)\}/g,function(a,d){return c.data[b+"."+d]||"{#"+d+"}"})}return this.editorManager.translate(a)},getLang:function(a,b){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+a]||(void 0!==b?b:"{#"+a+"}")},getParam:function(a,b,c){return Pq(this,a,b,c)},nodeChanged:function(a){this._nodeChangeDispatcher.nodeChanged(a)},addButton:function(a,b){var c=this;b.cmd&&(b.onclick=function(){c.execCommand(b.cmd)}),b.stateSelector&&void 0===b.active&&(b.active=!1),b.text||b.icon||(b.icon=a),c.buttons=c.buttons,b.tooltip=b.tooltip||b.title,c.buttons[a]=b},addSidebar:function(a,b){return aI.add(this,a,b)},addMenuItem:function(a,b){var c=this;b.cmd&&(b.onclick=function(){c.execCommand(b.cmd)}),c.menuItems=c.menuItems,c.menuItems[a]=b},addContextToolbar:function(a,b){var c,d=this;d.contextToolbars=d.contextToolbars||[],"string"==typeof a&&(c=a,a=function(a){return d.dom.is(a,c)}),d.contextToolbars.push({id:Hy.uuid("mcet"),predicate:a,items:b})},addCommand:function(a,b,c){this.editorCommands.addCommand(a,b,c)},addQueryStateHandler:function(a,b,c){this.editorCommands.addQueryStateHandler(a,b,c)},addQueryValueHandler:function(a,b,c){this.editorCommands.addQueryValueHandler(a,b,c)},addShortcut:function(a,b,c,d){this.shortcuts.add(a,b,c,d)},execCommand:function(a,b,c,d){return this.editorCommands.execCommand(a,b,c,d)},queryCommandState:function(a){return this.editorCommands.queryCommandState(a)},queryCommandValue:function(a){return this.editorCommands.queryCommandValue(a)},queryCommandSupported:function(a){return this.editorCommands.queryCommandSupported(a)},show:function(){var a=this;a.hidden&&(a.hidden=!1,a.inline?a.getBody().contentEditable=!0:(BI.show(a.getContainer()),BI.hide(a.id)),a.load(),a.fire("show"))},hide:function(){var a=this,b=a.getDoc();a.hidden||(FI&&b&&!a.inline&&b.execCommand("SelectAll"),a.save(),a.inline?(a.getBody().contentEditable=!1,a===a.editorManager.focusedEditor&&(a.editorManager.focusedEditor=null)):(BI.hide(a.getContainer()),BI.setStyle(a.id,"display",a.orgDisplay)),a.hidden=!0,a.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(a,b){this.fire("ProgressState",{state:a,time:b})},load:function(a){var b,c=this,d=c.getElement();return c.removed?"":d?(a=a||{},a.load=!0,b=c.setContent(void 0!==d.value?d.value:d.innerHTML,a),a.element=d,a.no_events||c.fire("LoadContent",a),a.element=d=null,b):void 0},save:function(a){var b,c,d=this,e=d.getElement();if(e&&d.initialized&&!d.removed)return a=a||{},a.save=!0,a.element=e,b=a.content=d.getContent(a),a.no_events||d.fire("SaveContent",a),"raw"===a.format&&d.fire("RawSaveContent",a),b=a.content,/TEXTAREA|INPUT/i.test(e.nodeName)?e.value=b:(d.inline||(e.innerHTML=b),(c=BI.getParent(d.id,"form"))&&DI(c.elements,function(a){if(a.name===d.id)return a.value=b,!1})),a.element=e=null,!1!==a.set_dirty&&d.setDirty(!1),b},setContent:function(a,b){return tI(this,a,b)},getContent:function(a){return jI(this,a)},insertContent:function(a,b){b&&(a=CI({content:a},b)),this.execCommand("mceInsertContent",!1,a)},isDirty:function(){return!this.isNotDirty},setDirty:function(a){var b=!this.isNotDirty;this.isNotDirty=!a,a&&a!==b&&this.fire("dirty")},setMode:function(a){fx(this,a)},getContainer:function(){var a=this;return a.container||(a.container=BI.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=BI.get(this.id)),this.targetElm},getWin:function(){var a,b=this;return b.contentWindow||(a=b.iframeElement)&&(b.contentWindow=a.contentWindow),b.contentWindow},getDoc:function(){var a,b=this;return b.contentDocument||(a=b.getWin())&&(b.contentDocument=a.document),b.contentDocument},getBody:function(){var a=this.getDoc();return this.bodyElement||(a?a.body:null)},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&"LINK"===c.nodeName||0===a.indexOf("file:")||0===a.length?a:e.relative_urls?d.documentBaseURI.toRelative(a):a=d.documentBaseURI.toAbsolute(a,e.remove_script_host)},addVisual:function(a){var b,c=this,d=c.settings,e=c.dom;a=a||c.getBody(),void 0===c.hasVisual&&(c.hasVisual=d.visual),DI(e.select("table,a",a),function(a){var f;switch(a.nodeName){case"TABLE":return b=d.visual_table_class||"mce-item-table",f=e.getAttrib(a,"border"),void(f&&"0"!==f||!c.hasVisual?e.removeClass(a,b):e.addClass(a,b));case"A":return void(e.getAttrib(a,"href")||(f=e.getAttrib(a,"name")||a.id,b=d.visual_anchor_class||"mce-item-anchor",f&&c.hasVisual?e.addClass(a,b):e.removeClass(a,b)))}}),c.fire("VisualAid",{element:a,hasVisual:c.hasVisual})},remove:function(){zI(this)},destroy:function(a){AI(this,a)},uploadImages:function(a){return this.editorUpload.uploadImages(a)},_scanForImages:function(){return this.editorUpload.scanForImages()}},CI(GI.prototype,px);var HI,II,JI,KI=function(a){return-1!==a.className.toString().indexOf("mce-")},LI={isEditorUIElement:KI},MI=function(a){return"nodechange"===a.type&&a.selectionChange},NI=function(a,b){var c=function(){b.throttle()};rj.DOM.bind(document,"mouseup",c),a.on("remove",function(){rj.DOM.unbind(document,"mouseup",c)})},OI=function(a){a.on("focusout",function(){uw.store(a)})},PI=function(a,b){a.on("mouseup touchend",function(a){b.throttle()})},QI=function(a,b){var c=yf.detect().browser;c.isIE()||c.isEdge()?OI(a):PI(a,b),a.on("keyup nodechange",function(b){MI(b)||uw.store(a)})},RI=function(a){var b=Sz.first(function(){uw.store(a)},0);a.inline&&NI(a,b),a.on("init",function(){QI(a,b)}),a.on("remove",function(){b.cancel()})},SI={register:RI},TI=rj.DOM,UI=function(a){return LI.isEditorUIElement(a)},VI=function(a,b){var c=a?a.settings.custom_ui_selector:"";return null!==TI.getParent(b,function(b){return UI(b)||!!c&&a.dom.is(b,c)})},WI=function(){try{return document.activeElement}catch(a){return document.body}},XI=function(a,b){var c=b.editor;SI.register(c),c.on("focusin",function(){var b=this,c=a.focusedEditor;c!==b&&(c&&c.fire("blur",{focusedEditor:b}),a.setActive(b),a.focusedEditor=b,b.fire("focus",{blurredEditor:c}),b.focus(!0))}),c.on("focusout",function(){var b=this;Vb.setEditorTimeout(b,function(){var c=a.focusedEditor;VI(b,WI())||c!==b||(b.fire("blur",{focusedEditor:null}),a.focusedEditor=null)})}),HI||(HI=function(b){var c,d=a.activeEditor;c=b.target,d&&c.ownerDocument===document&&(c===document.body||VI(d,c)||a.focusedEditor!==d||(d.fire("blur",{focusedEditor:null}),a.focusedEditor=null))},TI.bind(document,"focusin",HI))},YI=function(a,b){a.focusedEditor===b.editor&&(a.focusedEditor=null),a.activeEditor||(TI.unbind(document,"focusin",HI),HI=null)},ZI=function(a){a.on("AddEditor",Ea.curry(XI,a)),a.on("RemoveEditor",Ea.curry(YI,a))},$I={setup:ZI,isEditorUIElement:UI,isUIElement:VI},_I={},aJ="en",bJ={setCode:function(a){a&&(aJ=a,this.rtl=!!this.data[a]&&"rtl"===this.data[a]._dir)},getCode:function(){return aJ},rtl:!1,add:function(a,b){var c=_I[a];c||(_I[a]=c={});for(var d in b)c[d]=b[d];this.setCode(a)},translate:function(a){var b=_I[aJ]||{},c=function(a){return Gd.is(a,"function")?Object.prototype.toString.call(a):d(a)?"":""+a},d=function(a){return""===a||null===a||Gd.is(a,"undefined")},e=function(a){return a=c(a),Gd.hasOwn(b,a)?c(b[a]):a};if(d(a))return"";if(Gd.is(a,"object")&&Gd.hasOwn(a,"raw"))return c(a.raw);if(Gd.is(a,"array")){var f=a.slice(1);a=e(a[0]).replace(/\{([0-9]+)\}/g,function(a,b){return Gd.hasOwn(f,b)?c(f[b]):a})}return e(a).replace(/{context:\w+}$/,"")},data:_I},cJ=rj.DOM,dJ=Gd.explode,eJ=Gd.each,fJ=Gd.extend,gJ=0,hJ=!1,iJ=[],jJ=[],kJ=function(a){return"length"!==a},lJ=function(a){eJ(JI.get(),function(b){"scroll"===a.type?b.fire("ScrollWindow",a):b.fire("ResizeWindow",a)})},mJ=function(a){a!==hJ&&(a?$d(window).on("resize scroll",lJ):$d(window).off("resize scroll",lJ),hJ=a)},nJ=function(a){var b=jJ;delete iJ[a.id];for(var c=0;c<iJ.length;c++)if(iJ[c]===a){iJ.splice(c,1);break}return jJ=sb.filter(jJ,function(b){return a!==b}),JI.activeEditor===a&&(JI.activeEditor=jJ.length>0?jJ[0]:null),JI.focusedEditor===a&&(JI.focusedEditor=null),b.length!==jJ.length},oJ=function(a){return a&&a.initialized&&!(a.getContainer()||a.getBody()).parentNode&&(nJ(a),a.unbindAllNativeEvents(),a.destroy(!0),a.removed=!0,a=null),a};JI={defaultSettings:{},$:$d,majorVersion:"4",minorVersion:"7.12",releaseDate:"2018-05-03",editors:iJ,i18n:bJ,activeEditor:null,settings:{},setup:function(){var a,b,c,d,e=this,f="";if(b=fI.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(b)&&(b=b.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(b)||(b+="/")),c=window.tinymce||window.tinyMCEPreInit)a=c.base||c.baseURL,f=c.suffix;else{for(var g=document.getElementsByTagName("script"),h=0;h<g.length;h++){d=g[h].src;var i=d.substring(d.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(d)){-1!==i.indexOf(".min")&&(f=".min"),a=d.substring(0,d.lastIndexOf("/"));break}}!a&&document.currentScript&&(d=document.currentScript.src,-1!==d.indexOf(".min")&&(f=".min"),a=d.substring(0,d.lastIndexOf("/")))}e.baseURL=new fI(b).toAbsolute(a),e.documentBaseURL=b,e.baseURI=new fI(e.baseURL),e.suffix=f,$I.setup(e)},overrideDefaults:function(a){var b,c;b=a.base_url,b&&(this.baseURL=new fI(this.documentBaseURL).toAbsolute(b.replace(/\/+$/,"")),this.baseURI=new fI(this.baseURL)),c=a.suffix,a.suffix&&(this.suffix=c),this.defaultSettings=a;var d=a.plugin_base_urls;for(var e in d)z.PluginManager.urls[e]=d[e]},init:function(a){var b,c,d=this;c=Gd.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var e=function(a,b){return a.inline&&b.tagName.toLowerCase()in c},f=function(a){var b=a.id;return b||(b=a.name,b=b&&!cJ.get(b)?a.name:cJ.uniqueId(),a.setAttribute("id",b)),b},g=function(b){var c=a[b];if(c)return c.apply(d,Array.prototype.slice.call(arguments,2))},h=function(a,b){return b.constructor===RegExp?b.test(a.className):cJ.hasClass(a,b)},i=function(a){var b,c=[];if(Mb.ie&&Mb.ie<11)return oy.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(a.types)return eJ(a.types,function(a){c=c.concat(cJ.select(a.selector))}),c;if(a.selector)return cJ.select(a.selector);if(a.target)return[a.target];switch(a.mode){case"exact":b=a.elements||"",b.length>0&&eJ(dJ(b),function(a){var b;(b=cJ.get(a))?c.push(b):eJ(document.forms,function(b){eJ(b.elements,function(b){b.name===a&&(a="mce_editor_"+gJ++,cJ.setAttrib(b,"id",a),c.push(b))})})});break;case"textareas":case"specific_textareas":eJ(cJ.select("textarea"),function(b){a.editor_deselector&&h(b,a.editor_deselector)||a.editor_selector&&!h(b,a.editor_selector)||c.push(b)})}return c},j=function(a){b=a},k=function(){var b,c=0,h=[],l=function(a,e,f){var g=new GI(a,e,d);h.push(g),g.on("init",function(){++c===b.length&&j(h)}),g.targetElm=g.targetElm||f,g.render()};if(cJ.unbind(window,"ready",k),g("onpageload"),b=$d.unique(i(a)),a.types)return void eJ(a.types,function(c){Gd.each(b,function(b){return!cJ.is(b,c.selector)||(l(f(b),fJ({},a,c),b),!1)})});Gd.each(b,function(a){oJ(d.get(a.id))}),b=Gd.grep(b,function(a){return!d.get(a.id)}),0===b.length?j([]):eJ(b,function(b){e(a,b)?oy.initError("Could not initialize inline editor on invalid inline target element",b):l(f(b),a,b)})};return d.settings=a,cJ.bind(window,"ready",k),new Ob(function(a){b?a(b):j=function(b){a(b)}})},get:function(a){return 0===arguments.length?jJ.slice(0):Oa.isString(a)?sb.find(jJ,function(b){return b.id===a}).getOr(null):Oa.isNumber(a)&&jJ[a]?jJ[a]:null},add:function(a){var b=this;return iJ[a.id]===a?a:(null===b.get(a.id)&&(kJ(a.id)&&(iJ[a.id]=a),iJ.push(a),jJ.push(a)),mJ(!0),b.activeEditor=a,b.fire("AddEditor",{editor:a}),II||(II=function(){b.fire("BeforeUnload")},cJ.bind(window,"beforeunload",II)),a)},createEditor:function(a,b){return this.add(new GI(a,b,this))},remove:function(a){var b,c,d=this;if(a)return Oa.isString(a)?(a=a.selector||a,void eJ(cJ.select(a),function(a){(c=d.get(a.id))&&d.remove(c)})):(c=a,Oa.isNull(d.get(c.id))?null:(nJ(c)&&d.fire("RemoveEditor",{editor:c}),0===jJ.length&&cJ.unbind(window,"beforeunload",II),c.remove(),mJ(jJ.length>0),c));for(b=jJ.length-1;b>=0;b--)d.remove(jJ[b])},execCommand:function(a,b,c){var d=this,e=d.get(c);switch(a){case"mceAddEditor":return d.get(c)||new GI(c,d.settings,d).render(),!0;case"mceRemoveEditor":return e&&e.remove(),!0;case"mceToggleEditor":return e?(e.isHidden()?e.show():e.hide(),!0):(d.execCommand("mceAddEditor",0,c),!0)}return!!d.activeEditor&&d.activeEditor.execCommand(a,b,c)},triggerSave:function(){eJ(jJ,function(a){a.save()})},addI18n:function(a,b){bJ.add(a,b)},translate:function(a){return bJ.translate(a)},setActive:function(a){var b=this.activeEditor;this.activeEditor!==a&&(b&&b.fire("deactivate",{relatedTarget:a}),a.fire("activate",{relatedTarget:b})),this.activeEditor=a}},fJ(JI,Fw),JI.setup();var pJ=JI;!function(a){a.compareRanges=vv.isEq,a.getCaretRangeFromPoint=dE.fromPoint,a.getSelectedNode=qk,a.getNode=rk}(da||(da={}));var qJ,rJ,sJ=da,tJ=Math.min,uJ=Math.max,vJ=Math.round,wJ=function(a,b,c){var d,e,f,g,h,i;return d=b.x,e=b.y,f=a.w,g=a.h,h=b.w,i=b.h,c=(c||"").split(""),"b"===c[0]&&(e+=i),"r"===c[1]&&(d+=h),"c"===c[0]&&(e+=vJ(i/2)),"c"===c[1]&&(d+=vJ(h/2)),"b"===c[3]&&(e-=g),"r"===c[4]&&(d-=f),"c"===c[3]&&(e-=vJ(g/2)),"c"===c[4]&&(d-=vJ(f/2)),BJ(d,e,f,g)},xJ=function(a,b,c,d){var e,f;for(f=0;f<d.length;f++)if(e=wJ(a,b,d[f]),e.x>=c.x&&e.x+e.w<=c.w+c.x&&e.y>=c.y&&e.y+e.h<=c.h+c.y)return d[f];return null},yJ=function(a,b,c){return BJ(a.x-b,a.y-c,a.w+2*b,a.h+2*c)},zJ=function(a,b){var c,d,e,f;return c=uJ(a.x,b.x),d=uJ(a.y,b.y),e=tJ(a.x+a.w,b.x+b.w),f=tJ(a.y+a.h,b.y+b.h),e-c<0||f-d<0?null:BJ(c,d,e-c,f-d)},AJ=function(a,b,c){var d,e,f,g,h,i,j,k,l,m;return h=a.x,i=a.y,j=a.x+a.w,k=a.y+a.h,l=b.x+b.w,m=b.y+b.h,d=uJ(0,b.x-h),e=uJ(0,b.y-i),f=uJ(0,j-l),g=uJ(0,k-m),h+=d,i+=e,c&&(j+=d,k+=e,h-=f,i-=g),j-=f,k-=g,BJ(h,i,j-h,k-i)},BJ=function(a,b,c,d){return{x:a,y:b,w:c,h:d}},CJ=function(a){return BJ(a.left,a.top,a.width,a.height)},DJ={inflate:yJ,relativePosition:wJ,findBestRelativePosition:xJ,intersect:zJ,clamp:AJ,create:BJ,fromClientRect:CJ},EJ={},FJ={add:function(a,b){EJ[a.toLowerCase()]=b},has:function(a){return!!EJ[a.toLowerCase()]},get:function(a){var b=a.toLowerCase(),c=EJ.hasOwnProperty(b)?EJ[b]:null;if(null===c)throw new Error("Could not find module for type: "+a);return c},create:function(a,b){var c;if("string"==typeof a?(b=b||{},b.type=a):(b=a,a=b.type),a=a.toLowerCase(),!(c=EJ[a]))throw new Error("Could not find control by type: "+a);return c=new c(b),c.type=a,c}},GJ=Gd.each,HJ=Gd.extend,IJ=function(){};IJ.extend=qJ=function(a){var b,c,d,e=this,f=e.prototype,g=function(){var a,b,c,d=this;if(!rJ&&(d.init&&d.init.apply(d,arguments),b=d.Mixins))for(a=b.length;a--;)c=b[a],c.init&&c.init.apply(d,arguments)},h=function(){return this},i=function(a,b){return function(){var c,d=this,e=d._super;return d._super=f[a],c=b.apply(d,arguments),d._super=e,c}};rJ=!0,b=new e,rJ=!1,a.Mixins&&(GJ(a.Mixins,function(b){for(var c in b)"init"!==c&&(a[c]=b[c])}),f.Mixins&&(a.Mixins=f.Mixins.concat(a.Mixins))),a.Methods&&GJ(a.Methods.split(","),function(b){a[b]=h}),a.Properties&&GJ(a.Properties.split(","),function(b){var c="_"+b;a[b]=function(a){var b=this;return void 0!==a?(b[c]=a,b):b[c]}}),a.Statics&&GJ(a.Statics,function(a,b){g[b]=a}),a.Defaults&&f.Defaults&&(a.Defaults=HJ({},f.Defaults,a.Defaults));for(c in a)d=a[c],"function"==typeof d&&f[c]?b[c]=i(c,d):b[c]=d;return g.prototype=b,g.constructor=g,g.extend=qJ,g};var JJ=Math.min,KJ=Math.max,LJ=Math.round,MJ=function(a){var b={},c=0,d=0,e=0,f=function(a,b,c){var d,e,f,g,h,i;return d=0,e=0,f=0,a/=255,b/=255,c/=255,h=JJ(a,JJ(b,c)),i=KJ(a,KJ(b,c)),h===i?(f=h,{h:0,s:0,v:100*f}):(g=a===h?b-c:c===h?a-b:c-a,d=a===h?3:c===h?1:5,d=60*(d-g/(i-h)),e=(i-h)/i,f=i,{h:LJ(d),s:LJ(100*e),v:LJ(100*f)})},g=function(a,b,f){var g,h,i,j;if(a=(parseInt(a,10)||0)%360,b=parseInt(b,10)/100,f=parseInt(f,10)/100,b=KJ(0,JJ(b,1)),f=KJ(0,JJ(f,1)),0===b)return void(c=d=e=LJ(255*f));switch(g=a/60,h=f*b,i=h*(1-Math.abs(g%2-1)),j=f-h,Math.floor(g)){case 0:c=h,d=i,e=0;break;case 1:c=i,d=h,e=0;break;case 2:c=0,d=h,e=i;break;case 3:c=0,d=i,e=h;break;case 4:c=i,d=0,e=h;break;case 5:c=h,d=0,e=i;break;default:c=d=e=0}c=LJ(255*(c+j)),d=LJ(255*(d+j)),e=LJ(255*(e+j))},h=function(){var a=function(a){return a=parseInt(a,10).toString(16),a.length>1?a:"0"+a};return"#"+a(c)+a(d)+a(e)},i=function(){return{r:c,g:d,b:e}},j=function(){return f(c,d,e)},k=function(a){var f;return"object"==typeof a?"r"in a?(c=a.r,d=a.g,e=a.b):"v"in a&&g(a.h,a.s,a.v):(f=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(a))?(c=parseInt(f[1],10),d=parseInt(f[2],10),e=parseInt(f[3],10)):(f=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(a))?(c=parseInt(f[1],16),d=parseInt(f[2],16),e=parseInt(f[3],16)):(f=/#([0-F])([0-F])([0-F])/gi.exec(a))&&(c=parseInt(f[1]+f[1],16),d=parseInt(f[2]+f[2],16),e=parseInt(f[3]+f[3],16)),c=c<0?0:c>255?255:c,d=d<0?0:d>255?255:d,e=e<0?0:e>255?255:e,b};return a&&k(a),b.toRgb=i,b.toHsv=j,b.toHex=h,b.parse=k,b},NJ=function(a,b){var c,d,e,f;if(b=b||'"',null===a)return"null";if("string"===(e=typeof a))return d="\bb\tt\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return'"'===b&&"'"===a?a:(c=d.indexOf(e))+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a)})+b;if("object"===e){if(a.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(a)){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+NJ(a[c],b);return d+"]"}d="{";for(f in a)a.hasOwnProperty(f)&&(d+="function"!=typeof a[f]?(d.length>1?","+b:b)+f+b+":"+NJ(a[f],b):"");return d+"}"}return""+a},OJ={serialize:NJ,parse:function(a){try{return JSON.parse(a)}catch(a){}}},PJ={callbacks:{},count:0,send:function(a){var b=this,c=rj.DOM,d=void 0!==a.count?a.count:b.count,e="tinymce_jsonp_"+d;b.callbacks[d]=function(f){c.remove(e),delete b.callbacks[d],a.callback(f)},c.add(c.doc.body,"script",{id:e,src:a.url,type:"text/javascript"}),b.count++}},QJ={send:function(a){var b,c=0,d=function(){!a.async||4===b.readyState||c++>1e4?(a.success&&c<1e4&&200===b.status?a.success.call(a.success_scope,""+b.responseText,b,a):a.error&&a.error.call(a.error_scope,c>1e4?"TIMED_OUT":"GENERAL",b,a),b=null):setTimeout(d,10)};if(a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=!1!==a.async,a.data=a.data||"",QJ.fire("beforeInitialize",{settings:a}),b=new M){if(b.overrideMimeType&&b.overrideMimeType(a.content_type),b.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.crossDomain&&(b.withCredentials=!0),a.content_type&&b.setRequestHeader("Content-Type",a.content_type),a.requestheaders&&Gd.each(a.requestheaders,function(a){b.setRequestHeader(a.key,a.value)}),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b=QJ.fire("beforeSend",{xhr:b,settings:a}).xhr,b.send(a.data),!a.async)return d();setTimeout(d,10)}}};Gd.extend(QJ,Fw);var RJ=Gd.extend,SJ=function(a){this.settings=RJ({},a),this.count=0};SJ.sendRPC=function(a){return(new SJ).send(a)},SJ.prototype={send:function(a){var b=a.error,c=a.success;a=RJ(this.settings,a),a.success=function(d,e){d=OJ.parse(d),void 0===d&&(d={error:"JSON Parse error."}),d.error?b.call(a.error_scope||a.scope,d.error,e):c.call(a.success_scope||a.scope,d.result)},a.error=function(c,d){b&&b.call(a.error_scope||a.scope,c,d)},a.data=OJ.serialize({id:a.id||"c"+this.count++,method:a.method,params:a.params}),a.content_type="application/json",QJ.send(a)}};var TJ=window.localStorage,UJ=pJ,VJ={geom:{Rect:DJ},util:{Promise:Ob,Delay:Vb,Tools:Gd,VK:Vz,URI:fI,Class:IJ,EventDispatcher:Cw,Observable:Fw,I18n:bJ,XHR:QJ,JSON:OJ,JSONRequest:SJ,JSONP:PJ,LocalStorage:TJ,Color:MJ},dom:{EventUtils:fc,Sizzle:id,DomQuery:$d,TreeWalker:v,DOMUtils:rj,ScriptLoader:wj,RangeUtils:sJ,Serializer:aa,ControlSelection:ZD,BookmarkManager:VD,Selection:lF,Event:fc.Event},html:{Styles:x,Entities:Zi,Node:DD,Schema:w,SaxParser:eA,DomParser:$,Writer:C,Serializer:D},ui:{Factory:FJ},Env:Mb,AddOnManager:z,Formatter:Z,UndoManager:X,EditorCommands:F,WindowManager:L,NotificationManager:J,EditorObservable:px,Shortcuts:H,Editor:GI,FocusManager:LI,EditorManager:pJ,DOM:rj.DOM,ScriptLoader:wj.ScriptLoader,PluginManager:z.PluginManager,ThemeManager:z.ThemeManager,trim:Gd.trim,isArray:Gd.isArray,is:Gd.is,toArray:Gd.toArray,makeMap:Gd.makeMap,each:Gd.each,map:Gd.map,grep:Gd.grep,inArray:Gd.inArray,extend:Gd.extend,create:Gd.create,walk:Gd.walk,createNS:Gd.createNS,resolve:Gd.resolve,explode:Gd.explode,_addCacheSuffix:Gd._addCacheSuffix,isOpera:Mb.opera,isWebKit:Mb.webkit,isIE:Mb.ie,isGecko:Mb.gecko,isMac:Mb.mac};UJ=Gd.extend(UJ,VJ);var WJ=UJ,XJ=function(a){if("object"==typeof c)try{c.exports=a}catch(a){}};(function(a){window.tinymce=a,window.tinyMCE=a})(WJ),XJ(WJ)}()}()}(a("process"))}),System.registerDynamic("npm:tinymce@4.7.12.js",["npm:tinymce@4.7.12/tinymce.js"],!0,function(a,b,c){this||self;c.exports=a("npm:tinymce@4.7.12/tinymce.js")}),function(a){if("undefined"!=typeof document){var b=document,c="appendChild",d=b.createElement("style");d.type="text/css",b.getElementsByTagName("head")[0][c](d),d[c](b.createTextNode(a))}}("#nprogress{pointer-events:none}#nprogress .bar{background:#29d;position:fixed;z-index:1031;top:0;left:0;width:100%;height:2px}#nprogress .peg{display:block;position:absolute;right:0;width:100px;height:100%;box-shadow:0 0 10px #29d,0 0 5px #29d;opacity:1;-webkit-transform:rotate(3deg) translateY(-4px);transform:rotate(3deg) translateY(-4px)}#nprogress .spinner{display:block;position:fixed;z-index:1031;top:15px;right:15px}#nprogress .spinner-icon{width:18px;height:18px;box-sizing:border-box;border:2px solid transparent;border-top-color:#29d;border-left-color:#29d;border-radius:50%;-webkit-animation:nprogress-spinner .4s linear infinite;animation:nprogress-spinner .4s linear infinite}.nprogress-custom-parent{overflow:hidden;position:relative}.nprogress-custom-parent #nprogress .bar,.nprogress-custom-parent #nprogress .spinner{position:absolute}@-webkit-keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}\n/*# sourceMappingURL=__.css.map */");